(self.webpackChunkchipsmmo_map_editor=self.webpackChunkchipsmmo_map_editor||[]).push([[179],{659:(mt,xe,ne)=>{"use strict";function se(n){return"function"==typeof n}function Tt(n){const t=n(r=>{Error.call(r),r.stack=(new Error).stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}const tt=Tt(n=>function(t){n(this),this.message=t?`${t.length} errors occurred during unsubscription:\n${t.map((r,i)=>`${i+1}) ${r.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=t});function De(n,e){if(n){const t=n.indexOf(e);0<=t&&n.splice(t,1)}}class ae{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;const{_parentage:t}=this;if(t)if(this._parentage=null,Array.isArray(t))for(const o of t)o.remove(this);else t.remove(this);const{initialTeardown:r}=this;if(se(r))try{r()}catch(o){e=o instanceof tt?o.errors:[o]}const{_finalizers:i}=this;if(i){this._finalizers=null;for(const o of i)try{te(o)}catch(s){e=null!=e?e:[],s instanceof tt?e=[...e,...s.errors]:e.push(s)}}if(e)throw new tt(e)}}add(e){var t;if(e&&e!==this)if(this.closed)te(e);else{if(e instanceof ae){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=null!==(t=this._finalizers)&&void 0!==t?t:[]).push(e)}}_hasParent(e){const{_parentage:t}=this;return t===e||Array.isArray(t)&&t.includes(e)}_addParent(e){const{_parentage:t}=this;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e}_removeParent(e){const{_parentage:t}=this;t===e?this._parentage=null:Array.isArray(t)&&De(t,e)}remove(e){const{_finalizers:t}=this;t&&De(t,e),e instanceof ae&&e._removeParent(this)}}ae.EMPTY=(()=>{const n=new ae;return n.closed=!0,n})();const _e=ae.EMPTY;function le(n){return n instanceof ae||n&&"closed"in n&&se(n.remove)&&se(n.add)&&se(n.unsubscribe)}function te(n){se(n)?n():n.unsubscribe()}const re={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},Be={setTimeout(n,e,...t){const{delegate:r}=Be;return null!=r&&r.setTimeout?r.setTimeout(n,e,...t):setTimeout(n,e,...t)},clearTimeout(n){const{delegate:e}=Be;return((null==e?void 0:e.clearTimeout)||clearTimeout)(n)},delegate:void 0};function Ge(n){Be.setTimeout(()=>{const{onUnhandledError:e}=re;if(!e)throw n;e(n)})}function He(){}const gt=kt("C",void 0,void 0);function kt(n,e,t){return{kind:n,value:e,error:t}}let je=null;function ke(n){if(re.useDeprecatedSynchronousErrorHandling){const e=!je;if(e&&(je={errorThrown:!1,error:null}),n(),e){const{errorThrown:t,error:r}=je;if(je=null,t)throw r}}else n()}class bn extends ae{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,le(e)&&e.add(this)):this.destination=ct}static create(e,t,r){return new I(e,t,r)}next(e){this.isStopped?Ct(function _n(n){return kt("N",n,void 0)}(e),this):this._next(e)}error(e){this.isStopped?Ct(function me(n){return kt("E",void 0,n)}(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?Ct(gt,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const rn=Function.prototype.bind;function Tn(n,e){return rn.call(n,e)}class rs{constructor(e){this.partialObserver=e}next(e){const{partialObserver:t}=this;if(t.next)try{t.next(e)}catch(r){Ue(r)}}error(e){const{partialObserver:t}=this;if(t.error)try{t.error(e)}catch(r){Ue(r)}else Ue(e)}complete(){const{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(t){Ue(t)}}}class I extends bn{constructor(e,t,r){let i;if(super(),se(e)||!e)i={next:null!=e?e:void 0,error:null!=t?t:void 0,complete:null!=r?r:void 0};else{let o;this&&re.useDeprecatedNextContext?(o=Object.create(e),o.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&Tn(e.next,o),error:e.error&&Tn(e.error,o),complete:e.complete&&Tn(e.complete,o)}):i=e}this.destination=new rs(i)}}function Ue(n){re.useDeprecatedSynchronousErrorHandling?function dn(n){re.useDeprecatedSynchronousErrorHandling&&je&&(je.errorThrown=!0,je.error=n)}(n):Ge(n)}function Ct(n,e){const{onStoppedNotification:t}=re;t&&Be.setTimeout(()=>t(n,e))}const ct={closed:!0,next:He,error:function R(n){throw n},complete:He},Zt="function"==typeof Symbol&&Symbol.observable||"@@observable";function vt(n){return n}let E=(()=>{class n{constructor(t){t&&(this._subscribe=t)}lift(t){const r=new n;return r.source=this,r.operator=t,r}subscribe(t,r,i){const o=function D(n){return n&&n instanceof bn||function x(n){return n&&se(n.next)&&se(n.error)&&se(n.complete)}(n)&&le(n)}(t)?t:new I(t,r,i);return ke(()=>{const{operator:s,source:a}=this;o.add(s?s.call(o,a):a?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(t){try{return this._subscribe(t)}catch(r){t.error(r)}}forEach(t,r){return new(r=P(r))((i,o)=>{const s=new I({next:a=>{try{t(a)}catch(l){o(l),s.unsubscribe()}},error:o,complete:i});this.subscribe(s)})}_subscribe(t){var r;return null===(r=this.source)||void 0===r?void 0:r.subscribe(t)}[Zt](){return this}pipe(...t){return function C(n){return 0===n.length?vt:1===n.length?n[0]:function(t){return n.reduce((r,i)=>i(r),t)}}(t)(this)}toPromise(t){return new(t=P(t))((r,i)=>{let o;this.subscribe(s=>o=s,s=>i(s),()=>r(o))})}}return n.create=e=>new n(e),n})();function P(n){var e;return null!==(e=null!=n?n:re.Promise)&&void 0!==e?e:Promise}const w=Tt(n=>function(){n(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});let O=(()=>{class n extends E{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(t){const r=new ie(this,this);return r.operator=t,r}_throwIfClosed(){if(this.closed)throw new w}next(t){ke(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const r of this.currentObservers)r.next(t)}})}error(t){ke(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=t;const{observers:r}=this;for(;r.length;)r.shift().error(t)}})}complete(){ke(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:t}=this;for(;t.length;)t.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var t;return(null===(t=this.observers)||void 0===t?void 0:t.length)>0}_trySubscribe(t){return this._throwIfClosed(),super._trySubscribe(t)}_subscribe(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)}_innerSubscribe(t){const{hasError:r,isStopped:i,observers:o}=this;return r||i?_e:(this.currentObservers=null,o.push(t),new ae(()=>{this.currentObservers=null,De(o,t)}))}_checkFinalizedStatuses(t){const{hasError:r,thrownError:i,isStopped:o}=this;r?t.error(i):o&&t.complete()}asObservable(){const t=new E;return t.source=this,t}}return n.create=(e,t)=>new ie(e,t),n})();class ie extends O{constructor(e,t){super(),this.destination=e,this.source=t}next(e){var t,r;null===(r=null===(t=this.destination)||void 0===t?void 0:t.next)||void 0===r||r.call(t,e)}error(e){var t,r;null===(r=null===(t=this.destination)||void 0===t?void 0:t.error)||void 0===r||r.call(t,e)}complete(){var e,t;null===(t=null===(e=this.destination)||void 0===e?void 0:e.complete)||void 0===t||t.call(e)}_subscribe(e){var t,r;return null!==(r=null===(t=this.source)||void 0===t?void 0:t.subscribe(e))&&void 0!==r?r:_e}}function ve(n){return e=>{if(function ee(n){return se(null==n?void 0:n.lift)}(e))return e.lift(function(t){try{return n(t,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function V(n,e,t,r,i){return new fe(n,e,t,r,i)}class fe extends bn{constructor(e,t,r,i,o,s){super(e),this.onFinalize=o,this.shouldUnsubscribe=s,this._next=t?function(a){try{t(a)}catch(l){e.error(l)}}:super._next,this._error=i?function(a){try{i(a)}catch(l){e.error(l)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:t}=this;super.unsubscribe(),!t&&(null===(e=this.onFinalize)||void 0===e||e.call(this))}}}function $(n,e){return ve((t,r)=>{let i=0;t.subscribe(V(r,o=>{r.next(n.call(e,o,i++))}))})}function ji(n,e,t,r){return new(t||(t=Promise))(function(o,s){function a(c){try{u(r.next(c))}catch(d){s(d)}}function l(c){try{u(r.throw(c))}catch(d){s(d)}}function u(c){c.done?o(c.value):function i(o){return o instanceof t?o:new t(function(s){s(o)})}(c.value).then(a,l)}u((r=r.apply(n,e||[])).next())})}function vo(n){return this instanceof vo?(this.v=n,this):new vo(n)}function oR(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i,r=t.apply(n,e||[]),o=[];return i={},s("next"),s("throw"),s("return"),i[Symbol.asyncIterator]=function(){return this},i;function s(h){r[h]&&(i[h]=function(f){return new Promise(function(p,_){o.push([h,f,p,_])>1||a(h,f)})})}function a(h,f){try{!function l(h){h.value instanceof vo?Promise.resolve(h.value.v).then(u,c):d(o[0][2],h)}(r[h](f))}catch(p){d(o[0][3],p)}}function u(h){a("next",h)}function c(h){a("throw",h)}function d(h,f){h(f),o.shift(),o.length&&a(o[0][0],o[0][1])}}function sR(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,e=n[Symbol.asyncIterator];return e?e.call(n):(n=function go(n){var e="function"==typeof Symbol&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&"number"==typeof n.length)return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}(n),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(o){t[o]=n[o]&&function(s){return new Promise(function(a,l){!function i(o,s,a,l){Promise.resolve(l).then(function(u){o({value:u,done:a})},s)}(a,l,(s=n[o](s)).done,s.value)})}}}const Uv=n=>n&&"number"==typeof n.length&&"function"!=typeof n;function Vv(n){return se(null==n?void 0:n.then)}function Gv(n){return se(n[Zt])}function Hv(n){return Symbol.asyncIterator&&se(null==n?void 0:n[Symbol.asyncIterator])}function jv(n){return new TypeError(`You provided ${null!==n&&"object"==typeof n?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}const Yv=function lR(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}();function zv(n){return se(null==n?void 0:n[Yv])}function Wv(n){return oR(this,arguments,function*(){const t=n.getReader();try{for(;;){const{value:r,done:i}=yield vo(t.read());if(i)return yield vo(void 0);yield yield vo(r)}}finally{t.releaseLock()}})}function Xv(n){return se(null==n?void 0:n.getReader)}function Sr(n){if(n instanceof E)return n;if(null!=n){if(Gv(n))return function uR(n){return new E(e=>{const t=n[Zt]();if(se(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(n);if(Uv(n))return function cR(n){return new E(e=>{for(let t=0;t<n.length&&!e.closed;t++)e.next(n[t]);e.complete()})}(n);if(Vv(n))return function dR(n){return new E(e=>{n.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,Ge)})}(n);if(Hv(n))return $v(n);if(zv(n))return function hR(n){return new E(e=>{for(const t of n)if(e.next(t),e.closed)return;e.complete()})}(n);if(Xv(n))return function fR(n){return $v(Wv(n))}(n)}throw jv(n)}function $v(n){return new E(e=>{(function pR(n,e){var t,r,i,o;return ji(this,void 0,void 0,function*(){try{for(t=sR(n);!(r=yield t.next()).done;)if(e.next(r.value),e.closed)return}catch(s){i={error:s}}finally{try{r&&!r.done&&(o=t.return)&&(yield o.call(t))}finally{if(i)throw i.error}}e.complete()})})(n,e).catch(t=>e.error(t))})}function mi(n,e,t,r=0,i=!1){const o=e.schedule(function(){t(),i?n.add(this.schedule(null,r)):this.unsubscribe()},r);if(n.add(o),!i)return o}function du(n,e,t=1/0){return se(e)?du((r,i)=>$((o,s)=>e(r,o,i,s))(Sr(n(r,i))),t):("number"==typeof e&&(t=e),ve((r,i)=>function _R(n,e,t,r,i,o,s,a){const l=[];let u=0,c=0,d=!1;const h=()=>{d&&!l.length&&!u&&e.complete()},f=_=>u<r?p(_):l.push(_),p=_=>{o&&e.next(_),u++;let m=!1;Sr(t(_,c++)).subscribe(V(e,g=>{null==i||i(g),o?f(g):e.next(g)},()=>{m=!0},void 0,()=>{if(m)try{for(u--;l.length&&u<r;){const g=l.shift();s?mi(e,s,()=>p(g)):p(g)}h()}catch(g){e.error(g)}}))};return n.subscribe(V(e,f,()=>{d=!0,h()})),()=>{null==a||a()}}(r,i,n,t)))}function qv(n=1/0){return du(vt,n)}const Rh=new E(n=>n.complete());function Kv(n){return n&&se(n.schedule)}function Ih(n){return n[n.length-1]}function Qv(n){return se(Ih(n))?n.pop():void 0}function Aa(n){return Kv(Ih(n))?n.pop():void 0}function Zv(n,e=0){return ve((t,r)=>{t.subscribe(V(r,i=>mi(r,n,()=>r.next(i),e),()=>mi(r,n,()=>r.complete(),e),i=>mi(r,n,()=>r.error(i),e)))})}function Jv(n,e=0){return ve((t,r)=>{r.add(n.schedule(()=>t.subscribe(r),e))})}function ey(n,e){if(!n)throw new Error("Iterable cannot be null");return new E(t=>{mi(t,e,()=>{const r=n[Symbol.asyncIterator]();mi(t,e,()=>{r.next().then(i=>{i.done?t.complete():t.next(i.value)})},0,!0)})})}function yo(n,e){return e?function DR(n,e){if(null!=n){if(Gv(n))return function vR(n,e){return Sr(n).pipe(Jv(e),Zv(e))}(n,e);if(Uv(n))return function ER(n,e){return new E(t=>{let r=0;return e.schedule(function(){r===n.length?t.complete():(t.next(n[r++]),t.closed||this.schedule())})})}(n,e);if(Vv(n))return function yR(n,e){return Sr(n).pipe(Jv(e),Zv(e))}(n,e);if(Hv(n))return ey(n,e);if(zv(n))return function bR(n,e){return new E(t=>{let r;return mi(t,e,()=>{r=n[Yv](),mi(t,e,()=>{let i,o;try{({value:i,done:o}=r.next())}catch(s){return void t.error(s)}o?t.complete():t.next(i)},0,!0)}),()=>se(null==r?void 0:r.return)&&r.return()})}(n,e);if(Xv(n))return function TR(n,e){return ey(Wv(n),e)}(n,e)}throw jv(n)}(n,e):Sr(n)}function Oh(...n){const e=Aa(n),t=function gR(n,e){return"number"==typeof Ih(n)?n.pop():e}(n,1/0),r=n;return r.length?1===r.length?Sr(r[0]):qv(t)(yo(r,e)):Rh}function wa(n){return n<=0?()=>Rh:ve((e,t)=>{let r=0;e.subscribe(V(t,i=>{++r<=n&&(t.next(i),n<=r&&t.complete())}))})}function ty(n={}){const{connector:e=(()=>new O),resetOnError:t=!0,resetOnComplete:r=!0,resetOnRefCountZero:i=!0}=n;return o=>{let s=null,a=null,l=null,u=0,c=!1,d=!1;const h=()=>{null==a||a.unsubscribe(),a=null},f=()=>{h(),s=l=null,c=d=!1},p=()=>{const _=s;f(),null==_||_.unsubscribe()};return ve((_,m)=>{u++,!d&&!c&&h();const g=l=null!=l?l:e();m.add(()=>{u--,0===u&&!d&&!c&&(a=Ph(p,i))}),g.subscribe(m),s||(s=new I({next:b=>g.next(b),error:b=>{d=!0,h(),a=Ph(f,t,b),g.error(b)},complete:()=>{c=!0,h(),a=Ph(f,r),g.complete()}}),yo(_).subscribe(s))})(o)}}function Ph(n,e,...t){return!0===e?(n(),null):!1===e?null:e(...t).pipe(wa(1)).subscribe(()=>n())}function dt(n){for(let e in n)if(n[e]===dt)return e;throw Error("Could not find renamed property on target object.")}function Nh(n,e){for(const t in e)e.hasOwnProperty(t)&&!n.hasOwnProperty(t)&&(n[t]=e[t])}function ht(n){if("string"==typeof n)return n;if(Array.isArray(n))return"["+n.map(ht).join(", ")+"]";if(null==n)return""+n;if(n.overriddenName)return`${n.overriddenName}`;if(n.name)return`${n.name}`;const e=n.toString();if(null==e)return""+e;const t=e.indexOf("\n");return-1===t?e:e.substring(0,t)}function Fh(n,e){return null==n||""===n?null===e?"":e:null==e||""===e?n:n+" "+e}const SR=dt({__forward_ref__:dt});function nt(n){return n.__forward_ref__=nt,n.toString=function(){return ht(this())},n}function Se(n){return Lh(n)?n():n}function Lh(n){return"function"==typeof n&&n.hasOwnProperty(SR)&&n.__forward_ref__===nt}class z extends Error{constructor(e,t){super(function hu(n,e){return`NG0${Math.abs(n)}${e?": "+e.trim():""}`}(e,t)),this.code=e}}function Re(n){return"string"==typeof n?n:null==n?"":String(n)}function fu(n,e){throw new z(-201,!1)}function $n(n,e){null==n&&function Ze(n,e,t,r){throw new Error(`ASSERTION ERROR: ${n}`+(null==r?"":` [Expected=> ${t} ${r} ${e} <=Actual]`))}(e,n,null,"!=")}function Ce(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function Dt(n){return{providers:n.providers||[],imports:n.imports||[]}}function Bh(n){return ny(n,pu)||ny(n,iy)}function ny(n,e){return n.hasOwnProperty(e)?n[e]:null}function ry(n){return n&&(n.hasOwnProperty(kh)||n.hasOwnProperty(OR))?n[kh]:null}const pu=dt({\u0275prov:dt}),kh=dt({\u0275inj:dt}),iy=dt({ngInjectableDef:dt}),OR=dt({ngInjectorDef:dt});var Me=(()=>((Me=Me||{})[Me.Default=0]="Default",Me[Me.Host=1]="Host",Me[Me.Self=2]="Self",Me[Me.SkipSelf=4]="SkipSelf",Me[Me.Optional=8]="Optional",Me))();let Uh;function Yr(n){const e=Uh;return Uh=n,e}function oy(n,e,t){const r=Bh(n);return r&&"root"==r.providedIn?void 0===r.value?r.value=r.factory():r.value:t&Me.Optional?null:void 0!==e?e:void fu(ht(n))}function Yi(n){return{toString:n}.toString()}var Mr=(()=>((Mr=Mr||{})[Mr.OnPush=0]="OnPush",Mr[Mr.Default=1]="Default",Mr))(),Cr=(()=>{return(n=Cr||(Cr={}))[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",Cr;var n})();const st=(()=>"undefined"!=typeof globalThis&&globalThis||"undefined"!=typeof global&&global||"undefined"!=typeof window&&window||"undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self)(),ss={},qe=[],_u=dt({\u0275cmp:dt}),Vh=dt({\u0275dir:dt}),Gh=dt({\u0275pipe:dt}),sy=dt({\u0275mod:dt}),vi=dt({\u0275fac:dt}),xa=dt({__NG_ELEMENT_ID__:dt});let NR=0;function Eo(n){return Yi(()=>{const t=!0===n.standalone,r={},i={type:n.type,providersResolver:null,decls:n.decls,vars:n.vars,factory:null,template:n.template||null,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:r,inputs:null,outputs:null,exportAs:n.exportAs||null,onPush:n.changeDetection===Mr.OnPush,directiveDefs:null,pipeDefs:null,standalone:t,dependencies:t&&n.dependencies||null,getStandaloneInjector:null,selectors:n.selectors||qe,viewQuery:n.viewQuery||null,features:n.features||null,data:n.data||{},encapsulation:n.encapsulation||Cr.Emulated,id:"c"+NR++,styles:n.styles||qe,_:null,setInput:null,schemas:n.schemas||null,tView:null},o=n.dependencies,s=n.features;return i.inputs=uy(n.inputs,r),i.outputs=uy(n.outputs),s&&s.forEach(a=>a(i)),i.directiveDefs=o?()=>("function"==typeof o?o():o).map(ay).filter(ly):null,i.pipeDefs=o?()=>("function"==typeof o?o():o).map(Pn).filter(ly):null,i})}function ay(n){return ft(n)||On(n)}function ly(n){return null!==n}const LR={};function At(n){return Yi(()=>{const e={type:n.type,bootstrap:n.bootstrap||qe,declarations:n.declarations||qe,imports:n.imports||qe,exports:n.exports||qe,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null};return null!=n.id&&(LR[n.id]=n.type),e})}function uy(n,e){if(null==n)return ss;const t={};for(const r in n)if(n.hasOwnProperty(r)){let i=n[r],o=i;Array.isArray(i)&&(o=i[1],i=i[0]),t[i]=r,e&&(e[i]=o)}return t}const be=Eo;function ft(n){return n[_u]||null}function On(n){return n[Vh]||null}function Pn(n){return n[Gh]||null}function Gn(n){return Array.isArray(n)&&"object"==typeof n[1]}function wr(n){return Array.isArray(n)&&!0===n[1]}function Yh(n){return 0!=(8&n.flags)}function yu(n){return 2==(2&n.flags)}function Eu(n){return 1==(1&n.flags)}function xr(n){return null!==n.template}function GR(n){return 0!=(256&n[2])}function Mo(n,e){return n.hasOwnProperty(vi)?n[vi]:null}class YR{constructor(e,t,r){this.previousValue=e,this.currentValue=t,this.firstChange=r}isFirstChange(){return this.firstChange}}function zr(){return hy}function hy(n){return n.type.prototype.ngOnChanges&&(n.setInput=WR),zR}function zR(){const n=py(this),e=null==n?void 0:n.current;if(e){const t=n.previous;if(t===ss)n.previous=e;else for(let r in e)t[r]=e[r];n.current=null,this.ngOnChanges(e)}}function WR(n,e,t,r){const i=py(n)||function XR(n,e){return n[fy]=e}(n,{previous:ss,current:null}),o=i.current||(i.current={}),s=i.previous,a=this.declaredInputs[t],l=s[a];o[a]=new YR(l&&l.currentValue,e,s===ss),n[r]=e}zr.ngInherit=!0;const fy="__ngSimpleChanges__";function py(n){return n[fy]||null}let qh;function Gt(n){return!!n.listen}const _y={createRenderer:(n,e)=>function Kh(){return void 0!==qh?qh:"undefined"!=typeof document?document:void 0}()};function Jt(n){for(;Array.isArray(n);)n=n[0];return n}function bu(n,e){return Jt(e[n])}function ur(n,e){return Jt(e[n.index])}function Qh(n,e){return n.data[e]}function Qn(n,e){const t=e[n];return Gn(t)?t:t[0]}function my(n){return 4==(4&n[2])}function Zh(n){return 64==(64&n[2])}function zi(n,e){return null==e?null:n[e]}function gy(n){n[18]=0}function Jh(n,e){n[5]+=e;let t=n,r=n[3];for(;null!==r&&(1===e&&1===t[5]||-1===e&&0===t[5]);)r[5]+=e,t=r,r=r[3]}const Ae={lFrame:Cy(null),bindingsEnabled:!0};function yy(){return Ae.bindingsEnabled}function L(){return Ae.lFrame.lView}function ze(){return Ae.lFrame.tView}function Wi(n){return Ae.lFrame.contextLView=n,n[8]}function Xi(n){return Ae.lFrame.contextLView=null,n}function on(){let n=Ey();for(;null!==n&&64===n.type;)n=n.parent;return n}function Ey(){return Ae.lFrame.currentTNode}function Wr(n,e){const t=Ae.lFrame;t.currentTNode=n,t.isParent=e}function ef(){return Ae.lFrame.isParent}function tf(){Ae.lFrame.isParent=!1}function hs(){return Ae.lFrame.bindingIndex++}function cI(n,e){const t=Ae.lFrame;t.bindingIndex=t.bindingRootIndex=n,nf(e)}function nf(n){Ae.lFrame.currentDirectiveIndex=n}function Dy(){return Ae.lFrame.currentQueryIndex}function sf(n){Ae.lFrame.currentQueryIndex=n}function hI(n){const e=n[1];return 2===e.type?e.declTNode:1===e.type?n[6]:null}function Sy(n,e,t){if(t&Me.SkipSelf){let i=e,o=n;for(;!(i=i.parent,null!==i||t&Me.Host||(i=hI(o),null===i||(o=o[15],10&i.type))););if(null===i)return!1;e=i,n=o}const r=Ae.lFrame=My();return r.currentTNode=e,r.lView=n,!0}function Du(n){const e=My(),t=n[1];Ae.lFrame=e,e.currentTNode=t.firstChild,e.lView=n,e.tView=t,e.contextLView=n,e.bindingIndex=t.bindingStartIndex,e.inI18n=!1}function My(){const n=Ae.lFrame,e=null===n?null:n.child;return null===e?Cy(n):e}function Cy(n){const e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return null!==n&&(n.child=e),e}function Ay(){const n=Ae.lFrame;return Ae.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}const wy=Ay;function Su(){const n=Ay();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function Fn(){return Ae.lFrame.selectedIndex}function $i(n){Ae.lFrame.selectedIndex=n}function Ht(){const n=Ae.lFrame;return Qh(n.tView,n.selectedIndex)}function Mu(n,e){for(let t=e.directiveStart,r=e.directiveEnd;t<r;t++){const o=n.data[t].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:a,ngAfterViewInit:l,ngAfterViewChecked:u,ngOnDestroy:c}=o;s&&(n.contentHooks||(n.contentHooks=[])).push(-t,s),a&&((n.contentHooks||(n.contentHooks=[])).push(t,a),(n.contentCheckHooks||(n.contentCheckHooks=[])).push(t,a)),l&&(n.viewHooks||(n.viewHooks=[])).push(-t,l),u&&((n.viewHooks||(n.viewHooks=[])).push(t,u),(n.viewCheckHooks||(n.viewCheckHooks=[])).push(t,u)),null!=c&&(n.destroyHooks||(n.destroyHooks=[])).push(t,c)}}function Cu(n,e,t){xy(n,e,3,t)}function Au(n,e,t,r){(3&n[2])===t&&xy(n,e,t,r)}function af(n,e){let t=n[2];(3&t)===e&&(t&=2047,t+=1,n[2]=t)}function xy(n,e,t,r){const o=null!=r?r:-1,s=e.length-1;let a=0;for(let l=void 0!==r?65535&n[18]:0;l<s;l++)if("number"==typeof e[l+1]){if(a=e[l],null!=r&&a>=r)break}else e[l]<0&&(n[18]+=65536),(a<o||-1==o)&&(bI(n,t,e,l),n[18]=(4294901760&n[18])+l+2),l++}function bI(n,e,t,r){const i=t[r]<0,o=t[r+1],a=n[i?-t[r]:t[r]];if(i){if(n[2]>>11<n[18]>>16&&(3&n[2])===e){n[2]+=2048;try{o.call(a)}finally{}}}else try{o.call(a)}finally{}}class Na{constructor(e,t,r){this.factory=e,this.resolving=!1,this.canSeeViewProviders=t,this.injectImpl=r}}function wu(n,e,t){const r=Gt(n);let i=0;for(;i<t.length;){const o=t[i];if("number"==typeof o){if(0!==o)break;i++;const s=t[i++],a=t[i++],l=t[i++];r?n.setAttribute(e,a,l,s):e.setAttributeNS(s,a,l)}else{const s=o,a=t[++i];uf(s)?r&&n.setProperty(e,s,a):r?n.setAttribute(e,s,a):e.setAttribute(s,a),i++}}return i}function Ry(n){return 3===n||4===n||6===n}function uf(n){return 64===n.charCodeAt(0)}function xu(n,e){if(null!==e&&0!==e.length)if(null===n||0===n.length)n=e.slice();else{let t=-1;for(let r=0;r<e.length;r++){const i=e[r];"number"==typeof i?t=i:0===t||Iy(n,t,i,null,-1===t||2===t?e[++r]:null)}}return n}function Iy(n,e,t,r,i){let o=0,s=n.length;if(-1===e)s=-1;else for(;o<n.length;){const a=n[o++];if("number"==typeof a){if(a===e){s=-1;break}if(a>e){s=o-1;break}}}for(;o<n.length;){const a=n[o];if("number"==typeof a)break;if(a===t){if(null===r)return void(null!==i&&(n[o+1]=i));if(r===n[o+1])return void(n[o+2]=i)}o++,null!==r&&o++,null!==i&&o++}-1!==s&&(n.splice(s,0,e),o=s+1),n.splice(o++,0,t),null!==r&&n.splice(o++,0,r),null!==i&&n.splice(o++,0,i)}function Oy(n){return-1!==n}function fs(n){return 32767&n}function ps(n,e){let t=function CI(n){return n>>16}(n),r=e;for(;t>0;)r=r[15],t--;return r}let cf=!0;function Ru(n){const e=cf;return cf=n,e}let AI=0;const Xr={};function La(n,e){const t=hf(n,e);if(-1!==t)return t;const r=e[1];r.firstCreatePass&&(n.injectorIndex=e.length,df(r.data,n),df(e,null),df(r.blueprint,null));const i=Iu(n,e),o=n.injectorIndex;if(Oy(i)){const s=fs(i),a=ps(i,e),l=a[1].data;for(let u=0;u<8;u++)e[o+u]=a[s+u]|l[s+u]}return e[o+8]=i,o}function df(n,e){n.push(0,0,0,0,0,0,0,0,e)}function hf(n,e){return-1===n.injectorIndex||n.parent&&n.parent.injectorIndex===n.injectorIndex||null===e[n.injectorIndex+8]?-1:n.injectorIndex}function Iu(n,e){if(n.parent&&-1!==n.parent.injectorIndex)return n.parent.injectorIndex;let t=0,r=null,i=e;for(;null!==i;){if(r=Gy(i),null===r)return-1;if(t++,i=i[15],-1!==r.injectorIndex)return r.injectorIndex|t<<16}return-1}function Ou(n,e,t){!function wI(n,e,t){let r;"string"==typeof t?r=t.charCodeAt(0)||0:t.hasOwnProperty(xa)&&(r=t[xa]),null==r&&(r=t[xa]=AI++);const i=255&r;e.data[n+(i>>5)]|=1<<i}(n,e,t)}function Fy(n,e,t){if(t&Me.Optional)return n;fu()}function Ly(n,e,t,r){if(t&Me.Optional&&void 0===r&&(r=null),0==(t&(Me.Self|Me.Host))){const i=n[9],o=Yr(void 0);try{return i?i.get(e,r,t&Me.Optional):oy(e,r,t&Me.Optional)}finally{Yr(o)}}return Fy(r,0,t)}function By(n,e,t,r=Me.Default,i){if(null!==n){if(1024&e[2]){const s=function PI(n,e,t,r,i){let o=n,s=e;for(;null!==o&&null!==s&&1024&s[2]&&!(256&s[2]);){const a=ky(o,s,t,r|Me.Self,Xr);if(a!==Xr)return a;let l=o.parent;if(!l){const u=s[21];if(u){const c=u.get(t,Xr,r);if(c!==Xr)return c}l=Gy(s),s=s[15]}o=l}return i}(n,e,t,r,Xr);if(s!==Xr)return s}const o=ky(n,e,t,r,Xr);if(o!==Xr)return o}return Ly(e,t,r,i)}function ky(n,e,t,r,i){const o=function II(n){if("string"==typeof n)return n.charCodeAt(0)||0;const e=n.hasOwnProperty(xa)?n[xa]:void 0;return"number"==typeof e?e>=0?255&e:OI:e}(t);if("function"==typeof o){if(!Sy(e,n,r))return r&Me.Host?Fy(i,0,r):Ly(e,t,r,i);try{const s=o(r);if(null!=s||r&Me.Optional)return s;fu()}finally{wy()}}else if("number"==typeof o){let s=null,a=hf(n,e),l=-1,u=r&Me.Host?e[16][6]:null;for((-1===a||r&Me.SkipSelf)&&(l=-1===a?Iu(n,e):e[a+8],-1!==l&&Vy(r,!1)?(s=e[1],a=fs(l),e=ps(l,e)):a=-1);-1!==a;){const c=e[1];if(Uy(o,a,c.data)){const d=RI(a,e,t,s,r,u);if(d!==Xr)return d}l=e[a+8],-1!==l&&Vy(r,e[1].data[a+8]===u)&&Uy(o,a,e)?(s=c,a=fs(l),e=ps(l,e)):a=-1}}return i}function RI(n,e,t,r,i,o){const s=e[1],a=s.data[n+8],c=Pu(a,s,t,null==r?yu(a)&&cf:r!=s&&0!=(3&a.type),i&Me.Host&&o===a);return null!==c?Ba(e,s,c,a):Xr}function Pu(n,e,t,r,i){const o=n.providerIndexes,s=e.data,a=1048575&o,l=n.directiveStart,c=o>>20,h=i?a+c:n.directiveEnd;for(let f=r?a:a+c;f<h;f++){const p=s[f];if(f<l&&t===p||f>=l&&p.type===t)return f}if(i){const f=s[l];if(f&&xr(f)&&f.type===t)return l}return null}function Ba(n,e,t,r){let i=n[t];const o=e.data;if(function TI(n){return n instanceof Na}(i)){const s=i;s.resolving&&function MR(n,e){const t=e?`. Dependency path: ${e.join(" > ")} > ${n}`:"";throw new z(-200,`Circular dependency in DI detected for ${n}${t}`)}(function $e(n){return"function"==typeof n?n.name||n.toString():"object"==typeof n&&null!=n&&"function"==typeof n.type?n.type.name||n.type.toString():Re(n)}(o[t]));const a=Ru(s.canSeeViewProviders);s.resolving=!0;const l=s.injectImpl?Yr(s.injectImpl):null;Sy(n,r,Me.Default);try{i=n[t]=s.factory(void 0,o,n,r),e.firstCreatePass&&t>=r.directiveStart&&function EI(n,e,t){const{ngOnChanges:r,ngOnInit:i,ngDoCheck:o}=e.type.prototype;if(r){const s=hy(e);(t.preOrderHooks||(t.preOrderHooks=[])).push(n,s),(t.preOrderCheckHooks||(t.preOrderCheckHooks=[])).push(n,s)}i&&(t.preOrderHooks||(t.preOrderHooks=[])).push(0-n,i),o&&((t.preOrderHooks||(t.preOrderHooks=[])).push(n,o),(t.preOrderCheckHooks||(t.preOrderCheckHooks=[])).push(n,o))}(t,o[t],e)}finally{null!==l&&Yr(l),Ru(a),s.resolving=!1,wy()}}return i}function Uy(n,e,t){return!!(t[e+(n>>5)]&1<<n)}function Vy(n,e){return!(n&Me.Self||n&Me.Host&&e)}class _s{constructor(e,t){this._tNode=e,this._lView=t}get(e,t,r){return By(this._tNode,this._lView,e,r,t)}}function OI(){return new _s(on(),L())}function mn(n){return Yi(()=>{const e=n.prototype.constructor,t=e[vi]||ff(e),r=Object.prototype;let i=Object.getPrototypeOf(n.prototype).constructor;for(;i&&i!==r;){const o=i[vi]||ff(i);if(o&&o!==t)return o;i=Object.getPrototypeOf(i)}return o=>new o})}function ff(n){return Lh(n)?()=>{const e=ff(Se(n));return e&&e()}:Mo(n)}function Gy(n){const e=n[1],t=e.type;return 2===t?e.declTNode:1===t?n[6]:null}const vs="__parameters__";function Es(n,e,t){return Yi(()=>{const r=function pf(n){return function(...t){if(n){const r=n(...t);for(const i in r)this[i]=r[i]}}}(e);function i(...o){if(this instanceof i)return r.apply(this,o),this;const s=new i(...o);return a.annotation=s,a;function a(l,u,c){const d=l.hasOwnProperty(vs)?l[vs]:Object.defineProperty(l,vs,{value:[]})[vs];for(;d.length<=c;)d.push(null);return(d[c]=d[c]||[]).push(s),l}}return t&&(i.prototype=Object.create(t.prototype)),i.prototype.ngMetadataName=n,i.annotationCls=i,i})}class j{constructor(e,t){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof t?this.__NG_ELEMENT_ID__=t:void 0!==t&&(this.\u0275prov=Ce({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}function Zn(n,e){void 0===e&&(e=n);for(let t=0;t<n.length;t++){let r=n[t];Array.isArray(r)?(e===n&&(e=n.slice(0,t)),Zn(r,e)):e!==n&&e.push(r)}return e}function bi(n,e){n.forEach(t=>Array.isArray(t)?bi(t,e):e(t))}function jy(n,e,t){e>=n.length?n.push(t):n.splice(e,0,t)}function Nu(n,e){return e>=n.length-1?n.pop():n.splice(e,1)[0]}function Va(n,e){const t=[];for(let r=0;r<n;r++)t.push(e);return t}function Jn(n,e,t){let r=bs(n,e);return r>=0?n[1|r]=t:(r=~r,function BI(n,e,t,r){let i=n.length;if(i==e)n.push(t,r);else if(1===i)n.push(r,n[0]),n[0]=t;else{for(i--,n.push(n[i-1],n[i]);i>e;)n[i]=n[i-2],i--;n[e]=t,n[e+1]=r}}(n,r,e,t)),r}function mf(n,e){const t=bs(n,e);if(t>=0)return n[1|t]}function bs(n,e){return function Wy(n,e,t){let r=0,i=n.length>>t;for(;i!==r;){const o=r+(i-r>>1),s=n[o<<t];if(e===s)return o<<t;s>e?i=o:r=o+1}return~(i<<t)}(n,e,1)}const Ga={},vf="__NG_DI_FLAG__",Lu="ngTempTokenPath",zI=/\n/gm,Xy="__source";let Ha;function Bu(n){const e=Ha;return Ha=n,e}function XI(n,e=Me.Default){if(void 0===Ha)throw new z(-203,"");return null===Ha?oy(n,void 0,e):Ha.get(n,e&Me.Optional?null:void 0,e)}function Y(n,e=Me.Default){return(function PR(){return Uh}()||XI)(Se(n),e)}function ja(n,e=Me.Default){return Y(n,e)}function yf(n){const e=[];for(let t=0;t<n.length;t++){const r=Se(n[t]);if(Array.isArray(r)){if(0===r.length)throw new z(900,"");let i,o=Me.Default;for(let s=0;s<r.length;s++){const a=r[s],l=$I(a);"number"==typeof l?-1===l?i=a.token:o|=l:i=a}e.push(Y(i,o))}else e.push(Y(r))}return e}function Ya(n,e){return n[vf]=e,n.prototype[vf]=e,n}function $I(n){return n[vf]}const Co=Ya(Es("Optional"),8),za=Ya(Es("SkipSelf"),4);let Vu;function Ds(n){var e;return(null===(e=function bf(){if(void 0===Vu&&(Vu=null,st.trustedTypes))try{Vu=st.trustedTypes.createPolicy("angular",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch(n){}return Vu}())||void 0===e?void 0:e.createHTML(n))||n}class Ao{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}class lO extends Ao{getTypeName(){return"HTML"}}class uO extends Ao{getTypeName(){return"Style"}}class cO extends Ao{getTypeName(){return"Script"}}class dO extends Ao{getTypeName(){return"URL"}}class hO extends Ao{getTypeName(){return"ResourceURL"}}function er(n){return n instanceof Ao?n.changingThisBreaksApplicationSecurity:n}function $r(n,e){const t=oE(n);if(null!=t&&t!==e){if("ResourceURL"===t&&"URL"===e)return!0;throw new Error(`Required a safe ${e}, got a ${t} (see https://g.co/ng/security#xss)`)}return t===e}function oE(n){return n instanceof Ao&&n.getTypeName()||null}class vO{constructor(e){this.inertDocumentHelper=e}getInertBodyElement(e){e="<body><remove></remove>"+e;try{const t=(new window.DOMParser).parseFromString(Ds(e),"text/html").body;return null===t?this.inertDocumentHelper.getInertBodyElement(e):(t.removeChild(t.firstChild),t)}catch(t){return null}}}class yO{constructor(e){if(this.defaultDoc=e,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),null==this.inertDocument.body){const t=this.inertDocument.createElement("html");this.inertDocument.appendChild(t);const r=this.inertDocument.createElement("body");t.appendChild(r)}}getInertBodyElement(e){const t=this.inertDocument.createElement("template");if("content"in t)return t.innerHTML=Ds(e),t;const r=this.inertDocument.createElement("body");return r.innerHTML=Ds(e),this.defaultDoc.documentMode&&this.stripCustomNsAttrs(r),r}stripCustomNsAttrs(e){const t=e.attributes;for(let i=t.length-1;0<i;i--){const s=t.item(i).name;("xmlns:ns1"===s||0===s.indexOf("ns1:"))&&e.removeAttribute(s)}let r=e.firstChild;for(;r;)r.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(r),r=r.nextSibling}}const bO=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,TO=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;function $a(n){return(n=String(n)).match(bO)||n.match(TO)?n:"unsafe:"+n}function aE(n){return(n=String(n)).split(",").map(e=>$a(e.trim())).join(", ")}function qr(n){const e={};for(const t of n.split(","))e[t]=!0;return e}function qa(...n){const e={};for(const t of n)for(const r in t)t.hasOwnProperty(r)&&(e[r]=!0);return e}const lE=qr("area,br,col,hr,img,wbr"),uE=qr("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),cE=qr("rp,rt"),Df=qa(lE,qa(uE,qr("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),qa(cE,qr("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),qa(cE,uE)),Sf=qr("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),Mf=qr("srcset"),dE=qa(Sf,Mf,qr("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),qr("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),DO=qr("script,style,template");class SO{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(e){let t=e.firstChild,r=!0;for(;t;)if(t.nodeType===Node.ELEMENT_NODE?r=this.startElement(t):t.nodeType===Node.TEXT_NODE?this.chars(t.nodeValue):this.sanitizedSomething=!0,r&&t.firstChild)t=t.firstChild;else for(;t;){t.nodeType===Node.ELEMENT_NODE&&this.endElement(t);let i=this.checkClobberedElement(t,t.nextSibling);if(i){t=i;break}t=this.checkClobberedElement(t,t.parentNode)}return this.buf.join("")}startElement(e){const t=e.nodeName.toLowerCase();if(!Df.hasOwnProperty(t))return this.sanitizedSomething=!0,!DO.hasOwnProperty(t);this.buf.push("<"),this.buf.push(t);const r=e.attributes;for(let i=0;i<r.length;i++){const o=r.item(i),s=o.name,a=s.toLowerCase();if(!dE.hasOwnProperty(a)){this.sanitizedSomething=!0;continue}let l=o.value;Sf[a]&&(l=$a(l)),Mf[a]&&(l=aE(l)),this.buf.push(" ",s,'="',hE(l),'"')}return this.buf.push(">"),!0}endElement(e){const t=e.nodeName.toLowerCase();Df.hasOwnProperty(t)&&!lE.hasOwnProperty(t)&&(this.buf.push("</"),this.buf.push(t),this.buf.push(">"))}chars(e){this.buf.push(hE(e))}checkClobberedElement(e,t){if(t&&(e.compareDocumentPosition(t)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${e.outerHTML}`);return t}}const MO=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,CO=/([^\#-~ |!])/g;function hE(n){return n.replace(/&/g,"&amp;").replace(MO,function(e){return"&#"+(1024*(e.charCodeAt(0)-55296)+(e.charCodeAt(1)-56320)+65536)+";"}).replace(CO,function(e){return"&#"+e.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let Hu;function fE(n,e){let t=null;try{Hu=Hu||function sE(n){const e=new yO(n);return function EO(){try{return!!(new window.DOMParser).parseFromString(Ds(""),"text/html")}catch(n){return!1}}()?new vO(e):e}(n);let r=e?String(e):"";t=Hu.getInertBodyElement(r);let i=5,o=r;do{if(0===i)throw new Error("Failed to sanitize html because the input is unstable");i--,r=o,o=t.innerHTML,t=Hu.getInertBodyElement(r)}while(r!==o);return Ds((new SO).sanitizeChildren(Cf(t)||t))}finally{if(t){const r=Cf(t)||t;for(;r.firstChild;)r.removeChild(r.firstChild)}}}function Cf(n){return"content"in n&&function AO(n){return n.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===n.nodeName}(n)?n.content:null}var Ke=(()=>((Ke=Ke||{})[Ke.NONE=0]="NONE",Ke[Ke.HTML=1]="HTML",Ke[Ke.STYLE=2]="STYLE",Ke[Ke.SCRIPT=3]="SCRIPT",Ke[Ke.URL=4]="URL",Ke[Ke.RESOURCE_URL=5]="RESOURCE_URL",Ke))();function Af(n){const e=function Ka(){const n=L();return n&&n[12]}();return e?e.sanitize(Ke.URL,n)||"":$r(n,"URL")?er(n):$a(Re(n))}function xf(n){return n.ngOriginalError}class Ti{constructor(){this._console=console}handleError(e){const t=this._findOriginalError(e);this._console.error("ERROR",e),t&&this._console.error("ORIGINAL ERROR",t)}_findOriginalError(e){let t=e&&xf(e);for(;t&&xf(t);)t=xf(t);return t||null}}const Rf=new Map;let jO=0;const Of="__ngContext__";function Cn(n,e){Gn(e)?(n[Of]=e[20],function zO(n){Rf.set(n[20],n)}(e)):n[Of]=e}function Qa(n){const e=n[Of];return"number"==typeof e?function mE(n){return Rf.get(n)||null}(e):e||null}function Pf(n){const e=Qa(n);return e?Gn(e)?e:e.lView:null}const eP=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(st))();var tr=(()=>((tr=tr||{})[tr.Important=1]="Important",tr[tr.DashCase=2]="DashCase",tr))();function Ff(n,e){return undefined(n,e)}function Za(n){const e=n[3];return wr(e)?e[3]:e}function Lf(n){return ME(n[13])}function Bf(n){return ME(n[4])}function ME(n){for(;null!==n&&!wr(n);)n=n[4];return n}function Ms(n,e,t,r,i){if(null!=r){let o,s=!1;wr(r)?o=r:Gn(r)&&(s=!0,r=r[0]);const a=Jt(r);0===n&&null!==t?null==i?IE(e,t,a):wo(e,t,a,i||null,!0):1===n&&null!==t?wo(e,t,a,i||null,!0):2===n?function UE(n,e,t){const r=ju(n,e);r&&function _P(n,e,t,r){Gt(n)?n.removeChild(e,t,r):e.removeChild(t)}(n,r,e,t)}(e,a,s):3===n&&e.destroyNode(a),null!=o&&function vP(n,e,t,r,i){const o=t[7];o!==Jt(t)&&Ms(e,n,r,o,i);for(let a=10;a<t.length;a++){const l=t[a];Ja(l[1],l,n,e,r,o)}}(e,n,o,t,i)}}function Uf(n,e,t){if(Gt(n))return n.createElement(e,t);{const r=null!==t?function QR(n){const e=n.toLowerCase();return"svg"===e?"http://www.w3.org/2000/svg":"math"===e?"http://www.w3.org/1998/MathML/":null}(t):null;return null===r?n.createElement(e):n.createElementNS(r,e)}}function AE(n,e){const t=n[9],r=t.indexOf(e),i=e[3];512&e[2]&&(e[2]&=-513,Jh(i,-1)),t.splice(r,1)}function Vf(n,e){if(n.length<=10)return;const t=10+e,r=n[t];if(r){const i=r[17];null!==i&&i!==n&&AE(i,r),e>0&&(n[t-1][4]=r[4]);const o=Nu(n,10+e);!function aP(n,e){Ja(n,e,e[11],2,null,null),e[0]=null,e[6]=null}(r[1],r);const s=o[19];null!==s&&s.detachView(o[1]),r[3]=null,r[4]=null,r[2]&=-65}return r}function wE(n,e){if(!(128&e[2])){const t=e[11];Gt(t)&&t.destroyNode&&Ja(n,e,t,3,null,null),function cP(n){let e=n[13];if(!e)return Gf(n[1],n);for(;e;){let t=null;if(Gn(e))t=e[13];else{const r=e[10];r&&(t=r)}if(!t){for(;e&&!e[4]&&e!==n;)Gn(e)&&Gf(e[1],e),e=e[3];null===e&&(e=n),Gn(e)&&Gf(e[1],e),t=e&&e[4]}e=t}}(e)}}function Gf(n,e){if(!(128&e[2])){e[2]&=-65,e[2]|=128,function pP(n,e){let t;if(null!=n&&null!=(t=n.destroyHooks))for(let r=0;r<t.length;r+=2){const i=e[t[r]];if(!(i instanceof Na)){const o=t[r+1];if(Array.isArray(o))for(let s=0;s<o.length;s+=2){const a=i[o[s]],l=o[s+1];try{l.call(a)}finally{}}else try{o.call(i)}finally{}}}}(n,e),function fP(n,e){const t=n.cleanup,r=e[7];let i=-1;if(null!==t)for(let o=0;o<t.length-1;o+=2)if("string"==typeof t[o]){const s=t[o+1],a="function"==typeof s?s(e):Jt(e[s]),l=r[i=t[o+2]],u=t[o+3];"boolean"==typeof u?a.removeEventListener(t[o],l,u):u>=0?r[i=u]():r[i=-u].unsubscribe(),o+=2}else{const s=r[i=t[o+1]];t[o].call(s)}if(null!==r){for(let o=i+1;o<r.length;o++)r[o]();e[7]=null}}(n,e),1===e[1].type&&Gt(e[11])&&e[11].destroy();const t=e[17];if(null!==t&&wr(e[3])){t!==e[3]&&AE(t,e);const r=e[19];null!==r&&r.detachView(n)}!function WO(n){Rf.delete(n[20])}(e)}}function xE(n,e,t){return function RE(n,e,t){let r=e;for(;null!==r&&40&r.type;)r=(e=r).parent;if(null===r)return t[0];if(2&r.flags){const i=n.data[r.directiveStart].encapsulation;if(i===Cr.None||i===Cr.Emulated)return null}return ur(r,t)}(n,e.parent,t)}function wo(n,e,t,r,i){Gt(n)?n.insertBefore(e,t,r,i):(PE(e)?e.content:e).insertBefore(t,r,i)}function IE(n,e,t){Gt(n)?n.appendChild(e,t):(PE(e)?e.content:e).appendChild(t)}function OE(n,e,t,r,i){null!==r?wo(n,e,t,r,i):IE(n,e,t)}function PE(n){return"TEMPLATE"===n.tagName&&void 0!==n.content}function ju(n,e){return Gt(n)?n.parentNode(e):e.parentNode}function NE(n,e,t){return LE(n,e,t)}let LE=function FE(n,e,t){return 40&n.type?ur(n,t):null};function Yu(n,e,t,r){const i=xE(n,r,e),o=e[11],a=NE(r.parent||e[6],r,e);if(null!=i)if(Array.isArray(t))for(let l=0;l<t.length;l++)OE(o,i,t[l],a,!1);else OE(o,i,t,a,!1)}function zu(n,e){if(null!==e){const t=e.type;if(3&t)return ur(e,n);if(4&t)return jf(-1,n[e.index]);if(8&t){const r=e.child;if(null!==r)return zu(n,r);{const i=n[e.index];return wr(i)?jf(-1,i):Jt(i)}}if(32&t)return Ff(e,n)()||Jt(n[e.index]);{const r=kE(n,e);return null!==r?Array.isArray(r)?r[0]:zu(Za(n[16]),r):zu(n,e.next)}}return null}function kE(n,e){return null!==e?n[16][6].projection[e.projection]:null}function jf(n,e){const t=10+n+1;if(t<e.length){const r=e[t],i=r[1].firstChild;if(null!==i)return zu(r,i)}return e[7]}function Yf(n,e,t,r,i,o,s){for(;null!=t;){const a=r[t.index],l=t.type;if(s&&0===e&&(a&&Cn(Jt(a),r),t.flags|=4),64!=(64&t.flags))if(8&l)Yf(n,e,t.child,r,i,o,!1),Ms(e,n,i,a,o);else if(32&l){const u=Ff(t,r);let c;for(;c=u();)Ms(e,n,i,c,o);Ms(e,n,i,a,o)}else 16&l?VE(n,e,r,t,i,o):Ms(e,n,i,a,o);t=s?t.projectionNext:t.next}}function Ja(n,e,t,r,i,o){Yf(t,r,n.firstChild,e,i,o,!1)}function VE(n,e,t,r,i,o){const s=t[16],l=s[6].projection[r.projection];if(Array.isArray(l))for(let u=0;u<l.length;u++)Ms(e,n,i,l[u],o);else Yf(n,e,l,s[3],i,o,!0)}function GE(n,e,t){Gt(n)?n.setAttribute(e,"style",t):e.style.cssText=t}function zf(n,e,t){Gt(n)?""===t?n.removeAttribute(e,"class"):n.setAttribute(e,"class",t):e.className=t}function HE(n,e,t){let r=n.length;for(;;){const i=n.indexOf(e,t);if(-1===i)return i;if(0===i||n.charCodeAt(i-1)<=32){const o=e.length;if(i+o===r||n.charCodeAt(i+o)<=32)return i}t=i+1}}const jE="ng-template";function EP(n,e,t){let r=0;for(;r<n.length;){let i=n[r++];if(t&&"class"===i){if(i=n[r],-1!==HE(i.toLowerCase(),e,0))return!0}else if(1===i){for(;r<n.length&&"string"==typeof(i=n[r++]);)if(i.toLowerCase()===e)return!0;return!1}}return!1}function YE(n){return 4===n.type&&n.value!==jE}function bP(n,e,t){return e===(4!==n.type||t?n.value:jE)}function TP(n,e,t){let r=4;const i=n.attrs||[],o=function MP(n){for(let e=0;e<n.length;e++)if(Ry(n[e]))return e;return n.length}(i);let s=!1;for(let a=0;a<e.length;a++){const l=e[a];if("number"!=typeof l){if(!s)if(4&r){if(r=2|1&r,""!==l&&!bP(n,l,t)||""===l&&1===e.length){if(Rr(r))return!1;s=!0}}else{const u=8&r?l:e[++a];if(8&r&&null!==n.attrs){if(!EP(n.attrs,u,t)){if(Rr(r))return!1;s=!0}continue}const d=DP(8&r?"class":l,i,YE(n),t);if(-1===d){if(Rr(r))return!1;s=!0;continue}if(""!==u){let h;h=d>o?"":i[d+1].toLowerCase();const f=8&r?h:null;if(f&&-1!==HE(f,u,0)||2&r&&u!==h){if(Rr(r))return!1;s=!0}}}}else{if(!s&&!Rr(r)&&!Rr(l))return!1;if(s&&Rr(l))continue;s=!1,r=l|1&r}}return Rr(r)||s}function Rr(n){return 0==(1&n)}function DP(n,e,t,r){if(null===e)return-1;let i=0;if(r||!t){let o=!1;for(;i<e.length;){const s=e[i];if(s===n)return i;if(3===s||6===s)o=!0;else{if(1===s||2===s){let a=e[++i];for(;"string"==typeof a;)a=e[++i];continue}if(4===s)break;if(0===s){i+=4;continue}}i+=o?1:2}return-1}return function CP(n,e){let t=n.indexOf(4);if(t>-1)for(t++;t<n.length;){const r=n[t];if("number"==typeof r)return-1;if(r===e)return t;t++}return-1}(e,n)}function zE(n,e,t=!1){for(let r=0;r<e.length;r++)if(TP(n,e[r],t))return!0;return!1}function AP(n,e){e:for(let t=0;t<e.length;t++){const r=e[t];if(n.length===r.length){for(let i=0;i<n.length;i++)if(n[i]!==r[i])continue e;return!0}}return!1}function WE(n,e){return n?":not("+e.trim()+")":e}function wP(n){let e=n[0],t=1,r=2,i="",o=!1;for(;t<n.length;){let s=n[t];if("string"==typeof s)if(2&r){const a=n[++t];i+="["+s+(a.length>0?'="'+a+'"':"")+"]"}else 8&r?i+="."+s:4&r&&(i+=" "+s);else""!==i&&!Rr(s)&&(e+=WE(o,i),i=""),r=s,o=o||!Rr(r);t++}return""!==i&&(e+=WE(o,i)),e}const Ie={};function xt(n){XE(ze(),L(),Fn()+n,!1)}function XE(n,e,t,r){if(!r)if(3==(3&e[2])){const o=n.preOrderCheckHooks;null!==o&&Cu(e,o,t)}else{const o=n.preOrderHooks;null!==o&&Au(e,o,0,t)}$i(t)}const QE=new j("ENVIRONMENT_INITIALIZER"),ZE=new j("INJECTOR_DEF_TYPES");function LP(...n){return{\u0275providers:JE(0,n)}}function JE(n,...e){const t=[],r=new Set;let i;return bi(e,o=>{const s=o;Wf(s,t,[],r)&&(i||(i=[]),i.push(s))}),void 0!==i&&eb(i,t),t}function eb(n,e){for(let t=0;t<n.length;t++){const{providers:i}=n[t];bi(i,o=>{e.push(o)})}}function Wf(n,e,t,r){if(!(n=Se(n)))return!1;let i=null,o=ry(n);const s=!o&&ft(n);if(o||s){if(s&&!s.standalone)return!1;i=n}else{const l=n.ngModule;if(o=ry(l),!o)return!1;i=l}const a=r.has(i);if(s){if(a)return!1;if(r.add(i),s.dependencies){const l="function"==typeof s.dependencies?s.dependencies():s.dependencies;for(const u of l)Wf(u,e,t,r)}}else{if(!o)return!1;{if(null!=o.imports&&!a){let u;r.add(i);try{bi(o.imports,c=>{Wf(c,e,t,r)&&(u||(u=[]),u.push(c))})}finally{}void 0!==u&&eb(u,e)}if(!a){const u=Mo(i)||(()=>new i);e.push({provide:i,useFactory:u,deps:qe},{provide:ZE,useValue:i,multi:!0},{provide:QE,useValue:()=>Y(i),multi:!0})}const l=o.providers;null==l||a||bi(l,c=>{e.push(c)})}}return i!==n&&void 0!==n.providers}const BP=dt({provide:String,useValue:dt});function Xf(n){return null!==n&&"object"==typeof n&&BP in n}function xo(n){return"function"==typeof n}const $f=new j("INJECTOR",-1);class rb{get(e,t=Ga){if(t===Ga){const r=new Error(`NullInjectorError: No provider for ${ht(e)}!`);throw r.name="NullInjectorError",r}return t}}const qf=new j("Set Injector scope."),Wu={},UP={};let Kf;function Qf(){return void 0===Kf&&(Kf=new rb),Kf}class el{}class ib extends el{constructor(e,t,r,i){super(),this.parent=t,this.source=r,this.scopes=i,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,Jf(e,s=>this.processProvider(s)),this.records.set($f,Cs(void 0,this)),i.has("environment")&&this.records.set(el,Cs(void 0,this));const o=this.records.get(qf);null!=o&&"string"==typeof o.value&&this.scopes.add(o.value),this.injectorDefTypes=new Set(this.get(ZE.multi,qe,Me.Self))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const e of this._ngOnDestroyHooks)e.ngOnDestroy();for(const e of this._onDestroyHooks)e()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),this._onDestroyHooks.length=0}}onDestroy(e){this._onDestroyHooks.push(e)}get(e,t=Ga,r=Me.Default){this.assertNotDestroyed();const i=Bu(this),o=Yr(void 0);try{if(!(r&Me.SkipSelf)){let a=this.records.get(e);if(void 0===a){const l=function YP(n){return"function"==typeof n||"object"==typeof n&&n instanceof j}(e)&&Bh(e);a=l&&this.injectableDefInScope(l)?Cs(Zf(e),Wu):null,this.records.set(e,a)}if(null!=a)return this.hydrate(e,a)}return(r&Me.Self?Qf():this.parent).get(e,t=r&Me.Optional&&t===Ga?null:t)}catch(s){if("NullInjectorError"===s.name){if((s[Lu]=s[Lu]||[]).unshift(ht(e)),i)throw s;return function qI(n,e,t,r){const i=n[Lu];throw e[Xy]&&i.unshift(e[Xy]),n.message=function KI(n,e,t,r=null){n=n&&"\n"===n.charAt(0)&&"\u0275"==n.charAt(1)?n.slice(2):n;let i=ht(e);if(Array.isArray(e))i=e.map(ht).join(" -> ");else if("object"==typeof e){let o=[];for(let s in e)if(e.hasOwnProperty(s)){let a=e[s];o.push(s+":"+("string"==typeof a?JSON.stringify(a):ht(a)))}i=`{${o.join(", ")}}`}return`${t}${r?"("+r+")":""}[${i}]: ${n.replace(zI,"\n  ")}`}("\n"+n.message,i,t,r),n.ngTokenPath=i,n[Lu]=null,n}(s,e,"R3InjectorError",this.source)}throw s}finally{Yr(o),Bu(i)}}resolveInjectorInitializers(){const e=Bu(this),t=Yr(void 0);try{const r=this.get(QE.multi,qe,Me.Self);for(const i of r)i()}finally{Bu(e),Yr(t)}}toString(){const e=[],t=this.records;for(const r of t.keys())e.push(ht(r));return`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new z(205,!1)}processProvider(e){let t=xo(e=Se(e))?e:Se(e&&e.provide);const r=function GP(n){return Xf(n)?Cs(void 0,n.useValue):Cs(ob(n),Wu)}(e);if(xo(e)||!0!==e.multi)this.records.get(t);else{let i=this.records.get(t);i||(i=Cs(void 0,Wu,!0),i.factory=()=>yf(i.multi),this.records.set(t,i)),t=e,i.multi.push(e)}this.records.set(t,r)}hydrate(e,t){return t.value===Wu&&(t.value=UP,t.value=t.factory()),"object"==typeof t.value&&t.value&&function jP(n){return null!==n&&"object"==typeof n&&"function"==typeof n.ngOnDestroy}(t.value)&&this._ngOnDestroyHooks.add(t.value),t.value}injectableDefInScope(e){if(!e.providedIn)return!1;const t=Se(e.providedIn);return"string"==typeof t?"any"===t||this.scopes.has(t):this.injectorDefTypes.has(t)}}function Zf(n){const e=Bh(n),t=null!==e?e.factory:Mo(n);if(null!==t)return t;if(n instanceof j)throw new z(204,!1);if(n instanceof Function)return function VP(n){const e=n.length;if(e>0)throw Va(e,"?"),new z(204,!1);const t=function RR(n){const e=n&&(n[pu]||n[iy]);if(e){const t=function IR(n){if(n.hasOwnProperty("name"))return n.name;const e=(""+n).match(/^function\s*([^\s(]+)/);return null===e?"":e[1]}(n);return console.warn(`DEPRECATED: DI is instantiating a token "${t}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${t}" class.`),e}return null}(n);return null!==t?()=>t.factory(n):()=>new n}(n);throw new z(204,!1)}function ob(n,e,t){let r;if(xo(n)){const i=Se(n);return Mo(i)||Zf(i)}if(Xf(n))r=()=>Se(n.useValue);else if(function nb(n){return!(!n||!n.useFactory)}(n))r=()=>n.useFactory(...yf(n.deps||[]));else if(function tb(n){return!(!n||!n.useExisting)}(n))r=()=>Y(Se(n.useExisting));else{const i=Se(n&&(n.useClass||n.provide));if(!function HP(n){return!!n.deps}(n))return Mo(i)||Zf(i);r=()=>new i(...yf(n.deps))}return r}function Cs(n,e,t=!1){return{factory:n,value:e,multi:t?[]:void 0}}function zP(n){return!!n.\u0275providers}function Jf(n,e){for(const t of n)Array.isArray(t)?Jf(t,e):zP(t)?Jf(t.\u0275providers,e):e(t)}function sb(n,e=null,t=null,r){const i=ab(n,e,t,r);return i.resolveInjectorInitializers(),i}function ab(n,e=null,t=null,r,i=new Set){const o=[t||qe,LP(n)];return r=r||("object"==typeof n?void 0:ht(n)),new ib(o,e||Qf(),r||null,i)}let cr=(()=>{class n{static create(t,r){var i;if(Array.isArray(t))return sb({name:""},r,t,"");{const o=null!==(i=t.name)&&void 0!==i?i:"";return sb({name:o},t.parent,t.providers,o)}}}return n.THROW_IF_NOT_FOUND=Ga,n.NULL=new rb,n.\u0275prov=Ce({token:n,providedIn:"any",factory:()=>Y($f)}),n.__NG_ELEMENT_ID__=-1,n})();function F(n,e=Me.Default){const t=L();return null===t?Y(n,e):By(on(),t,Se(n),e)}function $u(n,e){return n<<17|e<<2}function Ir(n){return n>>17&32767}function ap(n){return 2|n}function Si(n){return(131068&n)>>2}function lp(n,e){return-131069&n|e<<2}function up(n){return 1|n}function wb(n,e){const t=n.contentQueries;if(null!==t)for(let r=0;r<t.length;r+=2){const i=t[r],o=t[r+1];if(-1!==o){const s=n.data[o];sf(i),s.contentQueries(2,e[o],o)}}}function tl(n,e,t,r,i,o,s,a,l,u,c){const d=e.blueprint.slice();return d[0]=i,d[2]=76|r,(null!==c||n&&1024&n[2])&&(d[2]|=1024),gy(d),d[3]=d[15]=n,d[8]=t,d[10]=s||n&&n[10],d[11]=a||n&&n[11],d[12]=l||n&&n[12]||null,d[9]=u||n&&n[9]||null,d[6]=o,d[20]=function YO(){return jO++}(),d[21]=c,d[16]=2==e.type?n[16]:d,d}function ws(n,e,t,r,i){let o=n.data[e];if(null===o)o=function vp(n,e,t,r,i){const o=Ey(),s=ef(),l=n.data[e]=function DN(n,e,t,r,i,o){return{type:t,index:r,insertBeforeIndex:null,injectorIndex:e?e.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,s?o:o&&o.parent,t,e,r,i);return null===n.firstChild&&(n.firstChild=l),null!==o&&(s?null==o.child&&null!==l.parent&&(o.child=l):null===o.next&&(o.next=l)),l}(n,e,t,r,i),function uI(){return Ae.lFrame.inI18n}()&&(o.flags|=64);else if(64&o.type){o.type=t,o.value=r,o.attrs=i;const s=function Pa(){const n=Ae.lFrame,e=n.currentTNode;return n.isParent?e:e.parent}();o.injectorIndex=null===s?-1:s.injectorIndex}return Wr(o,!0),o}function xs(n,e,t,r){if(0===t)return-1;const i=e.length;for(let o=0;o<t;o++)e.push(r),n.blueprint.push(r),n.data.push(null);return i}function nl(n,e,t){Du(e);try{const r=n.viewQuery;null!==r&&Ap(1,r,t);const i=n.template;null!==i&&xb(n,e,i,1,t),n.firstCreatePass&&(n.firstCreatePass=!1),n.staticContentQueries&&wb(n,e),n.staticViewQueries&&Ap(2,n.viewQuery,t);const o=n.components;null!==o&&function EN(n,e){for(let t=0;t<e.length;t++)GN(n,e[t])}(e,o)}catch(r){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),r}finally{e[2]&=-5,Su()}}function Rs(n,e,t,r){const i=e[2];if(128!=(128&i)){Du(e);try{gy(e),function by(n){return Ae.lFrame.bindingIndex=n}(n.bindingStartIndex),null!==t&&xb(n,e,t,2,r);const s=3==(3&i);if(s){const u=n.preOrderCheckHooks;null!==u&&Cu(e,u,null)}else{const u=n.preOrderHooks;null!==u&&Au(e,u,0,null),af(e,0)}if(function UN(n){for(let e=Lf(n);null!==e;e=Bf(e)){if(!e[2])continue;const t=e[9];for(let r=0;r<t.length;r++){const i=t[r],o=i[3];0==(512&i[2])&&Jh(o,1),i[2]|=512}}}(e),function kN(n){for(let e=Lf(n);null!==e;e=Bf(e))for(let t=10;t<e.length;t++){const r=e[t],i=r[1];Zh(r)&&Rs(i,r,i.template,r[8])}}(e),null!==n.contentQueries&&wb(n,e),s){const u=n.contentCheckHooks;null!==u&&Cu(e,u)}else{const u=n.contentHooks;null!==u&&Au(e,u,1),af(e,1)}!function vN(n,e){const t=n.hostBindingOpCodes;if(null!==t)try{for(let r=0;r<t.length;r++){const i=t[r];if(i<0)$i(~i);else{const o=i,s=t[++r],a=t[++r];cI(s,o),a(2,e[o])}}}finally{$i(-1)}}(n,e);const a=n.components;null!==a&&function yN(n,e){for(let t=0;t<e.length;t++)VN(n,e[t])}(e,a);const l=n.viewQuery;if(null!==l&&Ap(2,l,r),s){const u=n.viewCheckHooks;null!==u&&Cu(e,u)}else{const u=n.viewHooks;null!==u&&Au(e,u,2),af(e,2)}!0===n.firstUpdatePass&&(n.firstUpdatePass=!1),e[2]&=-41,512&e[2]&&(e[2]&=-513,Jh(e[3],-1))}finally{Su()}}}function bN(n,e,t,r){const i=e[10],s=my(e);try{!s&&i.begin&&i.begin(),s&&nl(n,e,r),Rs(n,e,t,r)}finally{!s&&i.end&&i.end()}}function xb(n,e,t,r,i){const o=Fn(),s=2&r;try{$i(-1),s&&e.length>22&&XE(n,e,22,!1),t(r,i)}finally{$i(o)}}function yp(n,e,t){!yy()||(function RN(n,e,t,r){const i=t.directiveStart,o=t.directiveEnd;n.firstCreatePass||La(t,e),Cn(r,e);const s=t.initialInputs;for(let a=i;a<o;a++){const l=n.data[a],u=xr(l);u&&FN(e,t,l);const c=Ba(e,n,a,t);Cn(c,e),null!==s&&LN(0,a-i,c,l,0,s),u&&(Qn(t.index,e)[8]=c)}}(n,e,t,ur(t,e)),128==(128&t.flags)&&function IN(n,e,t){const r=t.directiveStart,i=t.directiveEnd,o=t.index,s=function dI(){return Ae.lFrame.currentDirectiveIndex}();try{$i(o);for(let a=r;a<i;a++){const l=n.data[a],u=e[a];nf(a),(null!==l.hostBindings||0!==l.hostVars||null!==l.hostAttrs)&&Bb(l,u)}}finally{$i(-1),nf(s)}}(n,e,t))}function Ep(n,e,t=ur){const r=e.localNames;if(null!==r){let i=e.index+1;for(let o=0;o<r.length;o+=2){const s=r[o+1],a=-1===s?t(e,n):n[s];n[i++]=a}}}function Ib(n){const e=n.tView;return null===e||e.incompleteFirstPass?n.tView=Qu(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts):e}function Qu(n,e,t,r,i,o,s,a,l,u){const c=22+r,d=c+i,h=function TN(n,e){const t=[];for(let r=0;r<e;r++)t.push(r<n?null:Ie);return t}(c,d),f="function"==typeof u?u():u;return h[1]={type:n,blueprint:h,template:t,queries:null,viewQuery:a,declTNode:e,data:h.slice().fill(null,c),bindingStartIndex:c,expandoStartIndex:d,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof o?o():o,pipeRegistry:"function"==typeof s?s():s,firstChild:null,schemas:l,consts:f,incompleteFirstPass:!1}}function Nb(n,e,t,r){const i=jb(e);null===t?i.push(r):(i.push(t),n.firstCreatePass&&Yb(n).push(r,i.length-1))}function Fb(n,e,t){for(let r in n)if(n.hasOwnProperty(r)){const i=n[r];(t=null===t?{}:t).hasOwnProperty(r)?t[r].push(e,i):t[r]=[e,i]}return t}function bp(n,e,t,r){let i=!1;if(yy()){const o=function ON(n,e,t){const r=n.directiveRegistry;let i=null;if(r)for(let o=0;o<r.length;o++){const s=r[o];zE(t,s.selectors,!1)&&(i||(i=[]),Ou(La(t,e),n,s.type),xr(s)?(kb(n,t),i.unshift(s)):i.push(s))}return i}(n,e,t),s=null===r?null:{"":-1};if(null!==o){i=!0,Ub(t,n.data.length,o.length);for(let c=0;c<o.length;c++){const d=o[c];d.providersResolver&&d.providersResolver(d)}let a=!1,l=!1,u=xs(n,e,o.length,null);for(let c=0;c<o.length;c++){const d=o[c];t.mergedAttrs=xu(t.mergedAttrs,d.hostAttrs),Vb(n,t,e,u,d),NN(u,d,s),null!==d.contentQueries&&(t.flags|=8),(null!==d.hostBindings||null!==d.hostAttrs||0!==d.hostVars)&&(t.flags|=128);const h=d.type.prototype;!a&&(h.ngOnChanges||h.ngOnInit||h.ngDoCheck)&&((n.preOrderHooks||(n.preOrderHooks=[])).push(t.index),a=!0),!l&&(h.ngOnChanges||h.ngDoCheck)&&((n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(t.index),l=!0),u++}!function SN(n,e){const r=e.directiveEnd,i=n.data,o=e.attrs,s=[];let a=null,l=null;for(let u=e.directiveStart;u<r;u++){const c=i[u],d=c.inputs,h=null===o||YE(e)?null:BN(d,o);s.push(h),a=Fb(d,u,a),l=Fb(c.outputs,u,l)}null!==a&&(a.hasOwnProperty("class")&&(e.flags|=16),a.hasOwnProperty("style")&&(e.flags|=32)),e.initialInputs=s,e.inputs=a,e.outputs=l}(n,t)}s&&function PN(n,e,t){if(e){const r=n.localNames=[];for(let i=0;i<e.length;i+=2){const o=t[e[i+1]];if(null==o)throw new z(-301,!1);r.push(e[i],o)}}}(t,r,s)}return t.mergedAttrs=xu(t.mergedAttrs,t.attrs),i}function Lb(n,e,t,r,i,o){const s=o.hostBindings;if(s){let a=n.hostBindingOpCodes;null===a&&(a=n.hostBindingOpCodes=[]);const l=~e.index;(function xN(n){let e=n.length;for(;e>0;){const t=n[--e];if("number"==typeof t&&t<0)return t}return 0})(a)!=l&&a.push(l),a.push(r,i,s)}}function Bb(n,e){null!==n.hostBindings&&n.hostBindings(1,e)}function kb(n,e){e.flags|=2,(n.components||(n.components=[])).push(e.index)}function NN(n,e,t){if(t){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)t[e.exportAs[r]]=n;xr(e)&&(t[""]=n)}}function Ub(n,e,t){n.flags|=1,n.directiveStart=e,n.directiveEnd=e+t,n.providerIndexes=e}function Vb(n,e,t,r,i){n.data[r]=i;const o=i.factory||(i.factory=Mo(i.type)),s=new Na(o,xr(i),F);n.blueprint[r]=s,t[r]=s,Lb(n,e,0,r,xs(n,t,i.hostVars,Ie),i)}function FN(n,e,t){const r=ur(e,n),i=Ib(t),o=n[10],s=Zu(n,tl(n,i,null,t.onPush?32:16,r,e,o,o.createRenderer(r,t),null,null,null));n[e.index]=s}function Kr(n,e,t,r,i,o){const s=ur(n,e);!function Tp(n,e,t,r,i,o,s){if(null==o)Gt(n)?n.removeAttribute(e,i,t):e.removeAttribute(i);else{const a=null==s?Re(o):s(o,r||"",i);Gt(n)?n.setAttribute(e,i,a,t):t?e.setAttributeNS(t,i,a):e.setAttribute(i,a)}}(e[11],s,o,n.value,t,r,i)}function LN(n,e,t,r,i,o){const s=o[e];if(null!==s){const a=r.setInput;for(let l=0;l<s.length;){const u=s[l++],c=s[l++],d=s[l++];null!==a?r.setInput(t,d,u,c):t[c]=d}}}function BN(n,e){let t=null,r=0;for(;r<e.length;){const i=e[r];if(0!==i)if(5!==i){if("number"==typeof i)break;n.hasOwnProperty(i)&&(null===t&&(t=[]),t.push(i,n[i],e[r+1])),r+=2}else r+=2;else r+=4}return t}function Gb(n,e,t,r){return new Array(n,!0,!1,e,null,0,r,t,null,null)}function VN(n,e){const t=Qn(e,n);if(Zh(t)){const r=t[1];48&t[2]?Rs(r,t,r.template,t[8]):t[5]>0&&Dp(t)}}function Dp(n){for(let r=Lf(n);null!==r;r=Bf(r))for(let i=10;i<r.length;i++){const o=r[i];if(512&o[2]){const s=o[1];Rs(s,o,s.template,o[8])}else o[5]>0&&Dp(o)}const t=n[1].components;if(null!==t)for(let r=0;r<t.length;r++){const i=Qn(t[r],n);Zh(i)&&i[5]>0&&Dp(i)}}function GN(n,e){const t=Qn(e,n),r=t[1];(function HN(n,e){for(let t=e.length;t<n.blueprint.length;t++)e.push(n.blueprint[t])})(r,t),nl(r,t,t[8])}function Zu(n,e){return n[13]?n[14][4]=e:n[13]=e,n[14]=e,e}function Sp(n){for(;n;){n[2]|=32;const e=Za(n);if(GR(n)&&!e)return n;n=e}return null}function Hb(n){!function Mp(n){for(let e=0;e<n.components.length;e++){const t=n.components[e],r=Pf(t);if(null!==r){const i=r[1];bN(i,r,i.template,t)}}}(n[8])}function Ap(n,e,t){sf(0),e(n,t)}const YN=(()=>Promise.resolve(null))();function jb(n){return n[7]||(n[7]=[])}function Yb(n){return n.cleanup||(n.cleanup=[])}function Wb(n,e){const t=n[9],r=t?t.get(Ti,null):null;r&&r.handleError(e)}function Xb(n,e,t,r,i){for(let o=0;o<t.length;){const s=t[o++],a=t[o++],l=e[s],u=n.data[s];null!==u.setInput?u.setInput(l,i,r,a):l[a]=i}}function Mi(n,e,t){const r=bu(e,n);!function CE(n,e,t){Gt(n)?n.setValue(e,t):e.textContent=t}(n[11],r,t)}function Ju(n,e,t){let r=t?n.styles:null,i=t?n.classes:null,o=0;if(null!==e)for(let s=0;s<e.length;s++){const a=e[s];"number"==typeof a?o=a:1==o?i=Fh(i,a):2==o&&(r=Fh(r,a+": "+e[++s]+";"))}t?n.styles=r:n.stylesWithoutHost=r,t?n.classes=i:n.classesWithoutHost=i}function t1(){const n=on();Mu(L()[1],n)}function We(n){let e=function s0(n){return Object.getPrototypeOf(n.prototype).constructor}(n.type),t=!0;const r=[n];for(;e;){let i;if(xr(n))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new z(903,"");i=e.\u0275dir}if(i){if(t){r.push(i);const s=n;s.inputs=xp(n.inputs),s.declaredInputs=xp(n.declaredInputs),s.outputs=xp(n.outputs);const a=i.hostBindings;a&&s1(n,a);const l=i.viewQuery,u=i.contentQueries;if(l&&r1(n,l),u&&o1(n,u),Nh(n.inputs,i.inputs),Nh(n.declaredInputs,i.declaredInputs),Nh(n.outputs,i.outputs),xr(i)&&i.data.animation){const c=n.data;c.animation=(c.animation||[]).concat(i.data.animation)}}const o=i.features;if(o)for(let s=0;s<o.length;s++){const a=o[s];a&&a.ngInherit&&a(n),a===We&&(t=!1)}}e=Object.getPrototypeOf(e)}!function n1(n){let e=0,t=null;for(let r=n.length-1;r>=0;r--){const i=n[r];i.hostVars=e+=i.hostVars,i.hostAttrs=xu(i.hostAttrs,t=xu(t,i.hostAttrs))}}(r)}function xp(n){return n===ss?{}:n===qe?[]:n}function r1(n,e){const t=n.viewQuery;n.viewQuery=t?(r,i)=>{e(r,i),t(r,i)}:e}function o1(n,e){const t=n.contentQueries;n.contentQueries=t?(r,i,o)=>{e(r,i,o),t(r,i,o)}:e}function s1(n,e){const t=n.hostBindings;n.hostBindings=t?(r,i)=>{e(r,i),t(r,i)}:e}let ec=null;function Ro(){if(!ec){const n=st.Symbol;if(n&&n.iterator)ec=n.iterator;else{const e=Object.getOwnPropertyNames(Map.prototype);for(let t=0;t<e.length;++t){const r=e[t];"entries"!==r&&"size"!==r&&Map.prototype[r]===Map.prototype.entries&&(ec=r)}}}return ec}function rl(n){return!!Rp(n)&&(Array.isArray(n)||!(n instanceof Map)&&Ro()in n)}function Rp(n){return null!==n&&("function"==typeof n||"object"==typeof n)}function An(n,e,t){return!Object.is(n[e],t)&&(n[e]=t,!0)}function Hn(n,e,t,r){const i=L();return An(i,hs(),e)&&(ze(),Kr(Ht(),i,n,e,t,r)),Hn}function nc(n,e,t,r,i,o,s,a){const l=L(),u=ze(),c=n+22,d=u.firstCreatePass?function f1(n,e,t,r,i,o,s,a,l){const u=e.consts,c=ws(e,n,4,s||null,zi(u,a));bp(e,t,c,zi(u,l)),Mu(e,c);const d=c.tViews=Qu(2,c,r,i,o,e.directiveRegistry,e.pipeRegistry,null,e.schemas,u);return null!==e.queries&&(e.queries.template(e,c),d.queries=e.queries.embeddedTView(c)),c}(c,u,l,e,t,r,i,o,s):u.data[c];Wr(d,!1);const h=l[11].createComment("");Yu(u,l,h,d),Cn(h,l),Zu(l,l[c]=Gb(h,l,h,d)),Eu(d)&&yp(u,l,d),null!=s&&Ep(l,d,a)}function en(n,e,t){const r=L();return An(r,hs(),e)&&function nr(n,e,t,r,i,o,s,a){const l=ur(e,t);let c,u=e.inputs;!a&&null!=u&&(c=u[r])?(Xb(n,t,c,r,i),yu(e)&&function CN(n,e){const t=Qn(e,n);16&t[2]||(t[2]|=32)}(t,e.index)):3&e.type&&(r=function MN(n){return"class"===n?"className":"for"===n?"htmlFor":"formaction"===n?"formAction":"innerHtml"===n?"innerHTML":"readonly"===n?"readOnly":"tabindex"===n?"tabIndex":n}(r),i=null!=s?s(i,e.value||"",r):i,Gt(o)?o.setProperty(l,r,i):uf(r)||(l.setProperty?l.setProperty(r,i):l[r]=i))}(ze(),Ht(),r,n,e,r[11],t,!1),en}function Op(n,e,t,r,i){const s=i?"class":"style";Xb(n,t,e.inputs[s],s,r)}function Qe(n,e,t,r){const i=L(),o=ze(),s=22+n,a=i[11],l=i[s]=Uf(a,e,function yI(){return Ae.lFrame.currentNamespace}()),u=o.firstCreatePass?function _1(n,e,t,r,i,o,s){const a=e.consts,u=ws(e,n,2,i,zi(a,o));return bp(e,t,u,zi(a,s)),null!==u.attrs&&Ju(u,u.attrs,!1),null!==u.mergedAttrs&&Ju(u,u.mergedAttrs,!0),null!==e.queries&&e.queries.elementStart(e,u),u}(s,o,i,0,e,t,r):o.data[s];Wr(u,!0);const c=u.mergedAttrs;null!==c&&wu(a,l,c);const d=u.classes;null!==d&&zf(a,l,d);const h=u.styles;return null!==h&&GE(a,l,h),64!=(64&u.flags)&&Yu(o,i,l,u),0===function rI(){return Ae.lFrame.elementDepthCount}()&&Cn(l,i),function iI(){Ae.lFrame.elementDepthCount++}(),Eu(u)&&(yp(o,i,u),function Rb(n,e,t){if(Yh(e)){const i=e.directiveEnd;for(let o=e.directiveStart;o<i;o++){const s=n.data[o];s.contentQueries&&s.contentQueries(1,t[o],o)}}}(o,u,i)),null!==r&&Ep(i,u),Qe}function at(){let n=on();ef()?tf():(n=n.parent,Wr(n,!1));const e=n;!function oI(){Ae.lFrame.elementDepthCount--}();const t=ze();return t.firstCreatePass&&(Mu(t,n),Yh(n)&&t.queries.elementEnd(n)),null!=e.classesWithoutHost&&function SI(n){return 0!=(16&n.flags)}(e)&&Op(t,e,L(),e.classesWithoutHost,!0),null!=e.stylesWithoutHost&&function MI(n){return 0!=(32&n.flags)}(e)&&Op(t,e,L(),e.stylesWithoutHost,!1),at}function Ci(n,e,t,r){return Qe(n,e,t,r),at(),Ci}function rc(){return L()}function ic(n){return!!n&&"function"==typeof n.then}const v0=function g0(n){return!!n&&"function"==typeof n.subscribe};function pt(n,e,t,r){const i=L(),o=ze(),s=on();return function E0(n,e,t,r,i,o,s,a){const l=Eu(r),c=n.firstCreatePass&&Yb(n),d=e[8],h=jb(e);let f=!0;if(3&r.type||a){const m=ur(r,e),g=a?a(m):m,b=h.length,y=a?M=>a(Jt(M[r.index])):r.index;if(Gt(t)){let M=null;if(!a&&l&&(M=function g1(n,e,t,r){const i=n.cleanup;if(null!=i)for(let o=0;o<i.length-1;o+=2){const s=i[o];if(s===t&&i[o+1]===r){const a=e[7],l=i[o+2];return a.length>l?a[l]:null}"string"==typeof s&&(o+=2)}return null}(n,e,i,r.index)),null!==M)(M.__ngLastListenerFn__||M).__ngNextListenerFn__=o,M.__ngLastListenerFn__=o,f=!1;else{o=Fp(r,e,d,o,!1);const S=t.listen(g,i,o);h.push(o,S),c&&c.push(i,y,b,b+1)}}else o=Fp(r,e,d,o,!0),g.addEventListener(i,o,s),h.push(o),c&&c.push(i,y,b,s)}else o=Fp(r,e,d,o,!1);const p=r.outputs;let _;if(f&&null!==p&&(_=p[i])){const m=_.length;if(m)for(let g=0;g<m;g+=2){const T=e[_[g]][_[g+1]].subscribe(o),k=h.length;h.push(o,T),c&&c.push(i,r.index,k,-(k+1))}}}(o,i,i[11],s,n,e,!!t,r),pt}function b0(n,e,t,r){try{return!1!==t(r)}catch(i){return Wb(n,i),!1}}function Fp(n,e,t,r,i){return function o(s){if(s===Function)return r;Sp(2&n.flags?Qn(n.index,e):e);let l=b0(e,0,r,s),u=o.__ngNextListenerFn__;for(;u;)l=b0(e,0,u,s)&&l,u=u.__ngNextListenerFn__;return i&&!1===l&&(s.preventDefault(),s.returnValue=!1),l}}function Zi(n=1){return function fI(n){return(Ae.lFrame.contextLView=function pI(n,e){for(;n>0;)e=e[15],n--;return e}(n,Ae.lFrame.contextLView))[8]}(n)}function v1(n,e){let t=null;const r=function SP(n){const e=n.attrs;if(null!=e){const t=e.indexOf(5);if(0==(1&t))return e[t+1]}return null}(n);for(let i=0;i<e.length;i++){const o=e[i];if("*"!==o){if(null===r?zE(n,o,!0):AP(r,o))return i}else t=i}return t}function I0(n,e,t,r,i){const o=n[t+1],s=null===e;let a=r?Ir(o):Si(o),l=!1;for(;0!==a&&(!1===l||s);){const c=n[a+1];b1(n[a],e)&&(l=!0,n[a+1]=r?up(c):ap(c)),a=r?Ir(c):Si(c)}l&&(n[t+1]=r?ap(o):up(o))}function b1(n,e){return null===n||null==e||(Array.isArray(n)?n[1]:n)===e||!(!Array.isArray(n)||"string"!=typeof e)&&bs(n,e)>=0}function Zr(n,e){return function Pr(n,e,t,r){const i=L(),o=ze(),s=function Ei(n){const e=Ae.lFrame,t=e.bindingIndex;return e.bindingIndex=e.bindingIndex+n,t}(2);o.firstUpdatePass&&function V0(n,e,t,r){const i=n.data;if(null===i[t+1]){const o=i[Fn()],s=function U0(n,e){return e>=n.expandoStartIndex}(n,t);(function Y0(n,e){return 0!=(n.flags&(e?16:32))})(o,r)&&null===e&&!s&&(e=!1),e=function R1(n,e,t,r){const i=function rf(n){const e=Ae.lFrame.currentDirectiveIndex;return-1===e?null:n[e]}(n);let o=r?e.residualClasses:e.residualStyles;if(null===i)0===(r?e.classBindings:e.styleBindings)&&(t=ol(t=Up(null,n,e,t,r),e.attrs,r),o=null);else{const s=e.directiveStylingLast;if(-1===s||n[s]!==i)if(t=Up(i,n,e,t,r),null===o){let l=function I1(n,e,t){const r=t?e.classBindings:e.styleBindings;if(0!==Si(r))return n[Ir(r)]}(n,e,r);void 0!==l&&Array.isArray(l)&&(l=Up(null,n,e,l[1],r),l=ol(l,e.attrs,r),function O1(n,e,t,r){n[Ir(t?e.classBindings:e.styleBindings)]=r}(n,e,r,l))}else o=function P1(n,e,t){let r;const i=e.directiveEnd;for(let o=1+e.directiveStylingLast;o<i;o++)r=ol(r,n[o].hostAttrs,t);return ol(r,e.attrs,t)}(n,e,r)}return void 0!==o&&(r?e.residualClasses=o:e.residualStyles=o),t}(i,o,e,r),function y1(n,e,t,r,i,o){let s=o?e.classBindings:e.styleBindings,a=Ir(s),l=Si(s);n[r]=t;let c,u=!1;if(Array.isArray(t)){const d=t;c=d[1],(null===c||bs(d,c)>0)&&(u=!0)}else c=t;if(i)if(0!==l){const h=Ir(n[a+1]);n[r+1]=$u(h,a),0!==h&&(n[h+1]=lp(n[h+1],r)),n[a+1]=function lN(n,e){return 131071&n|e<<17}(n[a+1],r)}else n[r+1]=$u(a,0),0!==a&&(n[a+1]=lp(n[a+1],r)),a=r;else n[r+1]=$u(l,0),0===a?a=r:n[l+1]=lp(n[l+1],r),l=r;u&&(n[r+1]=ap(n[r+1])),I0(n,c,r,!0),I0(n,c,r,!1),function E1(n,e,t,r,i){const o=i?n.residualClasses:n.residualStyles;null!=o&&"string"==typeof e&&bs(o,e)>=0&&(t[r+1]=up(t[r+1]))}(e,c,n,r,o),s=$u(a,l),o?e.classBindings=s:e.styleBindings=s}(i,o,e,t,s,r)}}(o,n,s,r),e!==Ie&&An(i,s,e)&&function H0(n,e,t,r,i,o,s,a){if(!(3&e.type))return;const l=n.data,u=l[a+1];oc(function Eb(n){return 1==(1&n)}(u)?j0(l,e,t,i,Si(u),s):void 0)||(oc(o)||function yb(n){return 2==(2&n)}(u)&&(o=j0(l,null,t,i,a,s)),function yP(n,e,t,r,i){const o=Gt(n);if(e)i?o?n.addClass(t,r):t.classList.add(r):o?n.removeClass(t,r):t.classList.remove(r);else{let s=-1===r.indexOf("-")?void 0:tr.DashCase;if(null==i)o?n.removeStyle(t,r,s):t.style.removeProperty(r);else{const a="string"==typeof i&&i.endsWith("!important");a&&(i=i.slice(0,-10),s|=tr.Important),o?n.setStyle(t,r,i,s):t.style.setProperty(r,i,a?"important":"")}}}(r,s,bu(Fn(),t),i,o))}(o,o.data[Fn()],i,i[11],n,i[s+1]=function L1(n,e){return null==n||("string"==typeof e?n+=e:"object"==typeof n&&(n=ht(er(n)))),n}(e,t),r,s)}(n,e,null,!0),Zr}function Up(n,e,t,r,i){let o=null;const s=t.directiveEnd;let a=t.directiveStylingLast;for(-1===a?a=t.directiveStart:a++;a<s&&(o=e[a],r=ol(r,o.hostAttrs,i),o!==n);)a++;return null!==n&&(t.directiveStylingLast=a),r}function ol(n,e,t){const r=t?1:2;let i=-1;if(null!==e)for(let o=0;o<e.length;o++){const s=e[o];"number"==typeof s?i=s:i===r&&(Array.isArray(n)||(n=void 0===n?[]:["",n]),Jn(n,s,!!t||e[++o]))}return void 0===n?null:n}function j0(n,e,t,r,i,o){const s=null===e;let a;for(;i>0;){const l=n[i],u=Array.isArray(l),c=u?l[1]:l,d=null===c;let h=t[i+1];h===Ie&&(h=d?qe:void 0);let f=d?mf(h,r):c===r?h:void 0;if(u&&!oc(f)&&(f=mf(l,r)),oc(f)&&(a=f,s))return a;const p=n[i+1];i=s?Ir(p):Si(p)}if(null!==e){let l=o?e.residualClasses:e.residualStyles;null!=l&&(a=mf(l,r))}return a}function oc(n){return void 0!==n}function jn(n,e=""){const t=L(),r=ze(),i=n+22,o=r.firstCreatePass?ws(r,i,1,e,null):r.data[i],s=t[i]=function kf(n,e){return Gt(n)?n.createText(e):n.createTextNode(e)}(t[11],e);Yu(r,t,s,o),Wr(o,!1)}function Gs(n,e,t){const r=L(),i=function Os(n,e,t,r){return An(n,hs(),t)?e+Re(t)+r:Ie}(r,n,e,t);return i!==Ie&&Mi(r,Fn(),i),Gs}const js="en-US";let dT=js;function jp(n,e,t,r,i){if(n=Se(n),Array.isArray(n))for(let o=0;o<n.length;o++)jp(n[o],e,t,r,i);else{const o=ze(),s=L();let a=xo(n)?n:Se(n.provide),l=ob(n);const u=on(),c=1048575&u.providerIndexes,d=u.directiveStart,h=u.providerIndexes>>20;if(xo(n)||!n.multi){const f=new Na(l,i,F),p=zp(a,e,i?c:c+h,d);-1===p?(Ou(La(u,s),o,a),Yp(o,n,e.length),e.push(a),u.directiveStart++,u.directiveEnd++,i&&(u.providerIndexes+=1048576),t.push(f),s.push(f)):(t[p]=f,s[p]=f)}else{const f=zp(a,e,c+h,d),p=zp(a,e,c,c+h),_=f>=0&&t[f],m=p>=0&&t[p];if(i&&!m||!i&&!_){Ou(La(u,s),o,a);const g=function eL(n,e,t,r,i){const o=new Na(n,t,F);return o.multi=[],o.index=e,o.componentProviders=0,LT(o,i,r&&!t),o}(i?JF:ZF,t.length,i,r,l);!i&&m&&(t[p].providerFactory=g),Yp(o,n,e.length,0),e.push(a),u.directiveStart++,u.directiveEnd++,i&&(u.providerIndexes+=1048576),t.push(g),s.push(g)}else Yp(o,n,f>-1?f:p,LT(t[i?p:f],l,!i&&r));!i&&r&&m&&t[p].componentProviders++}}}function Yp(n,e,t,r){const i=xo(e),o=function kP(n){return!!n.useClass}(e);if(i||o){const l=(o?Se(e.useClass):e).prototype.ngOnDestroy;if(l){const u=n.destroyHooks||(n.destroyHooks=[]);if(!i&&e.multi){const c=u.indexOf(t);-1===c?u.push(t,[r,l]):u[c+1].push(r,l)}else u.push(t,l)}}}function LT(n,e,t){return t&&n.componentProviders++,n.multi.push(e)-1}function zp(n,e,t,r){for(let i=t;i<r;i++)if(e[i]===n)return i;return-1}function ZF(n,e,t,r){return Wp(this.multi,[])}function JF(n,e,t,r){const i=this.multi;let o;if(this.providerFactory){const s=this.providerFactory.componentProviders,a=Ba(t,t[1],this.providerFactory.index,r);o=a.slice(0,s),Wp(i,o);for(let l=s;l<a.length;l++)o.push(a[l])}else o=[],Wp(i,o);return o}function Wp(n,e){for(let t=0;t<n.length;t++)e.push((0,n[t])());return e}function lt(n,e=[]){return t=>{t.providersResolver=(r,i)=>function QF(n,e,t){const r=ze();if(r.firstCreatePass){const i=xr(n);jp(t,r.data,r.blueprint,i,!0),jp(e,r.data,r.blueprint,i,!1)}}(r,i?i(n):n,e)}}class nL{resolveComponentFactory(e){throw function tL(n){const e=Error(`No component factory found for ${ht(n)}. Did you add it to @NgModule.entryComponents?`);return e.ngComponent=n,e}(e)}}let dc=(()=>{class n{}return n.NULL=new nL,n})();class Po{}class kT{}function oL(){return zs(on(),L())}function zs(n,e){return new fn(ur(n,e))}let fn=(()=>{class n{constructor(t){this.nativeElement=t}}return n.__NG_ELEMENT_ID__=oL,n})();function sL(n){return n instanceof fn?n.nativeElement:n}class cl{}let No=(()=>{class n{}return n.__NG_ELEMENT_ID__=()=>function lL(){const n=L(),t=Qn(on().index,n);return function aL(n){return n[11]}(Gn(t)?t:n)}(),n})(),uL=(()=>{class n{}return n.\u0275prov=Ce({token:n,providedIn:"root",factory:()=>null}),n})();class Ws{constructor(e){this.full=e,this.major=e.split(".")[0],this.minor=e.split(".")[1],this.patch=e.split(".").slice(2).join(".")}}const cL=new Ws("14.0.2"),Xp={};function hc(n,e,t,r,i=!1){for(;null!==t;){const o=e[t.index];if(null!==o&&r.push(Jt(o)),wr(o))for(let a=10;a<o.length;a++){const l=o[a],u=l[1].firstChild;null!==u&&hc(l[1],l,u,r)}const s=t.type;if(8&s)hc(n,e,t.child,r);else if(32&s){const a=Ff(t,e);let l;for(;l=a();)r.push(l)}else if(16&s){const a=kE(e,t);if(Array.isArray(a))r.push(...a);else{const l=Za(e[16]);hc(l[1],l,a,r,!0)}}t=i?t.projectionNext:t.next}return r}class dl{constructor(e,t){this._lView=e,this._cdRefInjectingView=t,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const e=this._lView,t=e[1];return hc(t,e,t.firstChild,[])}get context(){return this._lView[8]}set context(e){this._lView[8]=e}get destroyed(){return 128==(128&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const e=this._lView[3];if(wr(e)){const t=e[8],r=t?t.indexOf(this):-1;r>-1&&(Vf(e,r),Nu(t,r))}this._attachedToViewContainer=!1}wE(this._lView[1],this._lView)}onDestroy(e){Nb(this._lView[1],this._lView,null,e)}markForCheck(){Sp(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-65}reattach(){this._lView[2]|=64}detectChanges(){!function Cp(n,e,t){const r=e[10];r.begin&&r.begin();try{Rs(n,e,n.template,t)}catch(i){throw Wb(e,i),i}finally{r.end&&r.end()}}(this._lView[1],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new z(902,"");this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function uP(n,e){Ja(n,e,e[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new z(902,"");this._appRef=e}}class dL extends dl{constructor(e){super(e),this._view=e}detectChanges(){Hb(this._view)}checkNoChanges(){}get context(){return null}}class $p extends dc{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){const t=ft(e);return new qp(t,this.ngModule)}}function UT(n){const e=[];for(let t in n)n.hasOwnProperty(t)&&e.push({propName:n[t],templateName:t});return e}class fL{constructor(e,t){this.injector=e,this.parentInjector=t}get(e,t,r){const i=this.injector.get(e,Xp,r);return i!==Xp||t===Xp?i:this.parentInjector.get(e,t,r)}}class qp extends kT{constructor(e,t){super(),this.componentDef=e,this.ngModule=t,this.componentType=e.type,this.selector=function xP(n){return n.map(wP).join(",")}(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!t}get inputs(){return UT(this.componentDef.inputs)}get outputs(){return UT(this.componentDef.outputs)}create(e,t,r,i){let o=(i=i||this.ngModule)instanceof el?i:null==i?void 0:i.injector;o&&null!==this.componentDef.getStandaloneInjector&&(o=this.componentDef.getStandaloneInjector(o)||o);const s=o?new fL(e,o):e,a=s.get(cl,_y),l=s.get(uL,null),u=a.createRenderer(null,this.componentDef),c=this.componentDef.selectors[0][0]||"div",d=r?function Pb(n,e,t){if(Gt(n))return n.selectRootElement(e,t===Cr.ShadowDom);let r="string"==typeof e?n.querySelector(e):e;return r.textContent="",r}(u,r,this.componentDef.encapsulation):Uf(a.createRenderer(null,this.componentDef),c,function hL(n){const e=n.toLowerCase();return"svg"===e?"svg":"math"===e?"math":null}(c)),h=this.componentDef.onPush?288:272,f=function o0(n,e){return{components:[],scheduler:n||eP,clean:YN,playerHandler:e||null,flags:0}}(),p=Qu(0,null,null,1,0,null,null,null,null,null),_=tl(null,p,f,h,null,null,a,u,l,s,null);let m,g;Du(_);try{const b=function n0(n,e,t,r,i,o){const s=t[1];t[22]=n;const l=ws(s,22,2,"#host",null),u=l.mergedAttrs=e.hostAttrs;null!==u&&(Ju(l,u,!0),null!==n&&(wu(i,n,u),null!==l.classes&&zf(i,n,l.classes),null!==l.styles&&GE(i,n,l.styles)));const c=r.createRenderer(n,e),d=tl(t,Ib(e),null,e.onPush?32:16,t[22],l,r,c,o||null,null,null);return s.firstCreatePass&&(Ou(La(l,t),s,e.type),kb(s,l),Ub(l,t.length,1)),Zu(t,d),t[22]=d}(d,this.componentDef,_,a,u);if(d)if(r)wu(u,d,["ng-version",cL.full]);else{const{attrs:y,classes:M}=function RP(n){const e=[],t=[];let r=1,i=2;for(;r<n.length;){let o=n[r];if("string"==typeof o)2===i?""!==o&&e.push(o,n[++r]):8===i&&t.push(o);else{if(!Rr(i))break;i=o}r++}return{attrs:e,classes:t}}(this.componentDef.selectors[0]);y&&wu(u,d,y),M&&M.length>0&&zf(u,d,M.join(" "))}if(g=Qh(p,22),void 0!==t){const y=g.projection=[];for(let M=0;M<this.ngContentSelectors.length;M++){const S=t[M];y.push(null!=S?Array.from(S):null)}}m=function r0(n,e,t,r,i){const o=t[1],s=function wN(n,e,t){const r=on();n.firstCreatePass&&(t.providersResolver&&t.providersResolver(t),Vb(n,r,e,xs(n,e,1,null),t));const i=Ba(e,n,r.directiveStart,r);Cn(i,e);const o=ur(r,e);return o&&Cn(o,e),i}(o,t,e);if(r.components.push(s),n[8]=s,null!==i)for(const l of i)l(s,e);if(e.contentQueries){const l=on();e.contentQueries(1,s,l.directiveStart)}const a=on();return!o.firstCreatePass||null===e.hostBindings&&null===e.hostAttrs||($i(a.index),Lb(t[1],a,0,a.directiveStart,a.directiveEnd,e),Bb(e,s)),s}(b,this.componentDef,_,f,[t1]),nl(p,_,null)}finally{Su()}return new _L(this.componentType,m,zs(g,_),_,g)}}class _L extends class iL{}{constructor(e,t,r,i,o){super(),this.location=r,this._rootLView=i,this._tNode=o,this.instance=t,this.hostView=this.changeDetectorRef=new dL(i),this.componentType=e}get injector(){return new _s(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}}class VT extends Po{constructor(e,t){super(),this._parent=t,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new $p(this);const r=function qn(n,e){const t=n[sy]||null;if(!t&&!0===e)throw new Error(`Type ${ht(n)} does not have '\u0275mod' property.`);return t}(e);this._bootstrapComponents=function Di(n){return n instanceof Function?n():n}(r.bootstrap),this._r3Injector=ab(e,t,[{provide:Po,useValue:this},{provide:dc,useValue:this.componentFactoryResolver}],ht(e),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this.get(e)}get(e,t=cr.THROW_IF_NOT_FOUND,r=Me.Default){return e===cr||e===Po||e===$f?this:this._r3Injector.get(e,t,r)}destroy(){const e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}}class Kp extends class rL{}{constructor(e){super(),this.moduleType=e}create(e){return new VT(this.moduleType,e)}}function jT(n,e,t,r,i){return function zT(n,e,t,r,i,o,s){const a=e+t;return function Io(n,e,t,r){const i=An(n,e,t);return An(n,e+1,r)||i}(n,a,i,o)?function Qr(n,e,t){return n[e]=t}(n,a+2,s?r.call(s,i,o):r(i,o)):function hl(n,e){const t=n[e];return t===Ie?void 0:t}(n,a+2)}(L(),function Nn(){const n=Ae.lFrame;let e=n.bindingRootIndex;return-1===e&&(e=n.bindingRootIndex=n.tView.bindingStartIndex),e}(),n,e,t,r,i)}function Qp(n){return e=>{setTimeout(n,void 0,e)}}const rt=class LL extends O{constructor(e=!1){super(),this.__isAsync=e}emit(e){super.next(e)}subscribe(e,t,r){var i,o,s;let a=e,l=t||(()=>null),u=r;if(e&&"object"==typeof e){const d=e;a=null===(i=d.next)||void 0===i?void 0:i.bind(d),l=null===(o=d.error)||void 0===o?void 0:o.bind(d),u=null===(s=d.complete)||void 0===s?void 0:s.bind(d)}this.__isAsync&&(l=Qp(l),a&&(a=Qp(a)),u&&(u=Qp(u)));const c=super.subscribe({next:a,error:l,complete:u});return e instanceof ae&&e.add(c),c}};function BL(){return this._results[Ro()]()}class Zp{constructor(e=!1){this._emitDistinctChangesOnly=e,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const t=Ro(),r=Zp.prototype;r[t]||(r[t]=BL)}get changes(){return this._changes||(this._changes=new rt)}get(e){return this._results[e]}map(e){return this._results.map(e)}filter(e){return this._results.filter(e)}find(e){return this._results.find(e)}reduce(e,t){return this._results.reduce(e,t)}forEach(e){this._results.forEach(e)}some(e){return this._results.some(e)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(e,t){const r=this;r.dirty=!1;const i=Zn(e);(this._changesDetected=!function FI(n,e,t){if(n.length!==e.length)return!1;for(let r=0;r<n.length;r++){let i=n[r],o=e[r];if(t&&(i=t(i),o=t(o)),o!==i)return!1}return!0}(r._results,i,t))&&(r._results=i,r.length=i.length,r.last=i[this.length-1],r.first=i[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}let Ai=(()=>{class n{}return n.__NG_ELEMENT_ID__=VL,n})();const kL=Ai,UL=class extends kL{constructor(e,t,r){super(),this._declarationLView=e,this._declarationTContainer=t,this.elementRef=r}createEmbeddedView(e,t){const r=this._declarationTContainer.tViews,i=tl(this._declarationLView,r,e,16,null,r.declTNode,null,null,null,null,t||null);i[17]=this._declarationLView[this._declarationTContainer.index];const s=this._declarationLView[19];return null!==s&&(i[19]=s.createEmbeddedView(r)),nl(r,i,e),new dl(i)}};function VL(){return fc(on(),L())}function fc(n,e){return 4&n.type?new UL(e,n,zs(n,e)):null}let Fr=(()=>{class n{}return n.__NG_ELEMENT_ID__=GL,n})();function GL(){return QT(on(),L())}const HL=Fr,qT=class extends HL{constructor(e,t,r){super(),this._lContainer=e,this._hostTNode=t,this._hostLView=r}get element(){return zs(this._hostTNode,this._hostLView)}get injector(){return new _s(this._hostTNode,this._hostLView)}get parentInjector(){const e=Iu(this._hostTNode,this._hostLView);if(Oy(e)){const t=ps(e,this._hostLView),r=fs(e);return new _s(t[1].data[r+8],t)}return new _s(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){const t=KT(this._lContainer);return null!==t&&t[e]||null}get length(){return this._lContainer.length-10}createEmbeddedView(e,t,r){let i,o;"number"==typeof r?i=r:null!=r&&(i=r.index,o=r.injector);const s=e.createEmbeddedView(t||{},o);return this.insert(s,i),s}createComponent(e,t,r,i,o){const s=e&&!function Ua(n){return"function"==typeof n}(e);let a;if(s)a=t;else{const d=t||{};a=d.index,r=d.injector,i=d.projectableNodes,o=d.environmentInjector||d.ngModuleRef}const l=s?e:new qp(ft(e)),u=r||this.parentInjector;if(!o&&null==l.ngModule){const h=(s?u:this.parentInjector).get(el,null);h&&(o=h)}const c=l.create(u,i,void 0,o);return this.insert(c.hostView,a),c}insert(e,t){const r=e._lView,i=r[1];if(function nI(n){return wr(n[3])}(r)){const c=this.indexOf(e);if(-1!==c)this.detach(c);else{const d=r[3],h=new qT(d,d[6],d[3]);h.detach(h.indexOf(e))}}const o=this._adjustIndex(t),s=this._lContainer;!function dP(n,e,t,r){const i=10+r,o=t.length;r>0&&(t[i-1][4]=e),r<o-10?(e[4]=t[i],jy(t,10+r,e)):(t.push(e),e[4]=null),e[3]=t;const s=e[17];null!==s&&t!==s&&function hP(n,e){const t=n[9];e[16]!==e[3][3][16]&&(n[2]=!0),null===t?n[9]=[e]:t.push(e)}(s,e);const a=e[19];null!==a&&a.insertView(n),e[2]|=64}(i,r,s,o);const a=jf(o,s),l=r[11],u=ju(l,s[7]);return null!==u&&function lP(n,e,t,r,i,o){r[0]=i,r[6]=e,Ja(n,r,t,1,i,o)}(i,s[6],l,r,u,a),e.attachToViewContainerRef(),jy(Jp(s),o,e),e}move(e,t){return this.insert(e,t)}indexOf(e){const t=KT(this._lContainer);return null!==t?t.indexOf(e):-1}remove(e){const t=this._adjustIndex(e,-1),r=Vf(this._lContainer,t);r&&(Nu(Jp(this._lContainer),t),wE(r[1],r))}detach(e){const t=this._adjustIndex(e,-1),r=Vf(this._lContainer,t);return r&&null!=Nu(Jp(this._lContainer),t)?new dl(r):null}_adjustIndex(e,t=0){return null==e?this.length+t:e}};function KT(n){return n[8]}function Jp(n){return n[8]||(n[8]=[])}function QT(n,e){let t;const r=e[n.index];if(wr(r))t=r;else{let i;if(8&n.type)i=Jt(r);else{const o=e[11];i=o.createComment("");const s=ur(n,e);wo(o,ju(o,s),i,function mP(n,e){return Gt(n)?n.nextSibling(e):e.nextSibling}(o,s),!1)}e[n.index]=t=Gb(r,e,i,n),Zu(e,t)}return new qT(t,n,e)}class e_{constructor(e){this.queryList=e,this.matches=null}clone(){return new e_(this.queryList)}setDirty(){this.queryList.setDirty()}}class t_{constructor(e=[]){this.queries=e}createEmbeddedView(e){const t=e.queries;if(null!==t){const r=null!==e.contentQueries?e.contentQueries[0]:t.length,i=[];for(let o=0;o<r;o++){const s=t.getByIndex(o);i.push(this.queries[s.indexInDeclarationView].clone())}return new t_(i)}return null}insertView(e){this.dirtyQueriesWithMatches(e)}detachView(e){this.dirtyQueriesWithMatches(e)}dirtyQueriesWithMatches(e){for(let t=0;t<this.queries.length;t++)null!==nD(e,t).matches&&this.queries[t].setDirty()}}class ZT{constructor(e,t,r=null){this.predicate=e,this.flags=t,this.read=r}}class n_{constructor(e=[]){this.queries=e}elementStart(e,t){for(let r=0;r<this.queries.length;r++)this.queries[r].elementStart(e,t)}elementEnd(e){for(let t=0;t<this.queries.length;t++)this.queries[t].elementEnd(e)}embeddedTView(e){let t=null;for(let r=0;r<this.length;r++){const i=null!==t?t.length:0,o=this.getByIndex(r).embeddedTView(e,i);o&&(o.indexInDeclarationView=r,null!==t?t.push(o):t=[o])}return null!==t?new n_(t):null}template(e,t){for(let r=0;r<this.queries.length;r++)this.queries[r].template(e,t)}getByIndex(e){return this.queries[e]}get length(){return this.queries.length}track(e){this.queries.push(e)}}class r_{constructor(e,t=-1){this.metadata=e,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=t}elementStart(e,t){this.isApplyingToNode(t)&&this.matchTNode(e,t)}elementEnd(e){this._declarationNodeIndex===e.index&&(this._appliesToNextNode=!1)}template(e,t){this.elementStart(e,t)}embeddedTView(e,t){return this.isApplyingToNode(e)?(this.crossesNgTemplate=!0,this.addMatch(-e.index,t),new r_(this.metadata)):null}isApplyingToNode(e){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const t=this._declarationNodeIndex;let r=e.parent;for(;null!==r&&8&r.type&&r.index!==t;)r=r.parent;return t===(null!==r?r.index:-1)}return this._appliesToNextNode}matchTNode(e,t){const r=this.metadata.predicate;if(Array.isArray(r))for(let i=0;i<r.length;i++){const o=r[i];this.matchTNodeWithReadOption(e,t,zL(t,o)),this.matchTNodeWithReadOption(e,t,Pu(t,e,o,!1,!1))}else r===Ai?4&t.type&&this.matchTNodeWithReadOption(e,t,-1):this.matchTNodeWithReadOption(e,t,Pu(t,e,r,!1,!1))}matchTNodeWithReadOption(e,t,r){if(null!==r){const i=this.metadata.read;if(null!==i)if(i===fn||i===Fr||i===Ai&&4&t.type)this.addMatch(t.index,-2);else{const o=Pu(t,e,i,!1,!1);null!==o&&this.addMatch(t.index,o)}else this.addMatch(t.index,r)}}addMatch(e,t){null===this.matches?this.matches=[e,t]:this.matches.push(e,t)}}function zL(n,e){const t=n.localNames;if(null!==t)for(let r=0;r<t.length;r+=2)if(t[r]===e)return t[r+1];return null}function XL(n,e,t,r){return-1===t?function WL(n,e){return 11&n.type?zs(n,e):4&n.type?fc(n,e):null}(e,n):-2===t?function $L(n,e,t){return t===fn?zs(e,n):t===Ai?fc(e,n):t===Fr?QT(e,n):void 0}(n,e,r):Ba(n,n[1],t,e)}function JT(n,e,t,r){const i=e[19].queries[r];if(null===i.matches){const o=n.data,s=t.matches,a=[];for(let l=0;l<s.length;l+=2){const u=s[l];a.push(u<0?null:XL(e,o[u],s[l+1],t.metadata.read))}i.matches=a}return i.matches}function i_(n,e,t,r){const i=n.queries.getByIndex(t),o=i.matches;if(null!==o){const s=JT(n,e,i,t);for(let a=0;a<o.length;a+=2){const l=o[a];if(l>0)r.push(s[a/2]);else{const u=o[a+1],c=e[-l];for(let d=10;d<c.length;d++){const h=c[d];h[17]===h[3]&&i_(h[1],h,u,r)}if(null!==c[9]){const d=c[9];for(let h=0;h<d.length;h++){const f=d[h];i_(f[1],f,u,r)}}}}}return r}function Xs(n){const e=L(),t=ze(),r=Dy();sf(r+1);const i=nD(t,r);if(n.dirty&&my(e)===(2==(2&i.metadata.flags))){if(null===i.matches)n.reset([]);else{const o=i.crossesNgTemplate?i_(t,e,r,[]):JT(t,e,i,r);n.reset(o,sL),n.notifyOnChanges()}return!0}return!1}function pc(n,e,t,r){const i=ze();if(i.firstCreatePass){const o=on();(function tD(n,e,t){null===n.queries&&(n.queries=new n_),n.queries.track(new r_(e,t))})(i,new ZT(e,t,r),o.index),function KL(n,e){const t=n.contentQueries||(n.contentQueries=[]);e!==(t.length?t[t.length-1]:-1)&&t.push(n.queries.length-1,e)}(i,n),2==(2&t)&&(i.staticContentQueries=!0)}!function eD(n,e,t){const r=new Zp(4==(4&t));Nb(n,e,r,r.destroy),null===e[19]&&(e[19]=new t_),e[19].queries.push(new e_(r))}(i,L(),t)}function $s(){return function qL(n,e){return n[19].queries[e].queryList}(L(),Dy())}function nD(n,e){return n.queries.getByIndex(e)}function mc(...n){}const bD=new j("Application Initializer");let gc=(()=>{class n{constructor(t){this.appInits=t,this.resolve=mc,this.reject=mc,this.initialized=!1,this.done=!1,this.donePromise=new Promise((r,i)=>{this.resolve=r,this.reject=i})}runInitializers(){if(this.initialized)return;const t=[],r=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let i=0;i<this.appInits.length;i++){const o=this.appInits[i]();if(ic(o))t.push(o);else if(v0(o)){const s=new Promise((a,l)=>{o.subscribe({complete:a,error:l})});t.push(s)}}Promise.all(t).then(()=>{r()}).catch(i=>{this.reject(i)}),0===t.length&&r(),this.initialized=!0}}return n.\u0275fac=function(t){return new(t||n)(Y(bD,8))},n.\u0275prov=Ce({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const ml=new j("AppId",{providedIn:"root",factory:function TD(){return`${c_()}${c_()}${c_()}`}});function c_(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const DD=new j("Platform Initializer"),d_=new j("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),gB=new j("appBootstrapListener"),gl=new j("AnimationModuleType"),ti=new j("LocaleId",{providedIn:"root",factory:()=>ja(ti,Me.Optional|Me.SkipSelf)||function vB(){return"undefined"!=typeof $localize&&$localize.locale||js}()}),TB=(()=>Promise.resolve(0))();function h_(n){"undefined"==typeof Zone?TB.then(()=>{n&&n.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",n)}class it{constructor({enableLongStackTrace:e=!1,shouldCoalesceEventChangeDetection:t=!1,shouldCoalesceRunChangeDetection:r=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new rt(!1),this.onMicrotaskEmpty=new rt(!1),this.onStable=new rt(!1),this.onError=new rt(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const i=this;i._nesting=0,i._outer=i._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(i._inner=i._inner.fork(new Zone.TaskTrackingZoneSpec)),e&&Zone.longStackTraceZoneSpec&&(i._inner=i._inner.fork(Zone.longStackTraceZoneSpec)),i.shouldCoalesceEventChangeDetection=!r&&t,i.shouldCoalesceRunChangeDetection=r,i.lastRequestAnimationFrameId=-1,i.nativeRequestAnimationFrame=function DB(){let n=st.requestAnimationFrame,e=st.cancelAnimationFrame;if("undefined"!=typeof Zone&&n&&e){const t=n[Zone.__symbol__("OriginalDelegate")];t&&(n=t);const r=e[Zone.__symbol__("OriginalDelegate")];r&&(e=r)}return{nativeRequestAnimationFrame:n,nativeCancelAnimationFrame:e}}().nativeRequestAnimationFrame,function CB(n){const e=()=>{!function MB(n){n.isCheckStableRunning||-1!==n.lastRequestAnimationFrameId||(n.lastRequestAnimationFrameId=n.nativeRequestAnimationFrame.call(st,()=>{n.fakeTopEventTask||(n.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{n.lastRequestAnimationFrameId=-1,p_(n),n.isCheckStableRunning=!0,f_(n),n.isCheckStableRunning=!1},void 0,()=>{},()=>{})),n.fakeTopEventTask.invoke()}),p_(n))}(n)};n._inner=n._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(t,r,i,o,s,a)=>{try{return SD(n),t.invokeTask(i,o,s,a)}finally{(n.shouldCoalesceEventChangeDetection&&"eventTask"===o.type||n.shouldCoalesceRunChangeDetection)&&e(),MD(n)}},onInvoke:(t,r,i,o,s,a,l)=>{try{return SD(n),t.invoke(i,o,s,a,l)}finally{n.shouldCoalesceRunChangeDetection&&e(),MD(n)}},onHasTask:(t,r,i,o)=>{t.hasTask(i,o),r===i&&("microTask"==o.change?(n._hasPendingMicrotasks=o.microTask,p_(n),f_(n)):"macroTask"==o.change&&(n.hasPendingMacrotasks=o.macroTask))},onHandleError:(t,r,i,o)=>(t.handleError(i,o),n.runOutsideAngular(()=>n.onError.emit(o)),!1)})}(i)}static isInAngularZone(){return"undefined"!=typeof Zone&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!it.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(it.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(e,t,r){return this._inner.run(e,t,r)}runTask(e,t,r,i){const o=this._inner,s=o.scheduleEventTask("NgZoneEvent: "+i,e,SB,mc,mc);try{return o.runTask(s,t,r)}finally{o.cancelTask(s)}}runGuarded(e,t,r){return this._inner.runGuarded(e,t,r)}runOutsideAngular(e){return this._outer.run(e)}}const SB={};function f_(n){if(0==n._nesting&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function p_(n){n.hasPendingMicrotasks=!!(n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&-1!==n.lastRequestAnimationFrameId)}function SD(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function MD(n){n._nesting--,f_(n)}class AB{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new rt,this.onMicrotaskEmpty=new rt,this.onStable=new rt,this.onError=new rt}run(e,t,r){return e.apply(t,r)}runGuarded(e,t,r){return e.apply(t,r)}runOutsideAngular(e){return e()}runTask(e,t,r,i){return e.apply(t,r)}}const CD=new j(""),vc=new j("");let vl,__=(()=>{class n{constructor(t,r,i){this._ngZone=t,this.registry=r,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,vl||(function wB(n){vl=n}(i),i.addToWindow(r)),this._watchAngularEvents(),t.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{it.assertNotInAngularZone(),h_(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())h_(()=>{for(;0!==this._callbacks.length;){let t=this._callbacks.pop();clearTimeout(t.timeoutId),t.doneCb(this._didWork)}this._didWork=!1});else{let t=this.getPendingTasks();this._callbacks=this._callbacks.filter(r=>!r.updateCb||!r.updateCb(t)||(clearTimeout(r.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(t=>({source:t.source,creationLocation:t.creationLocation,data:t.data})):[]}addCallback(t,r,i){let o=-1;r&&r>0&&(o=setTimeout(()=>{this._callbacks=this._callbacks.filter(s=>s.timeoutId!==o),t(this._didWork,this.getPendingTasks())},r)),this._callbacks.push({doneCb:t,timeoutId:o,updateCb:i})}whenStable(t,r,i){if(i&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(t,r,i),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(t){this.registry.registerApplication(t,this)}unregisterApplication(t){this.registry.unregisterApplication(t)}findProviders(t,r,i){return[]}}return n.\u0275fac=function(t){return new(t||n)(Y(it),Y(m_),Y(vc))},n.\u0275prov=Ce({token:n,factory:n.\u0275fac}),n})(),m_=(()=>{class n{constructor(){this._applications=new Map}registerApplication(t,r){this._applications.set(t,r)}unregisterApplication(t){this._applications.delete(t)}unregisterAllApplications(){this._applications.clear()}getTestability(t){return this._applications.get(t)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(t,r=!0){var i;return null!==(i=null==vl?void 0:vl.findTestabilityInTree(this,t,r))&&void 0!==i?i:null}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=Ce({token:n,factory:n.\u0275fac,providedIn:"platform"}),n})(),ni=null;const AD=new j("AllowMultipleToken"),wD=new j("PlatformOnDestroy");function RD(n,e,t=[]){const r=`Platform: ${e}`,i=new j(r);return(o=[])=>{let s=g_();if(!s||s.injector.get(AD,!1)){const a=[...t,...o,{provide:i,useValue:!0}];n?n(a):function IB(n){if(ni&&!ni.get(AD,!1))throw new z(400,"");ni=n;const e=n.get(OD);(function xD(n){const e=n.get(DD,null);e&&e.forEach(t=>t())})(n)}(function ID(n=[],e){return cr.create({name:e,providers:[{provide:qf,useValue:"platform"},{provide:wD,useValue:()=>ni=null},...n]})}(a,r))}return function PB(n){const e=g_();if(!e)throw new z(401,"");return e}()}}function g_(){var n;return null!==(n=null==ni?void 0:ni.get(OD))&&void 0!==n?n:null}let OD=(()=>{class n{constructor(t){this._injector=t,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(t,r){const i=function NB(n,e){let t;return t="noop"===n?new AB:("zone.js"===n?void 0:n)||new it(e),t}(null==r?void 0:r.ngZone,function PD(n){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!(!n||!n.ngZoneEventCoalescing)||!1,shouldCoalesceRunChangeDetection:!(!n||!n.ngZoneRunCoalescing)||!1}}(r)),o=[{provide:it,useValue:i}];return i.run(()=>{const s=cr.create({providers:o,parent:this.injector,name:t.moduleType.name}),a=t.create(s),l=a.injector.get(Ti,null);if(!l)throw new z(402,"");return i.runOutsideAngular(()=>{const u=i.onError.subscribe({next:c=>{l.handleError(c)}});a.onDestroy(()=>{yc(this._modules,a),u.unsubscribe()})}),function ND(n,e,t){try{const r=t();return ic(r)?r.catch(i=>{throw e.runOutsideAngular(()=>n.handleError(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>n.handleError(r)),r}}(l,i,()=>{const u=a.injector.get(gc);return u.runInitializers(),u.donePromise.then(()=>(function hT(n){$n(n,"Expected localeId to be defined"),"string"==typeof n&&(dT=n.toLowerCase().replace(/_/g,"-"))}(a.injector.get(ti,js)||js),this._moduleDoBootstrap(a),a))})})}bootstrapModule(t,r=[]){const i=FD({},r);return function xB(n,e,t){const r=new Kp(t);return Promise.resolve(r)}(0,0,t).then(o=>this.bootstrapModuleFactory(o,i))}_moduleDoBootstrap(t){const r=t.injector.get(v_);if(t._bootstrapComponents.length>0)t._bootstrapComponents.forEach(i=>r.bootstrap(i));else{if(!t.instance.ngDoBootstrap)throw new z(403,"");t.instance.ngDoBootstrap(r)}this._modules.push(t)}onDestroy(t){this._destroyListeners.push(t)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new z(404,"");this._modules.slice().forEach(r=>r.destroy()),this._destroyListeners.forEach(r=>r());const t=this._injector.get(wD,null);null==t||t(),this._destroyed=!0}get destroyed(){return this._destroyed}}return n.\u0275fac=function(t){return new(t||n)(Y(cr))},n.\u0275prov=Ce({token:n,factory:n.\u0275fac,providedIn:"platform"}),n})();function FD(n,e){return Array.isArray(e)?e.reduce(FD,n):Object.assign(Object.assign({},n),e)}let v_=(()=>{class n{constructor(t,r,i,o){this._zone=t,this._injector=r,this._exceptionHandler=i,this._initStatus=o,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this._destroyed=!1,this._destroyListeners=[],this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const s=new E(l=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{l.next(this._stable),l.complete()})}),a=new E(l=>{let u;this._zone.runOutsideAngular(()=>{u=this._zone.onStable.subscribe(()=>{it.assertNotInAngularZone(),h_(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,l.next(!0))})})});const c=this._zone.onUnstable.subscribe(()=>{it.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{l.next(!1)}))});return()=>{u.unsubscribe(),c.unsubscribe()}});this.isStable=Oh(s,a.pipe(ty()))}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(t,r){const i=t instanceof kT;if(!this._initStatus.done)throw!i&&function _l(n){const e=ft(n)||On(n)||Pn(n);return null!==e&&e.standalone}(t),new z(405,false);let o;o=i?t:this._injector.get(dc).resolveComponentFactory(t),this.componentTypes.push(o.componentType);const s=function RB(n){return n.isBoundToModule}(o)?void 0:this._injector.get(Po),l=o.create(cr.NULL,[],r||o.selector,s),u=l.location.nativeElement,c=l.injector.get(CD,null);return null==c||c.registerApplication(u),l.onDestroy(()=>{this.detachView(l.hostView),yc(this.components,l),null==c||c.unregisterApplication(u)}),this._loadComponent(l),l}tick(){if(this._runningTick)throw new z(101,"");try{this._runningTick=!0;for(let t of this._views)t.detectChanges()}catch(t){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(t))}finally{this._runningTick=!1}}attachView(t){const r=t;this._views.push(r),r.attachToAppRef(this)}detachView(t){const r=t;yc(this._views,r),r.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView),this.tick(),this.components.push(t),this._injector.get(gB,[]).concat(this._bootstrapListeners).forEach(i=>i(t))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(t=>t()),this._views.slice().forEach(t=>t.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(t){return this._destroyListeners.push(t),()=>yc(this._destroyListeners,t)}destroy(){if(this._destroyed)throw new z(406,false);const t=this._injector;t.destroy&&!t.destroyed&&t.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return n.\u0275fac=function(t){return new(t||n)(Y(it),Y(cr),Y(Ti),Y(gc))},n.\u0275prov=Ce({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function yc(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}let BD=!0,yl=(()=>{class n{}return n.__NG_ELEMENT_ID__=BB,n})();function BB(n){return function kB(n,e,t){if(yu(n)&&!t){const r=Qn(n.index,e);return new dl(r,r)}return 47&n.type?new dl(e[16],e):null}(on(),L(),16==(16&n))}class HD{constructor(){}supports(e){return rl(e)}create(e){return new YB(e)}}const jB=(n,e)=>e;class YB{constructor(e){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=e||jB}forEachItem(e){let t;for(t=this._itHead;null!==t;t=t._next)e(t)}forEachOperation(e){let t=this._itHead,r=this._removalsHead,i=0,o=null;for(;t||r;){const s=!r||t&&t.currentIndex<YD(r,i,o)?t:r,a=YD(s,i,o),l=s.currentIndex;if(s===r)i--,r=r._nextRemoved;else if(t=t._next,null==s.previousIndex)i++;else{o||(o=[]);const u=a-i,c=l-i;if(u!=c){for(let h=0;h<u;h++){const f=h<o.length?o[h]:o[h]=0,p=f+h;c<=p&&p<u&&(o[h]=f+1)}o[s.previousIndex]=c-u}}a!==l&&e(s,a,l)}}forEachPreviousItem(e){let t;for(t=this._previousItHead;null!==t;t=t._nextPrevious)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;null!==t;t=t._nextAdded)e(t)}forEachMovedItem(e){let t;for(t=this._movesHead;null!==t;t=t._nextMoved)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;null!==t;t=t._nextRemoved)e(t)}forEachIdentityChange(e){let t;for(t=this._identityChangesHead;null!==t;t=t._nextIdentityChange)e(t)}diff(e){if(null==e&&(e=[]),!rl(e))throw new z(900,"");return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let i,o,s,t=this._itHead,r=!1;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)o=e[a],s=this._trackByFn(a,o),null!==t&&Object.is(t.trackById,s)?(r&&(t=this._verifyReinsertion(t,o,s,a)),Object.is(t.item,o)||this._addIdentityChange(t,o)):(t=this._mismatch(t,o,s,a),r=!0),t=t._next}else i=0,function d1(n,e){if(Array.isArray(n))for(let t=0;t<n.length;t++)e(n[t]);else{const t=n[Ro()]();let r;for(;!(r=t.next()).done;)e(r.value)}}(e,a=>{s=this._trackByFn(i,a),null!==t&&Object.is(t.trackById,s)?(r&&(t=this._verifyReinsertion(t,a,s,i)),Object.is(t.item,a)||this._addIdentityChange(t,a)):(t=this._mismatch(t,a,s,i),r=!0),t=t._next,i++}),this.length=i;return this._truncate(t),this.collection=e,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;null!==e;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;null!==e;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,t,r,i){let o;return null===e?o=this._itTail:(o=e._prev,this._remove(e)),null!==(e=null===this._unlinkedRecords?null:this._unlinkedRecords.get(r,null))?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._reinsertAfter(e,o,i)):null!==(e=null===this._linkedRecords?null:this._linkedRecords.get(r,i))?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._moveAfter(e,o,i)):e=this._addAfter(new zB(t,r),o,i),e}_verifyReinsertion(e,t,r,i){let o=null===this._unlinkedRecords?null:this._unlinkedRecords.get(r,null);return null!==o?e=this._reinsertAfter(o,e._prev,i):e.currentIndex!=i&&(e.currentIndex=i,this._addToMoves(e,i)),e}_truncate(e){for(;null!==e;){const t=e._next;this._addToRemovals(this._unlink(e)),e=t}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,t,r){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(e);const i=e._prevRemoved,o=e._nextRemoved;return null===i?this._removalsHead=o:i._nextRemoved=o,null===o?this._removalsTail=i:o._prevRemoved=i,this._insertAfter(e,t,r),this._addToMoves(e,r),e}_moveAfter(e,t,r){return this._unlink(e),this._insertAfter(e,t,r),this._addToMoves(e,r),e}_addAfter(e,t,r){return this._insertAfter(e,t,r),this._additionsTail=null===this._additionsTail?this._additionsHead=e:this._additionsTail._nextAdded=e,e}_insertAfter(e,t,r){const i=null===t?this._itHead:t._next;return e._next=i,e._prev=t,null===i?this._itTail=e:i._prev=e,null===t?this._itHead=e:t._next=e,null===this._linkedRecords&&(this._linkedRecords=new jD),this._linkedRecords.put(e),e.currentIndex=r,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){null!==this._linkedRecords&&this._linkedRecords.remove(e);const t=e._prev,r=e._next;return null===t?this._itHead=r:t._next=r,null===r?this._itTail=t:r._prev=t,e}_addToMoves(e,t){return e.previousIndex===t||(this._movesTail=null===this._movesTail?this._movesHead=e:this._movesTail._nextMoved=e),e}_addToRemovals(e){return null===this._unlinkedRecords&&(this._unlinkedRecords=new jD),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,t){return e.item=t,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=e:this._identityChangesTail._nextIdentityChange=e,e}}class zB{constructor(e,t){this.item=e,this.trackById=t,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class WB{constructor(){this._head=null,this._tail=null}add(e){null===this._head?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,t){let r;for(r=this._head;null!==r;r=r._nextDup)if((null===t||t<=r.currentIndex)&&Object.is(r.trackById,e))return r;return null}remove(e){const t=e._prevDup,r=e._nextDup;return null===t?this._head=r:t._nextDup=r,null===r?this._tail=t:r._prevDup=t,null===this._head}}class jD{constructor(){this.map=new Map}put(e){const t=e.trackById;let r=this.map.get(t);r||(r=new WB,this.map.set(t,r)),r.add(e)}get(e,t){const i=this.map.get(e);return i?i.get(e,t):null}remove(e){const t=e.trackById;return this.map.get(t).remove(e)&&this.map.delete(t),e}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function YD(n,e,t){const r=n.previousIndex;if(null===r)return r;let i=0;return t&&r<t.length&&(i=t[r]),r+e+i}class zD{constructor(){}supports(e){return e instanceof Map||Rp(e)}create(){return new XB}}class XB{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(e){let t;for(t=this._mapHead;null!==t;t=t._next)e(t)}forEachPreviousItem(e){let t;for(t=this._previousMapHead;null!==t;t=t._nextPrevious)e(t)}forEachChangedItem(e){let t;for(t=this._changesHead;null!==t;t=t._nextChanged)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;null!==t;t=t._nextAdded)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;null!==t;t=t._nextRemoved)e(t)}diff(e){if(e){if(!(e instanceof Map||Rp(e)))throw new z(900,"")}else e=new Map;return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let t=this._mapHead;if(this._appendAfter=null,this._forEach(e,(r,i)=>{if(t&&t.key===i)this._maybeAddToChanges(t,r),this._appendAfter=t,t=t._next;else{const o=this._getOrCreateRecordForKey(i,r);t=this._insertBeforeOrAppend(t,o)}}),t){t._prev&&(t._prev._next=null),this._removalsHead=t;for(let r=t;null!==r;r=r._nextRemoved)r===this._mapHead&&(this._mapHead=null),this._records.delete(r.key),r._nextRemoved=r._next,r.previousValue=r.currentValue,r.currentValue=null,r._prev=null,r._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(e,t){if(e){const r=e._prev;return t._next=e,t._prev=r,e._prev=t,r&&(r._next=t),e===this._mapHead&&(this._mapHead=t),this._appendAfter=e,e}return this._appendAfter?(this._appendAfter._next=t,t._prev=this._appendAfter):this._mapHead=t,this._appendAfter=t,null}_getOrCreateRecordForKey(e,t){if(this._records.has(e)){const i=this._records.get(e);this._maybeAddToChanges(i,t);const o=i._prev,s=i._next;return o&&(o._next=s),s&&(s._prev=o),i._next=null,i._prev=null,i}const r=new $B(e);return this._records.set(e,r),r.currentValue=t,this._addToAdditions(r),r}_reset(){if(this.isDirty){let e;for(this._previousMapHead=this._mapHead,e=this._previousMapHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._changesHead;null!==e;e=e._nextChanged)e.previousValue=e.currentValue;for(e=this._additionsHead;null!=e;e=e._nextAdded)e.previousValue=e.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(e,t){Object.is(t,e.currentValue)||(e.previousValue=e.currentValue,e.currentValue=t,this._addToChanges(e))}_addToAdditions(e){null===this._additionsHead?this._additionsHead=this._additionsTail=e:(this._additionsTail._nextAdded=e,this._additionsTail=e)}_addToChanges(e){null===this._changesHead?this._changesHead=this._changesTail=e:(this._changesTail._nextChanged=e,this._changesTail=e)}_forEach(e,t){e instanceof Map?e.forEach(t):Object.keys(e).forEach(r=>t(e[r],r))}}class $B{constructor(e){this.key=e,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function WD(){return new Tc([new HD])}let Tc=(()=>{class n{constructor(t){this.factories=t}static create(t,r){if(null!=r){const i=r.factories.slice();t=t.concat(i)}return new n(t)}static extend(t){return{provide:n,useFactory:r=>n.create(t,r||WD()),deps:[[n,new za,new Co]]}}find(t){const r=this.factories.find(i=>i.supports(t));if(null!=r)return r;throw new z(901,"")}}return n.\u0275prov=Ce({token:n,providedIn:"root",factory:WD}),n})();function XD(){return new El([new zD])}let El=(()=>{class n{constructor(t){this.factories=t}static create(t,r){if(r){const i=r.factories.slice();t=t.concat(i)}return new n(t)}static extend(t){return{provide:n,useFactory:r=>n.create(t,r||XD()),deps:[[n,new za,new Co]]}}find(t){const r=this.factories.find(o=>o.supports(t));if(r)return r;throw new z(901,"")}}return n.\u0275prov=Ce({token:n,providedIn:"root",factory:XD}),n})();const QB=RD(null,"core",[]);let ZB=(()=>{class n{constructor(t){}}return n.\u0275fac=function(t){return new(t||n)(Y(v_))},n.\u0275mod=At({type:n}),n.\u0275inj=Dt({}),n})();let Dc=null;function Lo(){return Dc}const _t=new j("DocumentToken");class zk{constructor(e,t,r,i){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=i}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let iS=(()=>{class n{constructor(t,r,i){this._viewContainer=t,this._template=r,this._differs=i,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const r=this._viewContainer;t.forEachOperation((i,o,s)=>{if(null==i.previousIndex)r.createEmbeddedView(this._template,new zk(i.item,this._ngForOf,-1,-1),null===s?void 0:s);else if(null==s)r.remove(null===o?void 0:o);else if(null!==o){const a=r.get(o);r.move(a,s),oS(a,i)}});for(let i=0,o=r.length;i<o;i++){const a=r.get(i).context;a.index=i,a.count=o,a.ngForOf=this._ngForOf}t.forEachIdentityChange(i=>{oS(r.get(i.currentIndex),i)})}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(F(Fr),F(Ai),F(Tc))},n.\u0275dir=be({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}}),n})();function oS(n,e){n.context.$implicit=e.item}let sS=(()=>{class n{constructor(t,r){this._viewContainer=t,this._context=new Wk,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){aS("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){aS("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(F(Fr),F(Ai))},n.\u0275dir=be({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}}),n})();class Wk{constructor(){this.$implicit=null,this.ngIf=null}}function aS(n,e){if(e&&!e.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${ht(e)}'.`)}let F_=(()=>{class n{constructor(t,r,i){this._ngEl=t,this._differs=r,this._renderer=i,this._ngStyle=null,this._differ=null}set ngStyle(t){this._ngStyle=t,!this._differ&&t&&(this._differ=this._differs.find(t).create())}ngDoCheck(){if(this._differ){const t=this._differ.diff(this._ngStyle);t&&this._applyChanges(t)}}_setStyle(t,r){const[i,o]=t.split(".");null!=(r=null!=r&&o?`${r}${o}`:r)?this._renderer.setStyle(this._ngEl.nativeElement,i,r):this._renderer.removeStyle(this._ngEl.nativeElement,i)}_applyChanges(t){t.forEachRemovedItem(r=>this._setStyle(r.key,null)),t.forEachAddedItem(r=>this._setStyle(r.key,r.currentValue)),t.forEachChangedItem(r=>this._setStyle(r.key,r.currentValue))}}return n.\u0275fac=function(t){return new(t||n)(F(fn),F(El),F(No))},n.\u0275dir=be({type:n,selectors:[["","ngStyle",""]],inputs:{ngStyle:"ngStyle"}}),n})(),Pc=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=At({type:n}),n.\u0275inj=Dt({}),n})();const cS="browser";class k_ extends class M2 extends class tk{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){!function ek(n){Dc||(Dc=n)}(new k_)}onAndCancel(e,t,r){return e.addEventListener(t,r,!1),()=>{e.removeEventListener(t,r,!1)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function C2(){return Dl=Dl||document.querySelector("base"),Dl?Dl.getAttribute("href"):null}();return null==t?null:function A2(n){Nc=Nc||document.createElement("a"),Nc.setAttribute("href",n);const e=Nc.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){Dl=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return function Hk(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const r=t.indexOf("="),[i,o]=-1==r?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(o)}return null}(document.cookie,e)}}let Nc,Dl=null;const hS=new j("TRANSITION_ID"),x2=[{provide:bD,useFactory:function w2(n,e,t){return()=>{t.get(gc).donePromise.then(()=>{const r=Lo(),i=e.querySelectorAll(`style[ng-transition="${n}"]`);for(let o=0;o<i.length;o++)r.remove(i[o])})}},deps:[hS,_t,cr],multi:!0}];let I2=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=Ce({token:n,factory:n.\u0275fac}),n})();const Fc=new j("EventManagerPlugins");let Lc=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(i=>i.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,r,i){return this._findPluginFor(r).addEventListener(t,r,i)}addGlobalEventListener(t,r,i){return this._findPluginFor(r).addGlobalEventListener(t,r,i)}getZone(){return this._zone}_findPluginFor(t){const r=this._eventNameToPlugin.get(t);if(r)return r;const i=this._plugins;for(let o=0;o<i.length;o++){const s=i[o];if(s.supports(t))return this._eventNameToPlugin.set(t,s),s}throw new Error(`No event manager plugin found for event ${t}`)}}return n.\u0275fac=function(t){return new(t||n)(Y(Fc),Y(it))},n.\u0275prov=Ce({token:n,factory:n.\u0275fac}),n})();class fS{constructor(e){this._doc=e}addGlobalEventListener(e,t,r){const i=Lo().getGlobalEventTarget(this._doc,e);if(!i)throw new Error(`Unsupported event target ${i} for event ${t}`);return this.addEventListener(i,t,r)}}let pS=(()=>{class n{constructor(){this._stylesSet=new Set}addStyles(t){const r=new Set;t.forEach(i=>{this._stylesSet.has(i)||(this._stylesSet.add(i),r.add(i))}),this.onStylesAdded(r)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=Ce({token:n,factory:n.\u0275fac}),n})(),Sl=(()=>{class n extends pS{constructor(t){super(),this._doc=t,this._hostNodes=new Map,this._hostNodes.set(t.head,[])}_addStylesToHost(t,r,i){t.forEach(o=>{const s=this._doc.createElement("style");s.textContent=o,i.push(r.appendChild(s))})}addHost(t){const r=[];this._addStylesToHost(this._stylesSet,t,r),this._hostNodes.set(t,r)}removeHost(t){const r=this._hostNodes.get(t);r&&r.forEach(_S),this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach((r,i)=>{this._addStylesToHost(t,i,r)})}ngOnDestroy(){this._hostNodes.forEach(t=>t.forEach(_S))}}return n.\u0275fac=function(t){return new(t||n)(Y(_t))},n.\u0275prov=Ce({token:n,factory:n.\u0275fac}),n})();function _S(n){Lo().remove(n)}const U_={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},V_=/%COMP%/g;function Bc(n,e,t){for(let r=0;r<e.length;r++){let i=e[r];Array.isArray(i)?Bc(n,i,t):(i=i.replace(V_,n),t.push(i))}return t}function vS(n){return e=>{if("__ngUnwrap__"===e)return n;!1===n(e)&&(e.preventDefault(),e.returnValue=!1)}}let kc=(()=>{class n{constructor(t,r,i){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.rendererByCompId=new Map,this.defaultRenderer=new G_(t)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;switch(r.encapsulation){case Cr.Emulated:{let i=this.rendererByCompId.get(r.id);return i||(i=new B2(this.eventManager,this.sharedStylesHost,r,this.appId),this.rendererByCompId.set(r.id,i)),i.applyToHost(t),i}case 1:case Cr.ShadowDom:return new k2(this.eventManager,this.sharedStylesHost,t,r);default:if(!this.rendererByCompId.has(r.id)){const i=Bc(r.id,r.styles,[]);this.sharedStylesHost.addStyles(i),this.rendererByCompId.set(r.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return n.\u0275fac=function(t){return new(t||n)(Y(Lc),Y(Sl),Y(ml))},n.\u0275prov=Ce({token:n,factory:n.\u0275fac}),n})();class G_{constructor(e){this.eventManager=e,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?document.createElementNS(U_[t]||t,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,t){(ES(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(ES(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let r="string"==typeof e?document.querySelector(e):e;if(!r)throw new Error(`The selector "${e}" did not match any elements`);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;const o=U_[i];o?e.setAttributeNS(o,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){const i=U_[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(tr.DashCase|tr.Important)?e.style.setProperty(t,r,i&tr.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&tr.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e[t]=r}setValue(e,t){e.nodeValue=t}listen(e,t,r){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,vS(r)):this.eventManager.addEventListener(e,t,vS(r))}}function ES(n){return"TEMPLATE"===n.tagName&&void 0!==n.content}class B2 extends G_{constructor(e,t,r,i){super(e),this.component=r;const o=Bc(i+"-"+r.id,r.styles,[]);t.addStyles(o),this.contentAttr=function N2(n){return"_ngcontent-%COMP%".replace(V_,n)}(i+"-"+r.id),this.hostAttr=function F2(n){return"_nghost-%COMP%".replace(V_,n)}(i+"-"+r.id)}applyToHost(e){super.setAttribute(e,this.hostAttr,"")}createElement(e,t){const r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}}class k2 extends G_{constructor(e,t,r,i){super(e),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const o=Bc(i.id,i.styles,[]);for(let s=0;s<o.length;s++){const a=document.createElement("style");a.textContent=o[s],this.shadowRoot.appendChild(a)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}}let U2=(()=>{class n extends fS{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i){return t.addEventListener(r,i,!1),()=>this.removeEventListener(t,r,i)}removeEventListener(t,r,i){return t.removeEventListener(r,i)}}return n.\u0275fac=function(t){return new(t||n)(Y(_t))},n.\u0275prov=Ce({token:n,factory:n.\u0275fac}),n})();const bS=["alt","control","meta","shift"],G2={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},TS={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},H2={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let j2=(()=>{class n extends fS{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,r,i){const o=n.parseEventName(r),s=n.eventCallback(o.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Lo().onAndCancel(t,o.domEventName,s))}static parseEventName(t){const r=t.toLowerCase().split("."),i=r.shift();if(0===r.length||"keydown"!==i&&"keyup"!==i)return null;const o=n._normalizeKey(r.pop());let s="";if(bS.forEach(l=>{const u=r.indexOf(l);u>-1&&(r.splice(u,1),s+=l+".")}),s+=o,0!=r.length||0===o.length)return null;const a={};return a.domEventName=i,a.fullKey=s,a}static getEventFullKey(t){let r="",i=function Y2(n){let e=n.key;if(null==e){if(e=n.keyIdentifier,null==e)return"Unidentified";e.startsWith("U+")&&(e=String.fromCharCode(parseInt(e.substring(2),16)),3===n.location&&TS.hasOwnProperty(e)&&(e=TS[e]))}return G2[e]||e}(t);return i=i.toLowerCase()," "===i?i="space":"."===i&&(i="dot"),bS.forEach(o=>{o!=i&&H2[o](t)&&(r+=o+".")}),r+=i,r}static eventCallback(t,r,i){return o=>{n.getEventFullKey(o)===t&&i.runGuarded(()=>r(o))}}static _normalizeKey(t){return"esc"===t?"escape":t}}return n.\u0275fac=function(t){return new(t||n)(Y(_t))},n.\u0275prov=Ce({token:n,factory:n.\u0275fac}),n})();const DS=[{provide:d_,useValue:cS},{provide:DD,useValue:function z2(){k_.makeCurrent()},multi:!0},{provide:_t,useFactory:function X2(){return function ZR(n){qh=n}(document),document},deps:[]}],$2=RD(QB,"browser",DS),SS=new j(""),MS=[{provide:vc,useClass:class R2{addToWindow(e){st.getAngularTestability=(r,i=!0)=>{const o=e.findTestabilityInTree(r,i);if(null==o)throw new Error("Could not find testability for element.");return o},st.getAllAngularTestabilities=()=>e.getAllTestabilities(),st.getAllAngularRootElements=()=>e.getAllRootElements(),st.frameworkStabilizers||(st.frameworkStabilizers=[]),st.frameworkStabilizers.push(r=>{const i=st.getAllAngularTestabilities();let o=i.length,s=!1;const a=function(l){s=s||l,o--,0==o&&r(s)};i.forEach(function(l){l.whenStable(a)})})}findTestabilityInTree(e,t,r){if(null==t)return null;const i=e.getTestability(t);return null!=i?i:r?Lo().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null}},deps:[]},{provide:CD,useClass:__,deps:[it,m_,vc]},{provide:__,useClass:__,deps:[it,m_,vc]}],CS=[{provide:qf,useValue:"root"},{provide:Ti,useFactory:function W2(){return new Ti},deps:[]},{provide:Fc,useClass:U2,multi:!0,deps:[_t,it,d_]},{provide:Fc,useClass:j2,multi:!0,deps:[_t]},{provide:kc,useClass:kc,deps:[Lc,Sl,ml]},{provide:cl,useExisting:kc},{provide:pS,useExisting:Sl},{provide:Sl,useClass:Sl,deps:[_t]},{provide:Lc,useClass:Lc,deps:[Fc,it]},{provide:class S2{},useClass:I2,deps:[]},[]];let AS=(()=>{class n{constructor(t){}static withServerTransition(t){return{ngModule:n,providers:[{provide:ml,useValue:t.appId},{provide:hS,useExisting:ml},x2]}}}return n.\u0275fac=function(t){return new(t||n)(Y(SS,12))},n.\u0275mod=At({type:n}),n.\u0275inj=Dt({providers:[...CS,...MS],imports:[Pc,ZB]}),n})();"undefined"!=typeof window&&window;let Y_=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=Ce({token:n,factory:function(t){let r=null;return r=t?new(t||n):Y(RS),r},providedIn:"root"}),n})(),RS=(()=>{class n extends Y_{constructor(t){super(),this._doc=t}sanitize(t,r){if(null==r)return null;switch(t){case Ke.NONE:return r;case Ke.HTML:return $r(r,"HTML")?er(r):fE(this._doc,String(r)).toString();case Ke.STYLE:return $r(r,"Style")?er(r):r;case Ke.SCRIPT:if($r(r,"Script"))return er(r);throw new Error("unsafe value used in a script context");case Ke.URL:return oE(r),$r(r,"URL")?er(r):$a(String(r));case Ke.RESOURCE_URL:if($r(r,"ResourceURL"))return er(r);throw new Error("unsafe value used in a resource URL context (see https://g.co/ng/security#xss)");default:throw new Error(`Unexpected SecurityContext ${t} (see https://g.co/ng/security#xss)`)}}bypassSecurityTrustHtml(t){return function fO(n){return new lO(n)}(t)}bypassSecurityTrustStyle(t){return function pO(n){return new uO(n)}(t)}bypassSecurityTrustScript(t){return function _O(n){return new cO(n)}(t)}bypassSecurityTrustUrl(t){return function mO(n){return new dO(n)}(t)}bypassSecurityTrustResourceUrl(t){return function gO(n){return new hO(n)}(t)}}return n.\u0275fac=function(t){return new(t||n)(Y(_t))},n.\u0275prov=Ce({token:n,factory:function(t){let r=null;return r=t?new t:function iU(n){return new RS(n.get(_t))}(Y(cr)),r},providedIn:"root"}),n})();var uU=setTimeout;function IS(n){return Boolean(n&&void 0!==n.length)}function cU(){}function Yt(n){if(!(this instanceof Yt))throw new TypeError("Promises must be constructed via new");if("function"!=typeof n)throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],PS(n,this)}function OS(n,e){for(;3===n._state;)n=n._value;0!==n._state?(n._handled=!0,Yt._immediateFn(function(){var t=1===n._state?e.onFulfilled:e.onRejected;if(null!==t){var r;try{r=t(n._value)}catch(i){return void Ml(e.promise,i)}z_(e.promise,r)}else(1===n._state?z_:Ml)(e.promise,n._value)})):n._deferreds.push(e)}function z_(n,e){try{if(e===n)throw new TypeError("A promise cannot be resolved with itself.");if(e&&("object"==typeof e||"function"==typeof e)){var t=e.then;if(e instanceof Yt)return n._state=3,n._value=e,void W_(n);if("function"==typeof t)return void PS(function dU(n,e){return function(){n.apply(e,arguments)}}(t,e),n)}n._state=1,n._value=e,W_(n)}catch(r){Ml(n,r)}}function Ml(n,e){n._state=2,n._value=e,W_(n)}function W_(n){2===n._state&&0===n._deferreds.length&&Yt._immediateFn(function(){n._handled||Yt._unhandledRejectionFn(n._value)});for(var e=0,t=n._deferreds.length;e<t;e++)OS(n,n._deferreds[e]);n._deferreds=null}function hU(n,e,t){this.onFulfilled="function"==typeof n?n:null,this.onRejected="function"==typeof e?e:null,this.promise=t}function PS(n,e){var t=!1;try{n(function(r){t||(t=!0,z_(e,r))},function(r){t||(t=!0,Ml(e,r))})}catch(r){if(t)return;t=!0,Ml(e,r)}}Yt.prototype.catch=function(n){return this.then(null,n)},Yt.prototype.then=function(n,e){var t=new this.constructor(cU);return OS(this,new hU(n,e,t)),t},Yt.prototype.finally=function oU(n){var e=this.constructor;return this.then(function(t){return e.resolve(n()).then(function(){return t})},function(t){return e.resolve(n()).then(function(){return e.reject(t)})})},Yt.all=function(n){return new Yt(function(e,t){if(!IS(n))return t(new TypeError("Promise.all accepts an array"));var r=Array.prototype.slice.call(n);if(0===r.length)return e([]);var i=r.length;function o(a,l){try{if(l&&("object"==typeof l||"function"==typeof l)){var u=l.then;if("function"==typeof u)return void u.call(l,function(c){o(a,c)},t)}r[a]=l,0==--i&&e(r)}catch(c){t(c)}}for(var s=0;s<r.length;s++)o(s,r[s])})},Yt.allSettled=function aU(n){return new this(function(t,r){if(!n||void 0===n.length)return r(new TypeError(typeof n+" "+n+" is not iterable(cannot read property Symbol(Symbol.iterator))"));var i=Array.prototype.slice.call(n);if(0===i.length)return t([]);var o=i.length;function s(l,u){if(u&&("object"==typeof u||"function"==typeof u)){var c=u.then;if("function"==typeof c)return void c.call(u,function(d){s(l,d)},function(d){i[l]={status:"rejected",reason:d},0==--o&&t(i)})}i[l]={status:"fulfilled",value:u},0==--o&&t(i)}for(var a=0;a<i.length;a++)s(a,i[a])})},Yt.resolve=function(n){return n&&"object"==typeof n&&n.constructor===Yt?n:new Yt(function(e){e(n)})},Yt.reject=function(n){return new Yt(function(e,t){t(n)})},Yt.race=function(n){return new Yt(function(e,t){if(!IS(n))return t(new TypeError("Promise.race accepts an array"));for(var r=0,i=n.length;r<i;r++)Yt.resolve(n[r]).then(e,t)})},Yt._immediateFn="function"==typeof setImmediate&&function(n){setImmediate(n)}||function(n){uU(n,0)},Yt._unhandledRejectionFn=function(e){"undefined"!=typeof console&&console&&console.warn("Possible Unhandled Promise Rejection:",e)};const fU=Yt;var pU=ne(943),_U=ne.n(pU);if("undefined"==typeof globalThis&&("undefined"!=typeof self?self.globalThis=self:"undefined"!=typeof global&&(global.globalThis=global)),globalThis.Promise||(globalThis.Promise=fU),Object.assign||(Object.assign=_U()),Date.now&&Date.prototype.getTime||(Date.now=function(){return(new Date).getTime()}),!globalThis.performance||!globalThis.performance.now){var gU=Date.now();globalThis.performance||(globalThis.performance={}),globalThis.performance.now=function(){return Date.now()-gU}}for(var X_=Date.now(),NS=["ms","moz","webkit","o"],$_=0;$_<NS.length&&!globalThis.requestAnimationFrame;++$_){var q_=NS[$_];globalThis.requestAnimationFrame=globalThis[q_+"RequestAnimationFrame"],globalThis.cancelAnimationFrame=globalThis[q_+"CancelAnimationFrame"]||globalThis[q_+"CancelRequestAnimationFrame"]}globalThis.requestAnimationFrame||(globalThis.requestAnimationFrame=function(n){if("function"!=typeof n)throw new TypeError(n+"is not a function");var e=Date.now(),t=16+X_-e;return t<0&&(t=0),X_=e,globalThis.self.setTimeout(function(){X_=Date.now(),n(performance.now())},t)}),globalThis.cancelAnimationFrame||(globalThis.cancelAnimationFrame=function(n){return clearTimeout(n)}),Math.sign||(Math.sign=function(e){return 0===(e=Number(e))||isNaN(e)?e:e>0?1:-1}),Number.isInteger||(Number.isInteger=function(e){return"number"==typeof e&&isFinite(e)&&Math.floor(e)===e}),globalThis.ArrayBuffer||(globalThis.ArrayBuffer=Array),globalThis.Float32Array||(globalThis.Float32Array=Array),globalThis.Uint32Array||(globalThis.Uint32Array=Array),globalThis.Uint16Array||(globalThis.Uint16Array=Array),globalThis.Uint8Array||(globalThis.Uint8Array=Array),globalThis.Int32Array||(globalThis.Int32Array=Array);var K_=/iPhone/i,FS=/iPod/i,LS=/iPad/i,BS=/\biOS-universal(?:.+)Mac\b/i,Q_=/\bAndroid(?:.+)Mobile\b/i,kS=/Android/i,Qs=/(?:SD4930UR|\bSilk(?:.+)Mobile\b)/i,Uc=/Silk/i,xi=/Windows Phone/i,US=/\bWindows(?:.+)ARM\b/i,VS=/BlackBerry/i,GS=/BB10/i,HS=/Opera Mini/i,jS=/\b(CriOS|Chrome)(?:.+)Mobile/i,YS=/Mobile(?:.+)Firefox\b/i,zS=function(n){return void 0!==n&&"MacIntel"===n.platform&&"number"==typeof n.maxTouchPoints&&n.maxTouchPoints>1&&"undefined"==typeof MSStream},ii=function yU(n){var e={userAgent:"",platform:"",maxTouchPoints:0};n||"undefined"==typeof navigator?"string"==typeof n?e.userAgent=n:n&&n.userAgent&&(e={userAgent:n.userAgent,platform:n.platform,maxTouchPoints:n.maxTouchPoints||0}):e={userAgent:navigator.userAgent,platform:navigator.platform,maxTouchPoints:navigator.maxTouchPoints||0};var t=e.userAgent,r=t.split("[FBAN");void 0!==r[1]&&(t=r[0]),void 0!==(r=t.split("Twitter"))[1]&&(t=r[0]);var i=function vU(n){return function(e){return e.test(n)}}(t),o={apple:{phone:i(K_)&&!i(xi),ipod:i(FS),tablet:!i(K_)&&(i(LS)||zS(e))&&!i(xi),universal:i(BS),device:(i(K_)||i(FS)||i(LS)||i(BS)||zS(e))&&!i(xi)},amazon:{phone:i(Qs),tablet:!i(Qs)&&i(Uc),device:i(Qs)||i(Uc)},android:{phone:!i(xi)&&i(Qs)||!i(xi)&&i(Q_),tablet:!i(xi)&&!i(Qs)&&!i(Q_)&&(i(Uc)||i(kS)),device:!i(xi)&&(i(Qs)||i(Uc)||i(Q_)||i(kS))||i(/\bokhttp\b/i)},windows:{phone:i(xi),tablet:i(US),device:i(xi)||i(US)},other:{blackberry:i(VS),blackberry10:i(GS),opera:i(HS),firefox:i(YS),chrome:i(jS),device:i(VS)||i(GS)||i(HS)||i(YS)||i(jS)},any:!1,phone:!1,tablet:!1};return o.any=o.apple.device||o.android.device||o.windows.device||o.other.device,o.phone=o.apple.phone||o.android.phone||o.windows.phone,o.tablet=o.apple.tablet||o.android.tablet||o.windows.tablet,o}(globalThis.navigator),Vc=(()=>{return(n=Vc||(Vc={}))[n.NEAREST=0]="NEAREST",n[n.LINEAR=1]="LINEAR",Vc;var n})(),Gc=(()=>{return(n=Gc||(Gc={}))[n.CLAMP=33071]="CLAMP",n[n.REPEAT=10497]="REPEAT",n[n.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT",Gc;var n})(),Hc=(()=>{return(n=Hc||(Hc={}))[n.OFF=0]="OFF",n[n.POW2=1]="POW2",n[n.ON=2]="ON",n[n.ON_MANUAL=3]="ON_MANUAL",Hc;var n})(),jc=(()=>{return(n=jc||(jc={}))[n.AUTO=0]="AUTO",n[n.MANUAL=1]="MANUAL",jc;var n})(),Zs=(()=>{return(n=Zs||(Zs={})).LOW="lowp",n.MEDIUM="mediump",n.HIGH="highp",Zs;var n})(),Yc=(()=>{return(n=Yc||(Yc={}))[n.NONE=0]="NONE",n[n.LOW=2]="LOW",n[n.MEDIUM=4]="MEDIUM",n[n.HIGH=8]="HIGH",Yc;var n})(),de={MIPMAP_TEXTURES:Hc.POW2,ANISOTROPIC_LEVEL:0,RESOLUTION:1,FILTER_RESOLUTION:1,FILTER_MULTISAMPLE:Yc.NONE,SPRITE_MAX_TEXTURES:function EU(n){var t,e=!0;(ii.tablet||ii.phone)&&(ii.apple.device&&(t=navigator.userAgent.match(/OS (\d+)_(\d+)?/))&&parseInt(t[1],10)<11&&(e=!1),ii.android.device&&(t=navigator.userAgent.match(/Android\s([0-9.]*)/))&&parseInt(t[1],10)<7&&(e=!1));return e?n:4}(32),SPRITE_BATCH_SIZE:4096,RENDER_OPTIONS:{view:null,antialias:!1,autoDensity:!1,backgroundColor:0,backgroundAlpha:1,useContextAlpha:!0,clearBeforeRender:!0,preserveDrawingBuffer:!1,width:800,height:600,legacy:!1},GC_MODE:jc.AUTO,GC_MAX_IDLE:3600,GC_MAX_CHECK_COUNT:600,WRAP_MODE:Gc.CLAMP,SCALE_MODE:Vc.LINEAR,PRECISION_VERTEX:Zs.HIGH,PRECISION_FRAGMENT:ii.apple.device?Zs.HIGH:Zs.MEDIUM,CAN_UPLOAD_SAME_BUFFER:function bU(){return!ii.apple.device}(),CREATE_IMAGE_BITMAP:!1,ROUND_PIXELS:!1},TU=ne(5),Js=ne.n(TU),DU=ne(469),WS=ne.n(DU),Z_=ne(762),oi=(()=>{return(n=oi||(oi={}))[n.WEBGL_LEGACY=0]="WEBGL_LEGACY",n[n.WEBGL=1]="WEBGL",n[n.WEBGL2=2]="WEBGL2",oi;var n})(),ea=(()=>{return(n=ea||(ea={}))[n.UNKNOWN=0]="UNKNOWN",n[n.WEBGL=1]="WEBGL",n[n.CANVAS=2]="CANVAS",ea;var n})(),Cl=(()=>{return(n=Cl||(Cl={}))[n.COLOR=16384]="COLOR",n[n.DEPTH=256]="DEPTH",n[n.STENCIL=1024]="STENCIL",Cl;var n})(),ge=(()=>{return(n=ge||(ge={}))[n.NORMAL=0]="NORMAL",n[n.ADD=1]="ADD",n[n.MULTIPLY=2]="MULTIPLY",n[n.SCREEN=3]="SCREEN",n[n.OVERLAY=4]="OVERLAY",n[n.DARKEN=5]="DARKEN",n[n.LIGHTEN=6]="LIGHTEN",n[n.COLOR_DODGE=7]="COLOR_DODGE",n[n.COLOR_BURN=8]="COLOR_BURN",n[n.HARD_LIGHT=9]="HARD_LIGHT",n[n.SOFT_LIGHT=10]="SOFT_LIGHT",n[n.DIFFERENCE=11]="DIFFERENCE",n[n.EXCLUSION=12]="EXCLUSION",n[n.HUE=13]="HUE",n[n.SATURATION=14]="SATURATION",n[n.COLOR=15]="COLOR",n[n.LUMINOSITY=16]="LUMINOSITY",n[n.NORMAL_NPM=17]="NORMAL_NPM",n[n.ADD_NPM=18]="ADD_NPM",n[n.SCREEN_NPM=19]="SCREEN_NPM",n[n.NONE=20]="NONE",n[n.SRC_OVER=0]="SRC_OVER",n[n.SRC_IN=21]="SRC_IN",n[n.SRC_OUT=22]="SRC_OUT",n[n.SRC_ATOP=23]="SRC_ATOP",n[n.DST_OVER=24]="DST_OVER",n[n.DST_IN=25]="DST_IN",n[n.DST_OUT=26]="DST_OUT",n[n.DST_ATOP=27]="DST_ATOP",n[n.ERASE=26]="ERASE",n[n.SUBTRACT=28]="SUBTRACT",n[n.XOR=29]="XOR",ge;var n})(),pr=(()=>{return(n=pr||(pr={}))[n.POINTS=0]="POINTS",n[n.LINES=1]="LINES",n[n.LINE_LOOP=2]="LINE_LOOP",n[n.LINE_STRIP=3]="LINE_STRIP",n[n.TRIANGLES=4]="TRIANGLES",n[n.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",n[n.TRIANGLE_FAN=6]="TRIANGLE_FAN",pr;var n})(),H=(()=>{return(n=H||(H={}))[n.RGBA=6408]="RGBA",n[n.RGB=6407]="RGB",n[n.RG=33319]="RG",n[n.RED=6403]="RED",n[n.RGBA_INTEGER=36249]="RGBA_INTEGER",n[n.RGB_INTEGER=36248]="RGB_INTEGER",n[n.RG_INTEGER=33320]="RG_INTEGER",n[n.RED_INTEGER=36244]="RED_INTEGER",n[n.ALPHA=6406]="ALPHA",n[n.LUMINANCE=6409]="LUMINANCE",n[n.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",n[n.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",n[n.DEPTH_STENCIL=34041]="DEPTH_STENCIL",H;var n})(),eo=(()=>{return(n=eo||(eo={}))[n.TEXTURE_2D=3553]="TEXTURE_2D",n[n.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",n[n.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY",n[n.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",n[n.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",n[n.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",n[n.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",n[n.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",n[n.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z",eo;var n})(),pe=(()=>{return(n=pe||(pe={}))[n.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",n[n.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",n[n.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",n[n.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",n[n.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",n[n.UNSIGNED_INT=5125]="UNSIGNED_INT",n[n.UNSIGNED_INT_10F_11F_11F_REV=35899]="UNSIGNED_INT_10F_11F_11F_REV",n[n.UNSIGNED_INT_2_10_10_10_REV=33640]="UNSIGNED_INT_2_10_10_10_REV",n[n.UNSIGNED_INT_24_8=34042]="UNSIGNED_INT_24_8",n[n.UNSIGNED_INT_5_9_9_9_REV=35902]="UNSIGNED_INT_5_9_9_9_REV",n[n.BYTE=5120]="BYTE",n[n.SHORT=5122]="SHORT",n[n.INT=5124]="INT",n[n.FLOAT=5126]="FLOAT",n[n.FLOAT_32_UNSIGNED_INT_24_8_REV=36269]="FLOAT_32_UNSIGNED_INT_24_8_REV",n[n.HALF_FLOAT=36193]="HALF_FLOAT",pe;var n})(),Al=(()=>{return(n=Al||(Al={}))[n.FLOAT=0]="FLOAT",n[n.INT=1]="INT",n[n.UINT=2]="UINT",Al;var n})(),si=(()=>{return(n=si||(si={}))[n.NEAREST=0]="NEAREST",n[n.LINEAR=1]="LINEAR",si;var n})(),ai=(()=>{return(n=ai||(ai={}))[n.CLAMP=33071]="CLAMP",n[n.REPEAT=10497]="REPEAT",n[n.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT",ai;var n})(),li=(()=>{return(n=li||(li={}))[n.OFF=0]="OFF",n[n.POW2=1]="POW2",n[n.ON=2]="ON",n[n.ON_MANUAL=3]="ON_MANUAL",li;var n})(),_r=(()=>{return(n=_r||(_r={}))[n.NPM=0]="NPM",n[n.UNPACK=1]="UNPACK",n[n.PMA=2]="PMA",n[n.NO_PREMULTIPLIED_ALPHA=0]="NO_PREMULTIPLIED_ALPHA",n[n.PREMULTIPLY_ON_UPLOAD=1]="PREMULTIPLY_ON_UPLOAD",n[n.PREMULTIPLY_ALPHA=2]="PREMULTIPLY_ALPHA",n[n.PREMULTIPLIED_ALPHA=2]="PREMULTIPLIED_ALPHA",_r;var n})(),Ri=(()=>{return(n=Ri||(Ri={}))[n.NO=0]="NO",n[n.YES=1]="YES",n[n.AUTO=2]="AUTO",n[n.BLEND=0]="BLEND",n[n.CLEAR=1]="CLEAR",n[n.BLIT=2]="BLIT",Ri;var n})(),zc=(()=>{return(n=zc||(zc={}))[n.AUTO=0]="AUTO",n[n.MANUAL=1]="MANUAL",zc;var n})(),kr=(()=>{return(n=kr||(kr={})).LOW="lowp",n.MEDIUM="mediump",n.HIGH="highp",kr;var n})(),gn=(()=>{return(n=gn||(gn={}))[n.NONE=0]="NONE",n[n.SCISSOR=1]="SCISSOR",n[n.STENCIL=2]="STENCIL",n[n.SPRITE=3]="SPRITE",gn;var n})(),$t=(()=>{return(n=$t||($t={}))[n.NONE=0]="NONE",n[n.LOW=2]="LOW",n[n.MEDIUM=4]="MEDIUM",n[n.HIGH=8]="HIGH",$t;var n})(),Ur=(()=>{return(n=Ur||(Ur={}))[n.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",n[n.ARRAY_BUFFER=34962]="ARRAY_BUFFER",n[n.UNIFORM_BUFFER=35345]="UNIFORM_BUFFER",Ur;var n})(),ta={parse:Z_.Qc,format:Z_.WU,resolve:Z_.DB};de.RETINA_PREFIX=/@([0-9\.]+)x/,de.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT=!1;var em,J_=!1,f3={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",goldenrod:"#daa520",gold:"#ffd700",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavenderblush:"#fff0f5",lavender:"#e6e6fa",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"};function na(n,e){return void 0===e&&(e=[]),e[0]=(n>>16&255)/255,e[1]=(n>>8&255)/255,e[2]=(255&n)/255,e}function $S(n){var e=n.toString(16);return"#"+("000000".substring(0,6-e.length)+e)}function qS(n){return"string"==typeof n&&"#"===(n=f3[n.toLowerCase()]||n)[0]&&(n=n.slice(1)),parseInt(n,16)}var KS=function p3(){for(var n=[],e=[],t=0;t<32;t++)n[t]=t,e[t]=t;n[ge.NORMAL_NPM]=ge.NORMAL,n[ge.ADD_NPM]=ge.ADD,n[ge.SCREEN_NPM]=ge.SCREEN,e[ge.NORMAL]=ge.NORMAL_NPM,e[ge.ADD]=ge.ADD_NPM,e[ge.SCREEN]=ge.SCREEN_NPM;var r=[];return r.push(e),r.push(n),r}();function QS(n,e){return KS[e?1:0][n]}function tm(n,e){if(1===e)return(255*e<<24)+n;if(0===e)return 0;var t=n>>16&255,r=n>>8&255,i=255&n;return(255*e<<24)+((t=t*e+.5|0)<<16)+((r=r*e+.5|0)<<8)+(i*e+.5|0)}function ZS(n,e,t,r){return(t=t||new Float32Array(4))[0]=(n>>16&255)/255,t[1]=(n>>8&255)/255,t[2]=(255&n)/255,(r||void 0===r)&&(t[0]*=e,t[1]*=e,t[2]*=e),t[3]=e,t}function nm(n){if(4===n.BYTES_PER_ELEMENT)return n instanceof Float32Array?"Float32Array":n instanceof Uint32Array?"Uint32Array":"Int32Array";if(2===n.BYTES_PER_ELEMENT){if(n instanceof Uint16Array)return"Uint16Array"}else if(1===n.BYTES_PER_ELEMENT&&n instanceof Uint8Array)return"Uint8Array";return null}function Wc(n){return n+=0===n?1:0,--n,n|=n>>>1,n|=n>>>2,n|=n>>>4,n|=n>>>8,1+(n|=n>>>16)}function JS(n){return!(n&n-1||!n)}function eM(n){var e=(n>65535?1:0)<<4,t=((n>>>=e)>255?1:0)<<3;return e|=t,e|=t=((n>>>=t)>15?1:0)<<2,(e|=t=((n>>>=t)>3?1:0)<<1)|(n>>>=t)>>1}function Ii(n,e,t){var i,r=n.length;if(!(e>=r||0===t)){var o=r-(t=e+t>r?r-e:t);for(i=e;i<o;++i)n[i]=n[i+t];n.length=o}}function ra(n){return 0===n?0:n<0?-1:1}Float32Array,Uint32Array,Int32Array,Uint8Array;var v3=0;function Bo(){return++v3}var tM={};function to(n,e,t){if(void 0===t&&(t=3),!tM[e]){var r=(new Error).stack;void 0===r?console.warn("PixiJS Deprecation Warning: ",e+"\nDeprecated since v"+n):(r=r.split("\n").splice(t).join("\n"),console.groupCollapsed?(console.groupCollapsed("%cPixiJS Deprecation Warning: %c%s","color:#614108;background:#fffbe6","font-weight:normal;color:#614108;background:#fffbe6",e+"\nDeprecated since v"+n),console.warn(r),console.groupEnd()):(console.warn("PixiJS Deprecation Warning: ",e+"\nDeprecated since v"+n),console.warn(r))),tM[e]=!0}}var Xc,nM={},rr=Object.create(null),Vr=Object.create(null),rM=function(){function n(e,t,r){this.canvas=document.createElement("canvas"),this.context=this.canvas.getContext("2d"),this.resolution=r||de.RESOLUTION,this.resize(e,t)}return n.prototype.clear=function(){this.context.setTransform(1,0,0,1,0,0),this.context.clearRect(0,0,this.canvas.width,this.canvas.height)},n.prototype.resize=function(e,t){this.canvas.width=Math.round(e*this.resolution),this.canvas.height=Math.round(t*this.resolution)},n.prototype.destroy=function(){this.context=null,this.canvas=null},Object.defineProperty(n.prototype,"width",{get:function(){return this.canvas.width},set:function(e){this.canvas.width=Math.round(e)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"height",{get:function(){return this.canvas.height},set:function(e){this.canvas.height=Math.round(e)},enumerable:!1,configurable:!0}),n}();function $c(n,e){var t=de.RETINA_PREFIX.exec(n);return t?parseFloat(t[1]):void 0!==e?e:1}var qc=2*Math.PI,iM=180/Math.PI,oM=Math.PI/180,Rt=(()=>{return(n=Rt||(Rt={}))[n.POLY=0]="POLY",n[n.RECT=1]="RECT",n[n.CIRC=2]="CIRC",n[n.ELIP=3]="ELIP",n[n.RREC=4]="RREC",Rt;var n})(),St=function(){function n(e,t){void 0===e&&(e=0),void 0===t&&(t=0),this.x=0,this.y=0,this.x=e,this.y=t}return n.prototype.clone=function(){return new n(this.x,this.y)},n.prototype.copyFrom=function(e){return this.set(e.x,e.y),this},n.prototype.copyTo=function(e){return e.set(this.x,this.y),e},n.prototype.equals=function(e){return e.x===this.x&&e.y===this.y},n.prototype.set=function(e,t){return void 0===e&&(e=0),void 0===t&&(t=e),this.x=e,this.y=t,this},n.prototype.toString=function(){return"[@pixi/math:Point x="+this.x+" y="+this.y+"]"},n}(),Kc=[new St,new St,new St,new St],Fe=function(){function n(e,t,r,i){void 0===e&&(e=0),void 0===t&&(t=0),void 0===r&&(r=0),void 0===i&&(i=0),this.x=Number(e),this.y=Number(t),this.width=Number(r),this.height=Number(i),this.type=Rt.RECT}return Object.defineProperty(n.prototype,"left",{get:function(){return this.x},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"right",{get:function(){return this.x+this.width},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"top",{get:function(){return this.y},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"bottom",{get:function(){return this.y+this.height},enumerable:!1,configurable:!0}),Object.defineProperty(n,"EMPTY",{get:function(){return new n(0,0,0,0)},enumerable:!1,configurable:!0}),n.prototype.clone=function(){return new n(this.x,this.y,this.width,this.height)},n.prototype.copyFrom=function(e){return this.x=e.x,this.y=e.y,this.width=e.width,this.height=e.height,this},n.prototype.copyTo=function(e){return e.x=this.x,e.y=this.y,e.width=this.width,e.height=this.height,e},n.prototype.contains=function(e,t){return!(this.width<=0||this.height<=0)&&e>=this.x&&e<this.x+this.width&&t>=this.y&&t<this.y+this.height},n.prototype.intersects=function(e,t){if(!t)return!((this.right>e.right?e.right:this.right)<=(this.x<e.x?e.x:this.x))&&(this.bottom>e.bottom?e.bottom:this.bottom)>(this.y<e.y?e.y:this.y);var a=this.left,l=this.right,u=this.top,c=this.bottom;if(l<=a||c<=u)return!1;var d=Kc[0].set(e.left,e.top),h=Kc[1].set(e.left,e.bottom),f=Kc[2].set(e.right,e.top),p=Kc[3].set(e.right,e.bottom);if(f.x<=d.x||h.y<=d.y)return!1;var _=Math.sign(t.a*t.d-t.b*t.c);if(0===_||(t.apply(d,d),t.apply(h,h),t.apply(f,f),t.apply(p,p),Math.max(d.x,h.x,f.x,p.x)<=a||Math.min(d.x,h.x,f.x,p.x)>=l||Math.max(d.y,h.y,f.y,p.y)<=u||Math.min(d.y,h.y,f.y,p.y)>=c))return!1;var m=_*(h.y-d.y),g=_*(d.x-h.x),b=m*a+g*u,y=m*l+g*u,M=m*a+g*c,S=m*l+g*c;if(Math.max(b,y,M,S)<=m*d.x+g*d.y||Math.min(b,y,M,S)>=m*p.x+g*p.y)return!1;var T=_*(d.y-f.y),k=_*(f.x-d.x),Q=T*a+k*u,B=T*l+k*u,U=T*a+k*c,ce=T*l+k*c;return!(Math.max(Q,B,U,ce)<=T*d.x+k*d.y||Math.min(Q,B,U,ce)>=T*p.x+k*p.y)},n.prototype.pad=function(e,t){return void 0===e&&(e=0),void 0===t&&(t=e),this.x-=e,this.y-=t,this.width+=2*e,this.height+=2*t,this},n.prototype.fit=function(e){var t=Math.max(this.x,e.x),r=Math.min(this.x+this.width,e.x+e.width),i=Math.max(this.y,e.y),o=Math.min(this.y+this.height,e.y+e.height);return this.x=t,this.width=Math.max(r-t,0),this.y=i,this.height=Math.max(o-i,0),this},n.prototype.ceil=function(e,t){void 0===e&&(e=1),void 0===t&&(t=.001);var r=Math.ceil((this.x+this.width-t)*e)/e,i=Math.ceil((this.y+this.height-t)*e)/e;return this.x=Math.floor((this.x+t)*e)/e,this.y=Math.floor((this.y+t)*e)/e,this.width=r-this.x,this.height=i-this.y,this},n.prototype.enlarge=function(e){var t=Math.min(this.x,e.x),r=Math.max(this.x+this.width,e.x+e.width),i=Math.min(this.y,e.y),o=Math.max(this.y+this.height,e.y+e.height);return this.x=t,this.width=r-t,this.y=i,this.height=o-i,this},n.prototype.toString=function(){return"[@pixi/math:Rectangle x="+this.x+" y="+this.y+" width="+this.width+" height="+this.height+"]"},n}(),T3=function(){function n(e,t,r){void 0===e&&(e=0),void 0===t&&(t=0),void 0===r&&(r=0),this.x=e,this.y=t,this.radius=r,this.type=Rt.CIRC}return n.prototype.clone=function(){return new n(this.x,this.y,this.radius)},n.prototype.contains=function(e,t){if(this.radius<=0)return!1;var i=this.x-e,o=this.y-t;return(i*=i)+(o*=o)<=this.radius*this.radius},n.prototype.getBounds=function(){return new Fe(this.x-this.radius,this.y-this.radius,2*this.radius,2*this.radius)},n.prototype.toString=function(){return"[@pixi/math:Circle x="+this.x+" y="+this.y+" radius="+this.radius+"]"},n}(),D3=function(){function n(e,t,r,i){void 0===e&&(e=0),void 0===t&&(t=0),void 0===r&&(r=0),void 0===i&&(i=0),this.x=e,this.y=t,this.width=r,this.height=i,this.type=Rt.ELIP}return n.prototype.clone=function(){return new n(this.x,this.y,this.width,this.height)},n.prototype.contains=function(e,t){if(this.width<=0||this.height<=0)return!1;var r=(e-this.x)/this.width,i=(t-this.y)/this.height;return(r*=r)+(i*=i)<=1},n.prototype.getBounds=function(){return new Fe(this.x-this.width,this.y-this.height,this.width,this.height)},n.prototype.toString=function(){return"[@pixi/math:Ellipse x="+this.x+" y="+this.y+" width="+this.width+" height="+this.height+"]"},n}(),Qc=function(){function n(){for(var e=arguments,t=[],r=0;r<arguments.length;r++)t[r]=e[r];var i=Array.isArray(t[0])?t[0]:t;if("number"!=typeof i[0]){for(var o=[],s=0,a=i.length;s<a;s++)o.push(i[s].x,i[s].y);i=o}this.points=i,this.type=Rt.POLY,this.closeStroke=!0}return n.prototype.clone=function(){var t=new n(this.points.slice());return t.closeStroke=this.closeStroke,t},n.prototype.contains=function(e,t){for(var r=!1,i=this.points.length/2,o=0,s=i-1;o<i;s=o++){var a=this.points[2*o],l=this.points[2*o+1],c=this.points[2*s+1];l>t!=c>t&&e<(t-l)/(c-l)*(this.points[2*s]-a)+a&&(r=!r)}return r},n.prototype.toString=function(){return"[@pixi/math:PolygoncloseStroke="+this.closeStroke+"points="+this.points.reduce(function(e,t){return e+", "+t},"")+"]"},n}(),S3=function(){function n(e,t,r,i,o){void 0===e&&(e=0),void 0===t&&(t=0),void 0===r&&(r=0),void 0===i&&(i=0),void 0===o&&(o=20),this.x=e,this.y=t,this.width=r,this.height=i,this.radius=o,this.type=Rt.RREC}return n.prototype.clone=function(){return new n(this.x,this.y,this.width,this.height,this.radius)},n.prototype.contains=function(e,t){if(this.width<=0||this.height<=0)return!1;if(e>=this.x&&e<=this.x+this.width&&t>=this.y&&t<=this.y+this.height){var r=Math.max(0,Math.min(this.radius,Math.min(this.width,this.height)/2));if(t>=this.y+r&&t<=this.y+this.height-r||e>=this.x+r&&e<=this.x+this.width-r)return!0;var i=e-(this.x+r),o=t-(this.y+r),s=r*r;if(i*i+o*o<=s||(i=e-(this.x+this.width-r))*i+o*o<=s||i*i+(o=t-(this.y+this.height-r))*o<=s||(i=e-(this.x+r))*i+o*o<=s)return!0}return!1},n.prototype.toString=function(){return"[@pixi/math:RoundedRectangle x="+this.x+" y="+this.y+"width="+this.width+" height="+this.height+" radius="+this.radius+"]"},n}(),ia=function(){function n(e,t,r,i){void 0===r&&(r=0),void 0===i&&(i=0),this._x=r,this._y=i,this.cb=e,this.scope=t}return n.prototype.clone=function(e,t){return void 0===e&&(e=this.cb),void 0===t&&(t=this.scope),new n(e,t,this._x,this._y)},n.prototype.set=function(e,t){return void 0===e&&(e=0),void 0===t&&(t=e),(this._x!==e||this._y!==t)&&(this._x=e,this._y=t,this.cb.call(this.scope)),this},n.prototype.copyFrom=function(e){return(this._x!==e.x||this._y!==e.y)&&(this._x=e.x,this._y=e.y,this.cb.call(this.scope)),this},n.prototype.copyTo=function(e){return e.set(this._x,this._y),e},n.prototype.equals=function(e){return e.x===this._x&&e.y===this._y},n.prototype.toString=function(){return"[@pixi/math:ObservablePoint x=0 y=0 scope="+this.scope+"]"},Object.defineProperty(n.prototype,"x",{get:function(){return this._x},set:function(e){this._x!==e&&(this._x=e,this.cb.call(this.scope))},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"y",{get:function(){return this._y},set:function(e){this._y!==e&&(this._y=e,this.cb.call(this.scope))},enumerable:!1,configurable:!0}),n}(),qt=function(){function n(e,t,r,i,o,s){void 0===e&&(e=1),void 0===t&&(t=0),void 0===r&&(r=0),void 0===i&&(i=1),void 0===o&&(o=0),void 0===s&&(s=0),this.array=null,this.a=e,this.b=t,this.c=r,this.d=i,this.tx=o,this.ty=s}return n.prototype.fromArray=function(e){this.a=e[0],this.b=e[1],this.c=e[3],this.d=e[4],this.tx=e[2],this.ty=e[5]},n.prototype.set=function(e,t,r,i,o,s){return this.a=e,this.b=t,this.c=r,this.d=i,this.tx=o,this.ty=s,this},n.prototype.toArray=function(e,t){this.array||(this.array=new Float32Array(9));var r=t||this.array;return e?(r[0]=this.a,r[1]=this.b,r[2]=0,r[3]=this.c,r[4]=this.d,r[5]=0,r[6]=this.tx,r[7]=this.ty,r[8]=1):(r[0]=this.a,r[1]=this.c,r[2]=this.tx,r[3]=this.b,r[4]=this.d,r[5]=this.ty,r[6]=0,r[7]=0,r[8]=1),r},n.prototype.apply=function(e,t){t=t||new St;var r=e.x,i=e.y;return t.x=this.a*r+this.c*i+this.tx,t.y=this.b*r+this.d*i+this.ty,t},n.prototype.applyInverse=function(e,t){t=t||new St;var r=1/(this.a*this.d+this.c*-this.b),i=e.x,o=e.y;return t.x=this.d*r*i+-this.c*r*o+(this.ty*this.c-this.tx*this.d)*r,t.y=this.a*r*o+-this.b*r*i+(-this.ty*this.a+this.tx*this.b)*r,t},n.prototype.translate=function(e,t){return this.tx+=e,this.ty+=t,this},n.prototype.scale=function(e,t){return this.a*=e,this.d*=t,this.c*=e,this.b*=t,this.tx*=e,this.ty*=t,this},n.prototype.rotate=function(e){var t=Math.cos(e),r=Math.sin(e),i=this.a,o=this.c,s=this.tx;return this.a=i*t-this.b*r,this.b=i*r+this.b*t,this.c=o*t-this.d*r,this.d=o*r+this.d*t,this.tx=s*t-this.ty*r,this.ty=s*r+this.ty*t,this},n.prototype.append=function(e){var t=this.a,r=this.b,i=this.c,o=this.d;return this.a=e.a*t+e.b*i,this.b=e.a*r+e.b*o,this.c=e.c*t+e.d*i,this.d=e.c*r+e.d*o,this.tx=e.tx*t+e.ty*i+this.tx,this.ty=e.tx*r+e.ty*o+this.ty,this},n.prototype.setTransform=function(e,t,r,i,o,s,a,l,u){return this.a=Math.cos(a+u)*o,this.b=Math.sin(a+u)*o,this.c=-Math.sin(a-l)*s,this.d=Math.cos(a-l)*s,this.tx=e-(r*this.a+i*this.c),this.ty=t-(r*this.b+i*this.d),this},n.prototype.prepend=function(e){var t=this.tx;if(1!==e.a||0!==e.b||0!==e.c||1!==e.d){var r=this.a,i=this.c;this.a=r*e.a+this.b*e.c,this.b=r*e.b+this.b*e.d,this.c=i*e.a+this.d*e.c,this.d=i*e.b+this.d*e.d}return this.tx=t*e.a+this.ty*e.c+e.tx,this.ty=t*e.b+this.ty*e.d+e.ty,this},n.prototype.decompose=function(e){var t=this.a,r=this.b,i=this.c,o=this.d,s=e.pivot,a=-Math.atan2(-i,o),l=Math.atan2(r,t),u=Math.abs(a+l);return u<1e-5||Math.abs(qc-u)<1e-5?(e.rotation=l,e.skew.x=e.skew.y=0):(e.rotation=0,e.skew.x=a,e.skew.y=l),e.scale.x=Math.sqrt(t*t+r*r),e.scale.y=Math.sqrt(i*i+o*o),e.position.x=this.tx+(s.x*t+s.y*i),e.position.y=this.ty+(s.x*r+s.y*o),e},n.prototype.invert=function(){var e=this.a,t=this.b,r=this.c,i=this.d,o=this.tx,s=e*i-t*r;return this.a=i/s,this.b=-t/s,this.c=-r/s,this.d=e/s,this.tx=(r*this.ty-i*o)/s,this.ty=-(e*this.ty-t*o)/s,this},n.prototype.identity=function(){return this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0,this},n.prototype.clone=function(){var e=new n;return e.a=this.a,e.b=this.b,e.c=this.c,e.d=this.d,e.tx=this.tx,e.ty=this.ty,e},n.prototype.copyTo=function(e){return e.a=this.a,e.b=this.b,e.c=this.c,e.d=this.d,e.tx=this.tx,e.ty=this.ty,e},n.prototype.copyFrom=function(e){return this.a=e.a,this.b=e.b,this.c=e.c,this.d=e.d,this.tx=e.tx,this.ty=e.ty,this},n.prototype.toString=function(){return"[@pixi/math:Matrix a="+this.a+" b="+this.b+" c="+this.c+" d="+this.d+" tx="+this.tx+" ty="+this.ty+"]"},Object.defineProperty(n,"IDENTITY",{get:function(){return new n},enumerable:!1,configurable:!0}),Object.defineProperty(n,"TEMP_MATRIX",{get:function(){return new n},enumerable:!1,configurable:!0}),n}(),ko=[1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1,0,1],Uo=[0,1,1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1],Vo=[0,-1,-1,-1,0,1,1,1,0,1,1,1,0,-1,-1,-1],Go=[1,1,0,-1,-1,-1,0,1,-1,-1,0,1,1,1,0,-1],rm=[],sM=[],Zc=Math.sign;!function M3(){for(var n=0;n<16;n++){var e=[];rm.push(e);for(var t=0;t<16;t++)for(var r=Zc(ko[n]*ko[t]+Vo[n]*Uo[t]),i=Zc(Uo[n]*ko[t]+Go[n]*Uo[t]),o=Zc(ko[n]*Vo[t]+Vo[n]*Go[t]),s=Zc(Uo[n]*Vo[t]+Go[n]*Go[t]),a=0;a<16;a++)if(ko[a]===r&&Uo[a]===i&&Vo[a]===o&&Go[a]===s){e.push(a);break}}for(n=0;n<16;n++){var l=new qt;l.set(ko[n],Uo[n],Vo[n],Go[n],0,0),sM.push(l)}}();var Lt={E:0,SE:1,S:2,SW:3,W:4,NW:5,N:6,NE:7,MIRROR_VERTICAL:8,MAIN_DIAGONAL:10,MIRROR_HORIZONTAL:12,REVERSE_DIAGONAL:14,uX:function(n){return ko[n]},uY:function(n){return Uo[n]},vX:function(n){return Vo[n]},vY:function(n){return Go[n]},inv:function(n){return 8&n?15&n:7&-n},add:function(n,e){return rm[n][e]},sub:function(n,e){return rm[n][Lt.inv(e)]},rotate180:function(n){return 4^n},isVertical:function(n){return 2==(3&n)},byDirection:function(n,e){return 2*Math.abs(n)<=Math.abs(e)?e>=0?Lt.S:Lt.N:2*Math.abs(e)<=Math.abs(n)?n>0?Lt.E:Lt.W:e>0?n>0?Lt.SE:Lt.SW:n>0?Lt.NE:Lt.NW},matrixAppendRotationInv:function(n,e,t,r){void 0===t&&(t=0),void 0===r&&(r=0);var i=sM[Lt.inv(e)];i.tx=t,i.ty=r,n.append(i)}},im=function(){function n(){this.worldTransform=new qt,this.localTransform=new qt,this.position=new ia(this.onChange,this,0,0),this.scale=new ia(this.onChange,this,1,1),this.pivot=new ia(this.onChange,this,0,0),this.skew=new ia(this.updateSkew,this,0,0),this._rotation=0,this._cx=1,this._sx=0,this._cy=0,this._sy=1,this._localID=0,this._currentLocalID=0,this._worldID=0,this._parentID=0}return n.prototype.onChange=function(){this._localID++},n.prototype.updateSkew=function(){this._cx=Math.cos(this._rotation+this.skew.y),this._sx=Math.sin(this._rotation+this.skew.y),this._cy=-Math.sin(this._rotation-this.skew.x),this._sy=Math.cos(this._rotation-this.skew.x),this._localID++},n.prototype.toString=function(){return"[@pixi/math:Transform position=("+this.position.x+", "+this.position.y+") rotation="+this.rotation+" scale=("+this.scale.x+", "+this.scale.y+") skew=("+this.skew.x+", "+this.skew.y+") ]"},n.prototype.updateLocalTransform=function(){var e=this.localTransform;this._localID!==this._currentLocalID&&(e.a=this._cx*this.scale.x,e.b=this._sx*this.scale.x,e.c=this._cy*this.scale.y,e.d=this._sy*this.scale.y,e.tx=this.position.x-(this.pivot.x*e.a+this.pivot.y*e.c),e.ty=this.position.y-(this.pivot.x*e.b+this.pivot.y*e.d),this._currentLocalID=this._localID,this._parentID=-1)},n.prototype.updateTransform=function(e){var t=this.localTransform;if(this._localID!==this._currentLocalID&&(t.a=this._cx*this.scale.x,t.b=this._sx*this.scale.x,t.c=this._cy*this.scale.y,t.d=this._sy*this.scale.y,t.tx=this.position.x-(this.pivot.x*t.a+this.pivot.y*t.c),t.ty=this.position.y-(this.pivot.x*t.b+this.pivot.y*t.d),this._currentLocalID=this._localID,this._parentID=-1),this._parentID!==e._worldID){var r=e.worldTransform,i=this.worldTransform;i.a=t.a*r.a+t.b*r.c,i.b=t.a*r.b+t.b*r.d,i.c=t.c*r.a+t.d*r.c,i.d=t.c*r.b+t.d*r.d,i.tx=t.tx*r.a+t.ty*r.c+r.tx,i.ty=t.tx*r.b+t.ty*r.d+r.ty,this._parentID=e._worldID,this._worldID++}},n.prototype.setFromMatrix=function(e){e.decompose(this),this._localID++},Object.defineProperty(n.prototype,"rotation",{get:function(){return this._rotation},set:function(e){this._rotation!==e&&(this._rotation=e,this.updateSkew())},enumerable:!1,configurable:!0}),n.IDENTITY=new n,n}();de.SORTABLE_CHILDREN=!1;var wl=function(){function n(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0,this.rect=null,this.updateID=-1}return n.prototype.isEmpty=function(){return this.minX>this.maxX||this.minY>this.maxY},n.prototype.clear=function(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0},n.prototype.getRectangle=function(e){return this.minX>this.maxX||this.minY>this.maxY?Fe.EMPTY:((e=e||new Fe(0,0,1,1)).x=this.minX,e.y=this.minY,e.width=this.maxX-this.minX,e.height=this.maxY-this.minY,e)},n.prototype.addPoint=function(e){this.minX=Math.min(this.minX,e.x),this.maxX=Math.max(this.maxX,e.x),this.minY=Math.min(this.minY,e.y),this.maxY=Math.max(this.maxY,e.y)},n.prototype.addPointMatrix=function(e,t){var u=e.a*t.x+e.c*t.y+e.tx,c=e.b*t.x+e.d*t.y+e.ty;this.minX=Math.min(this.minX,u),this.maxX=Math.max(this.maxX,u),this.minY=Math.min(this.minY,c),this.maxY=Math.max(this.maxY,c)},n.prototype.addQuad=function(e){var t=this.minX,r=this.minY,i=this.maxX,o=this.maxY,s=e[0],a=e[1];t=s<t?s:t,r=a<r?a:r,i=s>i?s:i,o=a>o?a:o,t=(s=e[2])<t?s:t,r=(a=e[3])<r?a:r,i=s>i?s:i,o=a>o?a:o,t=(s=e[4])<t?s:t,r=(a=e[5])<r?a:r,i=s>i?s:i,o=a>o?a:o,r=(a=e[7])<r?a:r,i=(s=e[6])>i?s:i,o=a>o?a:o,this.minX=t=s<t?s:t,this.minY=r,this.maxX=i,this.maxY=o},n.prototype.addFrame=function(e,t,r,i,o){this.addFrameMatrix(e.worldTransform,t,r,i,o)},n.prototype.addFrameMatrix=function(e,t,r,i,o){var s=e.a,a=e.b,l=e.c,u=e.d,c=e.tx,d=e.ty,h=this.minX,f=this.minY,p=this.maxX,_=this.maxY,m=s*t+l*r+c,g=a*t+u*r+d;h=m<h?m:h,f=g<f?g:f,p=m>p?m:p,_=g>_?g:_,h=(m=s*i+l*r+c)<h?m:h,f=(g=a*i+u*r+d)<f?g:f,p=m>p?m:p,_=g>_?g:_,h=(m=s*t+l*o+c)<h?m:h,f=(g=a*t+u*o+d)<f?g:f,p=m>p?m:p,_=g>_?g:_,f=(g=a*i+u*o+d)<f?g:f,p=(m=s*i+l*o+c)>p?m:p,_=g>_?g:_,this.minX=h=m<h?m:h,this.minY=f,this.maxX=p,this.maxY=_},n.prototype.addVertexData=function(e,t,r){for(var i=this.minX,o=this.minY,s=this.maxX,a=this.maxY,l=t;l<r;l+=2){var u=e[l],c=e[l+1];i=u<i?u:i,o=c<o?c:o,s=u>s?u:s,a=c>a?c:a}this.minX=i,this.minY=o,this.maxX=s,this.maxY=a},n.prototype.addVertices=function(e,t,r,i){this.addVerticesMatrix(e.worldTransform,t,r,i)},n.prototype.addVerticesMatrix=function(e,t,r,i,o,s){void 0===o&&(o=0),void 0===s&&(s=o);for(var a=e.a,l=e.b,u=e.c,c=e.d,d=e.tx,h=e.ty,f=this.minX,p=this.minY,_=this.maxX,m=this.maxY,g=r;g<i;g+=2){var b=t[g],y=t[g+1],M=a*b+u*y+d,S=c*y+l*b+h;f=Math.min(f,M-o),_=Math.max(_,M+o),p=Math.min(p,S-s),m=Math.max(m,S+s)}this.minX=f,this.minY=p,this.maxX=_,this.maxY=m},n.prototype.addBounds=function(e){var t=this.minX,r=this.minY,i=this.maxX,o=this.maxY;this.minX=e.minX<t?e.minX:t,this.minY=e.minY<r?e.minY:r,this.maxX=e.maxX>i?e.maxX:i,this.maxY=e.maxY>o?e.maxY:o},n.prototype.addBoundsMask=function(e,t){var r=e.minX>t.minX?e.minX:t.minX,i=e.minY>t.minY?e.minY:t.minY,o=e.maxX<t.maxX?e.maxX:t.maxX,s=e.maxY<t.maxY?e.maxY:t.maxY;if(r<=o&&i<=s){var a=this.minX,l=this.minY,u=this.maxX,c=this.maxY;this.minX=r<a?r:a,this.minY=i<l?i:l,this.maxX=o>u?o:u,this.maxY=s>c?s:c}},n.prototype.addBoundsMatrix=function(e,t){this.addFrameMatrix(t,e.minX,e.minY,e.maxX,e.maxY)},n.prototype.addBoundsArea=function(e,t){var r=e.minX>t.x?e.minX:t.x,i=e.minY>t.y?e.minY:t.y,o=e.maxX<t.x+t.width?e.maxX:t.x+t.width,s=e.maxY<t.y+t.height?e.maxY:t.y+t.height;if(r<=o&&i<=s){var a=this.minX,l=this.minY,u=this.maxX,c=this.maxY;this.minX=r<a?r:a,this.minY=i<l?i:l,this.maxX=o>u?o:u,this.maxY=s>c?s:c}},n.prototype.pad=function(e,t){void 0===e&&(e=0),void 0===t&&(t=e),this.isEmpty()||(this.minX-=e,this.maxX+=e,this.minY-=t,this.maxY+=t)},n.prototype.addFramePad=function(e,t,r,i,o,s){t-=s,r+=o,i+=s,this.minX=this.minX<(e-=o)?this.minX:e,this.maxX=this.maxX>r?this.maxX:r,this.minY=this.minY<t?this.minY:t,this.maxY=this.maxY>i?this.maxY:i},n}(),om=function(n,e){return(om=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var i in r)r.hasOwnProperty(i)&&(t[i]=r[i])})(n,e)};function sm(n,e){function t(){this.constructor=n}om(n,e),n.prototype=null===e?Object.create(e):(t.prototype=e.prototype,new t)}var Kt=function(n){function e(){var t=n.call(this)||this;return t.tempDisplayObjectParent=null,t.transform=new im,t.alpha=1,t.visible=!0,t.renderable=!0,t.cullable=!1,t.cullArea=null,t.parent=null,t.worldAlpha=1,t._lastSortedIndex=0,t._zIndex=0,t.filterArea=null,t.filters=null,t._enabledFilters=null,t._bounds=new wl,t._localBounds=null,t._boundsID=0,t._boundsRect=null,t._localBoundsRect=null,t._mask=null,t._maskRefCount=0,t._destroyed=!1,t.isSprite=!1,t.isMask=!1,t}return sm(e,n),e.mixin=function(t){for(var r=Object.keys(t),i=0;i<r.length;++i){var o=r[i];Object.defineProperty(e.prototype,o,Object.getOwnPropertyDescriptor(t,o))}},Object.defineProperty(e.prototype,"destroyed",{get:function(){return this._destroyed},enumerable:!1,configurable:!0}),e.prototype._recursivePostUpdateTransform=function(){this.parent?(this.parent._recursivePostUpdateTransform(),this.transform.updateTransform(this.parent.transform)):this.transform.updateTransform(this._tempDisplayObjectParent.transform)},e.prototype.updateTransform=function(){this._boundsID++,this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha},e.prototype.getBounds=function(t,r){return t||(this.parent?(this._recursivePostUpdateTransform(),this.updateTransform()):(this.parent=this._tempDisplayObjectParent,this.updateTransform(),this.parent=null)),this._bounds.updateID!==this._boundsID&&(this.calculateBounds(),this._bounds.updateID=this._boundsID),r||(this._boundsRect||(this._boundsRect=new Fe),r=this._boundsRect),this._bounds.getRectangle(r)},e.prototype.getLocalBounds=function(t){t||(this._localBoundsRect||(this._localBoundsRect=new Fe),t=this._localBoundsRect),this._localBounds||(this._localBounds=new wl);var r=this.transform,i=this.parent;this.parent=null,this.transform=this._tempDisplayObjectParent.transform;var o=this._bounds,s=this._boundsID;this._bounds=this._localBounds;var a=this.getBounds(!1,t);return this.parent=i,this.transform=r,this._bounds=o,this._bounds.updateID+=this._boundsID-s,a},e.prototype.toGlobal=function(t,r,i){return void 0===i&&(i=!1),i||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.apply(t,r)},e.prototype.toLocal=function(t,r,i,o){return r&&(t=r.toGlobal(t,i,o)),o||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.applyInverse(t,i)},e.prototype.setParent=function(t){if(!t||!t.addChild)throw new Error("setParent: Argument must be a Container");return t.addChild(this),t},e.prototype.setTransform=function(t,r,i,o,s,a,l,u,c){return void 0===t&&(t=0),void 0===r&&(r=0),void 0===i&&(i=1),void 0===o&&(o=1),void 0===s&&(s=0),void 0===a&&(a=0),void 0===l&&(l=0),void 0===u&&(u=0),void 0===c&&(c=0),this.position.x=t,this.position.y=r,this.scale.x=i||1,this.scale.y=o||1,this.rotation=s,this.skew.x=a,this.skew.y=l,this.pivot.x=u,this.pivot.y=c,this},e.prototype.destroy=function(t){this.parent&&this.parent.removeChild(this),this._destroyed=!0,this.transform=null,this.parent=null,this._bounds=null,this.mask=null,this.cullArea=null,this.filters=null,this.filterArea=null,this.hitArea=null,this.interactive=!1,this.interactiveChildren=!1,this.emit("destroyed"),this.removeAllListeners()},Object.defineProperty(e.prototype,"_tempDisplayObjectParent",{get:function(){return null===this.tempDisplayObjectParent&&(this.tempDisplayObjectParent=new aM),this.tempDisplayObjectParent},enumerable:!1,configurable:!0}),e.prototype.enableTempParent=function(){var t=this.parent;return this.parent=this._tempDisplayObjectParent,t},e.prototype.disableTempParent=function(t){this.parent=t},Object.defineProperty(e.prototype,"x",{get:function(){return this.position.x},set:function(t){this.transform.position.x=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"y",{get:function(){return this.position.y},set:function(t){this.transform.position.y=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"worldTransform",{get:function(){return this.transform.worldTransform},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"localTransform",{get:function(){return this.transform.localTransform},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"position",{get:function(){return this.transform.position},set:function(t){this.transform.position.copyFrom(t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"scale",{get:function(){return this.transform.scale},set:function(t){this.transform.scale.copyFrom(t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"pivot",{get:function(){return this.transform.pivot},set:function(t){this.transform.pivot.copyFrom(t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"skew",{get:function(){return this.transform.skew},set:function(t){this.transform.skew.copyFrom(t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"rotation",{get:function(){return this.transform.rotation},set:function(t){this.transform.rotation=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"angle",{get:function(){return this.transform.rotation*iM},set:function(t){this.transform.rotation=t*oM},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"zIndex",{get:function(){return this._zIndex},set:function(t){this._zIndex=t,this.parent&&(this.parent.sortDirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"worldVisible",{get:function(){var t=this;do{if(!t.visible)return!1;t=t.parent}while(t);return!0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"mask",{get:function(){return this._mask},set:function(t){var r;this._mask!==t&&(this._mask&&((r=this._mask.maskObject||this._mask)._maskRefCount--,0===r._maskRefCount&&(r.renderable=!0,r.isMask=!1)),this._mask=t,this._mask&&(0===(r=this._mask.maskObject||this._mask)._maskRefCount&&(r.renderable=!1,r.isMask=!0),r._maskRefCount++))},enumerable:!1,configurable:!0}),e}(Js()),aM=function(n){function e(){var t=null!==n&&n.apply(this,arguments)||this;return t.sortDirty=null,t}return sm(e,n),e}(Kt);Kt.prototype.displayObjectUpdateTransform=Kt.prototype.updateTransform;var Jc=(()=>{return(n=Jc||(Jc={}))[n.NONE=0]="NONE",n[n.SCISSOR=1]="SCISSOR",n[n.STENCIL=2]="STENCIL",n[n.SPRITE=3]="SPRITE",Jc;var n})();function C3(n,e){return n.zIndex===e.zIndex?n._lastSortedIndex-e._lastSortedIndex:n.zIndex-e.zIndex}var ui=function(n){function e(){var t=n.call(this)||this;return t.children=[],t.sortableChildren=de.SORTABLE_CHILDREN,t.sortDirty=!1,t}return sm(e,n),e.prototype.onChildrenChange=function(t){},e.prototype.addChild=function(){for(var t=arguments,r=[],i=0;i<arguments.length;i++)r[i]=t[i];if(r.length>1)for(var o=0;o<r.length;o++)this.addChild(r[o]);else{var s=r[0];s.parent&&s.parent.removeChild(s),s.parent=this,this.sortDirty=!0,s.transform._parentID=-1,this.children.push(s),this._boundsID++,this.onChildrenChange(this.children.length-1),this.emit("childAdded",s,this,this.children.length-1),s.emit("added",this)}return r[0]},e.prototype.addChildAt=function(t,r){if(r<0||r>this.children.length)throw new Error(t+"addChildAt: The index "+r+" supplied is out of bounds "+this.children.length);return t.parent&&t.parent.removeChild(t),t.parent=this,this.sortDirty=!0,t.transform._parentID=-1,this.children.splice(r,0,t),this._boundsID++,this.onChildrenChange(r),t.emit("added",this),this.emit("childAdded",t,this,r),t},e.prototype.swapChildren=function(t,r){if(t!==r){var i=this.getChildIndex(t),o=this.getChildIndex(r);this.children[i]=r,this.children[o]=t,this.onChildrenChange(i<o?i:o)}},e.prototype.getChildIndex=function(t){var r=this.children.indexOf(t);if(-1===r)throw new Error("The supplied DisplayObject must be a child of the caller");return r},e.prototype.setChildIndex=function(t,r){if(r<0||r>=this.children.length)throw new Error("The index "+r+" supplied is out of bounds "+this.children.length);var i=this.getChildIndex(t);Ii(this.children,i,1),this.children.splice(r,0,t),this.onChildrenChange(r)},e.prototype.getChildAt=function(t){if(t<0||t>=this.children.length)throw new Error("getChildAt: Index ("+t+") does not exist.");return this.children[t]},e.prototype.removeChild=function(){for(var t=arguments,r=[],i=0;i<arguments.length;i++)r[i]=t[i];if(r.length>1)for(var o=0;o<r.length;o++)this.removeChild(r[o]);else{var s=r[0],a=this.children.indexOf(s);if(-1===a)return null;s.parent=null,s.transform._parentID=-1,Ii(this.children,a,1),this._boundsID++,this.onChildrenChange(a),s.emit("removed",this),this.emit("childRemoved",s,this,a)}return r[0]},e.prototype.removeChildAt=function(t){var r=this.getChildAt(t);return r.parent=null,r.transform._parentID=-1,Ii(this.children,t,1),this._boundsID++,this.onChildrenChange(t),r.emit("removed",this),this.emit("childRemoved",r,this,t),r},e.prototype.removeChildren=function(t,r){void 0===t&&(t=0),void 0===r&&(r=this.children.length);var a,s=r-t;if(s>0&&s<=r){a=this.children.splice(t,s);for(var l=0;l<a.length;++l)a[l].parent=null,a[l].transform&&(a[l].transform._parentID=-1);for(this._boundsID++,this.onChildrenChange(t),l=0;l<a.length;++l)a[l].emit("removed",this),this.emit("childRemoved",a[l],this,l);return a}if(0===s&&0===this.children.length)return[];throw new RangeError("removeChildren: numeric values are outside the acceptable range.")},e.prototype.sortChildren=function(){for(var t=!1,r=0,i=this.children.length;r<i;++r){var o=this.children[r];o._lastSortedIndex=r,!t&&0!==o.zIndex&&(t=!0)}t&&this.children.length>1&&this.children.sort(C3),this.sortDirty=!1},e.prototype.updateTransform=function(){this.sortableChildren&&this.sortDirty&&this.sortChildren(),this._boundsID++,this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha;for(var t=0,r=this.children.length;t<r;++t){var i=this.children[t];i.visible&&i.updateTransform()}},e.prototype.calculateBounds=function(){this._bounds.clear(),this._calculateBounds();for(var t=0;t<this.children.length;t++){var r=this.children[t];if(r.visible&&r.renderable)if(r.calculateBounds(),r._mask){var i=r._mask.maskObject||r._mask;i.calculateBounds(),this._bounds.addBoundsMask(r._bounds,i._bounds)}else r.filterArea?this._bounds.addBoundsArea(r._bounds,r.filterArea):this._bounds.addBounds(r._bounds)}this._bounds.updateID=this._boundsID},e.prototype.getLocalBounds=function(t,r){void 0===r&&(r=!1);var i=n.prototype.getLocalBounds.call(this,t);if(!r)for(var o=0,s=this.children.length;o<s;++o){var a=this.children[o];a.visible&&a.updateTransform()}return i},e.prototype._calculateBounds=function(){},e.prototype._renderWithCulling=function(t){var r=t.renderTexture.sourceFrame;if(r.width>0&&r.height>0){var i,o;if(this.cullArea?(i=this.cullArea,o=this.worldTransform):this._render!==e.prototype._render&&(i=this.getBounds(!0)),i&&r.intersects(i,o))this._render(t);else if(this.cullArea)return;for(var s=0,a=this.children.length;s<a;++s){var l=this.children[s],u=l.cullable;l.cullable=u||!this.cullArea,l.render(t),l.cullable=u}}},e.prototype.render=function(t){if(this.visible&&!(this.worldAlpha<=0)&&this.renderable)if(this._mask||this.filters&&this.filters.length)this.renderAdvanced(t);else if(this.cullable)this._renderWithCulling(t);else{this._render(t);for(var r=0,i=this.children.length;r<i;++r)this.children[r].render(t)}},e.prototype.renderAdvanced=function(t){var r=this.filters,i=this._mask;if(r){this._enabledFilters||(this._enabledFilters=[]),this._enabledFilters.length=0;for(var o=0;o<r.length;o++)r[o].enabled&&this._enabledFilters.push(r[o])}var s=r&&this._enabledFilters&&this._enabledFilters.length||i&&(!i.isMaskData||i.enabled&&(i.autoDetect||i.type!==Jc.NONE));if(s&&t.batch.flush(),r&&this._enabledFilters&&this._enabledFilters.length&&t.filter.push(this,this._enabledFilters),i&&t.mask.push(this,this._mask),this.cullable)this._renderWithCulling(t);else{this._render(t),o=0;for(var a=this.children.length;o<a;++o)this.children[o].render(t)}s&&t.batch.flush(),i&&t.mask.pop(this),r&&this._enabledFilters&&this._enabledFilters.length&&t.filter.pop()},e.prototype._render=function(t){},e.prototype.destroy=function(t){n.prototype.destroy.call(this),this.sortDirty=!1;var r="boolean"==typeof t?t:t&&t.children,i=this.removeChildren(0,this.children.length);if(r)for(var o=0;o<i.length;++o)i[o].destroy(t)},Object.defineProperty(e.prototype,"width",{get:function(){return this.scale.x*this.getLocalBounds().width},set:function(t){var r=this.getLocalBounds().width;this.scale.x=0!==r?t/r:1,this._width=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this.scale.y*this.getLocalBounds().height},set:function(t){var r=this.getLocalBounds().height;this.scale.y=0!==r?t/r:1,this._height=t},enumerable:!1,configurable:!0}),e}(Kt);ui.prototype.containerUpdateTransform=ui.prototype.updateTransform,Kt.mixin({accessible:!1,accessibleTitle:null,accessibleHint:null,tabIndex:0,_accessibleActive:!1,_accessibleDiv:null,accessibleType:"button",accessiblePointerEvents:"auto",accessibleChildren:!0,renderId:-1});var N3=function(){function n(e){this.debug=!1,this._isActive=!1,this._isMobileAccessibility=!1,this.pool=[],this.renderId=0,this.children=[],this.androidUpdateCount=0,this.androidUpdateFrequency=500,this._hookDiv=null,(ii.tablet||ii.phone)&&this.createTouchHook();var t=document.createElement("div");t.style.width="100px",t.style.height="100px",t.style.position="absolute",t.style.top="0px",t.style.left="0px",t.style.zIndex=2..toString(),this.div=t,this.renderer=e,this._onKeyDown=this._onKeyDown.bind(this),this._onMouseMove=this._onMouseMove.bind(this),globalThis.addEventListener("keydown",this._onKeyDown,!1)}return Object.defineProperty(n.prototype,"isActive",{get:function(){return this._isActive},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"isMobileAccessibility",{get:function(){return this._isMobileAccessibility},enumerable:!1,configurable:!0}),n.prototype.createTouchHook=function(){var e=this,t=document.createElement("button");t.style.width="1px",t.style.height="1px",t.style.position="absolute",t.style.top="-1000px",t.style.left="-1000px",t.style.zIndex=2..toString(),t.style.backgroundColor="#FF0000",t.title="select to enable accessibility for this content",t.addEventListener("focus",function(){e._isMobileAccessibility=!0,e.activate(),e.destroyTouchHook()}),document.body.appendChild(t),this._hookDiv=t},n.prototype.destroyTouchHook=function(){!this._hookDiv||(document.body.removeChild(this._hookDiv),this._hookDiv=null)},n.prototype.activate=function(){var e;this._isActive||(this._isActive=!0,globalThis.document.addEventListener("mousemove",this._onMouseMove,!0),globalThis.removeEventListener("keydown",this._onKeyDown,!1),this.renderer.on("postrender",this.update,this),null===(e=this.renderer.view.parentNode)||void 0===e||e.appendChild(this.div))},n.prototype.deactivate=function(){var e;!this._isActive||this._isMobileAccessibility||(this._isActive=!1,globalThis.document.removeEventListener("mousemove",this._onMouseMove,!0),globalThis.addEventListener("keydown",this._onKeyDown,!1),this.renderer.off("postrender",this.update),null===(e=this.div.parentNode)||void 0===e||e.removeChild(this.div))},n.prototype.updateAccessibleObjects=function(e){if(e.visible&&e.accessibleChildren){e.accessible&&e.interactive&&(e._accessibleActive||this.addChild(e),e.renderId=this.renderId);var t=e.children;if(t)for(var r=0;r<t.length;r++)this.updateAccessibleObjects(t[r])}},n.prototype.update=function(){var e=performance.now();if(!(ii.android.device&&e<this.androidUpdateCount)&&(this.androidUpdateCount=e+this.androidUpdateFrequency,this.renderer.renderingToScreen)){this.renderer._lastObjectRendered&&this.updateAccessibleObjects(this.renderer._lastObjectRendered);var t=this.renderer.view.getBoundingClientRect(),i=t.top,a=this.renderer,l=a.width,u=a.height,c=a.resolution,d=t.width/l*c,h=t.height/u*c,f=this.div;f.style.left=t.left+"px",f.style.top=i+"px",f.style.width=l+"px",f.style.height=u+"px";for(var p=0;p<this.children.length;p++){var _=this.children[p];if(_.renderId!==this.renderId)_._accessibleActive=!1,Ii(this.children,p,1),this.div.removeChild(_._accessibleDiv),this.pool.push(_._accessibleDiv),_._accessibleDiv=null,p--;else{f=_._accessibleDiv;var m=_.hitArea,g=_.worldTransform;_.hitArea?(f.style.left=(g.tx+m.x*g.a)*d+"px",f.style.top=(g.ty+m.y*g.d)*h+"px",f.style.width=m.width*g.a*d+"px",f.style.height=m.height*g.d*h+"px"):(m=_.getBounds(),this.capHitArea(m),f.style.left=m.x*d+"px",f.style.top=m.y*h+"px",f.style.width=m.width*d+"px",f.style.height=m.height*h+"px",f.title!==_.accessibleTitle&&null!==_.accessibleTitle&&(f.title=_.accessibleTitle),f.getAttribute("aria-label")!==_.accessibleHint&&null!==_.accessibleHint&&f.setAttribute("aria-label",_.accessibleHint)),(_.accessibleTitle!==f.title||_.tabIndex!==f.tabIndex)&&(f.title=_.accessibleTitle,f.tabIndex=_.tabIndex,this.debug&&this.updateDebugHTML(f))}}this.renderId++}},n.prototype.updateDebugHTML=function(e){e.innerHTML="type: "+e.type+"</br> title : "+e.title+"</br> tabIndex: "+e.tabIndex},n.prototype.capHitArea=function(e){e.x<0&&(e.width+=e.x,e.x=0),e.y<0&&(e.height+=e.y,e.y=0);var t=this.renderer,r=t.width,i=t.height;e.x+e.width>r&&(e.width=r-e.x),e.y+e.height>i&&(e.height=i-e.y)},n.prototype.addChild=function(e){var t=this.pool.pop();t||((t=document.createElement("button")).style.width="100px",t.style.height="100px",t.style.backgroundColor=this.debug?"rgba(255,255,255,0.5)":"transparent",t.style.position="absolute",t.style.zIndex=2..toString(),t.style.borderStyle="none",navigator.userAgent.toLowerCase().indexOf("chrome")>-1?t.setAttribute("aria-live","off"):t.setAttribute("aria-live","polite"),navigator.userAgent.match(/rv:.*Gecko\//)?t.setAttribute("aria-relevant","additions"):t.setAttribute("aria-relevant","text"),t.addEventListener("click",this._onClick.bind(this)),t.addEventListener("focus",this._onFocus.bind(this)),t.addEventListener("focusout",this._onFocusOut.bind(this))),t.style.pointerEvents=e.accessiblePointerEvents,t.type=e.accessibleType,e.accessibleTitle&&null!==e.accessibleTitle?t.title=e.accessibleTitle:(!e.accessibleHint||null===e.accessibleHint)&&(t.title="displayObject "+e.tabIndex),e.accessibleHint&&null!==e.accessibleHint&&t.setAttribute("aria-label",e.accessibleHint),this.debug&&this.updateDebugHTML(t),e._accessibleActive=!0,e._accessibleDiv=t,t.displayObject=e,this.children.push(e),this.div.appendChild(e._accessibleDiv),e._accessibleDiv.tabIndex=e.tabIndex},n.prototype._onClick=function(e){var t=this.renderer.plugins.interaction,r=e.target.displayObject,i=t.eventData;t.dispatchEvent(r,"click",i),t.dispatchEvent(r,"pointertap",i),t.dispatchEvent(r,"tap",i)},n.prototype._onFocus=function(e){e.target.getAttribute("aria-live")||e.target.setAttribute("aria-live","assertive");var t=this.renderer.plugins.interaction;t.dispatchEvent(e.target.displayObject,"mouseover",t.eventData)},n.prototype._onFocusOut=function(e){e.target.getAttribute("aria-live")||e.target.setAttribute("aria-live","polite");var t=this.renderer.plugins.interaction;t.dispatchEvent(e.target.displayObject,"mouseout",t.eventData)},n.prototype._onKeyDown=function(e){9===e.keyCode&&this.activate()},n.prototype._onMouseMove=function(e){0===e.movementX&&0===e.movementY||this.deactivate()},n.prototype.destroy=function(){this.destroyTouchHook(),this.div=null,globalThis.document.removeEventListener("mousemove",this._onMouseMove,!0),globalThis.removeEventListener("keydown",this._onKeyDown),this.pool=null,this.children=null,this.renderer=null},n}();de.TARGET_FPMS=.06;var ci=(()=>{return(n=ci||(ci={}))[n.INTERACTION=50]="INTERACTION",n[n.HIGH=25]="HIGH",n[n.NORMAL=0]="NORMAL",n[n.LOW=-25]="LOW",n[n.UTILITY=-50]="UTILITY",ci;var n})(),am=function(){function n(e,t,r,i){void 0===t&&(t=null),void 0===r&&(r=0),void 0===i&&(i=!1),this.next=null,this.previous=null,this._destroyed=!1,this.fn=e,this.context=t,this.priority=r,this.once=i}return n.prototype.match=function(e,t){return void 0===t&&(t=null),this.fn===e&&this.context===t},n.prototype.emit=function(e){this.fn&&(this.context?this.fn.call(this.context,e):this.fn(e));var t=this.next;return this.once&&this.destroy(!0),this._destroyed&&(this.next=null),t},n.prototype.connect=function(e){this.previous=e,e.next&&(e.next.previous=this),this.next=e.next,e.next=this},n.prototype.destroy=function(e){void 0===e&&(e=!1),this._destroyed=!0,this.fn=null,this.context=null,this.previous&&(this.previous.next=this.next),this.next&&(this.next.previous=this.previous);var t=this.next;return this.next=e?null:t,this.previous=null,t},n}(),vn=function(){function n(){var e=this;this.autoStart=!1,this.deltaTime=1,this.lastTime=-1,this.speed=1,this.started=!1,this._requestId=null,this._maxElapsedMS=100,this._minElapsedMS=0,this._protected=!1,this._lastFrame=-1,this._head=new am(null,null,1/0),this.deltaMS=1/de.TARGET_FPMS,this.elapsedMS=1/de.TARGET_FPMS,this._tick=function(t){e._requestId=null,e.started&&(e.update(t),e.started&&null===e._requestId&&e._head.next&&(e._requestId=requestAnimationFrame(e._tick)))}}return n.prototype._requestIfNeeded=function(){null===this._requestId&&this._head.next&&(this.lastTime=performance.now(),this._lastFrame=this.lastTime,this._requestId=requestAnimationFrame(this._tick))},n.prototype._cancelIfNeeded=function(){null!==this._requestId&&(cancelAnimationFrame(this._requestId),this._requestId=null)},n.prototype._startIfPossible=function(){this.started?this._requestIfNeeded():this.autoStart&&this.start()},n.prototype.add=function(e,t,r){return void 0===r&&(r=ci.NORMAL),this._addListener(new am(e,t,r))},n.prototype.addOnce=function(e,t,r){return void 0===r&&(r=ci.NORMAL),this._addListener(new am(e,t,r,!0))},n.prototype._addListener=function(e){var t=this._head.next,r=this._head;if(t){for(;t;){if(e.priority>t.priority){e.connect(r);break}r=t,t=t.next}e.previous||e.connect(r)}else e.connect(r);return this._startIfPossible(),this},n.prototype.remove=function(e,t){for(var r=this._head.next;r;)r=r.match(e,t)?r.destroy():r.next;return this._head.next||this._cancelIfNeeded(),this},Object.defineProperty(n.prototype,"count",{get:function(){if(!this._head)return 0;for(var e=0,t=this._head;t=t.next;)e++;return e},enumerable:!1,configurable:!0}),n.prototype.start=function(){this.started||(this.started=!0,this._requestIfNeeded())},n.prototype.stop=function(){this.started&&(this.started=!1,this._cancelIfNeeded())},n.prototype.destroy=function(){if(!this._protected){this.stop();for(var e=this._head.next;e;)e=e.destroy(!0);this._head.destroy(),this._head=null}},n.prototype.update=function(e){var t;if(void 0===e&&(e=performance.now()),e>this.lastTime){if((t=this.elapsedMS=e-this.lastTime)>this._maxElapsedMS&&(t=this._maxElapsedMS),t*=this.speed,this._minElapsedMS){var r=e-this._lastFrame|0;if(r<this._minElapsedMS)return;this._lastFrame=e-r%this._minElapsedMS}this.deltaMS=t,this.deltaTime=this.deltaMS*de.TARGET_FPMS;for(var i=this._head,o=i.next;o;)o=o.emit(this.deltaTime);i.next||this._cancelIfNeeded()}else this.deltaTime=this.deltaMS=this.elapsedMS=0;this.lastTime=e},Object.defineProperty(n.prototype,"FPS",{get:function(){return 1e3/this.elapsedMS},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"minFPS",{get:function(){return 1e3/this._maxElapsedMS},set:function(e){var t=Math.min(this.maxFPS,e),r=Math.min(Math.max(0,t)/1e3,de.TARGET_FPMS);this._maxElapsedMS=1/r},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"maxFPS",{get:function(){return this._minElapsedMS?Math.round(1e3/this._minElapsedMS):0},set:function(e){if(0===e)this._minElapsedMS=0;else{var t=Math.max(this.minFPS,e);this._minElapsedMS=1/(t/1e3)}},enumerable:!1,configurable:!0}),Object.defineProperty(n,"shared",{get:function(){if(!n._shared){var e=n._shared=new n;e.autoStart=!0,e._protected=!0}return n._shared},enumerable:!1,configurable:!0}),Object.defineProperty(n,"system",{get:function(){if(!n._system){var e=n._system=new n;e.autoStart=!0,e._protected=!0}return n._system},enumerable:!1,configurable:!0}),n}(),F3=function(){function n(){}return n.init=function(e){var t=this;e=Object.assign({autoStart:!0,sharedTicker:!1},e),Object.defineProperty(this,"ticker",{set:function(r){this._ticker&&this._ticker.remove(this.render,this),this._ticker=r,r&&r.add(this.render,this,ci.LOW)},get:function(){return this._ticker}}),this.stop=function(){t._ticker.stop()},this.start=function(){t._ticker.start()},this._ticker=null,this.ticker=e.sharedTicker?vn.shared:new vn,e.autoStart&&this.start()},n.destroy=function(){if(this._ticker){var e=this._ticker;this.ticker=null,e.destroy()}},n}(),cM=function(){function n(){this.pressure=0,this.rotationAngle=0,this.twist=0,this.tangentialPressure=0,this.global=new St,this.target=null,this.originalEvent=null,this.identifier=null,this.isPrimary=!1,this.button=0,this.buttons=0,this.width=0,this.height=0,this.tiltX=0,this.tiltY=0,this.pointerType=null,this.pressure=0,this.rotationAngle=0,this.twist=0,this.tangentialPressure=0}return Object.defineProperty(n.prototype,"pointerId",{get:function(){return this.identifier},enumerable:!1,configurable:!0}),n.prototype.getLocalPosition=function(e,t,r){return e.worldTransform.applyInverse(r||this.global,t)},n.prototype.copyEvent=function(e){"isPrimary"in e&&e.isPrimary&&(this.isPrimary=!0),this.button="button"in e&&e.button;var t="buttons"in e&&e.buttons;this.buttons=Number.isInteger(t)?t:"which"in e&&e.which,this.width="width"in e&&e.width,this.height="height"in e&&e.height,this.tiltX="tiltX"in e&&e.tiltX,this.tiltY="tiltY"in e&&e.tiltY,this.pointerType="pointerType"in e&&e.pointerType,this.pressure="pressure"in e&&e.pressure,this.rotationAngle="rotationAngle"in e&&e.rotationAngle,this.twist="twist"in e&&e.twist||0,this.tangentialPressure="tangentialPressure"in e&&e.tangentialPressure||0},n.prototype.reset=function(){this.isPrimary=!1},n}(),lm=function(n,e){return(lm=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var i in r)r.hasOwnProperty(i)&&(t[i]=r[i])})(n,e)},B3=function(){function n(){this.stopped=!1,this.stopsPropagatingAt=null,this.stopPropagationHint=!1,this.target=null,this.currentTarget=null,this.type=null,this.data=null}return n.prototype.stopPropagation=function(){this.stopped=!0,this.stopPropagationHint=!0,this.stopsPropagatingAt=this.currentTarget},n.prototype.reset=function(){this.stopped=!1,this.stopsPropagatingAt=null,this.stopPropagationHint=!1,this.currentTarget=null,this.target=null},n}(),um=function(){function n(e){this._pointerId=e,this._flags=n.FLAGS.NONE}return n.prototype._doSet=function(e,t){this._flags=t?this._flags|e:this._flags&~e},Object.defineProperty(n.prototype,"pointerId",{get:function(){return this._pointerId},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"flags",{get:function(){return this._flags},set:function(e){this._flags=e},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"none",{get:function(){return this._flags===n.FLAGS.NONE},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"over",{get:function(){return 0!=(this._flags&n.FLAGS.OVER)},set:function(e){this._doSet(n.FLAGS.OVER,e)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"rightDown",{get:function(){return 0!=(this._flags&n.FLAGS.RIGHT_DOWN)},set:function(e){this._doSet(n.FLAGS.RIGHT_DOWN,e)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"leftDown",{get:function(){return 0!=(this._flags&n.FLAGS.LEFT_DOWN)},set:function(e){this._doSet(n.FLAGS.LEFT_DOWN,e)},enumerable:!1,configurable:!0}),n.FLAGS=Object.freeze({NONE:0,OVER:1,LEFT_DOWN:2,RIGHT_DOWN:4}),n}(),k3=function(){function n(){this._tempPoint=new St}return n.prototype.recursiveFindHit=function(e,t,r,i,o){if(!t||!t.visible)return!1;var s=e.data.global,a=!1,l=o=t.interactive||o,u=!0;if(t.hitArea?(i&&(t.worldTransform.applyInverse(s,this._tempPoint),t.hitArea.contains(this._tempPoint.x,this._tempPoint.y)?a=!0:(i=!1,u=!1)),l=!1):t._mask&&i&&(t._mask.containsPoint&&t._mask.containsPoint(s)||(i=!1)),u&&t.interactiveChildren&&t.children)for(var c=t.children,d=c.length-1;d>=0;d--){var h=c[d],f=this.recursiveFindHit(e,h,r,i,l);if(f){if(!h.parent)continue;l=!1,f&&(e.target&&(i=!1),a=!0)}}return o&&(i&&!e.target&&!t.hitArea&&t.containsPoint&&t.containsPoint(s)&&(a=!0),t.interactive&&(a&&!e.target&&(e.target=t),r&&r(e,t,!!a))),a},n.prototype.findHit=function(e,t,r,i){this.recursiveFindHit(e,t,r,i,!1)},n}(),U3={interactive:!1,interactiveChildren:!0,hitArea:null,get buttonMode(){return"pointer"===this.cursor},set buttonMode(n){n?this.cursor="pointer":"pointer"===this.cursor&&(this.cursor=null)},cursor:null,get trackedPointers(){return void 0===this._trackedPointers&&(this._trackedPointers={}),this._trackedPointers},_trackedPointers:void 0};Kt.mixin(U3);var nd={target:null,data:{global:null}},V3=function(n){function e(t,r){var i=n.call(this)||this;return r=r||{},i.renderer=t,i.autoPreventDefault=void 0===r.autoPreventDefault||r.autoPreventDefault,i.interactionFrequency=r.interactionFrequency||10,i.mouse=new cM,i.mouse.identifier=1,i.mouse.global.set(-999999),i.activeInteractionData={},i.activeInteractionData[1]=i.mouse,i.interactionDataPool=[],i.eventData=new B3,i.interactionDOMElement=null,i.moveWhenInside=!1,i.eventsAdded=!1,i.tickerAdded=!1,i.mouseOverRenderer=!("PointerEvent"in globalThis),i.supportsTouchEvents="ontouchstart"in globalThis,i.supportsPointerEvents=!!globalThis.PointerEvent,i.onPointerUp=i.onPointerUp.bind(i),i.processPointerUp=i.processPointerUp.bind(i),i.onPointerCancel=i.onPointerCancel.bind(i),i.processPointerCancel=i.processPointerCancel.bind(i),i.onPointerDown=i.onPointerDown.bind(i),i.processPointerDown=i.processPointerDown.bind(i),i.onPointerMove=i.onPointerMove.bind(i),i.processPointerMove=i.processPointerMove.bind(i),i.onPointerOut=i.onPointerOut.bind(i),i.processPointerOverOut=i.processPointerOverOut.bind(i),i.onPointerOver=i.onPointerOver.bind(i),i.cursorStyles={default:"inherit",pointer:"pointer"},i.currentCursorMode=null,i.cursor=null,i.resolution=1,i.delayedEvents=[],i.search=new k3,i._tempDisplayObject=new aM,i._eventListenerOptions={capture:!0,passive:!1},i._useSystemTicker=void 0===r.useSystemTicker||r.useSystemTicker,i.setTargetElement(i.renderer.view,i.renderer.resolution),i}return function L3(n,e){function t(){this.constructor=n}lm(n,e),n.prototype=null===e?Object.create(e):(t.prototype=e.prototype,new t)}(e,n),Object.defineProperty(e.prototype,"useSystemTicker",{get:function(){return this._useSystemTicker},set:function(t){this._useSystemTicker=t,t?this.addTickerListener():this.removeTickerListener()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"lastObjectRendered",{get:function(){return this.renderer._lastObjectRendered||this._tempDisplayObject},enumerable:!1,configurable:!0}),e.prototype.hitTest=function(t,r){return nd.target=null,nd.data.global=t,r||(r=this.lastObjectRendered),this.processInteractive(nd,r,null,!0),nd.target},e.prototype.setTargetElement=function(t,r){void 0===r&&(r=1),this.removeTickerListener(),this.removeEvents(),this.interactionDOMElement=t,this.resolution=r,this.addEvents(),this.addTickerListener()},e.prototype.addTickerListener=function(){this.tickerAdded||!this.interactionDOMElement||!this._useSystemTicker||(vn.system.add(this.tickerUpdate,this,ci.INTERACTION),this.tickerAdded=!0)},e.prototype.removeTickerListener=function(){!this.tickerAdded||(vn.system.remove(this.tickerUpdate,this),this.tickerAdded=!1)},e.prototype.addEvents=function(){if(!this.eventsAdded&&this.interactionDOMElement){var t=this.interactionDOMElement.style;globalThis.navigator.msPointerEnabled?(t.msContentZooming="none",t.msTouchAction="none"):this.supportsPointerEvents&&(t.touchAction="none"),this.supportsPointerEvents?(globalThis.document.addEventListener("pointermove",this.onPointerMove,this._eventListenerOptions),this.interactionDOMElement.addEventListener("pointerdown",this.onPointerDown,this._eventListenerOptions),this.interactionDOMElement.addEventListener("pointerleave",this.onPointerOut,this._eventListenerOptions),this.interactionDOMElement.addEventListener("pointerover",this.onPointerOver,this._eventListenerOptions),globalThis.addEventListener("pointercancel",this.onPointerCancel,this._eventListenerOptions),globalThis.addEventListener("pointerup",this.onPointerUp,this._eventListenerOptions)):(globalThis.document.addEventListener("mousemove",this.onPointerMove,this._eventListenerOptions),this.interactionDOMElement.addEventListener("mousedown",this.onPointerDown,this._eventListenerOptions),this.interactionDOMElement.addEventListener("mouseout",this.onPointerOut,this._eventListenerOptions),this.interactionDOMElement.addEventListener("mouseover",this.onPointerOver,this._eventListenerOptions),globalThis.addEventListener("mouseup",this.onPointerUp,this._eventListenerOptions)),this.supportsTouchEvents&&(this.interactionDOMElement.addEventListener("touchstart",this.onPointerDown,this._eventListenerOptions),this.interactionDOMElement.addEventListener("touchcancel",this.onPointerCancel,this._eventListenerOptions),this.interactionDOMElement.addEventListener("touchend",this.onPointerUp,this._eventListenerOptions),this.interactionDOMElement.addEventListener("touchmove",this.onPointerMove,this._eventListenerOptions)),this.eventsAdded=!0}},e.prototype.removeEvents=function(){if(this.eventsAdded&&this.interactionDOMElement){var t=this.interactionDOMElement.style;globalThis.navigator.msPointerEnabled?(t.msContentZooming="",t.msTouchAction=""):this.supportsPointerEvents&&(t.touchAction=""),this.supportsPointerEvents?(globalThis.document.removeEventListener("pointermove",this.onPointerMove,this._eventListenerOptions),this.interactionDOMElement.removeEventListener("pointerdown",this.onPointerDown,this._eventListenerOptions),this.interactionDOMElement.removeEventListener("pointerleave",this.onPointerOut,this._eventListenerOptions),this.interactionDOMElement.removeEventListener("pointerover",this.onPointerOver,this._eventListenerOptions),globalThis.removeEventListener("pointercancel",this.onPointerCancel,this._eventListenerOptions),globalThis.removeEventListener("pointerup",this.onPointerUp,this._eventListenerOptions)):(globalThis.document.removeEventListener("mousemove",this.onPointerMove,this._eventListenerOptions),this.interactionDOMElement.removeEventListener("mousedown",this.onPointerDown,this._eventListenerOptions),this.interactionDOMElement.removeEventListener("mouseout",this.onPointerOut,this._eventListenerOptions),this.interactionDOMElement.removeEventListener("mouseover",this.onPointerOver,this._eventListenerOptions),globalThis.removeEventListener("mouseup",this.onPointerUp,this._eventListenerOptions)),this.supportsTouchEvents&&(this.interactionDOMElement.removeEventListener("touchstart",this.onPointerDown,this._eventListenerOptions),this.interactionDOMElement.removeEventListener("touchcancel",this.onPointerCancel,this._eventListenerOptions),this.interactionDOMElement.removeEventListener("touchend",this.onPointerUp,this._eventListenerOptions),this.interactionDOMElement.removeEventListener("touchmove",this.onPointerMove,this._eventListenerOptions)),this.interactionDOMElement=null,this.eventsAdded=!1}},e.prototype.tickerUpdate=function(t){this._deltaTime+=t,!(this._deltaTime<this.interactionFrequency)&&(this._deltaTime=0,this.update())},e.prototype.update=function(){if(this.interactionDOMElement){if(this._didMove)return void(this._didMove=!1);for(var t in this.cursor=null,this.activeInteractionData)if(this.activeInteractionData.hasOwnProperty(t)){var r=this.activeInteractionData[t];if(r.originalEvent&&"touch"!==r.pointerType){var i=this.configureInteractionEventForDOMEvent(this.eventData,r.originalEvent,r);this.processInteractive(i,this.lastObjectRendered,this.processPointerOverOut,!0)}}this.setCursorMode(this.cursor)}},e.prototype.setCursorMode=function(t){t=t||"default";var r=!0;if(globalThis.OffscreenCanvas&&this.interactionDOMElement instanceof OffscreenCanvas&&(r=!1),this.currentCursorMode!==t){this.currentCursorMode=t;var i=this.cursorStyles[t];if(i)switch(typeof i){case"string":r&&(this.interactionDOMElement.style.cursor=i);break;case"function":i(t);break;case"object":r&&Object.assign(this.interactionDOMElement.style,i)}else r&&"string"==typeof t&&!Object.prototype.hasOwnProperty.call(this.cursorStyles,t)&&(this.interactionDOMElement.style.cursor=t)}},e.prototype.dispatchEvent=function(t,r,i){(!i.stopPropagationHint||t===i.stopsPropagatingAt)&&(i.currentTarget=t,i.type=r,t.emit(r,i),t[r]&&t[r](i))},e.prototype.delayDispatchEvent=function(t,r,i){this.delayedEvents.push({displayObject:t,eventString:r,eventData:i})},e.prototype.mapPositionToPoint=function(t,r,i){var o;o=this.interactionDOMElement.parentElement?this.interactionDOMElement.getBoundingClientRect():{x:0,y:0,width:this.interactionDOMElement.width,height:this.interactionDOMElement.height,left:0,top:0};var s=1/this.resolution;t.x=this.interactionDOMElement.width/o.width*(r-o.left)*s,t.y=this.interactionDOMElement.height/o.height*(i-o.top)*s},e.prototype.processInteractive=function(t,r,i,o){var s=this.search.findHit(t,r,i,o),a=this.delayedEvents;if(!a.length)return s;t.stopPropagationHint=!1;var l=a.length;this.delayedEvents=[];for(var u=0;u<l;u++){var c=a[u],d=c.displayObject,h=c.eventString,f=c.eventData;f.stopsPropagatingAt===d&&(f.stopPropagationHint=!0),this.dispatchEvent(d,h,f)}return s},e.prototype.onPointerDown=function(t){if(!this.supportsTouchEvents||"touch"!==t.pointerType){var r=this.normalizeToPointerData(t);this.autoPreventDefault&&r[0].isNormalized&&(t.cancelable||!("cancelable"in t))&&t.preventDefault();for(var o=r.length,s=0;s<o;s++){var a=r[s],l=this.getInteractionDataForPointerId(a),u=this.configureInteractionEventForDOMEvent(this.eventData,a,l);u.data.originalEvent=t,this.processInteractive(u,this.lastObjectRendered,this.processPointerDown,!0),this.emit("pointerdown",u),"touch"===a.pointerType?this.emit("touchstart",u):"mouse"!==a.pointerType&&"pen"!==a.pointerType||this.emit(2===a.button?"rightdown":"mousedown",this.eventData)}}},e.prototype.processPointerDown=function(t,r,i){var o=t.data,s=t.data.identifier;if(i)if(r.trackedPointers[s]||(r.trackedPointers[s]=new um(s)),this.dispatchEvent(r,"pointerdown",t),"touch"===o.pointerType)this.dispatchEvent(r,"touchstart",t);else if("mouse"===o.pointerType||"pen"===o.pointerType){var a=2===o.button;a?r.trackedPointers[s].rightDown=!0:r.trackedPointers[s].leftDown=!0,this.dispatchEvent(r,a?"rightdown":"mousedown",t)}},e.prototype.onPointerComplete=function(t,r,i){for(var o=this.normalizeToPointerData(t),s=o.length,a=t.target!==this.interactionDOMElement?"outside":"",l=0;l<s;l++){var u=o[l],c=this.getInteractionDataForPointerId(u),d=this.configureInteractionEventForDOMEvent(this.eventData,u,c);d.data.originalEvent=t,this.processInteractive(d,this.lastObjectRendered,i,r||!a),this.emit(r?"pointercancel":"pointerup"+a,d),"mouse"===u.pointerType||"pen"===u.pointerType?this.emit(2===u.button?"rightup"+a:"mouseup"+a,d):"touch"===u.pointerType&&(this.emit(r?"touchcancel":"touchend"+a,d),this.releaseInteractionDataForPointerId(u.pointerId))}},e.prototype.onPointerCancel=function(t){this.supportsTouchEvents&&"touch"===t.pointerType||this.onPointerComplete(t,!0,this.processPointerCancel)},e.prototype.processPointerCancel=function(t,r){var i=t.data,o=t.data.identifier;void 0!==r.trackedPointers[o]&&(delete r.trackedPointers[o],this.dispatchEvent(r,"pointercancel",t),"touch"===i.pointerType&&this.dispatchEvent(r,"touchcancel",t))},e.prototype.onPointerUp=function(t){this.supportsTouchEvents&&"touch"===t.pointerType||this.onPointerComplete(t,!1,this.processPointerUp)},e.prototype.processPointerUp=function(t,r,i){var o=t.data,s=t.data.identifier,a=r.trackedPointers[s],l="touch"===o.pointerType,u="mouse"===o.pointerType||"pen"===o.pointerType,c=!1;if(u){var d=2===o.button,h=um.FLAGS,p=void 0!==a&&a.flags&(d?h.RIGHT_DOWN:h.LEFT_DOWN);i?(this.dispatchEvent(r,d?"rightup":"mouseup",t),p&&(this.dispatchEvent(r,d?"rightclick":"click",t),c=!0)):p&&this.dispatchEvent(r,d?"rightupoutside":"mouseupoutside",t),a&&(d?a.rightDown=!1:a.leftDown=!1)}i?(this.dispatchEvent(r,"pointerup",t),l&&this.dispatchEvent(r,"touchend",t),a&&((!u||c)&&this.dispatchEvent(r,"pointertap",t),l&&(this.dispatchEvent(r,"tap",t),a.over=!1))):a&&(this.dispatchEvent(r,"pointerupoutside",t),l&&this.dispatchEvent(r,"touchendoutside",t)),a&&a.none&&delete r.trackedPointers[s]},e.prototype.onPointerMove=function(t){if(!this.supportsTouchEvents||"touch"!==t.pointerType){var r=this.normalizeToPointerData(t);("mouse"===r[0].pointerType||"pen"===r[0].pointerType)&&(this._didMove=!0,this.cursor=null);for(var i=r.length,o=0;o<i;o++){var s=r[o],a=this.getInteractionDataForPointerId(s),l=this.configureInteractionEventForDOMEvent(this.eventData,s,a);l.data.originalEvent=t,this.processInteractive(l,this.lastObjectRendered,this.processPointerMove,!0),this.emit("pointermove",l),"touch"===s.pointerType&&this.emit("touchmove",l),("mouse"===s.pointerType||"pen"===s.pointerType)&&this.emit("mousemove",l)}"mouse"===r[0].pointerType&&this.setCursorMode(this.cursor)}},e.prototype.processPointerMove=function(t,r,i){var o=t.data,s="touch"===o.pointerType,a="mouse"===o.pointerType||"pen"===o.pointerType;a&&this.processPointerOverOut(t,r,i),(!this.moveWhenInside||i)&&(this.dispatchEvent(r,"pointermove",t),s&&this.dispatchEvent(r,"touchmove",t),a&&this.dispatchEvent(r,"mousemove",t))},e.prototype.onPointerOut=function(t){if(!this.supportsTouchEvents||"touch"!==t.pointerType){var i=this.normalizeToPointerData(t)[0];"mouse"===i.pointerType&&(this.mouseOverRenderer=!1,this.setCursorMode(null));var o=this.getInteractionDataForPointerId(i),s=this.configureInteractionEventForDOMEvent(this.eventData,i,o);s.data.originalEvent=i,this.processInteractive(s,this.lastObjectRendered,this.processPointerOverOut,!1),this.emit("pointerout",s),"mouse"===i.pointerType||"pen"===i.pointerType?this.emit("mouseout",s):this.releaseInteractionDataForPointerId(o.identifier)}},e.prototype.processPointerOverOut=function(t,r,i){var o=t.data,s=t.data.identifier,a="mouse"===o.pointerType||"pen"===o.pointerType,l=r.trackedPointers[s];i&&!l&&(l=r.trackedPointers[s]=new um(s)),void 0!==l&&(i&&this.mouseOverRenderer?(l.over||(l.over=!0,this.delayDispatchEvent(r,"pointerover",t),a&&this.delayDispatchEvent(r,"mouseover",t)),a&&null===this.cursor&&(this.cursor=r.cursor)):l.over&&(l.over=!1,this.dispatchEvent(r,"pointerout",this.eventData),a&&this.dispatchEvent(r,"mouseout",t),l.none&&delete r.trackedPointers[s]))},e.prototype.onPointerOver=function(t){var i=this.normalizeToPointerData(t)[0],o=this.getInteractionDataForPointerId(i),s=this.configureInteractionEventForDOMEvent(this.eventData,i,o);s.data.originalEvent=i,"mouse"===i.pointerType&&(this.mouseOverRenderer=!0),this.emit("pointerover",s),("mouse"===i.pointerType||"pen"===i.pointerType)&&this.emit("mouseover",s)},e.prototype.getInteractionDataForPointerId=function(t){var i,r=t.pointerId;return 1===r||"mouse"===t.pointerType?i=this.mouse:this.activeInteractionData[r]?i=this.activeInteractionData[r]:((i=this.interactionDataPool.pop()||new cM).identifier=r,this.activeInteractionData[r]=i),i.copyEvent(t),i},e.prototype.releaseInteractionDataForPointerId=function(t){var r=this.activeInteractionData[t];r&&(delete this.activeInteractionData[t],r.reset(),this.interactionDataPool.push(r))},e.prototype.configureInteractionEventForDOMEvent=function(t,r,i){return t.data=i,this.mapPositionToPoint(i.global,r.clientX,r.clientY),"touch"===r.pointerType&&(r.globalX=i.global.x,r.globalY=i.global.y),i.originalEvent=r,t.reset(),t},e.prototype.normalizeToPointerData=function(t){var r=[];if(this.supportsTouchEvents&&t instanceof TouchEvent)for(var i=0,o=t.changedTouches.length;i<o;i++){var s=t.changedTouches[i];void 0===s.button&&(s.button=t.touches.length?1:0),void 0===s.buttons&&(s.buttons=t.touches.length?1:0),void 0===s.isPrimary&&(s.isPrimary=1===t.touches.length&&"touchstart"===t.type),void 0===s.width&&(s.width=s.radiusX||1),void 0===s.height&&(s.height=s.radiusY||1),void 0===s.tiltX&&(s.tiltX=0),void 0===s.tiltY&&(s.tiltY=0),void 0===s.pointerType&&(s.pointerType="touch"),void 0===s.pointerId&&(s.pointerId=s.identifier||0),void 0===s.pressure&&(s.pressure=s.force||.5),void 0===s.twist&&(s.twist=0),void 0===s.tangentialPressure&&(s.tangentialPressure=0),void 0===s.layerX&&(s.layerX=s.offsetX=s.clientX),void 0===s.layerY&&(s.layerY=s.offsetY=s.clientY),s.isNormalized=!0,r.push(s)}else if(!globalThis.MouseEvent||t instanceof MouseEvent&&!(this.supportsPointerEvents&&t instanceof globalThis.PointerEvent)){var a=t;void 0===a.isPrimary&&(a.isPrimary=!0),void 0===a.width&&(a.width=1),void 0===a.height&&(a.height=1),void 0===a.tiltX&&(a.tiltX=0),void 0===a.tiltY&&(a.tiltY=0),void 0===a.pointerType&&(a.pointerType="mouse"),void 0===a.pointerId&&(a.pointerId=1),void 0===a.pressure&&(a.pressure=.5),void 0===a.twist&&(a.twist=0),void 0===a.tangentialPressure&&(a.tangentialPressure=0),a.isNormalized=!0,r.push(a)}else r.push(t);return r},e.prototype.destroy=function(){this.removeEvents(),this.removeTickerListener(),this.removeAllListeners(),this.renderer=null,this.mouse=null,this.eventData=null,this.interactionDOMElement=null,this.onPointerDown=null,this.processPointerDown=null,this.onPointerUp=null,this.processPointerUp=null,this.onPointerCancel=null,this.processPointerCancel=null,this.onPointerMove=null,this.processPointerMove=null,this.onPointerOut=null,this.processPointerOverOut=null,this.onPointerOver=null,this.search=null},e}(Js()),wn=function(){function n(e){this.items=[],this._name=e,this._aliasCount=0}return n.prototype.emit=function(e,t,r,i,o,s,a,l){if(arguments.length>8)throw new Error("max arguments reached");var u=this,c=u.name,d=u.items;this._aliasCount++;for(var h=0,f=d.length;h<f;h++)d[h][c](e,t,r,i,o,s,a,l);return d===this.items&&this._aliasCount--,this},n.prototype.ensureNonAliasedItems=function(){this._aliasCount>0&&this.items.length>1&&(this._aliasCount=0,this.items=this.items.slice(0))},n.prototype.add=function(e){return e[this._name]&&(this.ensureNonAliasedItems(),this.remove(e),this.items.push(e)),this},n.prototype.remove=function(e){var t=this.items.indexOf(e);return-1!==t&&(this.ensureNonAliasedItems(),this.items.splice(t,1)),this},n.prototype.contains=function(e){return-1!==this.items.indexOf(e)},n.prototype.removeAll=function(){return this.ensureNonAliasedItems(),this.items.length=0,this},n.prototype.destroy=function(){this.removeAll(),this.items=null,this._name=null},Object.defineProperty(n.prototype,"empty",{get:function(){return 0===this.items.length},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"name",{get:function(){return this._name},enumerable:!1,configurable:!0}),n}();Object.defineProperties(wn.prototype,{dispatch:{value:wn.prototype.emit},run:{value:wn.prototype.emit}}),de.PREFER_ENV=ii.any?oi.WEBGL:oi.WEBGL2,de.STRICT_TEXTURE_CACHE=!1;var rd=[];function cm(n,e){if(!n)return null;var t="";if("string"==typeof n){var r=/\.(\w{3,4})(?:$|\?|#)/i.exec(n);r&&(t=r[1].toLowerCase())}for(var i=rd.length-1;i>=0;--i){var o=rd[i];if(o.test&&o.test(n,t))return new o(n,e)}throw new Error("Unrecognized source type to auto-detect Resource")}var dm=function(n,e){return(dm=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var i in r)r.hasOwnProperty(i)&&(t[i]=r[i])})(n,e)};function bt(n,e){function t(){this.constructor=n}dm(n,e),n.prototype=null===e?Object.create(e):(t.prototype=e.prototype,new t)}var hm=function(){return hm=Object.assign||function(e){for(var r,t=arguments,i=1,o=arguments.length;i<o;i++)for(var s in r=t[i])Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s]);return e},hm.apply(this,arguments)},oa=function(){function n(e,t){void 0===e&&(e=0),void 0===t&&(t=0),this._width=e,this._height=t,this.destroyed=!1,this.internal=!1,this.onResize=new wn("setRealSize"),this.onUpdate=new wn("update"),this.onError=new wn("onError")}return n.prototype.bind=function(e){this.onResize.add(e),this.onUpdate.add(e),this.onError.add(e),(this._width||this._height)&&this.onResize.emit(this._width,this._height)},n.prototype.unbind=function(e){this.onResize.remove(e),this.onUpdate.remove(e),this.onError.remove(e)},n.prototype.resize=function(e,t){(e!==this._width||t!==this._height)&&(this._width=e,this._height=t,this.onResize.emit(e,t))},Object.defineProperty(n.prototype,"valid",{get:function(){return!!this._width&&!!this._height},enumerable:!1,configurable:!0}),n.prototype.update=function(){this.destroyed||this.onUpdate.emit()},n.prototype.load=function(){return Promise.resolve(this)},Object.defineProperty(n.prototype,"width",{get:function(){return this._width},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"height",{get:function(){return this._height},enumerable:!1,configurable:!0}),n.prototype.style=function(e,t,r){return!1},n.prototype.dispose=function(){},n.prototype.destroy=function(){this.destroyed||(this.destroyed=!0,this.dispose(),this.onError.removeAll(),this.onError=null,this.onResize.removeAll(),this.onResize=null,this.onUpdate.removeAll(),this.onUpdate=null)},n.test=function(e,t){return!1},n}(),sa=function(n){function e(t,r){var i=this,o=r||{},s=o.width,a=o.height;if(!s||!a)throw new Error("BufferResource width or height invalid");return(i=n.call(this,s,a)||this).data=t,i}return bt(e,n),e.prototype.upload=function(t,r,i){var o=t.gl;o.pixelStorei(o.UNPACK_PREMULTIPLY_ALPHA_WEBGL,r.alphaMode===_r.UNPACK);var s=r.realWidth,a=r.realHeight;return i.width===s&&i.height===a?o.texSubImage2D(r.target,0,0,0,s,a,r.format,i.type,this.data):(i.width=s,i.height=a,o.texImage2D(r.target,0,i.internalFormat,s,a,0,r.format,i.type,this.data)),!0},e.prototype.dispose=function(){this.data=null},e.test=function(t){return t instanceof Float32Array||t instanceof Uint8Array||t instanceof Uint32Array},e}(oa),H3={scaleMode:si.NEAREST,format:H.RGBA,alphaMode:_r.NPM},Xe=function(n){function e(t,r){void 0===t&&(t=null),void 0===r&&(r=null);var i=n.call(this)||this,o=(r=r||{}).alphaMode,s=r.mipmap,a=r.anisotropicLevel,l=r.scaleMode,u=r.width,c=r.height,d=r.wrapMode,h=r.format,f=r.type,p=r.target,_=r.resolution;return t&&!(t instanceof oa)&&((t=cm(t,r.resourceOptions)).internal=!0),i.resolution=_||de.RESOLUTION,i.width=Math.round((u||0)*i.resolution)/i.resolution,i.height=Math.round((c||0)*i.resolution)/i.resolution,i._mipmap=void 0!==s?s:de.MIPMAP_TEXTURES,i.anisotropicLevel=void 0!==a?a:de.ANISOTROPIC_LEVEL,i._wrapMode=d||de.WRAP_MODE,i._scaleMode=void 0!==l?l:de.SCALE_MODE,i.format=h||H.RGBA,i.type=f||pe.UNSIGNED_BYTE,i.target=p||eo.TEXTURE_2D,i.alphaMode=void 0!==o?o:_r.UNPACK,i.uid=Bo(),i.touched=0,i.isPowerOfTwo=!1,i._refreshPOT(),i._glTextures={},i.dirtyId=0,i.dirtyStyleId=0,i.cacheId=null,i.valid=u>0&&c>0,i.textureCacheIds=[],i.destroyed=!1,i.resource=null,i._batchEnabled=0,i._batchLocation=0,i.parentTextureArray=null,i.setResource(t),i}return bt(e,n),Object.defineProperty(e.prototype,"realWidth",{get:function(){return Math.round(this.width*this.resolution)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"realHeight",{get:function(){return Math.round(this.height*this.resolution)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"mipmap",{get:function(){return this._mipmap},set:function(t){this._mipmap!==t&&(this._mipmap=t,this.dirtyStyleId++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"scaleMode",{get:function(){return this._scaleMode},set:function(t){this._scaleMode!==t&&(this._scaleMode=t,this.dirtyStyleId++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"wrapMode",{get:function(){return this._wrapMode},set:function(t){this._wrapMode!==t&&(this._wrapMode=t,this.dirtyStyleId++)},enumerable:!1,configurable:!0}),e.prototype.setStyle=function(t,r){var i;return void 0!==t&&t!==this.scaleMode&&(this.scaleMode=t,i=!0),void 0!==r&&r!==this.mipmap&&(this.mipmap=r,i=!0),i&&this.dirtyStyleId++,this},e.prototype.setSize=function(t,r,i){return this.setRealSize(t*(i=i||this.resolution),r*i,i)},e.prototype.setRealSize=function(t,r,i){return this.resolution=i||this.resolution,this.width=Math.round(t)/this.resolution,this.height=Math.round(r)/this.resolution,this._refreshPOT(),this.update(),this},e.prototype._refreshPOT=function(){this.isPowerOfTwo=JS(this.realWidth)&&JS(this.realHeight)},e.prototype.setResolution=function(t){var r=this.resolution;return r===t||(this.resolution=t,this.valid&&(this.width=Math.round(this.width*r)/t,this.height=Math.round(this.height*r)/t,this.emit("update",this)),this._refreshPOT()),this},e.prototype.setResource=function(t){if(this.resource===t)return this;if(this.resource)throw new Error("Resource can be set only once");return t.bind(this),this.resource=t,this},e.prototype.update=function(){this.valid?(this.dirtyId++,this.dirtyStyleId++,this.emit("update",this)):this.width>0&&this.height>0&&(this.valid=!0,this.emit("loaded",this),this.emit("update",this))},e.prototype.onError=function(t){this.emit("error",this,t)},e.prototype.destroy=function(){this.resource&&(this.resource.unbind(this),this.resource.internal&&this.resource.destroy(),this.resource=null),this.cacheId&&(delete Vr[this.cacheId],delete rr[this.cacheId],this.cacheId=null),this.dispose(),e.removeFromCache(this),this.textureCacheIds=null,this.destroyed=!0},e.prototype.dispose=function(){this.emit("dispose",this)},e.prototype.castToBaseTexture=function(){return this},e.from=function(t,r,i){void 0===i&&(i=de.STRICT_TEXTURE_CACHE);var o="string"==typeof t,s=null;o?s=t:(t._pixiId||(t._pixiId=(r&&r.pixiIdPrefix||"pixiid")+"_"+Bo()),s=t._pixiId);var l=Vr[s];if(o&&i&&!l)throw new Error('The cacheId "'+s+'" does not exist in BaseTextureCache.');return l||((l=new e(t,r)).cacheId=s,e.addToCache(l,s)),l},e.fromBuffer=function(t,r,i,o){t=t||new Float32Array(r*i*4);var s=new sa(t,{width:r,height:i}),a=t instanceof Float32Array?pe.FLOAT:pe.UNSIGNED_BYTE;return new e(s,Object.assign(H3,o||{width:r,height:i,type:a}))},e.addToCache=function(t,r){r&&(-1===t.textureCacheIds.indexOf(r)&&t.textureCacheIds.push(r),Vr[r]&&console.warn("BaseTexture added to the cache with an id ["+r+"] that already had an entry"),Vr[r]=t)},e.removeFromCache=function(t){if("string"==typeof t){var r=Vr[t];if(r){var i=r.textureCacheIds.indexOf(t);return i>-1&&r.textureCacheIds.splice(i,1),delete Vr[t],r}}else if(t&&t.textureCacheIds){for(var o=0;o<t.textureCacheIds.length;++o)delete Vr[t.textureCacheIds[o]];return t.textureCacheIds.length=0,t}return null},e._globalBatch=0,e}(Js()),fm=function(n){function e(t,r){var i=this,o=r||{};(i=n.call(this,o.width,o.height)||this).items=[],i.itemDirtyIds=[];for(var l=0;l<t;l++){var u=new Xe;i.items.push(u),i.itemDirtyIds.push(-2)}return i.length=t,i._load=null,i.baseTexture=null,i}return bt(e,n),e.prototype.initFromArray=function(t,r){for(var i=0;i<this.length;i++)!t[i]||(t[i].castToBaseTexture?this.addBaseTextureAt(t[i].castToBaseTexture(),i):this.addResourceAt(t[i]instanceof oa?t[i]:cm(t[i],r),i))},e.prototype.dispose=function(){for(var t=0,r=this.length;t<r;t++)this.items[t].destroy();this.items=null,this.itemDirtyIds=null,this._load=null},e.prototype.addResourceAt=function(t,r){if(!this.items[r])throw new Error("Index "+r+" is out of bounds");return t.valid&&!this.valid&&this.resize(t.width,t.height),this.items[r].setResource(t),this},e.prototype.bind=function(t){if(null!==this.baseTexture)throw new Error("Only one base texture per TextureArray is allowed");n.prototype.bind.call(this,t);for(var r=0;r<this.length;r++)this.items[r].parentTextureArray=t,this.items[r].on("update",t.update,t)},e.prototype.unbind=function(t){n.prototype.unbind.call(this,t);for(var r=0;r<this.length;r++)this.items[r].parentTextureArray=null,this.items[r].off("update",t.update,t)},e.prototype.load=function(){var t=this;if(this._load)return this._load;var i=this.items.map(function(o){return o.resource}).filter(function(o){return o}).map(function(o){return o.load()});return this._load=Promise.all(i).then(function(){var o=t.items[0];return t.resize(o.realWidth,o.realHeight),Promise.resolve(t)}),this._load},e}(oa),dM=function(n){function e(t,r){var l,u,i=this,o=r||{},s=o.width,a=o.height;return Array.isArray(t)?(l=t,u=t.length):u=t,i=n.call(this,u,{width:s,height:a})||this,l&&i.initFromArray(l,r),i}return bt(e,n),e.prototype.addBaseTextureAt=function(t,r){if(!t.resource)throw new Error("ArrayResource does not support RenderTexture");return this.addResourceAt(t.resource,r),this},e.prototype.bind=function(t){n.prototype.bind.call(this,t),t.target=eo.TEXTURE_2D_ARRAY},e.prototype.upload=function(t,r,i){var o=this,s=o.length,a=o.itemDirtyIds,l=o.items,u=t.gl;i.dirtyId<0&&u.texImage3D(u.TEXTURE_2D_ARRAY,0,i.internalFormat,this._width,this._height,s,0,r.format,i.type,null);for(var c=0;c<s;c++){var d=l[c];a[c]<d.dirtyId&&(a[c]=d.dirtyId,d.valid&&u.texSubImage3D(u.TEXTURE_2D_ARRAY,0,0,0,c,d.resource.width,d.resource.height,1,r.format,i.type,d.resource.source))}return!0},e}(fm),Oi=function(n){function e(t){var r=this;return(r=n.call(this,t.naturalWidth||t.videoWidth||t.width,t.naturalHeight||t.videoHeight||t.height)||this).source=t,r.noSubImage=!1,r}return bt(e,n),e.crossOrigin=function(t,r,i){void 0===i&&0!==r.indexOf("data:")?t.crossOrigin=function b3(n,e){if(void 0===e&&(e=globalThis.location),0===n.indexOf("data:"))return"";e=e||globalThis.location,Xc||(Xc=document.createElement("a")),Xc.href=n;var t=ta.parse(Xc.href);return t.hostname!==e.hostname||(t.port||""!==e.port)&&t.port!==e.port||t.protocol!==e.protocol?"anonymous":""}(r):!1!==i&&(t.crossOrigin="string"==typeof i?i:"anonymous")},e.prototype.upload=function(t,r,i,o){var s=t.gl,a=r.realWidth,l=r.realHeight;if((o=o||this.source)instanceof HTMLImageElement){if(!o.complete||0===o.naturalWidth)return!1}else if(o instanceof HTMLVideoElement&&o.readyState<=1)return!1;return s.pixelStorei(s.UNPACK_PREMULTIPLY_ALPHA_WEBGL,r.alphaMode===_r.UNPACK),this.noSubImage||r.target!==s.TEXTURE_2D||i.width!==a||i.height!==l?(i.width=a,i.height=l,s.texImage2D(r.target,0,i.internalFormat,r.format,i.type,o)):s.texSubImage2D(s.TEXTURE_2D,0,0,0,r.format,i.type,o),!0},e.prototype.update=function(){if(!this.destroyed){var t=this.source;this.resize(t.naturalWidth||t.videoWidth||t.width,t.naturalHeight||t.videoHeight||t.height),n.prototype.update.call(this)}},e.prototype.dispose=function(){this.source=null},e}(oa),pm=function(n){function e(t){return n.call(this,t)||this}return bt(e,n),e.test=function(t){var r=globalThis.OffscreenCanvas;return!!(r&&t instanceof r)||globalThis.HTMLCanvasElement&&t instanceof HTMLCanvasElement},e}(Oi),hM=function(n){function e(t,r){var i=this,o=r||{},s=o.width,a=o.height,l=o.autoLoad,u=o.linkBaseTexture;if(t&&t.length!==e.SIDES)throw new Error("Invalid length. Got "+t.length+", expected 6");i=n.call(this,6,{width:s,height:a})||this;for(var c=0;c<e.SIDES;c++)i.items[c].target=eo.TEXTURE_CUBE_MAP_POSITIVE_X+c;return i.linkBaseTexture=!1!==u,t&&i.initFromArray(t,r),!1!==l&&i.load(),i}return bt(e,n),e.prototype.bind=function(t){n.prototype.bind.call(this,t),t.target=eo.TEXTURE_CUBE_MAP},e.prototype.addBaseTextureAt=function(t,r,i){if(!this.items[r])throw new Error("Index "+r+" is out of bounds");if(!this.linkBaseTexture||t.parentTextureArray||Object.keys(t._glTextures).length>0){if(!t.resource)throw new Error("CubeResource does not support copying of renderTexture.");this.addResourceAt(t.resource,r)}else t.target=eo.TEXTURE_CUBE_MAP_POSITIVE_X+r,t.parentTextureArray=this.baseTexture,this.items[r]=t;return t.valid&&!this.valid&&this.resize(t.realWidth,t.realHeight),this.items[r]=t,this},e.prototype.upload=function(t,r,i){for(var o=this.itemDirtyIds,s=0;s<e.SIDES;s++){var a=this.items[s];o[s]<a.dirtyId&&(a.valid&&a.resource?(a.resource.upload(t,a,i),o[s]=a.dirtyId):o[s]<-1&&(t.gl.texImage2D(a.target,0,i.internalFormat,r.realWidth,r.realHeight,0,r.format,i.type,null),o[s]=-1))}return!0},e.test=function(t){return Array.isArray(t)&&t.length===e.SIDES},e.SIDES=6,e}(fm),_m=function(n){function e(t,r){var i=this;if(r=r||{},!(t instanceof HTMLImageElement)){var o=new Image;Oi.crossOrigin(o,t,r.crossorigin),o.src=t,t=o}return i=n.call(this,t)||this,!t.complete&&!!i._width&&!!i._height&&(i._width=0,i._height=0),i.url=t.src,i._process=null,i.preserveBitmap=!1,i.createBitmap=(void 0!==r.createBitmap?r.createBitmap:de.CREATE_IMAGE_BITMAP)&&!!globalThis.createImageBitmap,i.alphaMode="number"==typeof r.alphaMode?r.alphaMode:null,i.bitmap=null,i._load=null,!1!==r.autoLoad&&i.load(),i}return bt(e,n),e.prototype.load=function(t){var r=this;return this._load||(void 0!==t&&(this.createBitmap=t),this._load=new Promise(function(i,o){var s=r.source;r.url=s.src;var a=function(){r.destroyed||(s.onload=null,s.onerror=null,r.resize(s.width,s.height),r._load=null,i(r.createBitmap?r.process():r))};s.complete&&s.src?a():(s.onload=a,s.onerror=function(l){o(l),r.onError.emit(l)})})),this._load},e.prototype.process=function(){var t=this,r=this.source;if(null!==this._process)return this._process;if(null!==this.bitmap||!globalThis.createImageBitmap)return Promise.resolve(this);var i=globalThis.createImageBitmap;return this._process=fetch(r.src,{mode:r.crossOrigin&&"anonymous"!==r.crossOrigin?"no-cors":"cors"}).then(function(s){return s.blob()}).then(function(s){return i(s,0,0,r.width,r.height,{premultiplyAlpha:t.alphaMode===_r.UNPACK?"premultiply":"none"})}).then(function(s){return t.destroyed?Promise.reject():(t.bitmap=s,t.update(),t._process=null,Promise.resolve(t))}),this._process},e.prototype.upload=function(t,r,i){if("number"==typeof this.alphaMode&&(r.alphaMode=this.alphaMode),!this.createBitmap)return n.prototype.upload.call(this,t,r,i);if(!this.bitmap&&(this.process(),!this.bitmap))return!1;if(n.prototype.upload.call(this,t,r,i,this.bitmap),!this.preserveBitmap){var o=!0,s=r._glTextures;for(var a in s){var l=s[a];if(l!==i&&l.dirtyId!==r.dirtyId){o=!1;break}}o&&(this.bitmap.close&&this.bitmap.close(),this.bitmap=null)}return!0},e.prototype.dispose=function(){this.source.onload=null,this.source.onerror=null,n.prototype.dispose.call(this),this.bitmap&&(this.bitmap.close(),this.bitmap=null),this._process=null,this._load=null},e.test=function(t){return"string"==typeof t||t instanceof HTMLImageElement},e}(Oi),fM=function(n){function e(t,r){var i=this;return r=r||{},(i=n.call(this,document.createElement("canvas"))||this)._width=0,i._height=0,i.svg=t,i.scale=r.scale||1,i._overrideWidth=r.width,i._overrideHeight=r.height,i._resolve=null,i._crossorigin=r.crossorigin,i._load=null,!1!==r.autoLoad&&i.load(),i}return bt(e,n),e.prototype.load=function(){var t=this;return this._load||(this._load=new Promise(function(r){if(t._resolve=function(){t.resize(t.source.width,t.source.height),r(t)},e.SVG_XML.test(t.svg.trim())){if(!btoa)throw new Error("Your browser doesn't support base64 conversions.");t.svg="data:image/svg+xml;base64,"+btoa(unescape(encodeURIComponent(t.svg)))}t._loadSvg()})),this._load},e.prototype._loadSvg=function(){var t=this,r=new Image;Oi.crossOrigin(r,this.svg,this._crossorigin),r.src=this.svg,r.onerror=function(i){!t._resolve||(r.onerror=null,t.onError.emit(i))},r.onload=function(){if(t._resolve){var i=r.width,o=r.height;if(!i||!o)throw new Error("The SVG image must have width and height defined (in pixels), canvas API needs them.");var s=i*t.scale,a=o*t.scale;(t._overrideWidth||t._overrideHeight)&&(s=t._overrideWidth||t._overrideHeight/o*i,a=t._overrideHeight||t._overrideWidth/i*o),s=Math.round(s),a=Math.round(a);var l=t.source;l.width=s,l.height=a,l._pixiId="canvas_"+Bo(),l.getContext("2d").drawImage(r,0,0,i,o,0,0,s,a),t._resolve(),t._resolve=null}}},e.getSize=function(t){var r=e.SVG_SIZE.exec(t),i={};return r&&(i[r[1]]=Math.round(parseFloat(r[3])),i[r[5]]=Math.round(parseFloat(r[7]))),i},e.prototype.dispose=function(){n.prototype.dispose.call(this),this._resolve=null,this._crossorigin=null},e.test=function(t,r){return"svg"===r||"string"==typeof t&&/^data:image\/svg\+xml(;(charset=utf8|utf8))?;base64/.test(t)||"string"==typeof t&&e.SVG_XML.test(t)},e.SVG_XML=/^(<\?xml[^?]+\?>)?\s*(<!--[^(-->)]*-->)?\s*\<svg/m,e.SVG_SIZE=/<svg[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*>/i,e}(Oi),pM=function(n){function e(t,r){var i=this;if(r=r||{},!(t instanceof HTMLVideoElement)){var o=document.createElement("video");o.setAttribute("preload","auto"),o.setAttribute("webkit-playsinline",""),o.setAttribute("playsinline",""),"string"==typeof t&&(t=[t]),Oi.crossOrigin(o,t[0].src||t[0],r.crossorigin);for(var a=0;a<t.length;++a){var l=document.createElement("source"),u=t[a],c=u.src,d=u.mime,h=(c=c||t[a]).split("?").shift().toLowerCase(),f=h.slice(h.lastIndexOf(".")+1);d=d||e.MIME_TYPES[f]||"video/"+f,l.src=c,l.type=d,o.appendChild(l)}t=o}return(i=n.call(this,t)||this).noSubImage=!0,i._autoUpdate=!0,i._isConnectedToTicker=!1,i._updateFPS=r.updateFPS||0,i._msToNextUpdate=0,i.autoPlay=!1!==r.autoPlay,i._load=null,i._resolve=null,i._onCanPlay=i._onCanPlay.bind(i),i._onError=i._onError.bind(i),!1!==r.autoLoad&&i.load(),i}return bt(e,n),e.prototype.update=function(t){this.destroyed||(this._msToNextUpdate=Math.floor(this._msToNextUpdate-vn.shared.elapsedMS*this.source.playbackRate),(!this._updateFPS||this._msToNextUpdate<=0)&&(n.prototype.update.call(this),this._msToNextUpdate=this._updateFPS?Math.floor(1e3/this._updateFPS):0))},e.prototype.load=function(){var t=this;if(this._load)return this._load;var r=this.source;return(r.readyState===r.HAVE_ENOUGH_DATA||r.readyState===r.HAVE_FUTURE_DATA)&&r.width&&r.height&&(r.complete=!0),r.addEventListener("play",this._onPlayStart.bind(this)),r.addEventListener("pause",this._onPlayStop.bind(this)),this._isSourceReady()?this._onCanPlay():(r.addEventListener("canplay",this._onCanPlay),r.addEventListener("canplaythrough",this._onCanPlay),r.addEventListener("error",this._onError,!0)),this._load=new Promise(function(i){t.valid?i(t):(t._resolve=i,r.load())}),this._load},e.prototype._onError=function(t){this.source.removeEventListener("error",this._onError,!0),this.onError.emit(t)},e.prototype._isSourcePlaying=function(){var t=this.source;return t.currentTime>0&&!1===t.paused&&!1===t.ended&&t.readyState>2},e.prototype._isSourceReady=function(){var t=this.source;return 3===t.readyState||4===t.readyState},e.prototype._onPlayStart=function(){this.valid||this._onCanPlay(),this.autoUpdate&&!this._isConnectedToTicker&&(vn.shared.add(this.update,this),this._isConnectedToTicker=!0)},e.prototype._onPlayStop=function(){this._isConnectedToTicker&&(vn.shared.remove(this.update,this),this._isConnectedToTicker=!1)},e.prototype._onCanPlay=function(){var t=this.source;t.removeEventListener("canplay",this._onCanPlay),t.removeEventListener("canplaythrough",this._onCanPlay);var r=this.valid;this.resize(t.videoWidth,t.videoHeight),!r&&this._resolve&&(this._resolve(this),this._resolve=null),this._isSourcePlaying()?this._onPlayStart():this.autoPlay&&t.play()},e.prototype.dispose=function(){this._isConnectedToTicker&&(vn.shared.remove(this.update,this),this._isConnectedToTicker=!1);var t=this.source;t&&(t.removeEventListener("error",this._onError,!0),t.pause(),t.src="",t.load()),n.prototype.dispose.call(this)},Object.defineProperty(e.prototype,"autoUpdate",{get:function(){return this._autoUpdate},set:function(t){t!==this._autoUpdate&&(this._autoUpdate=t,!this._autoUpdate&&this._isConnectedToTicker?(vn.shared.remove(this.update,this),this._isConnectedToTicker=!1):this._autoUpdate&&!this._isConnectedToTicker&&this._isSourcePlaying()&&(vn.shared.add(this.update,this),this._isConnectedToTicker=!0))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"updateFPS",{get:function(){return this._updateFPS},set:function(t){t!==this._updateFPS&&(this._updateFPS=t)},enumerable:!1,configurable:!0}),e.test=function(t,r){return globalThis.HTMLVideoElement&&t instanceof HTMLVideoElement||e.TYPES.indexOf(r)>-1},e.TYPES=["mp4","m4v","webm","ogg","ogv","h264","avi","mov"],e.MIME_TYPES={ogv:"video/ogg",mov:"video/quicktime",m4v:"video/mp4"},e}(Oi),_M=function(n){function e(t){return n.call(this,t)||this}return bt(e,n),e.test=function(t){return!!globalThis.createImageBitmap&&t instanceof ImageBitmap},e}(Oi);rd.push(_m,_M,pm,pM,fM,sa,hM,dM);var mM={__proto__:null,Resource:oa,BaseImageResource:Oi,INSTALLED:rd,autoDetectResource:cm,AbstractMultiResource:fm,ArrayResource:dM,BufferResource:sa,CanvasResource:pm,CubeResource:hM,ImageResource:_m,SVGResource:fM,VideoResource:pM,ImageBitmapResource:_M},j3=function(n){function e(){return null!==n&&n.apply(this,arguments)||this}return bt(e,n),e.prototype.upload=function(t,r,i){var o=t.gl;o.pixelStorei(o.UNPACK_PREMULTIPLY_ALPHA_WEBGL,r.alphaMode===_r.UNPACK);var s=r.realWidth,a=r.realHeight;return i.width===s&&i.height===a?o.texSubImage2D(r.target,0,0,0,s,a,r.format,i.type,this.data):(i.width=s,i.height=a,o.texImage2D(r.target,0,i.internalFormat,s,a,0,r.format,i.type,this.data)),!0},e}(sa),mm=function(){function n(e,t){this.width=Math.round(e||100),this.height=Math.round(t||100),this.stencil=!1,this.depth=!1,this.dirtyId=0,this.dirtyFormat=0,this.dirtySize=0,this.depthTexture=null,this.colorTextures=[],this.glFramebuffers={},this.disposeRunner=new wn("disposeFramebuffer"),this.multisample=$t.NONE}return Object.defineProperty(n.prototype,"colorTexture",{get:function(){return this.colorTextures[0]},enumerable:!1,configurable:!0}),n.prototype.addColorTexture=function(e,t){return void 0===e&&(e=0),this.colorTextures[e]=t||new Xe(null,{scaleMode:si.NEAREST,resolution:1,mipmap:li.OFF,width:this.width,height:this.height}),this.dirtyId++,this.dirtyFormat++,this},n.prototype.addDepthTexture=function(e){return this.depthTexture=e||new Xe(new j3(null,{width:this.width,height:this.height}),{scaleMode:si.NEAREST,resolution:1,width:this.width,height:this.height,mipmap:li.OFF,format:H.DEPTH_COMPONENT,type:pe.UNSIGNED_SHORT}),this.dirtyId++,this.dirtyFormat++,this},n.prototype.enableDepth=function(){return this.depth=!0,this.dirtyId++,this.dirtyFormat++,this},n.prototype.enableStencil=function(){return this.stencil=!0,this.dirtyId++,this.dirtyFormat++,this},n.prototype.resize=function(e,t){if(e=Math.round(e),t=Math.round(t),e!==this.width||t!==this.height){this.width=e,this.height=t,this.dirtyId++,this.dirtySize++;for(var r=0;r<this.colorTextures.length;r++){var i=this.colorTextures[r];i.setSize(e/(o=i.resolution),t/o)}var o;this.depthTexture&&this.depthTexture.setSize(e/(o=this.depthTexture.resolution),t/o)}},n.prototype.dispose=function(){this.disposeRunner.emit(this,!1)},n.prototype.destroyDepthTexture=function(){this.depthTexture&&(this.depthTexture.destroy(),this.depthTexture=null,++this.dirtyId,++this.dirtyFormat)},n}(),gM=function(n){function e(t){void 0===t&&(t={});var r=this;if("number"==typeof t){var i=arguments[0],o=arguments[1],s=arguments[2],a=arguments[3];t={width:i,height:o,scaleMode:s,resolution:a}}return t.width=t.width||100,t.height=t.height||100,t.multisample=void 0!==t.multisample?t.multisample:$t.NONE,(r=n.call(this,null,t)||this).mipmap=li.OFF,r.valid=!0,r.clearColor=[0,0,0,0],r.framebuffer=new mm(r.realWidth,r.realHeight).addColorTexture(0,r),r.framebuffer.multisample=t.multisample,r.maskStack=[],r.filterStack=[{}],r}return bt(e,n),e.prototype.resize=function(t,r){this.framebuffer.resize(t*this.resolution,r*this.resolution),this.setRealSize(this.framebuffer.width,this.framebuffer.height)},e.prototype.dispose=function(){this.framebuffer.dispose(),n.prototype.dispose.call(this)},e.prototype.destroy=function(){n.prototype.destroy.call(this),this.framebuffer.destroyDepthTexture(),this.framebuffer=null},e}(Xe),vM=function(){function n(){this.x0=0,this.y0=0,this.x1=1,this.y1=0,this.x2=1,this.y2=1,this.x3=0,this.y3=1,this.uvsFloat32=new Float32Array(8)}return n.prototype.set=function(e,t,r){var i=t.width,o=t.height;if(r){var s=e.width/2/i,a=e.height/2/o,l=e.x/i+s,u=e.y/o+a;r=Lt.add(r,Lt.NW),this.x0=l+s*Lt.uX(r),this.y0=u+a*Lt.uY(r),r=Lt.add(r,2),this.x1=l+s*Lt.uX(r),this.y1=u+a*Lt.uY(r),r=Lt.add(r,2),this.x2=l+s*Lt.uX(r),this.y2=u+a*Lt.uY(r),r=Lt.add(r,2),this.x3=l+s*Lt.uX(r),this.y3=u+a*Lt.uY(r)}else this.x0=e.x/i,this.y0=e.y/o,this.x1=(e.x+e.width)/i,this.y1=e.y/o,this.x2=(e.x+e.width)/i,this.y2=(e.y+e.height)/o,this.x3=e.x/i,this.y3=(e.y+e.height)/o;this.uvsFloat32[0]=this.x0,this.uvsFloat32[1]=this.y0,this.uvsFloat32[2]=this.x1,this.uvsFloat32[3]=this.y1,this.uvsFloat32[4]=this.x2,this.uvsFloat32[5]=this.y2,this.uvsFloat32[6]=this.x3,this.uvsFloat32[7]=this.y3},n.prototype.toString=function(){return"[@pixi/core:TextureUvs x0="+this.x0+" y0="+this.y0+" x1="+this.x1+" y1="+this.y1+" x2="+this.x2+" y2="+this.y2+" x3="+this.x3+" y3="+this.y3+"]"},n}(),yM=new vM;function id(n){n.destroy=function(){},n.on=function(){},n.once=function(){},n.emit=function(){}}var Ee=function(n){function e(t,r,i,o,s,a){var l=n.call(this)||this;if(l.noFrame=!1,r||(l.noFrame=!0,r=new Fe(0,0,1,1)),t instanceof e&&(t=t.baseTexture),l.baseTexture=t,l._frame=r,l.trim=o,l.valid=!1,l._uvs=yM,l.uvMatrix=null,l.orig=i||r,l._rotate=Number(s||0),!0===s)l._rotate=2;else if(l._rotate%2!=0)throw new Error("attempt to use diamond-shaped UVs. If you are sure, set rotation manually");return l.defaultAnchor=a?new St(a.x,a.y):new St(0,0),l._updateID=0,l.textureCacheIds=[],t.valid?l.noFrame?t.valid&&l.onBaseTextureUpdated(t):l.frame=r:t.once("loaded",l.onBaseTextureUpdated,l),l.noFrame&&t.on("update",l.onBaseTextureUpdated,l),l}return bt(e,n),e.prototype.update=function(){this.baseTexture.resource&&this.baseTexture.resource.update()},e.prototype.onBaseTextureUpdated=function(t){if(this.noFrame){if(!this.baseTexture.valid)return;this._frame.width=t.width,this._frame.height=t.height,this.valid=!0,this.updateUvs()}else this.frame=this._frame;this.emit("update",this)},e.prototype.destroy=function(t){if(this.baseTexture){if(t){var r=this.baseTexture.resource;r&&r.url&&rr[r.url]&&e.removeFromCache(r.url),this.baseTexture.destroy()}this.baseTexture.off("loaded",this.onBaseTextureUpdated,this),this.baseTexture.off("update",this.onBaseTextureUpdated,this),this.baseTexture=null}this._frame=null,this._uvs=null,this.trim=null,this.orig=null,this.valid=!1,e.removeFromCache(this),this.textureCacheIds=null},e.prototype.clone=function(){var t=this._frame.clone(),r=this._frame===this.orig?t:this.orig.clone(),i=new e(this.baseTexture,!this.noFrame&&t,r,this.trim&&this.trim.clone(),this.rotate,this.defaultAnchor);return this.noFrame&&(i._frame=t),i},e.prototype.updateUvs=function(){this._uvs===yM&&(this._uvs=new vM),this._uvs.set(this._frame,this.baseTexture,this.rotate),this._updateID++},e.from=function(t,r,i){void 0===r&&(r={}),void 0===i&&(i=de.STRICT_TEXTURE_CACHE);var o="string"==typeof t,s=null;o?s=t:t instanceof Xe?(t.cacheId||(t.cacheId=(r&&r.pixiIdPrefix||"pixiid")+"-"+Bo(),Xe.addToCache(t,t.cacheId)),s=t.cacheId):(t._pixiId||(t._pixiId=(r&&r.pixiIdPrefix||"pixiid")+"_"+Bo()),s=t._pixiId);var l=rr[s];if(o&&i&&!l)throw new Error('The cacheId "'+s+'" does not exist in TextureCache.');return l||t instanceof Xe?!l&&t instanceof Xe&&(l=new e(t),e.addToCache(l,s)):(r.resolution||(r.resolution=$c(t)),(l=new e(new Xe(t,r))).baseTexture.cacheId=s,Xe.addToCache(l.baseTexture,s),e.addToCache(l,s)),l},e.fromURL=function(t,r){var i=Object.assign({autoLoad:!1},null==r?void 0:r.resourceOptions),o=e.from(t,Object.assign({resourceOptions:i},r),!1),s=o.baseTexture.resource;return o.baseTexture.valid?Promise.resolve(o):s.load().then(function(){return Promise.resolve(o)})},e.fromBuffer=function(t,r,i,o){return new e(Xe.fromBuffer(t,r,i,o))},e.fromLoader=function(t,r,i,o){var s=new Xe(t,Object.assign({scaleMode:de.SCALE_MODE,resolution:$c(r)},o)),a=s.resource;a instanceof _m&&(a.url=r);var l=new e(s);return i||(i=r),Xe.addToCache(l.baseTexture,i),e.addToCache(l,i),i!==r&&(Xe.addToCache(l.baseTexture,r),e.addToCache(l,r)),l.baseTexture.valid?Promise.resolve(l):new Promise(function(u){l.baseTexture.once("loaded",function(){return u(l)})})},e.addToCache=function(t,r){r&&(-1===t.textureCacheIds.indexOf(r)&&t.textureCacheIds.push(r),rr[r]&&console.warn("Texture added to the cache with an id ["+r+"] that already had an entry"),rr[r]=t)},e.removeFromCache=function(t){if("string"==typeof t){var r=rr[t];if(r){var i=r.textureCacheIds.indexOf(t);return i>-1&&r.textureCacheIds.splice(i,1),delete rr[t],r}}else if(t&&t.textureCacheIds){for(var o=0;o<t.textureCacheIds.length;++o)rr[t.textureCacheIds[o]]===t&&delete rr[t.textureCacheIds[o]];return t.textureCacheIds.length=0,t}return null},Object.defineProperty(e.prototype,"resolution",{get:function(){return this.baseTexture.resolution},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"frame",{get:function(){return this._frame},set:function(t){this._frame=t,this.noFrame=!1;var r=t.x,i=t.y,o=t.width,s=t.height,a=r+o>this.baseTexture.width,l=i+s>this.baseTexture.height;if(a||l)throw new Error("Texture Error: frame does not fit inside the base Texture dimensions: X: "+r+" + "+o+" = "+(r+o)+" > "+this.baseTexture.width+" "+(a&&l?"and":"or")+" Y: "+i+" + "+s+" = "+(i+s)+" > "+this.baseTexture.height);this.valid=o&&s&&this.baseTexture.valid,!this.trim&&!this.rotate&&(this.orig=t),this.valid&&this.updateUvs()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"rotate",{get:function(){return this._rotate},set:function(t){this._rotate=t,this.valid&&this.updateUvs()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"width",{get:function(){return this.orig.width},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this.orig.height},enumerable:!1,configurable:!0}),e.prototype.castToBaseTexture=function(){return this.baseTexture},Object.defineProperty(e,"EMPTY",{get:function(){return e._EMPTY||(id(e._EMPTY=new e(new Xe)),id(e._EMPTY.baseTexture)),e._EMPTY},enumerable:!1,configurable:!0}),Object.defineProperty(e,"WHITE",{get:function(){if(!e._WHITE){var t=document.createElement("canvas"),r=t.getContext("2d");t.width=16,t.height=16,r.fillStyle="white",r.fillRect(0,0,16,16),id(e._WHITE=new e(new Xe(new pm(t)))),id(e._WHITE.baseTexture)}return e._WHITE},enumerable:!1,configurable:!0}),e}(Js()),Ho=function(n){function e(t,r){var i=n.call(this,t,r)||this;return i.valid=!0,i.filterFrame=null,i.filterPoolKey=null,i.updateUvs(),i}return bt(e,n),Object.defineProperty(e.prototype,"framebuffer",{get:function(){return this.baseTexture.framebuffer},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"multisample",{get:function(){return this.framebuffer.multisample},set:function(t){this.framebuffer.multisample=t},enumerable:!1,configurable:!0}),e.prototype.resize=function(t,r,i){void 0===i&&(i=!0);var o=this.baseTexture.resolution,s=Math.round(t*o)/o,a=Math.round(r*o)/o;this.valid=s>0&&a>0,this._frame.width=this.orig.width=s,this._frame.height=this.orig.height=a,i&&this.baseTexture.resize(s,a),this.updateUvs()},e.prototype.setResolution=function(t){var r=this.baseTexture;r.resolution!==t&&(r.setResolution(t),this.resize(r.width,r.height,!1))},e.create=function(t){for(var r=arguments,i=[],o=1;o<arguments.length;o++)i[o-1]=r[o];return"number"==typeof t&&(to("6.0.0","Arguments (width, height, scaleMode, resolution) have been deprecated."),t={width:t,height:i[0],scaleMode:i[1],resolution:i[2]}),new e(new gM(t))},e}(Ee),Y3=function(){function n(e){this.texturePool={},this.textureOptions=e||{},this.enableFullScreen=!1,this._pixelsWidth=0,this._pixelsHeight=0}return n.prototype.createTexture=function(e,t,r){void 0===r&&(r=$t.NONE);var i=new gM(Object.assign({width:e,height:t,resolution:1,multisample:r},this.textureOptions));return new Ho(i)},n.prototype.getOptimalTexture=function(e,t,r,i){var o;void 0===r&&(r=1),void 0===i&&(i=$t.NONE),e=Math.ceil(e*r-1e-6),t=Math.ceil(t*r-1e-6),this.enableFullScreen&&e===this._pixelsWidth&&t===this._pixelsHeight?o=i>1?-i:-1:(o=((65535&(e=Wc(e)))<<16|65535&(t=Wc(t)))>>>0,i>1&&(o+=4294967296*i)),this.texturePool[o]||(this.texturePool[o]=[]);var s=this.texturePool[o].pop();return s||(s=this.createTexture(e,t,i)),s.filterPoolKey=o,s.setResolution(r),s},n.prototype.getFilterTexture=function(e,t,r){var i=this.getOptimalTexture(e.width,e.height,t||e.resolution,r||$t.NONE);return i.filterFrame=e.filterFrame,i},n.prototype.returnTexture=function(e){var t=e.filterPoolKey;e.filterFrame=null,this.texturePool[t].push(e)},n.prototype.returnFilterTexture=function(e){this.returnTexture(e)},n.prototype.clear=function(e){if(e=!1!==e)for(var t in this.texturePool){var r=this.texturePool[t];if(r)for(var i=0;i<r.length;i++)r[i].destroy(!0)}this.texturePool={}},n.prototype.setScreenSize=function(e){if(e.width!==this._pixelsWidth||e.height!==this._pixelsHeight){for(var t in this.enableFullScreen=e.width>0&&e.height>0,this.texturePool)if(Number(t)<0){var r=this.texturePool[t];if(r)for(var i=0;i<r.length;i++)r[i].destroy(!0);this.texturePool[t]=[]}this._pixelsWidth=e.width,this._pixelsHeight=e.height}},n.SCREEN_KEY=-1,n}(),EM=function(){function n(e,t,r,i,o,s,a){void 0===t&&(t=0),void 0===r&&(r=!1),void 0===i&&(i=pe.FLOAT),this.buffer=e,this.size=t,this.normalized=r,this.type=i,this.stride=o,this.start=s,this.instance=a}return n.prototype.destroy=function(){this.buffer=null},n.from=function(e,t,r,i,o){return new n(e,t,r,i,o)},n}(),z3=0,un=function(){function n(e,t,r){void 0===t&&(t=!0),void 0===r&&(r=!1),this.data=e||new Float32Array(1),this._glBuffers={},this._updateID=0,this.index=r,this.static=t,this.id=z3++,this.disposeRunner=new wn("disposeBuffer")}return n.prototype.update=function(e){e instanceof Array&&(e=new Float32Array(e)),this.data=e||this.data,this._updateID++},n.prototype.dispose=function(){this.disposeRunner.emit(this,!1)},n.prototype.destroy=function(){this.dispose(),this.data=null},Object.defineProperty(n.prototype,"index",{get:function(){return this.type===Ur.ELEMENT_ARRAY_BUFFER},set:function(e){this.type=e?Ur.ELEMENT_ARRAY_BUFFER:Ur.ARRAY_BUFFER},enumerable:!1,configurable:!0}),n.from=function(e){return e instanceof Array&&(e=new Float32Array(e)),new n(e)},n}(),W3={Float32Array,Uint32Array,Int32Array,Uint8Array},bM={5126:4,5123:2,5121:1},$3=0,q3={Float32Array,Uint32Array,Int32Array,Uint8Array,Uint16Array},xl=function(){function n(e,t){void 0===e&&(e=[]),void 0===t&&(t={}),this.buffers=e,this.indexBuffer=null,this.attributes=t,this.glVertexArrayObjects={},this.id=$3++,this.instanced=!1,this.instanceCount=1,this.disposeRunner=new wn("disposeGeometry"),this.refCount=0}return n.prototype.addAttribute=function(e,t,r,i,o,s,a,l){if(void 0===r&&(r=0),void 0===i&&(i=!1),void 0===l&&(l=!1),!t)throw new Error("You must pass a buffer when creating an attribute");t instanceof un||(t instanceof Array&&(t=new Float32Array(t)),t=new un(t));var u=e.split("|");if(u.length>1){for(var c=0;c<u.length;c++)this.addAttribute(u[c],t,r,i,o);return this}var d=this.buffers.indexOf(t);return-1===d&&(this.buffers.push(t),d=this.buffers.length-1),this.attributes[e]=new EM(d,r,i,o,s,a,l),this.instanced=this.instanced||l,this},n.prototype.getAttribute=function(e){return this.attributes[e]},n.prototype.getBuffer=function(e){return this.buffers[this.getAttribute(e).buffer]},n.prototype.addIndex=function(e){return e instanceof un||(e instanceof Array&&(e=new Uint16Array(e)),e=new un(e)),e.type=Ur.ELEMENT_ARRAY_BUFFER,this.indexBuffer=e,-1===this.buffers.indexOf(e)&&this.buffers.push(e),this},n.prototype.getIndex=function(){return this.indexBuffer},n.prototype.interleave=function(){if(1===this.buffers.length||2===this.buffers.length&&this.indexBuffer)return this;var i,e=[],t=[],r=new un;for(i in this.attributes){var o=this.attributes[i];e.push(this.buffers[o.buffer].data),t.push(o.size*bM[o.type]/4),o.buffer=0}for(r.data=function X3(n,e){for(var t=0,r=0,i={},o=0;o<n.length;o++)r+=e[o],t+=n[o].length;var s=new ArrayBuffer(4*t),a=null,l=0;for(o=0;o<n.length;o++){var u=e[o],c=n[o],d=nm(c);i[d]||(i[d]=new W3[d](s)),a=i[d];for(var h=0;h<c.length;h++)a[(h/u|0)*r+l+h%u]=c[h];l+=u}return new Float32Array(s)}(e,t),i=0;i<this.buffers.length;i++)this.buffers[i]!==this.indexBuffer&&this.buffers[i].destroy();return this.buffers=[r],this.indexBuffer&&this.buffers.push(this.indexBuffer),this},n.prototype.getSize=function(){for(var e in this.attributes){var t=this.attributes[e];return this.buffers[t.buffer].data.length/(t.stride/4||t.size)}return 0},n.prototype.dispose=function(){this.disposeRunner.emit(this,!1)},n.prototype.destroy=function(){this.dispose(),this.buffers=null,this.indexBuffer=null,this.attributes=null},n.prototype.clone=function(){for(var e=new n,t=0;t<this.buffers.length;t++)e.buffers[t]=new un(this.buffers[t].data.slice(0));for(var t in this.attributes){var r=this.attributes[t];e.attributes[t]=new EM(r.buffer,r.size,r.normalized,r.type,r.stride,r.start,r.instance)}return this.indexBuffer&&(e.indexBuffer=e.buffers[this.buffers.indexOf(this.indexBuffer)],e.indexBuffer.type=Ur.ELEMENT_ARRAY_BUFFER),e},n.merge=function(e){for(var s,t=new n,r=[],i=[],o=[],a=0;a<e.length;a++){s=e[a];for(var l=0;l<s.buffers.length;l++)i[l]=i[l]||0,i[l]+=s.buffers[l].data.length,o[l]=0}for(a=0;a<s.buffers.length;a++)r[a]=new(q3[nm(s.buffers[a].data)])(i[a]),t.buffers[a]=new un(r[a]);for(a=0;a<e.length;a++)for(s=e[a],l=0;l<s.buffers.length;l++)r[l].set(s.buffers[l].data,o[l]),o[l]+=s.buffers[l].data.length;if(t.attributes=s.attributes,s.indexBuffer){t.indexBuffer=t.buffers[s.buffers.indexOf(s.indexBuffer)],t.indexBuffer.type=Ur.ELEMENT_ARRAY_BUFFER;var u=0,c=0,d=0,h=0;for(a=0;a<s.buffers.length;a++)if(s.buffers[a]!==s.indexBuffer){h=a;break}for(var a in s.attributes){var f=s.attributes[a];(0|f.buffer)===h&&(c+=f.size*bM[f.type]/4)}for(a=0;a<e.length;a++){var p=e[a].indexBuffer.data;for(l=0;l<p.length;l++)t.indexBuffer.data[l+d]+=u;u+=e[a].buffers[h].data.length/c,d+=p.length}}return t},n}(),K3=function(n){function e(){var t=n.call(this)||this;return t.addAttribute("aVertexPosition",new Float32Array([0,0,1,0,1,1,0,1])).addIndex([0,1,3,2]),t}return bt(e,n),e}(xl),TM=function(n){function e(){var t=n.call(this)||this;return t.vertices=new Float32Array([-1,-1,1,-1,1,1,-1,1]),t.uvs=new Float32Array([0,0,1,0,1,1,0,1]),t.vertexBuffer=new un(t.vertices),t.uvBuffer=new un(t.uvs),t.addAttribute("aVertexPosition",t.vertexBuffer).addAttribute("aTextureCoord",t.uvBuffer).addIndex([0,1,2,0,2,3]),t}return bt(e,n),e.prototype.map=function(t,r){var i=0,o=0;return this.uvs[0]=i,this.uvs[1]=o,this.uvs[2]=i+r.width/t.width,this.uvs[3]=o,this.uvs[4]=i+r.width/t.width,this.uvs[5]=o+r.height/t.height,this.uvs[6]=i,this.uvs[7]=o+r.height/t.height,o=r.y,this.vertices[0]=i=r.x,this.vertices[1]=o,this.vertices[2]=i+r.width,this.vertices[3]=o,this.vertices[4]=i+r.width,this.vertices[5]=o+r.height,this.vertices[6]=i,this.vertices[7]=o+r.height,this.invalidate(),this},e.prototype.invalidate=function(){return this.vertexBuffer._updateID++,this.uvBuffer._updateID++,this},e}(xl),Q3=0,jo=function(){function n(e,t,r){this.group=!0,this.syncUniforms={},this.dirtyId=0,this.id=Q3++,this.static=!!t,this.ubo=!!r,e instanceof un?(this.buffer=e,this.buffer.type=Ur.UNIFORM_BUFFER,this.autoManage=!1,this.ubo=!0):(this.uniforms=e,this.ubo&&(this.buffer=new un(new Float32Array(1)),this.buffer.type=Ur.UNIFORM_BUFFER,this.autoManage=!0))}return n.prototype.update=function(){this.dirtyId++,!this.autoManage&&this.buffer&&this.buffer.update()},n.prototype.add=function(e,t,r){if(this.ubo)throw new Error("[UniformGroup] uniform groups in ubo mode cannot be modified, or have uniform groups nested in them");this.uniforms[e]=new n(t,r)},n.from=function(e,t,r){return new n(e,t,r)},n.uboFrom=function(e,t){return new n(e,null==t||t,!0)},n}(),Z3=function(){function n(){this.renderTexture=null,this.target=null,this.legacy=!1,this.resolution=1,this.multisample=$t.NONE,this.sourceFrame=new Fe,this.destinationFrame=new Fe,this.bindingSourceFrame=new Fe,this.bindingDestinationFrame=new Fe,this.filters=[],this.transform=null}return n.prototype.clear=function(){this.target=null,this.filters=null,this.renderTexture=null},n}(),od=[new St,new St,new St,new St],gm=new qt,DM=function(){function n(e){this.renderer=e,this.defaultFilterStack=[{}],this.texturePool=new Y3,this.texturePool.setScreenSize(e.view),this.statePool=[],this.quad=new K3,this.quadUv=new TM,this.tempRect=new Fe,this.activeState={},this.globalUniforms=new jo({outputFrame:new Fe,inputSize:new Float32Array(4),inputPixel:new Float32Array(4),inputClamp:new Float32Array(4),resolution:1,filterArea:new Float32Array(4),filterClamp:new Float32Array(4)},!0),this.forceClear=!1,this.useMaxPadding=!1}return n.prototype.push=function(e,t){for(var r,i,o=this.renderer,s=this.defaultFilterStack,a=this.statePool.pop()||new Z3,l=this.renderer.renderTexture,u=t[0].resolution,c=t[0].multisample,d=t[0].padding,h=t[0].autoFit,f=null===(r=t[0].legacy)||void 0===r||r,p=1;p<t.length;p++){var _=t[p];u=Math.min(u,_.resolution),c=Math.min(c,_.multisample),d=this.useMaxPadding?Math.max(d,_.padding):d+_.padding,h=h&&_.autoFit,f=f||null===(i=_.legacy)||void 0===i||i}1===s.length&&(this.defaultFilterStack[0].renderTexture=l.current),s.push(a),a.resolution=u,a.multisample=c,a.legacy=f,a.target=e,a.sourceFrame.copyFrom(e.filterArea||e.getBounds(!0)),a.sourceFrame.pad(d);var m=this.tempRect.copyFrom(l.sourceFrame);o.projection.transform&&this.transformAABB(gm.copyFrom(o.projection.transform).invert(),m),h?(a.sourceFrame.fit(m),(a.sourceFrame.width<=0||a.sourceFrame.height<=0)&&(a.sourceFrame.width=0,a.sourceFrame.height=0)):a.sourceFrame.intersects(m)||(a.sourceFrame.width=0,a.sourceFrame.height=0),this.roundFrame(a.sourceFrame,l.current?l.current.resolution:o.resolution,l.sourceFrame,l.destinationFrame,o.projection.transform),a.renderTexture=this.getOptimalFilterTexture(a.sourceFrame.width,a.sourceFrame.height,u,c),a.filters=t,a.destinationFrame.width=a.renderTexture.width,a.destinationFrame.height=a.renderTexture.height;var g=this.tempRect;g.x=0,g.y=0,g.width=a.sourceFrame.width,g.height=a.sourceFrame.height,a.renderTexture.filterFrame=a.sourceFrame,a.bindingSourceFrame.copyFrom(l.sourceFrame),a.bindingDestinationFrame.copyFrom(l.destinationFrame),a.transform=o.projection.transform,o.projection.transform=null,l.bind(a.renderTexture,a.sourceFrame,g),o.framebuffer.clear(0,0,0,0)},n.prototype.pop=function(){var e=this.defaultFilterStack,t=e.pop(),r=t.filters;this.activeState=t;var i=this.globalUniforms.uniforms;i.outputFrame=t.sourceFrame,i.resolution=t.resolution;var o=i.inputSize,s=i.inputPixel,a=i.inputClamp;if(o[0]=t.destinationFrame.width,o[1]=t.destinationFrame.height,o[2]=1/o[0],o[3]=1/o[1],s[0]=Math.round(o[0]*t.resolution),s[1]=Math.round(o[1]*t.resolution),s[2]=1/s[0],s[3]=1/s[1],a[0]=.5*s[2],a[1]=.5*s[3],a[2]=t.sourceFrame.width*o[2]-.5*s[2],a[3]=t.sourceFrame.height*o[3]-.5*s[3],t.legacy){var l=i.filterArea;l[0]=t.destinationFrame.width,l[1]=t.destinationFrame.height,l[2]=t.sourceFrame.x,l[3]=t.sourceFrame.y,i.filterClamp=i.inputClamp}this.globalUniforms.update();var u=e[e.length-1];if(this.renderer.framebuffer.blit(),1===r.length)r[0].apply(this,t.renderTexture,u.renderTexture,Ri.BLEND,t),this.returnFilterTexture(t.renderTexture);else{var c=t.renderTexture,d=this.getOptimalFilterTexture(c.width,c.height,t.resolution);d.filterFrame=c.filterFrame;var h=0;for(h=0;h<r.length-1;++h){1===h&&t.multisample>1&&((d=this.getOptimalFilterTexture(c.width,c.height,t.resolution)).filterFrame=c.filterFrame),r[h].apply(this,c,d,Ri.CLEAR,t);var f=c;c=d,d=f}r[h].apply(this,c,u.renderTexture,Ri.BLEND,t),h>1&&t.multisample>1&&this.returnFilterTexture(t.renderTexture),this.returnFilterTexture(c),this.returnFilterTexture(d)}t.clear(),this.statePool.push(t)},n.prototype.bindAndClear=function(e,t){void 0===t&&(t=Ri.CLEAR);var r=this.renderer,i=r.renderTexture,o=r.state;if(this.renderer.projection.transform=e===this.defaultFilterStack[this.defaultFilterStack.length-1].renderTexture?this.activeState.transform:null,e&&e.filterFrame){var s=this.tempRect;s.x=0,s.y=0,s.width=e.filterFrame.width,s.height=e.filterFrame.height,i.bind(e,e.filterFrame,s)}else e!==this.defaultFilterStack[this.defaultFilterStack.length-1].renderTexture?i.bind(e):this.renderer.renderTexture.bind(e,this.activeState.bindingSourceFrame,this.activeState.bindingDestinationFrame);(t===Ri.CLEAR||t===Ri.BLIT&&(1&o.stateId||this.forceClear))&&this.renderer.framebuffer.clear(0,0,0,0)},n.prototype.applyFilter=function(e,t,r,i){var o=this.renderer;o.state.set(e.state),this.bindAndClear(r,i),e.uniforms.uSampler=t,e.uniforms.filterGlobals=this.globalUniforms,o.shader.bind(e),e.legacy=!!e.program.attributeData.aTextureCoord,e.legacy?(this.quadUv.map(t._frame,t.filterFrame),o.geometry.bind(this.quadUv),o.geometry.draw(pr.TRIANGLES)):(o.geometry.bind(this.quad),o.geometry.draw(pr.TRIANGLE_STRIP))},n.prototype.calculateSpriteMatrix=function(e,t){var r=this.activeState,i=r.sourceFrame,o=r.destinationFrame,s=t._texture.orig,a=e.set(o.width,0,0,o.height,i.x,i.y),l=t.worldTransform.copyTo(qt.TEMP_MATRIX);return l.invert(),a.prepend(l),a.scale(1/s.width,1/s.height),a.translate(t.anchor.x,t.anchor.y),a},n.prototype.destroy=function(){this.renderer=null,this.texturePool.clear(!1)},n.prototype.getOptimalFilterTexture=function(e,t,r,i){return void 0===r&&(r=1),void 0===i&&(i=$t.NONE),this.texturePool.getOptimalTexture(e,t,r,i)},n.prototype.getFilterTexture=function(e,t,r){if("number"==typeof e){var i=e;e=t,t=i}var o=this.texturePool.getOptimalTexture((e=e||this.activeState.renderTexture).width,e.height,t||e.resolution,r||$t.NONE);return o.filterFrame=e.filterFrame,o},n.prototype.returnFilterTexture=function(e){this.texturePool.returnTexture(e)},n.prototype.emptyPool=function(){this.texturePool.clear(!0)},n.prototype.resize=function(){this.texturePool.setScreenSize(this.renderer.view)},n.prototype.transformAABB=function(e,t){var r=od[0],i=od[1],o=od[2],s=od[3];r.set(t.left,t.top),i.set(t.left,t.bottom),o.set(t.right,t.top),s.set(t.right,t.bottom),e.apply(r,r),e.apply(i,i),e.apply(o,o),e.apply(s,s);var a=Math.min(r.x,i.x,o.x,s.x),l=Math.min(r.y,i.y,o.y,s.y),u=Math.max(r.x,i.x,o.x,s.x),c=Math.max(r.y,i.y,o.y,s.y);t.x=a,t.y=l,t.width=u-a,t.height=c-l},n.prototype.roundFrame=function(e,t,r,i,o){if(!(e.width<=0||e.height<=0||r.width<=0||r.height<=0)){if(o){var s=o.a,l=o.c,u=o.d;if((Math.abs(o.b)>1e-4||Math.abs(l)>1e-4)&&(Math.abs(s)>1e-4||Math.abs(u)>1e-4))return}(o=o?gm.copyFrom(o):gm.identity()).translate(-r.x,-r.y).scale(i.width/r.width,i.height/r.height).translate(i.x,i.y),this.transformAABB(o,e),e.ceil(t),this.transformAABB(o.invert(),e)}},n}(),sd=function(){function n(e){this.renderer=e}return n.prototype.flush=function(){},n.prototype.destroy=function(){this.renderer=null},n.prototype.start=function(){},n.prototype.stop=function(){this.flush()},n.prototype.render=function(e){},n}(),SM=function(){function n(e){this.renderer=e,this.emptyRenderer=new sd(e),this.currentRenderer=this.emptyRenderer}return n.prototype.setObjectRenderer=function(e){this.currentRenderer!==e&&(this.currentRenderer.stop(),this.currentRenderer=e,this.currentRenderer.start())},n.prototype.flush=function(){this.setObjectRenderer(this.emptyRenderer)},n.prototype.reset=function(){this.setObjectRenderer(this.emptyRenderer)},n.prototype.copyBoundTextures=function(e,t){for(var r=this.renderer.texture.boundTextures,i=t-1;i>=0;--i)e[i]=r[i]||null,e[i]&&(e[i]._batchLocation=i)},n.prototype.boundArray=function(e,t,r,i){for(var o=e.elements,s=e.ids,a=e.count,l=0,u=0;u<a;u++){var c=o[u],d=c._batchLocation;if(d>=0&&d<i&&t[d]===c)s[u]=d;else for(;l<i;){var h=t[l];if(!h||h._batchEnabled!==r||h._batchLocation!==l){s[u]=l,c._batchLocation=l,t[l]=c;break}l++}}},n.prototype.destroy=function(){this.renderer=null},n}(),MM=0,CM=function(){function n(e){this.renderer=e,this.webGLVersion=1,this.extensions={},this.supports={uint32Indices:!1},this.handleContextLost=this.handleContextLost.bind(this),this.handleContextRestored=this.handleContextRestored.bind(this),e.view.addEventListener("webglcontextlost",this.handleContextLost,!1),e.view.addEventListener("webglcontextrestored",this.handleContextRestored,!1)}return Object.defineProperty(n.prototype,"isLost",{get:function(){return!this.gl||this.gl.isContextLost()},enumerable:!1,configurable:!0}),n.prototype.contextChange=function(e){this.gl=e,this.renderer.gl=e,this.renderer.CONTEXT_UID=MM++,e.isContextLost()&&e.getExtension("WEBGL_lose_context")&&e.getExtension("WEBGL_lose_context").restoreContext()},n.prototype.initFromContext=function(e){this.gl=e,this.validateContext(e),this.renderer.gl=e,this.renderer.CONTEXT_UID=MM++,this.renderer.runners.contextChange.emit(e)},n.prototype.initFromOptions=function(e){var t=this.createContext(this.renderer.view,e);this.initFromContext(t)},n.prototype.createContext=function(e,t){var r;if(de.PREFER_ENV>=oi.WEBGL2&&(r=e.getContext("webgl2",t)),r)this.webGLVersion=2;else if(this.webGLVersion=1,!(r=e.getContext("webgl",t)||e.getContext("experimental-webgl",t)))throw new Error("This browser does not support WebGL. Try using the canvas renderer");return this.gl=r,this.getExtensions(),this.gl},n.prototype.getExtensions=function(){var e=this.gl,t={anisotropicFiltering:e.getExtension("EXT_texture_filter_anisotropic"),floatTextureLinear:e.getExtension("OES_texture_float_linear"),s3tc:e.getExtension("WEBGL_compressed_texture_s3tc"),s3tc_sRGB:e.getExtension("WEBGL_compressed_texture_s3tc_srgb"),etc:e.getExtension("WEBGL_compressed_texture_etc"),etc1:e.getExtension("WEBGL_compressed_texture_etc1"),pvrtc:e.getExtension("WEBGL_compressed_texture_pvrtc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc"),atc:e.getExtension("WEBGL_compressed_texture_atc"),astc:e.getExtension("WEBGL_compressed_texture_astc")};1===this.webGLVersion?Object.assign(this.extensions,t,{drawBuffers:e.getExtension("WEBGL_draw_buffers"),depthTexture:e.getExtension("WEBGL_depth_texture"),loseContext:e.getExtension("WEBGL_lose_context"),vertexArrayObject:e.getExtension("OES_vertex_array_object")||e.getExtension("MOZ_OES_vertex_array_object")||e.getExtension("WEBKIT_OES_vertex_array_object"),uint32ElementIndex:e.getExtension("OES_element_index_uint"),floatTexture:e.getExtension("OES_texture_float"),floatTextureLinear:e.getExtension("OES_texture_float_linear"),textureHalfFloat:e.getExtension("OES_texture_half_float"),textureHalfFloatLinear:e.getExtension("OES_texture_half_float_linear")}):2===this.webGLVersion&&Object.assign(this.extensions,t,{colorBufferFloat:e.getExtension("EXT_color_buffer_float")})},n.prototype.handleContextLost=function(e){e.preventDefault()},n.prototype.handleContextRestored=function(){this.renderer.runners.contextChange.emit(this.gl)},n.prototype.destroy=function(){var e=this.renderer.view;this.renderer=null,e.removeEventListener("webglcontextlost",this.handleContextLost),e.removeEventListener("webglcontextrestored",this.handleContextRestored),this.gl.useProgram(null),this.extensions.loseContext&&this.extensions.loseContext.loseContext()},n.prototype.postrender=function(){this.renderer.renderingToScreen&&this.gl.flush()},n.prototype.validateContext=function(e){var t=e.getContextAttributes(),r="WebGL2RenderingContext"in globalThis&&e instanceof globalThis.WebGL2RenderingContext;r&&(this.webGLVersion=2),t&&!t.stencil&&console.warn("Provided WebGL context does not have a stencil buffer, masks may not render correctly");var i=r||!!e.getExtension("OES_element_index_uint");this.supports.uint32Indices=i,i||console.warn("Provided WebGL context does not support 32 index buffer, complex graphics may not render correctly")},n}(),J3=function n(e){this.framebuffer=e,this.stencil=null,this.dirtyId=-1,this.dirtyFormat=-1,this.dirtySize=-1,this.multisample=$t.NONE,this.msaaBuffer=null,this.blitFramebuffer=null,this.mipLevel=0},eH=new Fe,AM=function(){function n(e){this.renderer=e,this.managedFramebuffers=[],this.unknownFramebuffer=new mm(10,10),this.msaaSamples=null}return n.prototype.contextChange=function(){var e=this.gl=this.renderer.gl;if(this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.current=this.unknownFramebuffer,this.viewport=new Fe,this.hasMRT=!0,this.writeDepthTexture=!0,this.disposeAll(!0),1===this.renderer.context.webGLVersion){var t=this.renderer.context.extensions.drawBuffers,r=this.renderer.context.extensions.depthTexture;de.PREFER_ENV===oi.WEBGL_LEGACY&&(t=null,r=null),t?e.drawBuffers=function(i){return t.drawBuffersWEBGL(i)}:(this.hasMRT=!1,e.drawBuffers=function(){}),r||(this.writeDepthTexture=!1)}else this.msaaSamples=e.getInternalformatParameter(e.RENDERBUFFER,e.RGBA8,e.SAMPLES)},n.prototype.bind=function(e,t,r){void 0===r&&(r=0);var i=this.gl;if(e){var o=e.glFramebuffers[this.CONTEXT_UID]||this.initFramebuffer(e);this.current!==e&&(this.current=e,i.bindFramebuffer(i.FRAMEBUFFER,o.framebuffer)),o.mipLevel!==r&&(e.dirtyId++,e.dirtyFormat++,o.mipLevel=r),o.dirtyId!==e.dirtyId&&(o.dirtyId=e.dirtyId,o.dirtyFormat!==e.dirtyFormat?(o.dirtyFormat=e.dirtyFormat,o.dirtySize=e.dirtySize,this.updateFramebuffer(e,r)):o.dirtySize!==e.dirtySize&&(o.dirtySize=e.dirtySize,this.resizeFramebuffer(e)));for(var s=0;s<e.colorTextures.length;s++){var a=e.colorTextures[s];this.renderer.texture.unbind(a.parentTextureArray||a)}if(e.depthTexture&&this.renderer.texture.unbind(e.depthTexture),t){var c=(l=t.width>>r)/t.width;this.setViewport(t.x*c,t.y*c,l,t.height>>r)}else{var l;this.setViewport(0,0,l=e.width>>r,e.height>>r)}}else this.current&&(this.current=null,i.bindFramebuffer(i.FRAMEBUFFER,null)),t?this.setViewport(t.x,t.y,t.width,t.height):this.setViewport(0,0,this.renderer.width,this.renderer.height)},n.prototype.setViewport=function(e,t,r,i){var o=this.viewport;e=Math.round(e),t=Math.round(t),r=Math.round(r),i=Math.round(i),(o.width!==r||o.height!==i||o.x!==e||o.y!==t)&&(o.x=e,o.y=t,o.width=r,o.height=i,this.gl.viewport(e,t,r,i))},Object.defineProperty(n.prototype,"size",{get:function(){return this.current?{x:0,y:0,width:this.current.width,height:this.current.height}:{x:0,y:0,width:this.renderer.width,height:this.renderer.height}},enumerable:!1,configurable:!0}),n.prototype.clear=function(e,t,r,i,o){void 0===o&&(o=Cl.COLOR|Cl.DEPTH);var s=this.gl;s.clearColor(e,t,r,i),s.clear(o)},n.prototype.initFramebuffer=function(e){var r=new J3(this.gl.createFramebuffer());return r.multisample=this.detectSamples(e.multisample),e.glFramebuffers[this.CONTEXT_UID]=r,this.managedFramebuffers.push(e),e.disposeRunner.add(this),r},n.prototype.resizeFramebuffer=function(e){var t=this.gl,r=e.glFramebuffers[this.CONTEXT_UID];r.msaaBuffer&&(t.bindRenderbuffer(t.RENDERBUFFER,r.msaaBuffer),t.renderbufferStorageMultisample(t.RENDERBUFFER,r.multisample,t.RGBA8,e.width,e.height)),r.stencil&&(t.bindRenderbuffer(t.RENDERBUFFER,r.stencil),r.msaaBuffer?t.renderbufferStorageMultisample(t.RENDERBUFFER,r.multisample,t.DEPTH24_STENCIL8,e.width,e.height):t.renderbufferStorage(t.RENDERBUFFER,t.DEPTH_STENCIL,e.width,e.height));var i=e.colorTextures,o=i.length;t.drawBuffers||(o=Math.min(o,1));for(var s=0;s<o;s++){var a=i[s];this.renderer.texture.bind(a.parentTextureArray||a,0)}e.depthTexture&&this.writeDepthTexture&&this.renderer.texture.bind(e.depthTexture,0)},n.prototype.updateFramebuffer=function(e,t){var r=this.gl,i=e.glFramebuffers[this.CONTEXT_UID],o=e.colorTextures,s=o.length;r.drawBuffers||(s=Math.min(s,1)),i.multisample>1&&this.canMultisampleFramebuffer(e)?(i.msaaBuffer=i.msaaBuffer||r.createRenderbuffer(),r.bindRenderbuffer(r.RENDERBUFFER,i.msaaBuffer),r.renderbufferStorageMultisample(r.RENDERBUFFER,i.multisample,r.RGBA8,e.width,e.height),r.framebufferRenderbuffer(r.FRAMEBUFFER,r.COLOR_ATTACHMENT0,r.RENDERBUFFER,i.msaaBuffer)):i.msaaBuffer&&(r.deleteRenderbuffer(i.msaaBuffer),i.msaaBuffer=null,i.blitFramebuffer&&(i.blitFramebuffer.dispose(),i.blitFramebuffer=null));for(var a=[],l=0;l<s;l++){var u=o[l],c=u.parentTextureArray||u;this.renderer.texture.bind(c,0),(0!==l||!i.msaaBuffer)&&(r.framebufferTexture2D(r.FRAMEBUFFER,r.COLOR_ATTACHMENT0+l,u.target,c._glTextures[this.CONTEXT_UID].texture,t),a.push(r.COLOR_ATTACHMENT0+l))}if(a.length>1&&r.drawBuffers(a),e.depthTexture&&this.writeDepthTexture){var h=e.depthTexture;this.renderer.texture.bind(h,0),r.framebufferTexture2D(r.FRAMEBUFFER,r.DEPTH_ATTACHMENT,r.TEXTURE_2D,h._glTextures[this.CONTEXT_UID].texture,t)}!e.stencil&&!e.depth||e.depthTexture&&this.writeDepthTexture?i.stencil&&(r.deleteRenderbuffer(i.stencil),i.stencil=null):(i.stencil=i.stencil||r.createRenderbuffer(),r.bindRenderbuffer(r.RENDERBUFFER,i.stencil),i.msaaBuffer?r.renderbufferStorageMultisample(r.RENDERBUFFER,i.multisample,r.DEPTH24_STENCIL8,e.width,e.height):r.renderbufferStorage(r.RENDERBUFFER,r.DEPTH_STENCIL,e.width,e.height),r.framebufferRenderbuffer(r.FRAMEBUFFER,r.DEPTH_STENCIL_ATTACHMENT,r.RENDERBUFFER,i.stencil))},n.prototype.canMultisampleFramebuffer=function(e){return 1!==this.renderer.context.webGLVersion&&e.colorTextures.length<=1&&!e.depthTexture},n.prototype.detectSamples=function(e){var t=this.msaaSamples,r=$t.NONE;if(e<=1||null===t)return r;for(var i=0;i<t.length;i++)if(t[i]<=e){r=t[i];break}return 1===r&&(r=$t.NONE),r},n.prototype.blit=function(e,t,r){var i=this,o=i.current,a=i.gl;if(2===i.renderer.context.webGLVersion&&o){var u=o.glFramebuffers[i.CONTEXT_UID];if(u){if(!e){if(!u.msaaBuffer)return;var c=o.colorTextures[0];if(!c)return;u.blitFramebuffer||(u.blitFramebuffer=new mm(o.width,o.height),u.blitFramebuffer.addColorTexture(0,c)),(e=u.blitFramebuffer).colorTextures[0]!==c&&(e.colorTextures[0]=c,e.dirtyId++,e.dirtyFormat++),(e.width!==o.width||e.height!==o.height)&&(e.width=o.width,e.height=o.height,e.dirtyId++,e.dirtySize++)}t||((t=eH).width=o.width,t.height=o.height),r||(r=t);var d=t.width===r.width&&t.height===r.height;this.bind(e),a.bindFramebuffer(a.READ_FRAMEBUFFER,u.framebuffer),a.blitFramebuffer(t.left,t.top,t.right,t.bottom,r.left,r.top,r.right,r.bottom,a.COLOR_BUFFER_BIT,d?a.NEAREST:a.LINEAR)}}},n.prototype.disposeFramebuffer=function(e,t){var r=e.glFramebuffers[this.CONTEXT_UID],i=this.gl;if(r){delete e.glFramebuffers[this.CONTEXT_UID];var o=this.managedFramebuffers.indexOf(e);o>=0&&this.managedFramebuffers.splice(o,1),e.disposeRunner.remove(this),t||(i.deleteFramebuffer(r.framebuffer),r.msaaBuffer&&i.deleteRenderbuffer(r.msaaBuffer),r.stencil&&i.deleteRenderbuffer(r.stencil)),r.blitFramebuffer&&r.blitFramebuffer.dispose()}},n.prototype.disposeAll=function(e){var t=this.managedFramebuffers;this.managedFramebuffers=[];for(var r=0;r<t.length;r++)this.disposeFramebuffer(t[r],e)},n.prototype.forceStencil=function(){var e=this.current;if(e){var t=e.glFramebuffers[this.CONTEXT_UID];if(t&&!t.stencil){e.stencil=!0;var r=e.width,i=e.height,o=this.gl,s=o.createRenderbuffer();o.bindRenderbuffer(o.RENDERBUFFER,s),t.msaaBuffer?o.renderbufferStorageMultisample(o.RENDERBUFFER,t.multisample,o.DEPTH24_STENCIL8,r,i):o.renderbufferStorage(o.RENDERBUFFER,o.DEPTH_STENCIL,r,i),t.stencil=s,o.framebufferRenderbuffer(o.FRAMEBUFFER,o.DEPTH_STENCIL_ATTACHMENT,o.RENDERBUFFER,s)}}},n.prototype.reset=function(){this.current=this.unknownFramebuffer,this.viewport=new Fe},n.prototype.destroy=function(){this.renderer=null},n}(),vm={5126:4,5123:2,5121:1},wM=function(){function n(e){this.renderer=e,this._activeGeometry=null,this._activeVao=null,this.hasVao=!0,this.hasInstance=!0,this.canUseUInt32ElementIndex=!1,this.managedGeometries={}}return n.prototype.contextChange=function(){this.disposeAll(!0);var e=this.gl=this.renderer.gl,t=this.renderer.context;if(this.CONTEXT_UID=this.renderer.CONTEXT_UID,2!==t.webGLVersion){var r=this.renderer.context.extensions.vertexArrayObject;de.PREFER_ENV===oi.WEBGL_LEGACY&&(r=null),r?(e.createVertexArray=function(){return r.createVertexArrayOES()},e.bindVertexArray=function(o){return r.bindVertexArrayOES(o)},e.deleteVertexArray=function(o){return r.deleteVertexArrayOES(o)}):(this.hasVao=!1,e.createVertexArray=function(){return null},e.bindVertexArray=function(){return null},e.deleteVertexArray=function(){return null})}if(2!==t.webGLVersion){var i=e.getExtension("ANGLE_instanced_arrays");i?(e.vertexAttribDivisor=function(o,s){return i.vertexAttribDivisorANGLE(o,s)},e.drawElementsInstanced=function(o,s,a,l,u){return i.drawElementsInstancedANGLE(o,s,a,l,u)},e.drawArraysInstanced=function(o,s,a,l){return i.drawArraysInstancedANGLE(o,s,a,l)}):this.hasInstance=!1}this.canUseUInt32ElementIndex=2===t.webGLVersion||!!t.extensions.uint32ElementIndex},n.prototype.bind=function(e,t){t=t||this.renderer.shader.shader;var r=this.gl,i=e.glVertexArrayObjects[this.CONTEXT_UID],o=!1;i||(this.managedGeometries[e.id]=e,e.disposeRunner.add(this),e.glVertexArrayObjects[this.CONTEXT_UID]=i={},o=!0);var s=i[t.program.id]||this.initGeometryVao(e,t,o);this._activeGeometry=e,this._activeVao!==s&&(this._activeVao=s,this.hasVao?r.bindVertexArray(s):this.activateVao(e,t.program)),this.updateBuffers()},n.prototype.reset=function(){this.unbind()},n.prototype.updateBuffers=function(){for(var e=this._activeGeometry,t=this.renderer.buffer,r=0;r<e.buffers.length;r++)t.update(e.buffers[r])},n.prototype.checkCompatibility=function(e,t){var r=e.attributes,i=t.attributeData;for(var o in i)if(!r[o])throw new Error('shader and geometry incompatible, geometry missing the "'+o+'" attribute')},n.prototype.getSignature=function(e,t){var r=e.attributes,i=t.attributeData,o=["g",e.id];for(var s in r)i[s]&&o.push(s,i[s].location);return o.join("-")},n.prototype.initGeometryVao=function(e,t,r){void 0===r&&(r=!0);var i=this.gl,o=this.CONTEXT_UID,s=this.renderer.buffer,a=t.program;a.glPrograms[o]||this.renderer.shader.generateProgram(t),this.checkCompatibility(e,a);var l=this.getSignature(e,a),u=e.glVertexArrayObjects[this.CONTEXT_UID],c=u[l];if(c)return u[a.id]=c,c;var d=e.buffers,h=e.attributes,f={},p={};for(var _ in d)f[_]=0,p[_]=0;for(var _ in h)!h[_].size&&a.attributeData[_]?h[_].size=a.attributeData[_].size:h[_].size||console.warn("PIXI Geometry attribute '"+_+"' size cannot be determined (likely the bound shader does not have the attribute)"),f[h[_].buffer]+=h[_].size*vm[h[_].type];for(var _ in h){var m=h[_],g=m.size;void 0===m.stride&&(m.stride=f[m.buffer]===g*vm[m.type]?0:f[m.buffer]),void 0===m.start&&(m.start=p[m.buffer],p[m.buffer]+=g*vm[m.type])}c=i.createVertexArray(),i.bindVertexArray(c);for(var b=0;b<d.length;b++){var y=d[b];s.bind(y),r&&y._glBuffers[o].refCount++}return this.activateVao(e,a),this._activeVao=c,u[a.id]=c,u[l]=c,c},n.prototype.disposeGeometry=function(e,t){var r;if(this.managedGeometries[e.id]){delete this.managedGeometries[e.id];var i=e.glVertexArrayObjects[this.CONTEXT_UID],o=this.gl,s=e.buffers,a=null===(r=this.renderer)||void 0===r?void 0:r.buffer;if(e.disposeRunner.remove(this),i){if(a)for(var l=0;l<s.length;l++){var u=s[l]._glBuffers[this.CONTEXT_UID];u&&(u.refCount--,0===u.refCount&&!t&&a.dispose(s[l],t))}if(!t)for(var c in i)if("g"===c[0]){var d=i[c];this._activeVao===d&&this.unbind(),o.deleteVertexArray(d)}delete e.glVertexArrayObjects[this.CONTEXT_UID]}}},n.prototype.disposeAll=function(e){for(var t=Object.keys(this.managedGeometries),r=0;r<t.length;r++)this.disposeGeometry(this.managedGeometries[t[r]],e)},n.prototype.activateVao=function(e,t){var r=this.gl,i=this.CONTEXT_UID,o=this.renderer.buffer,s=e.buffers,a=e.attributes;e.indexBuffer&&o.bind(e.indexBuffer);var l=null;for(var u in a){var c=a[u],d=s[c.buffer],h=d._glBuffers[i];if(t.attributeData[u]){l!==h&&(o.bind(d),l=h);var f=t.attributeData[u].location;if(r.enableVertexAttribArray(f),r.vertexAttribPointer(f,c.size,c.type||r.FLOAT,c.normalized,c.stride,c.start),c.instance){if(!this.hasInstance)throw new Error("geometry error, GPU Instancing is not supported on this device");r.vertexAttribDivisor(f,1)}}}},n.prototype.draw=function(e,t,r,i){var o=this.gl,s=this._activeGeometry;if(s.indexBuffer){var a=s.indexBuffer.data.BYTES_PER_ELEMENT,l=2===a?o.UNSIGNED_SHORT:o.UNSIGNED_INT;2===a||4===a&&this.canUseUInt32ElementIndex?s.instanced?o.drawElementsInstanced(e,t||s.indexBuffer.data.length,l,(r||0)*a,i||1):o.drawElements(e,t||s.indexBuffer.data.length,l,(r||0)*a):console.warn("unsupported index buffer type: uint32")}else s.instanced?o.drawArraysInstanced(e,r,t||s.getSize(),i||1):o.drawArrays(e,r,t||s.getSize());return this},n.prototype.unbind=function(){this.gl.bindVertexArray(null),this._activeVao=null,this._activeGeometry=null},n.prototype.destroy=function(){this.renderer=null},n}(),tH=function(){function n(e){void 0===e&&(e=null),this.type=gn.NONE,this.autoDetect=!0,this.maskObject=e||null,this.pooled=!1,this.isMaskData=!0,this.resolution=null,this.multisample=de.FILTER_MULTISAMPLE,this.enabled=!0,this._filters=null,this._stencilCounter=0,this._scissorCounter=0,this._scissorRect=null,this._scissorRectLocal=null,this._target=null}return Object.defineProperty(n.prototype,"filter",{get:function(){return this._filters?this._filters[0]:null},set:function(e){e?this._filters?this._filters[0]=e:this._filters=[e]:this._filters=null},enumerable:!1,configurable:!0}),n.prototype.reset=function(){this.pooled&&(this.maskObject=null,this.type=gn.NONE,this.autoDetect=!0),this._target=null,this._scissorRectLocal=null},n.prototype.copyCountersOrReset=function(e){e?(this._stencilCounter=e._stencilCounter,this._scissorCounter=e._scissorCounter,this._scissorRect=e._scissorRect):(this._stencilCounter=0,this._scissorCounter=0,this._scissorRect=null)},n}();function xM(n,e,t){var r=n.createShader(e);return n.shaderSource(r,t),n.compileShader(r),r}function RM(n,e){var t=n.getShaderSource(e).split("\n").map(function(u,c){return c+": "+u}),r=n.getShaderInfoLog(e),i=r.split("\n"),o={},s=i.map(function(u){return parseFloat(u.replace(/^ERROR\: 0\:([\d]+)\:.*$/,"$1"))}).filter(function(u){return!(!u||o[u]||(o[u]=!0,0))}),a=[""];s.forEach(function(u){t[u-1]="%c"+t[u-1]+"%c",a.push("background: #FF0000; color:#FFFFFF; font-size: 10px","font-size: 10px")});var l=t.join("\n");a[0]=l,console.error(r),console.groupCollapsed("click to view full shader code"),console.warn.apply(console,a),console.groupEnd()}function ym(n){for(var e=new Array(n),t=0;t<e.length;t++)e[t]=!1;return e}function IM(n,e){switch(n){case"float":case"int":case"uint":case"sampler2D":case"sampler2DArray":return 0;case"vec2":return new Float32Array(2*e);case"vec3":return new Float32Array(3*e);case"vec4":return new Float32Array(4*e);case"ivec2":return new Int32Array(2*e);case"ivec3":return new Int32Array(3*e);case"ivec4":return new Int32Array(4*e);case"uvec2":return new Uint32Array(2*e);case"uvec3":return new Uint32Array(3*e);case"uvec4":return new Uint32Array(4*e);case"bool":return!1;case"bvec2":return ym(2*e);case"bvec3":return ym(3*e);case"bvec4":return ym(4*e);case"mat2":return new Float32Array([1,0,0,1]);case"mat3":return new Float32Array([1,0,0,0,1,0,0,0,1]);case"mat4":return new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])}return null}var ad,OM={},Rl=OM;function PM(n,e,t){if("precision"!==n.substring(0,9)){var r=e;return e===kr.HIGH&&t!==kr.HIGH&&(r=kr.MEDIUM),"precision "+r+" float;\n"+n}return t!==kr.HIGH&&"precision highp"===n.substring(0,15)?n.replace("precision highp","precision mediump"):n}var oH={float:1,vec2:2,vec3:3,vec4:4,int:1,ivec2:2,ivec3:3,ivec4:4,uint:1,uvec2:2,uvec3:3,uvec4:4,bool:1,bvec2:2,bvec3:3,bvec4:4,mat2:4,mat3:9,mat4:16,sampler2D:1};function NM(n){return oH[n]}var ld=null,FM={FLOAT:"float",FLOAT_VEC2:"vec2",FLOAT_VEC3:"vec3",FLOAT_VEC4:"vec4",INT:"int",INT_VEC2:"ivec2",INT_VEC3:"ivec3",INT_VEC4:"ivec4",UNSIGNED_INT:"uint",UNSIGNED_INT_VEC2:"uvec2",UNSIGNED_INT_VEC3:"uvec3",UNSIGNED_INT_VEC4:"uvec4",BOOL:"bool",BOOL_VEC2:"bvec2",BOOL_VEC3:"bvec3",BOOL_VEC4:"bvec4",FLOAT_MAT2:"mat2",FLOAT_MAT3:"mat3",FLOAT_MAT4:"mat4",SAMPLER_2D:"sampler2D",INT_SAMPLER_2D:"sampler2D",UNSIGNED_INT_SAMPLER_2D:"sampler2D",SAMPLER_CUBE:"samplerCube",INT_SAMPLER_CUBE:"samplerCube",UNSIGNED_INT_SAMPLER_CUBE:"samplerCube",SAMPLER_2D_ARRAY:"sampler2DArray",INT_SAMPLER_2D_ARRAY:"sampler2DArray",UNSIGNED_INT_SAMPLER_2D_ARRAY:"sampler2DArray"};function LM(n,e){if(!ld){var t=Object.keys(FM);ld={};for(var r=0;r<t.length;++r){var i=t[r];ld[n[i]]=FM[i]}}return ld[e]}var Il,aa=[{test:function(n){return"float"===n.type&&1===n.size},code:function(n){return'\n            if(uv["'+n+'"] !== ud["'+n+'"].value)\n            {\n                ud["'+n+'"].value = uv["'+n+'"]\n                gl.uniform1f(ud["'+n+'"].location, uv["'+n+'"])\n            }\n            '}},{test:function(n){return("sampler2D"===n.type||"samplerCube"===n.type||"sampler2DArray"===n.type)&&1===n.size&&!n.isArray},code:function(n){return't = syncData.textureCount++;\n\n            renderer.texture.bind(uv["'+n+'"], t);\n\n            if(ud["'+n+'"].value !== t)\n            {\n                ud["'+n+'"].value = t;\n                gl.uniform1i(ud["'+n+'"].location, t);\n; // eslint-disable-line max-len\n            }'}},{test:function(n,e){return"mat3"===n.type&&1===n.size&&void 0!==e.a},code:function(n){return'\n            gl.uniformMatrix3fv(ud["'+n+'"].location, false, uv["'+n+'"].toArray(true));\n            '},codeUbo:function(n){return"\n                var "+n+"_matrix = uv."+n+".toArray(true);\n\n                data[offset] = "+n+"_matrix[0];\n                data[offset+1] = "+n+"_matrix[1];\n                data[offset+2] = "+n+"_matrix[2];\n        \n                data[offset + 4] = "+n+"_matrix[3];\n                data[offset + 5] = "+n+"_matrix[4];\n                data[offset + 6] = "+n+"_matrix[5];\n        \n                data[offset + 8] = "+n+"_matrix[6];\n                data[offset + 9] = "+n+"_matrix[7];\n                data[offset + 10] = "+n+"_matrix[8];\n            "}},{test:function(n,e){return"vec2"===n.type&&1===n.size&&void 0!==e.x},code:function(n){return'\n                cv = ud["'+n+'"].value;\n                v = uv["'+n+'"];\n\n                if(cv[0] !== v.x || cv[1] !== v.y)\n                {\n                    cv[0] = v.x;\n                    cv[1] = v.y;\n                    gl.uniform2f(ud["'+n+'"].location, v.x, v.y);\n                }'},codeUbo:function(n){return"\n                v = uv."+n+";\n\n                data[offset] = v.x;\n                data[offset+1] = v.y;\n            "}},{test:function(n){return"vec2"===n.type&&1===n.size},code:function(n){return'\n                cv = ud["'+n+'"].value;\n                v = uv["'+n+'"];\n\n                if(cv[0] !== v[0] || cv[1] !== v[1])\n                {\n                    cv[0] = v[0];\n                    cv[1] = v[1];\n                    gl.uniform2f(ud["'+n+'"].location, v[0], v[1]);\n                }\n            '}},{test:function(n,e){return"vec4"===n.type&&1===n.size&&void 0!==e.width},code:function(n){return'\n                cv = ud["'+n+'"].value;\n                v = uv["'+n+'"];\n\n                if(cv[0] !== v.x || cv[1] !== v.y || cv[2] !== v.width || cv[3] !== v.height)\n                {\n                    cv[0] = v.x;\n                    cv[1] = v.y;\n                    cv[2] = v.width;\n                    cv[3] = v.height;\n                    gl.uniform4f(ud["'+n+'"].location, v.x, v.y, v.width, v.height)\n                }'},codeUbo:function(n){return"\n                    v = uv."+n+";\n\n                    data[offset] = v.x;\n                    data[offset+1] = v.y;\n                    data[offset+2] = v.width;\n                    data[offset+3] = v.height;\n                "}},{test:function(n){return"vec4"===n.type&&1===n.size},code:function(n){return'\n                cv = ud["'+n+'"].value;\n                v = uv["'+n+'"];\n\n                if(cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])\n                {\n                    cv[0] = v[0];\n                    cv[1] = v[1];\n                    cv[2] = v[2];\n                    cv[3] = v[3];\n\n                    gl.uniform4f(ud["'+n+'"].location, v[0], v[1], v[2], v[3])\n                }'}}],sH={float:"\n    if (cv !== v)\n    {\n        cu.value = v;\n        gl.uniform1f(location, v);\n    }",vec2:"\n    if (cv[0] !== v[0] || cv[1] !== v[1])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n\n        gl.uniform2f(location, v[0], v[1])\n    }",vec3:"\n    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        cv[2] = v[2];\n\n        gl.uniform3f(location, v[0], v[1], v[2])\n    }",vec4:"\n    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        cv[2] = v[2];\n        cv[3] = v[3];\n\n        gl.uniform4f(location, v[0], v[1], v[2], v[3]);\n    }",int:"\n    if (cv !== v)\n    {\n        cu.value = v;\n\n        gl.uniform1i(location, v);\n    }",ivec2:"\n    if (cv[0] !== v[0] || cv[1] !== v[1])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n\n        gl.uniform2i(location, v[0], v[1]);\n    }",ivec3:"\n    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        cv[2] = v[2];\n\n        gl.uniform3i(location, v[0], v[1], v[2]);\n    }",ivec4:"\n    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        cv[2] = v[2];\n        cv[3] = v[3];\n\n        gl.uniform4i(location, v[0], v[1], v[2], v[3]);\n    }",uint:"\n    if (cv !== v)\n    {\n        cu.value = v;\n\n        gl.uniform1ui(location, v);\n    }",uvec2:"\n    if (cv[0] !== v[0] || cv[1] !== v[1])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n\n        gl.uniform2ui(location, v[0], v[1]);\n    }",uvec3:"\n    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        cv[2] = v[2];\n\n        gl.uniform3ui(location, v[0], v[1], v[2]);\n    }",uvec4:"\n    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        cv[2] = v[2];\n        cv[3] = v[3];\n\n        gl.uniform4ui(location, v[0], v[1], v[2], v[3]);\n    }",bool:"\n    if (cv !== v)\n    {\n        cu.value = v;\n        gl.uniform1i(location, v);\n    }",bvec2:"\n    if (cv[0] != v[0] || cv[1] != v[1])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n\n        gl.uniform2i(location, v[0], v[1]);\n    }",bvec3:"\n    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        cv[2] = v[2];\n\n        gl.uniform3i(location, v[0], v[1], v[2]);\n    }",bvec4:"\n    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        cv[2] = v[2];\n        cv[3] = v[3];\n\n        gl.uniform4i(location, v[0], v[1], v[2], v[3]);\n    }",mat2:"gl.uniformMatrix2fv(location, false, v)",mat3:"gl.uniformMatrix3fv(location, false, v)",mat4:"gl.uniformMatrix4fv(location, false, v)",sampler2D:"gl.uniform1i(location, v)",samplerCube:"gl.uniform1i(location, v)",sampler2DArray:"gl.uniform1i(location, v)"},aH={float:"gl.uniform1fv(location, v)",vec2:"gl.uniform2fv(location, v)",vec3:"gl.uniform3fv(location, v)",vec4:"gl.uniform4fv(location, v)",mat4:"gl.uniformMatrix4fv(location, false, v)",mat3:"gl.uniformMatrix3fv(location, false, v)",mat2:"gl.uniformMatrix2fv(location, false, v)",int:"gl.uniform1iv(location, v)",ivec2:"gl.uniform2iv(location, v)",ivec3:"gl.uniform3iv(location, v)",ivec4:"gl.uniform4iv(location, v)",uint:"gl.uniform1uiv(location, v)",uvec2:"gl.uniform2uiv(location, v)",uvec3:"gl.uniform3uiv(location, v)",uvec4:"gl.uniform4uiv(location, v)",bool:"gl.uniform1iv(location, v)",bvec2:"gl.uniform2iv(location, v)",bvec3:"gl.uniform3iv(location, v)",bvec4:"gl.uniform4iv(location, v)",sampler2D:"gl.uniform1iv(location, v)",samplerCube:"gl.uniform1iv(location, v)",sampler2DArray:"gl.uniform1iv(location, v)"},uH=["precision mediump float;","void main(void){","float test = 0.1;","%forloop%","gl_FragColor = vec4(0.0);","}"].join("\n");function cH(n){for(var e="",t=0;t<n;++t)t>0&&(e+="\nelse "),t<n-1&&(e+="if(test == "+t+".0){}");return e}var _H=0,ud={},Ol=function(){function n(e,t,r){void 0===r&&(r="pixi-shader"),this.id=_H++,this.vertexSrc=e||n.defaultVertexSrc,this.fragmentSrc=t||n.defaultFragmentSrc,this.vertexSrc=this.vertexSrc.trim(),this.fragmentSrc=this.fragmentSrc.trim(),"#version"!==this.vertexSrc.substring(0,8)&&(r=r.replace(/\s+/g,"-"),ud[r]?(ud[r]++,r+="-"+ud[r]):ud[r]=1,this.vertexSrc="#define SHADER_NAME "+r+"\n"+this.vertexSrc,this.fragmentSrc="#define SHADER_NAME "+r+"\n"+this.fragmentSrc,this.vertexSrc=PM(this.vertexSrc,de.PRECISION_VERTEX,kr.HIGH),this.fragmentSrc=PM(this.fragmentSrc,de.PRECISION_FRAGMENT,function iH(){if(!ad){ad=kr.MEDIUM;var n=function rH(){if(Rl===OM||Rl&&Rl.isContextLost()){var n=document.createElement("canvas"),e=void 0;de.PREFER_ENV>=oi.WEBGL2&&(e=n.getContext("webgl2",{})),e||((e=n.getContext("webgl",{})||n.getContext("experimental-webgl",{}))?e.getExtension("WEBGL_draw_buffers"):e=null),Rl=e}return Rl}();if(n&&n.getShaderPrecisionFormat){var e=n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.HIGH_FLOAT);ad=e.precision?kr.HIGH:kr.MEDIUM}}return ad}())),this.glPrograms={},this.syncUniforms=null}return Object.defineProperty(n,"defaultVertexSrc",{get:function(){return"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void){\n   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n   vTextureCoord = aTextureCoord;\n}\n"},enumerable:!1,configurable:!0}),Object.defineProperty(n,"defaultFragmentSrc",{get:function(){return"varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\n\nvoid main(void){\n   gl_FragColor *= texture2D(uSampler, vTextureCoord);\n}"},enumerable:!1,configurable:!0}),n.from=function(e,t,r){var i=e+t,o=nM[i];return o||(nM[i]=o=new n(e,t,r)),o},n}(),no=function(){function n(e,t){this.uniformBindCount=0,this.program=e,this.uniformGroup=t?t instanceof jo?t:new jo(t):new jo({})}return n.prototype.checkUniformExists=function(e,t){if(t.uniforms[e])return!0;for(var r in t.uniforms){var i=t.uniforms[r];if(i.group&&this.checkUniformExists(e,i))return!0}return!1},n.prototype.destroy=function(){this.uniformGroup=null},Object.defineProperty(n.prototype,"uniforms",{get:function(){return this.uniformGroup.uniforms},enumerable:!1,configurable:!0}),n.from=function(e,t,r){return new n(Ol.from(e,t),r)},n}(),Yo=function(){function n(){this.data=0,this.blendMode=ge.NORMAL,this.polygonOffset=0,this.blend=!0,this.depthMask=!0}return Object.defineProperty(n.prototype,"blend",{get:function(){return!!(1&this.data)},set:function(e){!!(1&this.data)!==e&&(this.data^=1)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"offsets",{get:function(){return!!(2&this.data)},set:function(e){!!(2&this.data)!==e&&(this.data^=2)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"culling",{get:function(){return!!(4&this.data)},set:function(e){!!(4&this.data)!==e&&(this.data^=4)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"depthTest",{get:function(){return!!(8&this.data)},set:function(e){!!(8&this.data)!==e&&(this.data^=8)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"depthMask",{get:function(){return!!(32&this.data)},set:function(e){!!(32&this.data)!==e&&(this.data^=32)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"clockwiseFrontFace",{get:function(){return!!(16&this.data)},set:function(e){!!(16&this.data)!==e&&(this.data^=16)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"blendMode",{get:function(){return this._blendMode},set:function(e){this.blend=e!==ge.NONE,this._blendMode=e},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"polygonOffset",{get:function(){return this._polygonOffset},set:function(e){this.offsets=!!e,this._polygonOffset=e},enumerable:!1,configurable:!0}),n.prototype.toString=function(){return"[@pixi/core:State blendMode="+this.blendMode+" clockwiseFrontFace="+this.clockwiseFrontFace+" culling="+this.culling+" depthMask="+this.depthMask+" polygonOffset="+this.polygonOffset+"]"},n.for2d=function(){var e=new n;return e.depthTest=!1,e.blend=!0,e},n}(),ro=function(n){function e(t,r,i){var o=this,s=Ol.from(t||e.defaultVertexSrc,r||e.defaultFragmentSrc);return(o=n.call(this,s,i)||this).padding=0,o.resolution=de.FILTER_RESOLUTION,o.multisample=de.FILTER_MULTISAMPLE,o.enabled=!0,o.autoFit=!0,o.state=new Yo,o}return bt(e,n),e.prototype.apply=function(t,r,i,o,s){t.applyFilter(this,r,i,o)},Object.defineProperty(e.prototype,"blendMode",{get:function(){return this.state.blendMode},set:function(t){this.state.blendMode=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"resolution",{get:function(){return this._resolution},set:function(t){this._resolution=t},enumerable:!1,configurable:!0}),Object.defineProperty(e,"defaultVertexSrc",{get:function(){return"attribute vec2 aVertexPosition;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nuniform vec4 inputSize;\nuniform vec4 outputFrame;\n\nvec4 filterVertexPosition( void )\n{\n    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;\n\n    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);\n}\n\nvec2 filterTextureCoord( void )\n{\n    return aVertexPosition * (outputFrame.zw * inputSize.zw);\n}\n\nvoid main(void)\n{\n    gl_Position = filterVertexPosition();\n    vTextureCoord = filterTextureCoord();\n}\n"},enumerable:!1,configurable:!0}),Object.defineProperty(e,"defaultFragmentSrc",{get:function(){return"varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\n\nvoid main(void){\n   gl_FragColor = texture2D(uSampler, vTextureCoord);\n}\n"},enumerable:!1,configurable:!0}),e}(no),BM=new qt,Cm=function(){function n(e,t){this._texture=e,this.mapCoord=new qt,this.uClampFrame=new Float32Array(4),this.uClampOffset=new Float32Array(2),this._textureID=-1,this._updateID=0,this.clampOffset=0,this.clampMargin=void 0===t?.5:t,this.isSimple=!1}return Object.defineProperty(n.prototype,"texture",{get:function(){return this._texture},set:function(e){this._texture=e,this._textureID=-1},enumerable:!1,configurable:!0}),n.prototype.multiplyUvs=function(e,t){void 0===t&&(t=e);for(var r=this.mapCoord,i=0;i<e.length;i+=2){var o=e[i],s=e[i+1];t[i]=o*r.a+s*r.c+r.tx,t[i+1]=o*r.b+s*r.d+r.ty}return t},n.prototype.update=function(e){var t=this._texture;if(!t||!t.valid||!e&&this._textureID===t._updateID)return!1;this._textureID=t._updateID,this._updateID++;var r=t._uvs;this.mapCoord.set(r.x1-r.x0,r.y1-r.y0,r.x3-r.x0,r.y3-r.y0,r.x0,r.y0);var i=t.orig,o=t.trim;o&&(BM.set(i.width/o.width,0,0,i.height/o.height,-o.x/o.width,-o.y/o.height),this.mapCoord.append(BM));var s=t.baseTexture,a=this.uClampFrame,l=this.clampMargin/s.resolution,u=this.clampOffset;return a[0]=(t._frame.x+l+u)/s.width,a[1]=(t._frame.y+l+u)/s.height,a[2]=(t._frame.x+t._frame.width-l+u)/s.width,a[3]=(t._frame.y+t._frame.height-l+u)/s.height,this.uClampOffset[0]=u/s.realWidth,this.uClampOffset[1]=u/s.realHeight,this.isSimple=t._frame.width===s.width&&t._frame.height===s.height&&0===t.rotate,!0},n}(),EH=function(n){function e(t,r,i){var o=this,s=null;return"string"!=typeof t&&void 0===r&&void 0===i&&(s=t,t=void 0,r=void 0,i=void 0),(o=n.call(this,t||"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 otherMatrix;\n\nvarying vec2 vMaskCoord;\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = aTextureCoord;\n    vMaskCoord = ( otherMatrix * vec3( aTextureCoord, 1.0)  ).xy;\n}\n",r||"varying vec2 vMaskCoord;\nvarying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform sampler2D mask;\nuniform float alpha;\nuniform float npmAlpha;\nuniform vec4 maskClamp;\n\nvoid main(void)\n{\n    float clip = step(3.5,\n        step(maskClamp.x, vMaskCoord.x) +\n        step(maskClamp.y, vMaskCoord.y) +\n        step(vMaskCoord.x, maskClamp.z) +\n        step(vMaskCoord.y, maskClamp.w));\n\n    vec4 original = texture2D(uSampler, vTextureCoord);\n    vec4 masky = texture2D(mask, vMaskCoord);\n    float alphaMul = 1.0 - npmAlpha * (1.0 - masky.a);\n\n    original *= (alphaMul * masky.r * alpha * clip);\n\n    gl_FragColor = original;\n}\n",i)||this).maskSprite=s,o.maskMatrix=new qt,o}return bt(e,n),Object.defineProperty(e.prototype,"maskSprite",{get:function(){return this._maskSprite},set:function(t){this._maskSprite=t,this._maskSprite&&(this._maskSprite.renderable=!1)},enumerable:!1,configurable:!0}),e.prototype.apply=function(t,r,i,o){var s=this._maskSprite,a=s._texture;!a.valid||(a.uvMatrix||(a.uvMatrix=new Cm(a,0)),a.uvMatrix.update(),this.uniforms.npmAlpha=a.baseTexture.alphaMode?0:1,this.uniforms.mask=a,this.uniforms.otherMatrix=t.calculateSpriteMatrix(this.maskMatrix,s).prepend(a.uvMatrix.mapCoord),this.uniforms.alpha=s.worldAlpha,this.uniforms.maskClamp=a.uvMatrix.uClampFrame,t.applyFilter(this,r,i,o))},e}(ro),kM=function(){function n(e){this.renderer=e,this.enableScissor=!0,this.alphaMaskPool=[],this.maskDataPool=[],this.maskStack=[],this.alphaMaskIndex=0}return n.prototype.setMaskStack=function(e){this.maskStack=e,this.renderer.scissor.setMaskStack(e),this.renderer.stencil.setMaskStack(e)},n.prototype.push=function(e,t){var r=t;if(!r.isMaskData){var i=this.maskDataPool.pop()||new tH;i.pooled=!0,i.maskObject=t,r=i}if(r.copyCountersOrReset(0!==this.maskStack.length?this.maskStack[this.maskStack.length-1]:null),r.autoDetect&&this.detect(r),r._target=e,r.type!==gn.SPRITE&&this.maskStack.push(r),r.enabled)switch(r.type){case gn.SCISSOR:this.renderer.scissor.push(r);break;case gn.STENCIL:this.renderer.stencil.push(r);break;case gn.SPRITE:r.copyCountersOrReset(null),this.pushSpriteMask(r)}r.type===gn.SPRITE&&this.maskStack.push(r)},n.prototype.pop=function(e){var t=this.maskStack.pop();if(t&&t._target===e){if(t.enabled)switch(t.type){case gn.SCISSOR:this.renderer.scissor.pop();break;case gn.STENCIL:this.renderer.stencil.pop(t.maskObject);break;case gn.SPRITE:this.popSpriteMask(t)}if(t.reset(),t.pooled&&this.maskDataPool.push(t),0!==this.maskStack.length){var r=this.maskStack[this.maskStack.length-1];r.type===gn.SPRITE&&r._filters&&(r._filters[0].maskSprite=r.maskObject)}}},n.prototype.detect=function(e){e.type=e.maskObject.isSprite?gn.SPRITE:this.enableScissor&&this.renderer.scissor.testScissor(e)?gn.SCISSOR:gn.STENCIL},n.prototype.pushSpriteMask=function(e){var t,r,i=e.maskObject,o=e._target,s=e._filters;s||(s=this.alphaMaskPool[this.alphaMaskIndex])||(s=this.alphaMaskPool[this.alphaMaskIndex]=[new EH]);var u,c,a=this.renderer,l=a.renderTexture;if(l.current){var d=l.current;u=e.resolution||d.resolution,c=null!==(t=e.multisample)&&void 0!==t?t:d.multisample}else u=e.resolution||a.resolution,c=null!==(r=e.multisample)&&void 0!==r?r:a.multisample;s[0].resolution=u,s[0].multisample=c,s[0].maskSprite=i;var h=o.filterArea;o.filterArea=i.getBounds(!0),a.filter.push(o,s),o.filterArea=h,e._filters||this.alphaMaskIndex++},n.prototype.popSpriteMask=function(e){this.renderer.filter.pop(),e._filters?e._filters[0].maskSprite=null:(this.alphaMaskIndex--,this.alphaMaskPool[this.alphaMaskIndex][0].maskSprite=null)},n.prototype.destroy=function(){this.renderer=null},n}(),UM=function(){function n(e){this.renderer=e,this.maskStack=[],this.glConst=0}return n.prototype.getStackLength=function(){return this.maskStack.length},n.prototype.setMaskStack=function(e){var t=this.renderer.gl,r=this.getStackLength();this.maskStack=e;var i=this.getStackLength();i!==r&&(0===i?t.disable(this.glConst):(t.enable(this.glConst),this._useCurrent()))},n.prototype._useCurrent=function(){},n.prototype.destroy=function(){this.renderer=null,this.maskStack=null},n}(),VM=new qt,GM=function(n){function e(t){var r=n.call(this,t)||this;return r.glConst=WebGLRenderingContext.SCISSOR_TEST,r}return bt(e,n),e.prototype.getStackLength=function(){var t=this.maskStack[this.maskStack.length-1];return t?t._scissorCounter:0},e.prototype.calcScissorRect=function(t){if(!t._scissorRectLocal){var r=t._scissorRect,i=t.maskObject,o=this.renderer,s=o.renderTexture;i.renderable=!0;var a=i.getBounds();this.roundFrameToPixels(a,s.current?s.current.resolution:o.resolution,s.sourceFrame,s.destinationFrame,o.projection.transform),i.renderable=!1,r&&a.fit(r),t._scissorRectLocal=a}},e.isMatrixRotated=function(t){if(!t)return!1;var r=t.a,o=t.c,s=t.d;return(Math.abs(t.b)>1e-4||Math.abs(o)>1e-4)&&(Math.abs(r)>1e-4||Math.abs(s)>1e-4)},e.prototype.testScissor=function(t){var r=t.maskObject;if(!r.isFastRect||!r.isFastRect()||e.isMatrixRotated(r.worldTransform)||e.isMatrixRotated(this.renderer.projection.transform))return!1;this.calcScissorRect(t);var i=t._scissorRectLocal;return i.width>0&&i.height>0},e.prototype.roundFrameToPixels=function(t,r,i,o,s){e.isMatrixRotated(s)||((s=s?VM.copyFrom(s):VM.identity()).translate(-i.x,-i.y).scale(o.width/i.width,o.height/i.height).translate(o.x,o.y),this.renderer.filter.transformAABB(s,t),t.fit(o),t.x=Math.round(t.x*r),t.y=Math.round(t.y*r),t.width=Math.round(t.width*r),t.height=Math.round(t.height*r))},e.prototype.push=function(t){t._scissorRectLocal||this.calcScissorRect(t);var r=this.renderer.gl;t._scissorRect||r.enable(r.SCISSOR_TEST),t._scissorCounter++,t._scissorRect=t._scissorRectLocal,this._useCurrent()},e.prototype.pop=function(){var t=this.renderer.gl;this.getStackLength()>0?this._useCurrent():t.disable(t.SCISSOR_TEST)},e.prototype._useCurrent=function(){var t=this.maskStack[this.maskStack.length-1]._scissorRect;this.renderer.gl.scissor(t.x,this.renderer.renderTexture.current?t.y:this.renderer.height-t.height-t.y,t.width,t.height)},e}(UM),HM=function(n){function e(t){var r=n.call(this,t)||this;return r.glConst=WebGLRenderingContext.STENCIL_TEST,r}return bt(e,n),e.prototype.getStackLength=function(){var t=this.maskStack[this.maskStack.length-1];return t?t._stencilCounter:0},e.prototype.push=function(t){var r=t.maskObject,i=this.renderer.gl,o=t._stencilCounter;0===o&&(this.renderer.framebuffer.forceStencil(),i.clearStencil(0),i.clear(i.STENCIL_BUFFER_BIT),i.enable(i.STENCIL_TEST)),t._stencilCounter++,i.colorMask(!1,!1,!1,!1),i.stencilFunc(i.EQUAL,o,4294967295),i.stencilOp(i.KEEP,i.KEEP,i.INCR),r.renderable=!0,r.render(this.renderer),this.renderer.batch.flush(),r.renderable=!1,this._useCurrent()},e.prototype.pop=function(t){var r=this.renderer.gl;0===this.getStackLength()?r.disable(r.STENCIL_TEST):(r.colorMask(!1,!1,!1,!1),r.stencilOp(r.KEEP,r.KEEP,r.DECR),t.renderable=!0,t.render(this.renderer),this.renderer.batch.flush(),t.renderable=!1,this._useCurrent())},e.prototype._useCurrent=function(){var t=this.renderer.gl;t.colorMask(!0,!0,!0,!0),t.stencilFunc(t.EQUAL,this.getStackLength(),4294967295),t.stencilOp(t.KEEP,t.KEEP,t.KEEP)},e}(UM),jM=function(){function n(e){this.renderer=e,this.destinationFrame=null,this.sourceFrame=null,this.defaultFrame=null,this.projectionMatrix=new qt,this.transform=null}return n.prototype.update=function(e,t,r,i){this.destinationFrame=e||this.destinationFrame||this.defaultFrame,this.sourceFrame=t||this.sourceFrame||e,this.calculateProjection(this.destinationFrame,this.sourceFrame,r,i),this.transform&&this.projectionMatrix.append(this.transform);var o=this.renderer;o.globalUniforms.uniforms.projectionMatrix=this.projectionMatrix,o.globalUniforms.update(),o.shader.shader&&o.shader.syncUniformGroup(o.shader.shader.uniforms.globals)},n.prototype.calculateProjection=function(e,t,r,i){var o=this.projectionMatrix,s=i?-1:1;o.identity(),o.a=1/t.width*2,o.d=s*(1/t.height*2),o.tx=-1-t.x*o.a,o.ty=-s-t.y*o.d},n.prototype.setTransform=function(e){},n.prototype.destroy=function(){this.renderer=null},n}(),zo=new Fe,Pl=new Fe,YM=function(){function n(e){this.renderer=e,this.clearColor=e._backgroundColorRgba,this.defaultMaskStack=[],this.current=null,this.sourceFrame=new Fe,this.destinationFrame=new Fe,this.viewportFrame=new Fe}return n.prototype.bind=function(e,t,r){void 0===e&&(e=null);var o,s,a,i=this.renderer;this.current=e,e?(a=(o=e.baseTexture).resolution,t||(zo.width=e.frame.width,zo.height=e.frame.height,t=zo),r||(Pl.x=e.frame.x,Pl.y=e.frame.y,Pl.width=t.width,Pl.height=t.height,r=Pl),s=o.framebuffer):(a=i.resolution,t||(zo.width=i.screen.width,zo.height=i.screen.height,t=zo),r||((r=zo).width=t.width,r.height=t.height));var l=this.viewportFrame;l.x=r.x*a,l.y=r.y*a,l.width=r.width*a,l.height=r.height*a,e||(l.y=i.view.height-(l.y+l.height)),l.ceil(),this.renderer.framebuffer.bind(s,l),this.renderer.projection.update(r,t,a,!s),this.renderer.mask.setMaskStack(e?o.maskStack:this.defaultMaskStack),this.sourceFrame.copyFrom(t),this.destinationFrame.copyFrom(r)},n.prototype.clear=function(e,t){e=this.current?e||this.current.baseTexture.clearColor:e||this.clearColor;var r=this.destinationFrame,i=this.current?this.current.baseTexture:this.renderer.screen,o=r.width!==i.width||r.height!==i.height;if(o){var s=this.viewportFrame,a=s.x,l=s.y,u=s.width,c=s.height;a=Math.round(a),l=Math.round(l),u=Math.round(u),c=Math.round(c),this.renderer.gl.enable(this.renderer.gl.SCISSOR_TEST),this.renderer.gl.scissor(a,l,u,c)}this.renderer.framebuffer.clear(e[0],e[1],e[2],e[3],t),o&&this.renderer.scissor.pop()},n.prototype.resize=function(){this.bind(null)},n.prototype.reset=function(){this.bind(null)},n.prototype.destroy=function(){this.renderer=null},n}();function bH(n,e,t,r,i){t.buffer.update(i)}var TH={float:"\n        data[offset] = v;\n    ",vec2:"\n        data[offset] = v[0];\n        data[offset+1] = v[1];\n    ",vec3:"\n        data[offset] = v[0];\n        data[offset+1] = v[1];\n        data[offset+2] = v[2];\n\n    ",vec4:"\n        data[offset] = v[0];\n        data[offset+1] = v[1];\n        data[offset+2] = v[2];\n        data[offset+3] = v[3];\n    ",mat2:"\n        data[offset] = v[0];\n        data[offset+1] = v[1];\n\n        data[offset+4] = v[2];\n        data[offset+5] = v[3];\n    ",mat3:"\n        data[offset] = v[0];\n        data[offset+1] = v[1];\n        data[offset+2] = v[2];\n\n        data[offset + 4] = v[3];\n        data[offset + 5] = v[4];\n        data[offset + 6] = v[5];\n\n        data[offset + 8] = v[6];\n        data[offset + 9] = v[7];\n        data[offset + 10] = v[8];\n    ",mat4:"\n        for(var i = 0; i < 16; i++)\n        {\n            data[offset + i] = v[i];\n        }\n    "},zM={float:4,vec2:8,vec3:12,vec4:16,int:4,ivec2:8,ivec3:12,ivec4:16,uint:4,uvec2:8,uvec3:12,uvec4:16,bool:4,bvec2:8,bvec3:12,bvec4:16,mat2:32,mat3:48,mat4:64};var CH=function(){function n(e,t){this.program=e,this.uniformData=t,this.uniformGroups={},this.uniformDirtyGroups={},this.uniformBufferBindings={}}return n.prototype.destroy=function(){this.uniformData=null,this.uniformGroups=null,this.uniformDirtyGroups=null,this.uniformBufferBindings=null,this.program=null},n}();var RH=0,cd={textureCount:0,uboCount:0},WM=function(){function n(e){this.destroyed=!1,this.renderer=e,this.systemCheck(),this.gl=null,this.shader=null,this.program=null,this.cache={},this._uboCache={},this.id=RH++}return n.prototype.systemCheck=function(){if(!function hH(){if("boolean"==typeof Il)return Il;try{var n=new Function("param1","param2","param3","return param1[param2] === param3;");Il=!0===n({a:"b"},"a","b")}catch(e){Il=!1}return Il}())throw new Error("Current environment does not allow unsafe-eval, please use @pixi/unsafe-eval module to enable support.")},n.prototype.contextChange=function(e){this.gl=e,this.reset()},n.prototype.bind=function(e,t){e.uniforms.globals=this.renderer.globalUniforms;var r=e.program,i=r.glPrograms[this.renderer.CONTEXT_UID]||this.generateProgram(e);return this.shader=e,this.program!==r&&(this.program=r,this.gl.useProgram(i.program)),t||(cd.textureCount=0,cd.uboCount=0,this.syncUniformGroup(e.uniformGroup,cd)),i},n.prototype.setUniforms=function(e){var t=this.shader.program;t.syncUniforms(t.glPrograms[this.renderer.CONTEXT_UID].uniformData,e,this.renderer)},n.prototype.syncUniformGroup=function(e,t){var r=this.getGlProgram();(!e.static||e.dirtyId!==r.uniformDirtyGroups[e.id])&&(r.uniformDirtyGroups[e.id]=e.dirtyId,this.syncUniforms(e,r,t))},n.prototype.syncUniforms=function(e,t,r){(e.syncUniforms[this.shader.program.id]||this.createSyncGroups(e))(t.uniformData,e.uniforms,this.renderer,r)},n.prototype.createSyncGroups=function(e){var t=this.getSignature(e,this.shader.program.uniformData,"u");return this.cache[t]||(this.cache[t]=function lH(n,e){var t,r=["\n        var v = null;\n        var cv = null;\n        var cu = null;\n        var t = 0;\n        var gl = renderer.gl;\n    "];for(var i in n.uniforms){var o=e[i];if(o){for(var s=n.uniforms[i],a=!1,l=0;l<aa.length;l++)if(aa[l].test(o,s)){r.push(aa[l].code(i,s)),a=!0;break}if(!a){var c=(1===o.size?sH:aH)[o.type].replace("location",'ud["'+i+'"].location');r.push('\n            cu = ud["'+i+'"];\n            cv = cu.value;\n            v = uv["'+i+'"];\n            '+c+";")}}else null!==(t=n.uniforms[i])&&void 0!==t&&t.group&&r.push(n.uniforms[i].ubo?"\n                        renderer.shader.syncUniformBufferGroup(uv."+i+", '"+i+"');\n                    ":"\n                        renderer.shader.syncUniformGroup(uv."+i+", syncData);\n                    ")}return new Function("ud","uv","renderer","syncData",r.join("\n"))}(e,this.shader.program.uniformData)),e.syncUniforms[this.shader.program.id]=this.cache[t],e.syncUniforms[this.shader.program.id]},n.prototype.syncUniformBufferGroup=function(e,t){var r=this.getGlProgram();if(!e.static||0!==e.dirtyId||!r.uniformGroups[e.id]){e.dirtyId=0;var i=r.uniformGroups[e.id]||this.createSyncBufferGroup(e,r,t);e.buffer.update(),i(r.uniformData,e.uniforms,this.renderer,cd,e.buffer)}this.renderer.buffer.bindBufferBase(e.buffer,r.uniformBufferBindings[t])},n.prototype.createSyncBufferGroup=function(e,t,r){var i=this.renderer.gl;this.renderer.buffer.bind(e.buffer);var o=this.gl.getUniformBlockIndex(t.program,r);t.uniformBufferBindings[r]=this.shader.uniformBindCount,i.uniformBlockBinding(t.program,o,this.shader.uniformBindCount),this.shader.uniformBindCount++;var s=this.getSignature(e,this.shader.program.uniformData,"ubo"),a=this._uboCache[s];if(a||(a=this._uboCache[s]=function MH(n,e){if(!n.autoManage)return{size:0,syncFunc:bH};for(var t=function SH(n,e){var t=[];for(var r in n)e[r]&&t.push(e[r]);return t.sort(function(i,o){return i.index-o.index}),t}(n.uniforms,e),r=function DH(n){for(var e=n.map(function(l){return{data:l,offset:0,dataLen:0,dirty:0}}),t=0,r=0,i=0,o=0;o<e.length;o++){var s=e[o];if(t=zM[s.data.type],s.data.size>1&&(t=Math.max(t,16)*s.data.size),s.dataLen=t,r%t!=0&&r<16){var a=r%t%16;r+=a,i+=a}r+t>16?(i=16*Math.ceil(i/16),s.offset=i,i+=t,r=t):(s.offset=i,r+=t,i+=t)}return{uboElements:e,size:i=16*Math.ceil(i/16)}}(t),i=r.uboElements,o=r.size,s=["\n    var v = null;\n    var v2 = null;\n    var cv = null;\n    var t = 0;\n    var gl = renderer.gl\n    var index = 0;\n    var data = buffer.data;\n    "],a=0;a<i.length;a++){for(var l=i[a],u=n.uniforms[l.data.name],c=l.data.name,d=!1,h=0;h<aa.length;h++){var f=aa[h];if(f.codeUbo&&f.test(l.data,u)){s.push("offset = "+l.offset/4+";",aa[h].codeUbo(l.data.name,u)),d=!0;break}}if(!d)if(l.data.size>1){var p=NM(l.data.type),_=Math.max(zM[l.data.type]/16,1),m=p/_;s.push("\n                cv = ud."+c+".value;\n                v = uv."+c+";\n                offset = "+l.offset/4+";\n\n                t = 0;\n\n                for(var i=0; i < "+l.data.size*_+"; i++)\n                {\n                    for(var j = 0; j < "+m+"; j++)\n                    {\n                        data[offset++] = v[t++];\n                    }\n                    offset += "+(4-m%4)%4+";\n                }\n\n                ")}else s.push("\n                cv = ud."+c+".value;\n                v = uv."+c+";\n                offset = "+l.offset/4+";\n                "+TH[l.data.type]+";\n                ")}return s.push("\n       renderer.buffer.update(buffer);\n    "),{size:o,syncFunc:new Function("ud","uv","renderer","syncData","buffer",s.join("\n"))}}(e,this.shader.program.uniformData)),e.autoManage){var l=new Float32Array(a.size/4);e.buffer.update(l)}return t.uniformGroups[e.id]=a.syncFunc,t.uniformGroups[e.id]},n.prototype.getSignature=function(e,t,r){var i=e.uniforms,o=[r+"-"];for(var s in i)o.push(s),t[s]&&o.push(t[s].type);return o.join("-")},n.prototype.getGlProgram=function(){return this.shader?this.shader.program.glPrograms[this.renderer.CONTEXT_UID]:null},n.prototype.generateProgram=function(e){var r=e.program,i=function xH(n,e){var t=xM(n,n.VERTEX_SHADER,e.vertexSrc),r=xM(n,n.FRAGMENT_SHADER,e.fragmentSrc),i=n.createProgram();if(n.attachShader(i,t),n.attachShader(i,r),n.linkProgram(i),n.getProgramParameter(i,n.LINK_STATUS)||function nH(n,e,t,r){n.getProgramParameter(e,n.LINK_STATUS)||(n.getShaderParameter(t,n.COMPILE_STATUS)||RM(n,t),n.getShaderParameter(r,n.COMPILE_STATUS)||RM(n,r),console.error("PixiJS Error: Could not initialize shader."),""!==n.getProgramInfoLog(e)&&console.warn("PixiJS Warning: gl.getProgramInfoLog()",n.getProgramInfoLog(e)))}(n,i,t,r),e.attributeData=function AH(n,e){for(var t={},r=e.getProgramParameter(n,e.ACTIVE_ATTRIBUTES),i=0;i<r;i++){var o=e.getActiveAttrib(n,i);if(0!==o.name.indexOf("gl_")){var s=LM(e,o.type),a={type:s,name:o.name,size:NM(s),location:e.getAttribLocation(n,o.name)};t[o.name]=a}}return t}(i,n),e.uniformData=function wH(n,e){for(var t={},r=e.getProgramParameter(n,e.ACTIVE_UNIFORMS),i=0;i<r;i++){var o=e.getActiveUniform(n,i),s=o.name.replace(/\[.*?\]$/,""),a=!!o.name.match(/\[.*?\]$/),l=LM(e,o.type);t[s]={name:s,index:i,type:l,size:o.size,isArray:a,value:IM(l,o.size)}}return t}(i,n),!/^[ \t]*#[ \t]*version[ \t]+300[ \t]+es[ \t]*$/m.test(e.vertexSrc)){var o=Object.keys(e.attributeData);o.sort(function(c,d){return c>d?1:-1});for(var s=0;s<o.length;s++)e.attributeData[o[s]].location=s,n.bindAttribLocation(i,s,o[s]);n.linkProgram(i)}n.deleteShader(t),n.deleteShader(r);var a={};for(var s in e.uniformData){var l=e.uniformData[s];a[s]={location:n.getUniformLocation(i,s),value:IM(l.type,l.size)}}return new CH(i,a)}(this.gl,r);return r.glPrograms[this.renderer.CONTEXT_UID]=i,i},n.prototype.reset=function(){this.program=null,this.shader=null},n.prototype.destroy=function(){this.renderer=null,this.destroyed=!0},n}(),XM=function(){function n(){this.gl=null,this.stateId=0,this.polygonOffset=0,this.blendMode=ge.NONE,this._blendEq=!1,this.map=[],this.map[0]=this.setBlend,this.map[1]=this.setOffset,this.map[2]=this.setCullFace,this.map[3]=this.setDepthTest,this.map[4]=this.setFrontFace,this.map[5]=this.setDepthMask,this.checks=[],this.defaultState=new Yo,this.defaultState.blend=!0}return n.prototype.contextChange=function(e){this.gl=e,this.blendModes=function IH(n,e){return void 0===e&&(e=[]),e[ge.NORMAL]=[n.ONE,n.ONE_MINUS_SRC_ALPHA],e[ge.ADD]=[n.ONE,n.ONE],e[ge.MULTIPLY]=[n.DST_COLOR,n.ONE_MINUS_SRC_ALPHA,n.ONE,n.ONE_MINUS_SRC_ALPHA],e[ge.SCREEN]=[n.ONE,n.ONE_MINUS_SRC_COLOR,n.ONE,n.ONE_MINUS_SRC_ALPHA],e[ge.OVERLAY]=[n.ONE,n.ONE_MINUS_SRC_ALPHA],e[ge.DARKEN]=[n.ONE,n.ONE_MINUS_SRC_ALPHA],e[ge.LIGHTEN]=[n.ONE,n.ONE_MINUS_SRC_ALPHA],e[ge.COLOR_DODGE]=[n.ONE,n.ONE_MINUS_SRC_ALPHA],e[ge.COLOR_BURN]=[n.ONE,n.ONE_MINUS_SRC_ALPHA],e[ge.HARD_LIGHT]=[n.ONE,n.ONE_MINUS_SRC_ALPHA],e[ge.SOFT_LIGHT]=[n.ONE,n.ONE_MINUS_SRC_ALPHA],e[ge.DIFFERENCE]=[n.ONE,n.ONE_MINUS_SRC_ALPHA],e[ge.EXCLUSION]=[n.ONE,n.ONE_MINUS_SRC_ALPHA],e[ge.HUE]=[n.ONE,n.ONE_MINUS_SRC_ALPHA],e[ge.SATURATION]=[n.ONE,n.ONE_MINUS_SRC_ALPHA],e[ge.COLOR]=[n.ONE,n.ONE_MINUS_SRC_ALPHA],e[ge.LUMINOSITY]=[n.ONE,n.ONE_MINUS_SRC_ALPHA],e[ge.NONE]=[0,0],e[ge.NORMAL_NPM]=[n.SRC_ALPHA,n.ONE_MINUS_SRC_ALPHA,n.ONE,n.ONE_MINUS_SRC_ALPHA],e[ge.ADD_NPM]=[n.SRC_ALPHA,n.ONE,n.ONE,n.ONE],e[ge.SCREEN_NPM]=[n.SRC_ALPHA,n.ONE_MINUS_SRC_COLOR,n.ONE,n.ONE_MINUS_SRC_ALPHA],e[ge.SRC_IN]=[n.DST_ALPHA,n.ZERO],e[ge.SRC_OUT]=[n.ONE_MINUS_DST_ALPHA,n.ZERO],e[ge.SRC_ATOP]=[n.DST_ALPHA,n.ONE_MINUS_SRC_ALPHA],e[ge.DST_OVER]=[n.ONE_MINUS_DST_ALPHA,n.ONE],e[ge.DST_IN]=[n.ZERO,n.SRC_ALPHA],e[ge.DST_OUT]=[n.ZERO,n.ONE_MINUS_SRC_ALPHA],e[ge.DST_ATOP]=[n.ONE_MINUS_DST_ALPHA,n.SRC_ALPHA],e[ge.XOR]=[n.ONE_MINUS_DST_ALPHA,n.ONE_MINUS_SRC_ALPHA],e[ge.SUBTRACT]=[n.ONE,n.ONE,n.ONE,n.ONE,n.FUNC_REVERSE_SUBTRACT,n.FUNC_ADD],e}(e),this.set(this.defaultState),this.reset()},n.prototype.set=function(e){if(this.stateId!==(e=e||this.defaultState).data){for(var t=this.stateId^e.data,r=0;t;)1&t&&this.map[r].call(this,!!(e.data&1<<r)),t>>=1,r++;this.stateId=e.data}for(r=0;r<this.checks.length;r++)this.checks[r](this,e)},n.prototype.forceState=function(e){e=e||this.defaultState;for(var t=0;t<this.map.length;t++)this.map[t].call(this,!!(e.data&1<<t));for(t=0;t<this.checks.length;t++)this.checks[t](this,e);this.stateId=e.data},n.prototype.setBlend=function(e){this.updateCheck(n.checkBlendMode,e),this.gl[e?"enable":"disable"](this.gl.BLEND)},n.prototype.setOffset=function(e){this.updateCheck(n.checkPolygonOffset,e),this.gl[e?"enable":"disable"](this.gl.POLYGON_OFFSET_FILL)},n.prototype.setDepthTest=function(e){this.gl[e?"enable":"disable"](this.gl.DEPTH_TEST)},n.prototype.setDepthMask=function(e){this.gl.depthMask(e)},n.prototype.setCullFace=function(e){this.gl[e?"enable":"disable"](this.gl.CULL_FACE)},n.prototype.setFrontFace=function(e){this.gl.frontFace(this.gl[e?"CW":"CCW"])},n.prototype.setBlendMode=function(e){if(e!==this.blendMode){this.blendMode=e;var t=this.blendModes[e],r=this.gl;2===t.length?r.blendFunc(t[0],t[1]):r.blendFuncSeparate(t[0],t[1],t[2],t[3]),6===t.length?(this._blendEq=!0,r.blendEquationSeparate(t[4],t[5])):this._blendEq&&(this._blendEq=!1,r.blendEquationSeparate(r.FUNC_ADD,r.FUNC_ADD))}},n.prototype.setPolygonOffset=function(e,t){this.gl.polygonOffset(e,t)},n.prototype.reset=function(){this.gl.pixelStorei(this.gl.UNPACK_FLIP_Y_WEBGL,!1),this.forceState(this.defaultState),this._blendEq=!0,this.blendMode=-1,this.setBlendMode(0)},n.prototype.updateCheck=function(e,t){var r=this.checks.indexOf(e);t&&-1===r?this.checks.push(e):!t&&-1!==r&&this.checks.splice(r,1)},n.checkBlendMode=function(e,t){e.setBlendMode(t.blendMode)},n.checkPolygonOffset=function(e,t){e.setPolygonOffset(1,t.polygonOffset)},n.prototype.destroy=function(){this.gl=null},n}(),$M=function(){function n(e){this.renderer=e,this.count=0,this.checkCount=0,this.maxIdle=de.GC_MAX_IDLE,this.checkCountMax=de.GC_MAX_CHECK_COUNT,this.mode=de.GC_MODE}return n.prototype.postrender=function(){!this.renderer.renderingToScreen||(this.count++,this.mode!==zc.MANUAL&&(this.checkCount++,this.checkCount>this.checkCountMax&&(this.checkCount=0,this.run())))},n.prototype.run=function(){for(var e=this.renderer.texture,t=e.managedTextures,r=!1,i=0;i<t.length;i++){var o=t[i];!o.framebuffer&&this.count-o.touched>this.maxIdle&&(e.destroyTexture(o,!0),t[i]=null,r=!0)}if(r){var s=0;for(i=0;i<t.length;i++)null!==t[i]&&(t[s++]=t[i]);t.length=s}},n.prototype.unload=function(e){var r=e._texture;r&&!r.framebuffer&&this.renderer.texture.destroyTexture(r);for(var i=e.children.length-1;i>=0;i--)this.unload(e.children[i])},n.prototype.destroy=function(){this.renderer=null},n}(),Am=function n(e){this.texture=e,this.width=-1,this.height=-1,this.dirtyId=-1,this.dirtyStyleId=-1,this.mipmap=!1,this.wrapMode=33071,this.type=pe.UNSIGNED_BYTE,this.internalFormat=H.RGBA,this.samplerType=0},qM=function(){function n(e){this.renderer=e,this.boundTextures=[],this.currentLocation=-1,this.managedTextures=[],this._unknownBoundTextures=!1,this.unknownTexture=new Xe,this.hasIntegerTextures=!1}return n.prototype.contextChange=function(){var e=this.gl=this.renderer.gl;this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.webGLVersion=this.renderer.context.webGLVersion,this.internalFormats=function kH(n){var e,t,r,i,o,s,a,l,u,c,d,h,f,p,_,m,g,b,y,M,S,T,k;return"WebGL2RenderingContext"in globalThis&&n instanceof globalThis.WebGL2RenderingContext?((e={})[pe.UNSIGNED_BYTE]=((t={})[H.RGBA]=n.RGBA8,t[H.RGB]=n.RGB8,t[H.RG]=n.RG8,t[H.RED]=n.R8,t[H.RGBA_INTEGER]=n.RGBA8UI,t[H.RGB_INTEGER]=n.RGB8UI,t[H.RG_INTEGER]=n.RG8UI,t[H.RED_INTEGER]=n.R8UI,t[H.ALPHA]=n.ALPHA,t[H.LUMINANCE]=n.LUMINANCE,t[H.LUMINANCE_ALPHA]=n.LUMINANCE_ALPHA,t),e[pe.BYTE]=((r={})[H.RGBA]=n.RGBA8_SNORM,r[H.RGB]=n.RGB8_SNORM,r[H.RG]=n.RG8_SNORM,r[H.RED]=n.R8_SNORM,r[H.RGBA_INTEGER]=n.RGBA8I,r[H.RGB_INTEGER]=n.RGB8I,r[H.RG_INTEGER]=n.RG8I,r[H.RED_INTEGER]=n.R8I,r),e[pe.UNSIGNED_SHORT]=((i={})[H.RGBA_INTEGER]=n.RGBA16UI,i[H.RGB_INTEGER]=n.RGB16UI,i[H.RG_INTEGER]=n.RG16UI,i[H.RED_INTEGER]=n.R16UI,i[H.DEPTH_COMPONENT]=n.DEPTH_COMPONENT16,i),e[pe.SHORT]=((o={})[H.RGBA_INTEGER]=n.RGBA16I,o[H.RGB_INTEGER]=n.RGB16I,o[H.RG_INTEGER]=n.RG16I,o[H.RED_INTEGER]=n.R16I,o),e[pe.UNSIGNED_INT]=((s={})[H.RGBA_INTEGER]=n.RGBA32UI,s[H.RGB_INTEGER]=n.RGB32UI,s[H.RG_INTEGER]=n.RG32UI,s[H.RED_INTEGER]=n.R32UI,s[H.DEPTH_COMPONENT]=n.DEPTH_COMPONENT24,s),e[pe.INT]=((a={})[H.RGBA_INTEGER]=n.RGBA32I,a[H.RGB_INTEGER]=n.RGB32I,a[H.RG_INTEGER]=n.RG32I,a[H.RED_INTEGER]=n.R32I,a),e[pe.FLOAT]=((l={})[H.RGBA]=n.RGBA32F,l[H.RGB]=n.RGB32F,l[H.RG]=n.RG32F,l[H.RED]=n.R32F,l[H.DEPTH_COMPONENT]=n.DEPTH_COMPONENT32F,l),e[pe.HALF_FLOAT]=((u={})[H.RGBA]=n.RGBA16F,u[H.RGB]=n.RGB16F,u[H.RG]=n.RG16F,u[H.RED]=n.R16F,u),e[pe.UNSIGNED_SHORT_5_6_5]=((c={})[H.RGB]=n.RGB565,c),e[pe.UNSIGNED_SHORT_4_4_4_4]=((d={})[H.RGBA]=n.RGBA4,d),e[pe.UNSIGNED_SHORT_5_5_5_1]=((h={})[H.RGBA]=n.RGB5_A1,h),e[pe.UNSIGNED_INT_2_10_10_10_REV]=((f={})[H.RGBA]=n.RGB10_A2,f[H.RGBA_INTEGER]=n.RGB10_A2UI,f),e[pe.UNSIGNED_INT_10F_11F_11F_REV]=((p={})[H.RGB]=n.R11F_G11F_B10F,p),e[pe.UNSIGNED_INT_5_9_9_9_REV]=((_={})[H.RGB]=n.RGB9_E5,_),e[pe.UNSIGNED_INT_24_8]=((m={})[H.DEPTH_STENCIL]=n.DEPTH24_STENCIL8,m),e[pe.FLOAT_32_UNSIGNED_INT_24_8_REV]=((g={})[H.DEPTH_STENCIL]=n.DEPTH32F_STENCIL8,g),k=e):((b={})[pe.UNSIGNED_BYTE]=((y={})[H.RGBA]=n.RGBA,y[H.RGB]=n.RGB,y[H.ALPHA]=n.ALPHA,y[H.LUMINANCE]=n.LUMINANCE,y[H.LUMINANCE_ALPHA]=n.LUMINANCE_ALPHA,y),b[pe.UNSIGNED_SHORT_5_6_5]=((M={})[H.RGB]=n.RGB,M),b[pe.UNSIGNED_SHORT_4_4_4_4]=((S={})[H.RGBA]=n.RGBA,S),b[pe.UNSIGNED_SHORT_5_5_5_1]=((T={})[H.RGBA]=n.RGBA,T),k=b),k}(e);var t=e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS);this.boundTextures.length=t;for(var r=0;r<t;r++)this.boundTextures[r]=null;this.emptyTextures={};var i=new Am(e.createTexture());for(e.bindTexture(e.TEXTURE_2D,i.texture),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,1,1,0,e.RGBA,e.UNSIGNED_BYTE,new Uint8Array(4)),this.emptyTextures[e.TEXTURE_2D]=i,this.emptyTextures[e.TEXTURE_CUBE_MAP]=new Am(e.createTexture()),e.bindTexture(e.TEXTURE_CUBE_MAP,this.emptyTextures[e.TEXTURE_CUBE_MAP].texture),r=0;r<6;r++)e.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+r,0,e.RGBA,1,1,0,e.RGBA,e.UNSIGNED_BYTE,null);for(e.texParameteri(e.TEXTURE_CUBE_MAP,e.TEXTURE_MAG_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_CUBE_MAP,e.TEXTURE_MIN_FILTER,e.LINEAR),r=0;r<this.boundTextures.length;r++)this.bind(null,r)},n.prototype.bind=function(e,t){void 0===t&&(t=0);var r=this.gl;if((e=null==e?void 0:e.castToBaseTexture())&&e.valid&&!e.parentTextureArray){e.touched=this.renderer.textureGC.count;var i=e._glTextures[this.CONTEXT_UID]||this.initTexture(e);this.boundTextures[t]!==e&&(this.currentLocation!==t&&(this.currentLocation=t,r.activeTexture(r.TEXTURE0+t)),r.bindTexture(e.target,i.texture)),i.dirtyId!==e.dirtyId&&(this.currentLocation!==t&&(this.currentLocation=t,r.activeTexture(r.TEXTURE0+t)),this.updateTexture(e)),this.boundTextures[t]=e}else this.currentLocation!==t&&(this.currentLocation=t,r.activeTexture(r.TEXTURE0+t)),r.bindTexture(r.TEXTURE_2D,this.emptyTextures[r.TEXTURE_2D].texture),this.boundTextures[t]=null},n.prototype.reset=function(){this._unknownBoundTextures=!0,this.hasIntegerTextures=!1,this.currentLocation=-1;for(var e=0;e<this.boundTextures.length;e++)this.boundTextures[e]=this.unknownTexture},n.prototype.unbind=function(e){var r=this.gl,i=this.boundTextures;if(this._unknownBoundTextures){this._unknownBoundTextures=!1;for(var o=0;o<i.length;o++)i[o]===this.unknownTexture&&this.bind(null,o)}for(o=0;o<i.length;o++)i[o]===e&&(this.currentLocation!==o&&(r.activeTexture(r.TEXTURE0+o),this.currentLocation=o),r.bindTexture(e.target,this.emptyTextures[e.target].texture),i[o]=null)},n.prototype.ensureSamplerType=function(e){var t=this,r=t.boundTextures,o=t.CONTEXT_UID;if(t.hasIntegerTextures)for(var s=e-1;s>=0;--s){var a=r[s];a&&a._glTextures[o].samplerType!==Al.FLOAT&&this.renderer.texture.unbind(a)}},n.prototype.initTexture=function(e){var t=new Am(this.gl.createTexture());return t.dirtyId=-1,e._glTextures[this.CONTEXT_UID]=t,this.managedTextures.push(e),e.on("dispose",this.destroyTexture,this),t},n.prototype.initTextureType=function(e,t){var r,i;t.internalFormat=null!==(i=null===(r=this.internalFormats[e.type])||void 0===r?void 0:r[e.format])&&void 0!==i?i:e.format,t.type=2===this.webGLVersion&&e.type===pe.HALF_FLOAT?this.gl.HALF_FLOAT:e.type},n.prototype.updateTexture=function(e){var t=e._glTextures[this.CONTEXT_UID];if(t){var r=this.renderer;if(this.initTextureType(e,t),e.resource&&e.resource.upload(r,e,t))t.samplerType!==Al.FLOAT&&(this.hasIntegerTextures=!0);else{var i=e.realWidth,o=e.realHeight,s=r.gl;(t.width!==i||t.height!==o||t.dirtyId<0)&&(t.width=i,t.height=o,s.texImage2D(e.target,0,t.internalFormat,i,o,0,e.format,t.type,null))}e.dirtyStyleId!==t.dirtyStyleId&&this.updateTextureStyle(e),t.dirtyId=e.dirtyId}},n.prototype.destroyTexture=function(e,t){var r=this.gl;if((e=e.castToBaseTexture())._glTextures[this.CONTEXT_UID]&&(this.unbind(e),r.deleteTexture(e._glTextures[this.CONTEXT_UID].texture),e.off("dispose",this.destroyTexture,this),delete e._glTextures[this.CONTEXT_UID],!t)){var i=this.managedTextures.indexOf(e);-1!==i&&Ii(this.managedTextures,i,1)}},n.prototype.updateTextureStyle=function(e){var t=e._glTextures[this.CONTEXT_UID];!t||(t.mipmap=!!(e.mipmap!==li.POW2&&2===this.webGLVersion||e.isPowerOfTwo)&&e.mipmap>=1,t.wrapMode=2===this.webGLVersion||e.isPowerOfTwo?e.wrapMode:ai.CLAMP,e.resource&&e.resource.style(this.renderer,e,t)||this.setStyle(e,t),t.dirtyStyleId=e.dirtyStyleId)},n.prototype.setStyle=function(e,t){var r=this.gl;if(t.mipmap&&e.mipmap!==li.ON_MANUAL&&r.generateMipmap(e.target),r.texParameteri(e.target,r.TEXTURE_WRAP_S,t.wrapMode),r.texParameteri(e.target,r.TEXTURE_WRAP_T,t.wrapMode),t.mipmap){r.texParameteri(e.target,r.TEXTURE_MIN_FILTER,e.scaleMode===si.LINEAR?r.LINEAR_MIPMAP_LINEAR:r.NEAREST_MIPMAP_NEAREST);var i=this.renderer.context.extensions.anisotropicFiltering;if(i&&e.anisotropicLevel>0&&e.scaleMode===si.LINEAR){var o=Math.min(e.anisotropicLevel,r.getParameter(i.MAX_TEXTURE_MAX_ANISOTROPY_EXT));r.texParameterf(e.target,i.TEXTURE_MAX_ANISOTROPY_EXT,o)}}else r.texParameteri(e.target,r.TEXTURE_MIN_FILTER,e.scaleMode===si.LINEAR?r.LINEAR:r.NEAREST);r.texParameteri(e.target,r.TEXTURE_MAG_FILTER,e.scaleMode===si.LINEAR?r.LINEAR:r.NEAREST)},n.prototype.destroy=function(){this.renderer=null},n}(),KM={__proto__:null,FilterSystem:DM,BatchSystem:SM,ContextSystem:CM,FramebufferSystem:AM,GeometrySystem:wM,MaskSystem:kM,ScissorSystem:GM,StencilSystem:HM,ProjectionSystem:jM,RenderTextureSystem:YM,ShaderSystem:WM,StateSystem:XM,TextureGCSystem:$M,TextureSystem:qM},wm=new qt,UH=function(n){function e(t,r){void 0===t&&(t=ea.UNKNOWN);var i=n.call(this)||this;return r=Object.assign({},de.RENDER_OPTIONS,r),i.options=r,i.type=t,i.screen=new Fe(0,0,r.width,r.height),i.view=r.view||document.createElement("canvas"),i.resolution=r.resolution||de.RESOLUTION,i.useContextAlpha=r.useContextAlpha,i.autoDensity=!!r.autoDensity,i.preserveDrawingBuffer=r.preserveDrawingBuffer,i.clearBeforeRender=r.clearBeforeRender,i._backgroundColor=0,i._backgroundColorRgba=[0,0,0,1],i._backgroundColorString="#000000",i.backgroundColor=r.backgroundColor||i._backgroundColor,i.backgroundAlpha=r.backgroundAlpha,void 0!==r.transparent&&(to("6.0.0","Option transparent is deprecated, please use backgroundAlpha instead."),i.useContextAlpha=r.transparent,i.backgroundAlpha=r.transparent?0:1),i._lastObjectRendered=null,i.plugins={},i}return bt(e,n),e.prototype.initPlugins=function(t){for(var r in t)this.plugins[r]=new t[r](this)},Object.defineProperty(e.prototype,"width",{get:function(){return this.view.width},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this.view.height},enumerable:!1,configurable:!0}),e.prototype.resize=function(t,r){this.view.width=Math.round(t*this.resolution),this.view.height=Math.round(r*this.resolution);var i=this.view.width/this.resolution,o=this.view.height/this.resolution;this.screen.width=i,this.screen.height=o,this.autoDensity&&(this.view.style.width=i+"px",this.view.style.height=o+"px"),this.emit("resize",i,o)},e.prototype.generateTexture=function(t,r,i,o){void 0===r&&(r={}),"number"==typeof r&&(to("6.1.0","generateTexture options (scaleMode, resolution, region) are now object options."),r={scaleMode:r,resolution:i,region:o});var s=r.region,a=function G3(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(null!=n&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&(t[r[i]]=n[r[i]])}return t}(r,["region"]);0===(o=s||t.getLocalBounds(null,!0)).width&&(o.width=1),0===o.height&&(o.height=1);var l=Ho.create(hm({width:o.width,height:o.height},a));return wm.tx=-o.x,wm.ty=-o.y,this.render(t,{renderTexture:l,clear:!1,transform:wm,skipUpdateTransform:!!t.parent}),l},e.prototype.destroy=function(t){for(var r in this.plugins)this.plugins[r].destroy(),this.plugins[r]=null;t&&this.view.parentNode&&this.view.parentNode.removeChild(this.view);var i=this;i.plugins=null,i.type=ea.UNKNOWN,i.view=null,i.screen=null,i._tempDisplayObjectParent=null,i.options=null,this._backgroundColorRgba=null,this._backgroundColorString=null,this._lastObjectRendered=null},Object.defineProperty(e.prototype,"backgroundColor",{get:function(){return this._backgroundColor},set:function(t){this._backgroundColor=t,this._backgroundColorString=$S(t),na(t,this._backgroundColorRgba)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"backgroundAlpha",{get:function(){return this._backgroundColorRgba[3]},set:function(t){this._backgroundColorRgba[3]=t},enumerable:!1,configurable:!0}),e}(Js()),VH=function n(e){this.buffer=e||null,this.updateID=-1,this.byteLength=-1,this.refCount=0},GH=function(){function n(e){this.renderer=e,this.managedBuffers={},this.boundBufferBases={}}return n.prototype.destroy=function(){this.renderer=null},n.prototype.contextChange=function(){this.disposeAll(!0),this.gl=this.renderer.gl,this.CONTEXT_UID=this.renderer.CONTEXT_UID},n.prototype.bind=function(e){var r=this.gl,o=e._glBuffers[this.CONTEXT_UID]||this.createGLBuffer(e);r.bindBuffer(e.type,o.buffer)},n.prototype.bindBufferBase=function(e,t){var i=this.gl;if(this.boundBufferBases[t]!==e){var s=e._glBuffers[this.CONTEXT_UID]||this.createGLBuffer(e);this.boundBufferBases[t]=e,i.bindBufferBase(i.UNIFORM_BUFFER,t,s.buffer)}},n.prototype.bindBufferRange=function(e,t,r){var o=this.gl;r=r||0;var a=e._glBuffers[this.CONTEXT_UID]||this.createGLBuffer(e);o.bindBufferRange(o.UNIFORM_BUFFER,t||0,a.buffer,256*r,256)},n.prototype.update=function(e){var r=this.gl,o=e._glBuffers[this.CONTEXT_UID];if(e._updateID!==o.updateID)if(o.updateID=e._updateID,r.bindBuffer(e.type,o.buffer),o.byteLength>=e.data.byteLength)r.bufferSubData(e.type,0,e.data);else{var s=e.static?r.STATIC_DRAW:r.DYNAMIC_DRAW;o.byteLength=e.data.byteLength,r.bufferData(e.type,e.data,s)}},n.prototype.dispose=function(e,t){if(this.managedBuffers[e.id]){delete this.managedBuffers[e.id];var r=e._glBuffers[this.CONTEXT_UID],i=this.gl;e.disposeRunner.remove(this),r&&(t||i.deleteBuffer(r.buffer),delete e._glBuffers[this.CONTEXT_UID])}},n.prototype.disposeAll=function(e){for(var t=Object.keys(this.managedBuffers),r=0;r<t.length;r++)this.dispose(this.managedBuffers[t[r]],e)},n.prototype.createGLBuffer=function(e){var r=this.CONTEXT_UID;return e._glBuffers[r]=new VH(this.gl.createBuffer()),this.managedBuffers[e.id]=e,e.disposeRunner.add(this),e._glBuffers[r]},n}(),io=function(n){function e(t){var r=n.call(this,ea.WEBGL,t)||this;return t=r.options,r.gl=null,r.CONTEXT_UID=0,r.runners={destroy:new wn("destroy"),contextChange:new wn("contextChange"),reset:new wn("reset"),update:new wn("update"),postrender:new wn("postrender"),prerender:new wn("prerender"),resize:new wn("resize")},r.runners.contextChange.add(r),r.globalUniforms=new jo({projectionMatrix:new qt},!0),r.addSystem(kM,"mask").addSystem(CM,"context").addSystem(XM,"state").addSystem(WM,"shader").addSystem(qM,"texture").addSystem(GH,"buffer").addSystem(wM,"geometry").addSystem(AM,"framebuffer").addSystem(GM,"scissor").addSystem(HM,"stencil").addSystem(jM,"projection").addSystem($M,"textureGC").addSystem(DM,"filter").addSystem(YM,"renderTexture").addSystem(SM,"batch"),r.initPlugins(e.__plugins),r.multisample=void 0,t.context?r.context.initFromContext(t.context):r.context.initFromOptions({alpha:!!r.useContextAlpha,antialias:t.antialias,premultipliedAlpha:r.useContextAlpha&&"notMultiplied"!==r.useContextAlpha,stencil:!0,preserveDrawingBuffer:t.preserveDrawingBuffer,powerPreference:r.options.powerPreference}),r.renderingToScreen=!0,function SU(n){var e;J_||(navigator.userAgent.toLowerCase().indexOf("chrome")>-1?(e=globalThis.console).log.apply(e,["\n %c %c %c PixiJS 6.4.2 - \u2730 "+n+" \u2730  %c  %c  http://www.pixijs.com/  %c %c \u2665%c\u2665%c\u2665 \n\n","background: #ff66a5; padding:5px 0;","background: #ff66a5; padding:5px 0;","color: #ff66a5; background: #030307; padding:5px 0;","background: #ff66a5; padding:5px 0;","background: #ffc3dc; padding:5px 0;","background: #ff66a5; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;"]):globalThis.console&&globalThis.console.log("PixiJS 6.4.2 - "+n+" - http://www.pixijs.com/"),J_=!0)}(2===r.context.webGLVersion?"WebGL 2":"WebGL 1"),r.resize(r.options.width,r.options.height),r}return bt(e,n),e.create=function(t){if(function MU(){return void 0===em&&(em=function(){var e={stencil:!0,failIfMajorPerformanceCaveat:de.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT};try{if(!globalThis.WebGLRenderingContext)return!1;var t=document.createElement("canvas"),r=t.getContext("webgl",e)||t.getContext("experimental-webgl",e),i=!(!r||!r.getContextAttributes().stencil);if(r){var o=r.getExtension("WEBGL_lose_context");o&&o.loseContext()}return r=null,i}catch(s){return!1}}()),em}())return new e(t);throw new Error('WebGL unsupported in this browser, use "pixi.js-legacy" for fallback canvas2d support.')},e.prototype.contextChange=function(){var r,t=this.gl;if(1===this.context.webGLVersion){var i=t.getParameter(t.FRAMEBUFFER_BINDING);t.bindFramebuffer(t.FRAMEBUFFER,null),r=t.getParameter(t.SAMPLES),t.bindFramebuffer(t.FRAMEBUFFER,i)}else i=t.getParameter(t.DRAW_FRAMEBUFFER_BINDING),t.bindFramebuffer(t.DRAW_FRAMEBUFFER,null),r=t.getParameter(t.SAMPLES),t.bindFramebuffer(t.DRAW_FRAMEBUFFER,i);this.multisample=r>=$t.HIGH?$t.HIGH:r>=$t.MEDIUM?$t.MEDIUM:r>=$t.LOW?$t.LOW:$t.NONE},e.prototype.addSystem=function(t,r){var i=new t(this);if(this[r])throw new Error('Whoops! The name "'+r+'" is already in use');for(var o in this[r]=i,this.runners)this.runners[o].add(i);return this},e.prototype.render=function(t,r){var i,o,s,a;if(r&&(r instanceof Ho?(to("6.0.0","Renderer#render arguments changed, use options instead."),i=r,o=arguments[2],s=arguments[3],a=arguments[4]):(i=r.renderTexture,o=r.clear,s=r.transform,a=r.skipUpdateTransform)),this.renderingToScreen=!i,this.runners.prerender.emit(),this.emit("prerender"),this.projection.transform=s,!this.context.isLost){if(i||(this._lastObjectRendered=t),!a){var l=t.enableTempParent();t.updateTransform(),t.disableTempParent(l)}this.renderTexture.bind(i),this.batch.currentRenderer.start(),(void 0!==o?o:this.clearBeforeRender)&&this.renderTexture.clear(),t.render(this),this.batch.currentRenderer.flush(),i&&i.baseTexture.update(),this.runners.postrender.emit(),this.projection.transform=null,this.emit("postrender")}},e.prototype.generateTexture=function(t,r,i,o){void 0===r&&(r={});var s=n.prototype.generateTexture.call(this,t,r,i,o);return this.framebuffer.blit(),s},e.prototype.resize=function(t,r){n.prototype.resize.call(this,t,r),this.runners.resize.emit(this.screen.height,this.screen.width)},e.prototype.reset=function(){return this.runners.reset.emit(),this},e.prototype.clear=function(){this.renderTexture.bind(),this.renderTexture.clear()},e.prototype.destroy=function(t){for(var r in this.runners.destroy.emit(),this.runners)this.runners[r].destroy();n.prototype.destroy.call(this,t),this.gl=null},Object.defineProperty(e.prototype,"extract",{get:function(){return to("6.0.0","Renderer#extract has been deprecated, please use Renderer#plugins.extract instead."),this.plugins.extract},enumerable:!1,configurable:!0}),e.registerPlugin=function(t,r){(e.__plugins=e.__plugins||{})[t]=r},e}(UH),QM="attribute vec2 aVertexPosition;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nuniform vec4 inputSize;\nuniform vec4 outputFrame;\n\nvec4 filterVertexPosition( void )\n{\n    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;\n\n    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);\n}\n\nvec2 filterTextureCoord( void )\n{\n    return aVertexPosition * (outputFrame.zw * inputSize.zw);\n}\n\nvoid main(void)\n{\n    gl_Position = filterVertexPosition();\n    vTextureCoord = filterTextureCoord();\n}\n",xm=function n(){this.texArray=null,this.blend=0,this.type=pr.TRIANGLES,this.start=0,this.size=0,this.data=null},Rm=function(){function n(){this.elements=[],this.ids=[],this.count=0}return n.prototype.clear=function(){for(var e=0;e<this.count;e++)this.elements[e]=null;this.count=0},n}(),Im=function(){function n(e){this.rawBinaryData="number"==typeof e?new ArrayBuffer(e):e instanceof Uint8Array?e.buffer:e,this.uint32View=new Uint32Array(this.rawBinaryData),this.float32View=new Float32Array(this.rawBinaryData)}return Object.defineProperty(n.prototype,"int8View",{get:function(){return this._int8View||(this._int8View=new Int8Array(this.rawBinaryData)),this._int8View},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"uint8View",{get:function(){return this._uint8View||(this._uint8View=new Uint8Array(this.rawBinaryData)),this._uint8View},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"int16View",{get:function(){return this._int16View||(this._int16View=new Int16Array(this.rawBinaryData)),this._int16View},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"uint16View",{get:function(){return this._uint16View||(this._uint16View=new Uint16Array(this.rawBinaryData)),this._uint16View},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"int32View",{get:function(){return this._int32View||(this._int32View=new Int32Array(this.rawBinaryData)),this._int32View},enumerable:!1,configurable:!0}),n.prototype.view=function(e){return this[e+"View"]},n.prototype.destroy=function(){this.rawBinaryData=null,this._int8View=null,this._uint8View=null,this._int16View=null,this._uint16View=null,this._int32View=null,this.uint32View=null,this.float32View=null},n.sizeOf=function(e){switch(e){case"int8":case"uint8":return 1;case"int16":case"uint16":return 2;case"int32":case"uint32":case"float32":return 4;default:throw new Error(e+" isn't a valid view type")}},n}(),WH=function(n){function e(t){var r=n.call(this,t)||this;return r.shaderGenerator=null,r.geometryClass=null,r.vertexSize=null,r.state=Yo.for2d(),r.size=4*de.SPRITE_BATCH_SIZE,r._vertexCount=0,r._indexCount=0,r._bufferedElements=[],r._bufferedTextures=[],r._bufferSize=0,r._shader=null,r._packedGeometries=[],r._packedGeometryPoolSize=2,r._flushId=0,r._aBuffers={},r._iBuffers={},r.MAX_TEXTURES=1,r.renderer.on("prerender",r.onPrerender,r),t.runners.contextChange.add(r),r._dcIndex=0,r._aIndex=0,r._iIndex=0,r._attributeBuffer=null,r._indexBuffer=null,r._tempBoundTextures=[],r}return bt(e,n),e.prototype.contextChange=function(){var t=this.renderer.gl;de.PREFER_ENV===oi.WEBGL_LEGACY?this.MAX_TEXTURES=1:(this.MAX_TEXTURES=Math.min(t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS),de.SPRITE_MAX_TEXTURES),this.MAX_TEXTURES=function dH(n,e){if(0===n)throw new Error("Invalid value of `0` passed to `checkMaxIfStatementsInShader`");for(var t=e.createShader(e.FRAGMENT_SHADER);;){var r=uH.replace(/%forloop%/gi,cH(n));if(e.shaderSource(t,r),e.compileShader(t),e.getShaderParameter(t,e.COMPILE_STATUS))break;n=n/2|0}return n}(this.MAX_TEXTURES,t)),this._shader=this.shaderGenerator.generateShader(this.MAX_TEXTURES);for(var r=0;r<this._packedGeometryPoolSize;r++)this._packedGeometries[r]=new this.geometryClass;this.initFlushBuffers()},e.prototype.initFlushBuffers=function(){for(var t=e._drawCallPool,r=e._textureArrayPool,i=this.size/4,o=Math.floor(i/this.MAX_TEXTURES)+1;t.length<i;)t.push(new xm);for(;r.length<o;)r.push(new Rm);for(var s=0;s<this.MAX_TEXTURES;s++)this._tempBoundTextures[s]=null},e.prototype.onPrerender=function(){this._flushId=0},e.prototype.render=function(t){!t._texture.valid||(this._vertexCount+t.vertexData.length/2>this.size&&this.flush(),this._vertexCount+=t.vertexData.length/2,this._indexCount+=t.indices.length,this._bufferedTextures[this._bufferSize]=t._texture.baseTexture,this._bufferedElements[this._bufferSize++]=t)},e.prototype.buildTexturesAndDrawCalls=function(){var r=this._bufferedTextures,i=this.MAX_TEXTURES,o=e._textureArrayPool,s=this.renderer.batch,a=this._tempBoundTextures,l=this.renderer.textureGC.count,u=++Xe._globalBatch,c=0,d=o[0],h=0;s.copyBoundTextures(a,i);for(var f=0;f<this._bufferSize;++f){var p=r[f];r[f]=null,p._batchEnabled!==u&&(d.count>=i&&(s.boundArray(d,a,u,i),this.buildDrawCalls(d,h,f),h=f,d=o[++c],++u),p._batchEnabled=u,p.touched=l,d.elements[d.count++]=p)}for(d.count>0&&(s.boundArray(d,a,u,i),this.buildDrawCalls(d,h,this._bufferSize),++c,++u),f=0;f<a.length;f++)a[f]=null;Xe._globalBatch=u},e.prototype.buildDrawCalls=function(t,r,i){var o=this,s=o._bufferedElements,a=o._attributeBuffer,l=o._indexBuffer,u=o.vertexSize,c=e._drawCallPool,d=this._dcIndex,h=this._aIndex,f=this._iIndex,p=c[d];p.start=this._iIndex,p.texArray=t;for(var _=r;_<i;++_){var m=s[_],b=KS[m._texture.baseTexture.alphaMode?1:0][m.blendMode];s[_]=null,r<_&&p.blend!==b&&(p.size=f-p.start,r=_,(p=c[++d]).texArray=t,p.start=f),this.packInterleavedGeometry(m,a,l,h,f),h+=m.vertexData.length/2*u,f+=m.indices.length,p.blend=b}r<i&&(p.size=f-p.start,++d),this._dcIndex=d,this._aIndex=h,this._iIndex=f},e.prototype.bindAndClearTexArray=function(t){for(var r=this.renderer.texture,i=0;i<t.count;i++)r.bind(t.elements[i],t.ids[i]),t.elements[i]=null;t.count=0},e.prototype.updateGeometry=function(){var t=this,r=t._packedGeometries,i=t._attributeBuffer,o=t._indexBuffer;de.CAN_UPLOAD_SAME_BUFFER?(r[this._flushId]._buffer.update(i.rawBinaryData),r[this._flushId]._indexBuffer.update(o),this.renderer.geometry.updateBuffers()):(this._packedGeometryPoolSize<=this._flushId&&(this._packedGeometryPoolSize++,r[this._flushId]=new this.geometryClass),r[this._flushId]._buffer.update(i.rawBinaryData),r[this._flushId]._indexBuffer.update(o),this.renderer.geometry.bind(r[this._flushId]),this.renderer.geometry.updateBuffers(),this._flushId++)},e.prototype.drawBatches=function(){for(var t=this._dcIndex,r=this.renderer,i=r.gl,o=r.state,s=e._drawCallPool,a=null,l=0;l<t;l++){var u=s[l],c=u.texArray,d=u.type,h=u.size,f=u.start,p=u.blend;a!==c&&(a=c,this.bindAndClearTexArray(c)),this.state.blendMode=p,o.set(this.state),i.drawElements(d,h,i.UNSIGNED_SHORT,2*f)}},e.prototype.flush=function(){0!==this._vertexCount&&(this._attributeBuffer=this.getAttributeBuffer(this._vertexCount),this._indexBuffer=this.getIndexBuffer(this._indexCount),this._aIndex=0,this._iIndex=0,this._dcIndex=0,this.buildTexturesAndDrawCalls(),this.updateGeometry(),this.drawBatches(),this._bufferSize=0,this._vertexCount=0,this._indexCount=0)},e.prototype.start=function(){this.renderer.state.set(this.state),this.renderer.texture.ensureSamplerType(this.MAX_TEXTURES),this.renderer.shader.bind(this._shader),de.CAN_UPLOAD_SAME_BUFFER&&this.renderer.geometry.bind(this._packedGeometries[this._flushId])},e.prototype.stop=function(){this.flush()},e.prototype.destroy=function(){for(var t=0;t<this._packedGeometryPoolSize;t++)this._packedGeometries[t]&&this._packedGeometries[t].destroy();this.renderer.off("prerender",this.onPrerender,this),this._aBuffers=null,this._iBuffers=null,this._packedGeometries=null,this._attributeBuffer=null,this._indexBuffer=null,this._shader&&(this._shader.destroy(),this._shader=null),n.prototype.destroy.call(this)},e.prototype.getAttributeBuffer=function(t){var r=Wc(Math.ceil(t/8)),i=eM(r),o=8*r;this._aBuffers.length<=i&&(this._iBuffers.length=i+1);var s=this._aBuffers[o];return s||(this._aBuffers[o]=s=new Im(o*this.vertexSize*4)),s},e.prototype.getIndexBuffer=function(t){var r=Wc(Math.ceil(t/12)),i=eM(r),o=12*r;this._iBuffers.length<=i&&(this._iBuffers.length=i+1);var s=this._iBuffers[i];return s||(this._iBuffers[i]=s=new Uint16Array(o)),s},e.prototype.packInterleavedGeometry=function(t,r,i,o,s){for(var a=r.uint32View,l=r.float32View,u=o/this.vertexSize,c=t.uvs,d=t.indices,h=t.vertexData,f=t._texture.baseTexture._batchLocation,p=Math.min(t.worldAlpha,1),_=p<1&&t._texture.baseTexture.alphaMode?tm(t._tintRGB,p):t._tintRGB+(255*p<<24),m=0;m<h.length;m+=2)l[o++]=h[m],l[o++]=h[m+1],l[o++]=c[m],l[o++]=c[m+1],a[o++]=_,l[o++]=f;for(m=0;m<d.length;m++)i[s++]=u+d[m]},e._drawCallPool=[],e._textureArrayPool=[],e}(sd),XH=function(){function n(e,t){if(this.vertexSrc=e,this.fragTemplate=t,this.programCache={},this.defaultGroupCache={},t.indexOf("%count%")<0)throw new Error('Fragment template must contain "%count%".');if(t.indexOf("%forloop%")<0)throw new Error('Fragment template must contain "%forloop%".')}return n.prototype.generateShader=function(e){if(!this.programCache[e]){for(var t=new Int32Array(e),r=0;r<e;r++)t[r]=r;this.defaultGroupCache[e]=jo.from({uSamplers:t},!0);var i=this.fragTemplate;i=(i=i.replace(/%count%/gi,""+e)).replace(/%forloop%/gi,this.generateSampleSrc(e)),this.programCache[e]=new Ol(this.vertexSrc,i)}var o={tint:new Float32Array([1,1,1,1]),translationMatrix:new qt,default:this.defaultGroupCache[e]};return new no(this.programCache[e],o)},n.prototype.generateSampleSrc=function(e){var t="";t+="\n",t+="\n";for(var r=0;r<e;r++)r>0&&(t+="\nelse "),r<e-1&&(t+="if(vTextureId < "+r+".5)"),t+="\n{",t+="\n\tcolor = texture2D(uSamplers["+r+"], vTextureCoord);",t+="\n}";return(t+="\n")+"\n"},n}(),ZM=function(n){function e(t){void 0===t&&(t=!1);var r=n.call(this)||this;return r._buffer=new un(null,t,!1),r._indexBuffer=new un(null,t,!0),r.addAttribute("aVertexPosition",r._buffer,2,!1,pe.FLOAT).addAttribute("aTextureCoord",r._buffer,2,!1,pe.FLOAT).addAttribute("aColor",r._buffer,4,!0,pe.UNSIGNED_BYTE).addAttribute("aTextureId",r._buffer,1,!0,pe.FLOAT).addIndex(r._indexBuffer),r}return bt(e,n),e}(xl),JM="precision highp float;\nattribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\nattribute vec4 aColor;\nattribute float aTextureId;\n\nuniform mat3 projectionMatrix;\nuniform mat3 translationMatrix;\nuniform vec4 tint;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\nvarying float vTextureId;\n\nvoid main(void){\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = aTextureCoord;\n    vTextureId = aTextureId;\n    vColor = aColor * tint;\n}\n",eC="varying vec2 vTextureCoord;\nvarying vec4 vColor;\nvarying float vTextureId;\nuniform sampler2D uSamplers[%count%];\n\nvoid main(void){\n    vec4 color;\n    %forloop%\n    gl_FragColor = color * vColor;\n}\n",$H=function(){function n(){}return n.create=function(e){var t=Object.assign({vertex:JM,fragment:eC,geometryClass:ZM,vertexSize:6},e),r=t.vertex,i=t.fragment,o=t.vertexSize,s=t.geometryClass;return function(a){function l(u){var c=a.call(this,u)||this;return c.shaderGenerator=new XH(r,i),c.geometryClass=s,c.vertexSize=o,c}return bt(l,a),l}(WH)},Object.defineProperty(n,"defaultVertexSrc",{get:function(){return JM},enumerable:!1,configurable:!0}),Object.defineProperty(n,"defaultFragmentTemplate",{get:function(){return eC},enumerable:!1,configurable:!0}),n}(),qH=$H.create(),KH={},QH=function(n){Object.defineProperty(KH,n,{get:function(){return to("6.0.0","PIXI.systems."+n+" has moved to PIXI."+n),mM[n]}})};for(var Om in mM)QH(Om);var ZH={},JH=function(n){Object.defineProperty(ZH,n,{get:function(){return to("6.0.0","PIXI.resources."+n+" has moved to PIXI."+n),KM[n]}})};for(var Om in KM)JH(Om);var Nl=function(){function n(e){var t=this;this.stage=new ui,e=Object.assign({forceCanvas:!1},e),this.renderer=function HH(n){return io.create(n)}(e),n._plugins.forEach(function(r){r.init.call(t,e)})}return n.registerPlugin=function(e){n._plugins.push(e)},n.prototype.render=function(){this.renderer.render(this.stage)},Object.defineProperty(n.prototype,"view",{get:function(){return this.renderer.view},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"screen",{get:function(){return this.renderer.screen},enumerable:!1,configurable:!0}),n.prototype.destroy=function(e,t){var r=this,i=n._plugins.slice(0);i.reverse(),i.forEach(function(o){o.destroy.call(r)}),this.stage.destroy(t),this.stage=null,this.renderer.destroy(e),this.renderer=null},n._plugins=[],n}(),e4=function(){function n(){}return n.init=function(e){var t=this;Object.defineProperty(this,"resizeTo",{set:function(r){globalThis.removeEventListener("resize",this.queueResize),this._resizeTo=r,r&&(globalThis.addEventListener("resize",this.queueResize),this.resize())},get:function(){return this._resizeTo}}),this.queueResize=function(){!t._resizeTo||(t.cancelResize(),t._resizeId=requestAnimationFrame(function(){return t.resize()}))},this.cancelResize=function(){t._resizeId&&(cancelAnimationFrame(t._resizeId),t._resizeId=null)},this.resize=function(){if(t._resizeTo){var r,i;if(t.cancelResize(),t._resizeTo===globalThis.window)r=globalThis.innerWidth,i=globalThis.innerHeight;else{var o=t._resizeTo;r=o.clientWidth,i=o.clientHeight}t.renderer.resize(r,i)}},this._resizeId=null,this._resizeTo=null,this.resizeTo=e.resizeTo||null},n.destroy=function(){globalThis.removeEventListener("resize",this.queueResize),this.cancelResize(),this.cancelResize=null,this.queueResize=null,this.resizeTo=null,this.resize=null},n}();Nl.registerPlugin(e4);var Pm=/iPhone/i,tC=/iPod/i,nC=/iPad/i,rC=/\biOS-universal(?:.+)Mac\b/i,Nm=/\bAndroid(?:.+)Mobile\b/i,iC=/Android/i,la=/(?:SD4930UR|\bSilk(?:.+)Mobile\b)/i,dd=/Silk/i,Pi=/Windows Phone/i,oC=/\bWindows(?:.+)ARM\b/i,sC=/BlackBerry/i,aC=/BB10/i,lC=/Opera Mini/i,uC=/\b(CriOS|Chrome)(?:.+)Mobile/i,cC=/Mobile(?:.+)Firefox\b/i,dC=function(n){return void 0!==n&&"MacIntel"===n.platform&&"number"==typeof n.maxTouchPoints&&n.maxTouchPoints>1&&"undefined"==typeof MSStream},ua=function n4(n){var e={userAgent:"",platform:"",maxTouchPoints:0};n||"undefined"==typeof navigator?"string"==typeof n?e.userAgent=n:n&&n.userAgent&&(e={userAgent:n.userAgent,platform:n.platform,maxTouchPoints:n.maxTouchPoints||0}):e={userAgent:navigator.userAgent,platform:navigator.platform,maxTouchPoints:navigator.maxTouchPoints||0};var t=e.userAgent,r=t.split("[FBAN");void 0!==r[1]&&(t=r[0]),void 0!==(r=t.split("Twitter"))[1]&&(t=r[0]);var i=function t4(n){return function(e){return e.test(n)}}(t),o={apple:{phone:i(Pm)&&!i(Pi),ipod:i(tC),tablet:!i(Pm)&&(i(nC)||dC(e))&&!i(Pi),universal:i(rC),device:(i(Pm)||i(tC)||i(nC)||i(rC)||dC(e))&&!i(Pi)},amazon:{phone:i(la),tablet:!i(la)&&i(dd),device:i(la)||i(dd)},android:{phone:!i(Pi)&&i(la)||!i(Pi)&&i(Nm),tablet:!i(Pi)&&!i(la)&&!i(Nm)&&(i(dd)||i(iC)),device:!i(Pi)&&(i(la)||i(dd)||i(Nm)||i(iC))||i(/\bokhttp\b/i)},windows:{phone:i(Pi),tablet:i(oC),device:i(Pi)||i(oC)},other:{blackberry:i(sC),blackberry10:i(aC),opera:i(lC),firefox:i(cC),chrome:i(uC),device:i(sC)||i(aC)||i(lC)||i(cC)||i(uC)},any:!1,phone:!1,tablet:!1};return o.any=o.apple.device||o.android.device||o.windows.device||o.other.device,o.phone=o.apple.phone||o.android.phone||o.windows.phone,o.tablet=o.apple.tablet||o.android.tablet||o.windows.tablet,o}(globalThis.navigator),hC_SORTABLE_CHILDREN=(function r4(n){var t,e=!0;(ua.tablet||ua.phone)&&(ua.apple.device&&(t=navigator.userAgent.match(/OS (\d+)_(\d+)?/))&&parseInt(t[1],10)<11&&(e=!1),ua.android.device&&(t=navigator.userAgent.match(/Android\s([0-9.]*)/))&&parseInt(t[1],10)<7&&(e=!1))}(32),function o4(){}(),!1),fC=function(){function n(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0,this.rect=null,this.updateID=-1}return n.prototype.isEmpty=function(){return this.minX>this.maxX||this.minY>this.maxY},n.prototype.clear=function(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0},n.prototype.getRectangle=function(e){return this.minX>this.maxX||this.minY>this.maxY?Fe.EMPTY:((e=e||new Fe(0,0,1,1)).x=this.minX,e.y=this.minY,e.width=this.maxX-this.minX,e.height=this.maxY-this.minY,e)},n.prototype.addPoint=function(e){this.minX=Math.min(this.minX,e.x),this.maxX=Math.max(this.maxX,e.x),this.minY=Math.min(this.minY,e.y),this.maxY=Math.max(this.maxY,e.y)},n.prototype.addPointMatrix=function(e,t){var u=e.a*t.x+e.c*t.y+e.tx,c=e.b*t.x+e.d*t.y+e.ty;this.minX=Math.min(this.minX,u),this.maxX=Math.max(this.maxX,u),this.minY=Math.min(this.minY,c),this.maxY=Math.max(this.maxY,c)},n.prototype.addQuad=function(e){var t=this.minX,r=this.minY,i=this.maxX,o=this.maxY,s=e[0],a=e[1];t=s<t?s:t,r=a<r?a:r,i=s>i?s:i,o=a>o?a:o,t=(s=e[2])<t?s:t,r=(a=e[3])<r?a:r,i=s>i?s:i,o=a>o?a:o,t=(s=e[4])<t?s:t,r=(a=e[5])<r?a:r,i=s>i?s:i,o=a>o?a:o,r=(a=e[7])<r?a:r,i=(s=e[6])>i?s:i,o=a>o?a:o,this.minX=t=s<t?s:t,this.minY=r,this.maxX=i,this.maxY=o},n.prototype.addFrame=function(e,t,r,i,o){this.addFrameMatrix(e.worldTransform,t,r,i,o)},n.prototype.addFrameMatrix=function(e,t,r,i,o){var s=e.a,a=e.b,l=e.c,u=e.d,c=e.tx,d=e.ty,h=this.minX,f=this.minY,p=this.maxX,_=this.maxY,m=s*t+l*r+c,g=a*t+u*r+d;h=m<h?m:h,f=g<f?g:f,p=m>p?m:p,_=g>_?g:_,h=(m=s*i+l*r+c)<h?m:h,f=(g=a*i+u*r+d)<f?g:f,p=m>p?m:p,_=g>_?g:_,h=(m=s*t+l*o+c)<h?m:h,f=(g=a*t+u*o+d)<f?g:f,p=m>p?m:p,_=g>_?g:_,f=(g=a*i+u*o+d)<f?g:f,p=(m=s*i+l*o+c)>p?m:p,_=g>_?g:_,this.minX=h=m<h?m:h,this.minY=f,this.maxX=p,this.maxY=_},n.prototype.addVertexData=function(e,t,r){for(var i=this.minX,o=this.minY,s=this.maxX,a=this.maxY,l=t;l<r;l+=2){var u=e[l],c=e[l+1];i=u<i?u:i,o=c<o?c:o,s=u>s?u:s,a=c>a?c:a}this.minX=i,this.minY=o,this.maxX=s,this.maxY=a},n.prototype.addVertices=function(e,t,r,i){this.addVerticesMatrix(e.worldTransform,t,r,i)},n.prototype.addVerticesMatrix=function(e,t,r,i,o,s){void 0===o&&(o=0),void 0===s&&(s=o);for(var a=e.a,l=e.b,u=e.c,c=e.d,d=e.tx,h=e.ty,f=this.minX,p=this.minY,_=this.maxX,m=this.maxY,g=r;g<i;g+=2){var b=t[g],y=t[g+1],M=a*b+u*y+d,S=c*y+l*b+h;f=Math.min(f,M-o),_=Math.max(_,M+o),p=Math.min(p,S-s),m=Math.max(m,S+s)}this.minX=f,this.minY=p,this.maxX=_,this.maxY=m},n.prototype.addBounds=function(e){var t=this.minX,r=this.minY,i=this.maxX,o=this.maxY;this.minX=e.minX<t?e.minX:t,this.minY=e.minY<r?e.minY:r,this.maxX=e.maxX>i?e.maxX:i,this.maxY=e.maxY>o?e.maxY:o},n.prototype.addBoundsMask=function(e,t){var r=e.minX>t.minX?e.minX:t.minX,i=e.minY>t.minY?e.minY:t.minY,o=e.maxX<t.maxX?e.maxX:t.maxX,s=e.maxY<t.maxY?e.maxY:t.maxY;if(r<=o&&i<=s){var a=this.minX,l=this.minY,u=this.maxX,c=this.maxY;this.minX=r<a?r:a,this.minY=i<l?i:l,this.maxX=o>u?o:u,this.maxY=s>c?s:c}},n.prototype.addBoundsMatrix=function(e,t){this.addFrameMatrix(t,e.minX,e.minY,e.maxX,e.maxY)},n.prototype.addBoundsArea=function(e,t){var r=e.minX>t.x?e.minX:t.x,i=e.minY>t.y?e.minY:t.y,o=e.maxX<t.x+t.width?e.maxX:t.x+t.width,s=e.maxY<t.y+t.height?e.maxY:t.y+t.height;if(r<=o&&i<=s){var a=this.minX,l=this.minY,u=this.maxX,c=this.maxY;this.minX=r<a?r:a,this.minY=i<l?i:l,this.maxX=o>u?o:u,this.maxY=s>c?s:c}},n.prototype.pad=function(e,t){void 0===e&&(e=0),void 0===t&&(t=e),this.isEmpty()||(this.minX-=e,this.maxX+=e,this.minY-=t,this.maxY+=t)},n.prototype.addFramePad=function(e,t,r,i,o,s){t-=s,r+=o,i+=s,this.minX=this.minX<(e-=o)?this.minX:e,this.maxX=this.maxX>r?this.maxX:r,this.minY=this.minY<t?this.minY:t,this.maxY=this.maxY>i?this.maxY:i},n}(),Fm=function(n,e){return(Fm=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var i in r)r.hasOwnProperty(i)&&(t[i]=r[i])})(n,e)};function Lm(n,e){function t(){this.constructor=n}Fm(n,e),n.prototype=null===e?Object.create(e):(t.prototype=e.prototype,new t)}var Fl=function(n){function e(){var t=n.call(this)||this;return t.tempDisplayObjectParent=null,t.transform=new im,t.alpha=1,t.visible=!0,t.renderable=!0,t.cullable=!1,t.cullArea=null,t.parent=null,t.worldAlpha=1,t._lastSortedIndex=0,t._zIndex=0,t.filterArea=null,t.filters=null,t._enabledFilters=null,t._bounds=new fC,t._localBounds=null,t._boundsID=0,t._boundsRect=null,t._localBoundsRect=null,t._mask=null,t._maskRefCount=0,t._destroyed=!1,t.isSprite=!1,t.isMask=!1,t}return Lm(e,n),e.mixin=function(t){for(var r=Object.keys(t),i=0;i<r.length;++i){var o=r[i];Object.defineProperty(e.prototype,o,Object.getOwnPropertyDescriptor(t,o))}},Object.defineProperty(e.prototype,"destroyed",{get:function(){return this._destroyed},enumerable:!1,configurable:!0}),e.prototype._recursivePostUpdateTransform=function(){this.parent?(this.parent._recursivePostUpdateTransform(),this.transform.updateTransform(this.parent.transform)):this.transform.updateTransform(this._tempDisplayObjectParent.transform)},e.prototype.updateTransform=function(){this._boundsID++,this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha},e.prototype.getBounds=function(t,r){return t||(this.parent?(this._recursivePostUpdateTransform(),this.updateTransform()):(this.parent=this._tempDisplayObjectParent,this.updateTransform(),this.parent=null)),this._bounds.updateID!==this._boundsID&&(this.calculateBounds(),this._bounds.updateID=this._boundsID),r||(this._boundsRect||(this._boundsRect=new Fe),r=this._boundsRect),this._bounds.getRectangle(r)},e.prototype.getLocalBounds=function(t){t||(this._localBoundsRect||(this._localBoundsRect=new Fe),t=this._localBoundsRect),this._localBounds||(this._localBounds=new fC);var r=this.transform,i=this.parent;this.parent=null,this.transform=this._tempDisplayObjectParent.transform;var o=this._bounds,s=this._boundsID;this._bounds=this._localBounds;var a=this.getBounds(!1,t);return this.parent=i,this.transform=r,this._bounds=o,this._bounds.updateID+=this._boundsID-s,a},e.prototype.toGlobal=function(t,r,i){return void 0===i&&(i=!1),i||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.apply(t,r)},e.prototype.toLocal=function(t,r,i,o){return r&&(t=r.toGlobal(t,i,o)),o||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.applyInverse(t,i)},e.prototype.setParent=function(t){if(!t||!t.addChild)throw new Error("setParent: Argument must be a Container");return t.addChild(this),t},e.prototype.setTransform=function(t,r,i,o,s,a,l,u,c){return void 0===t&&(t=0),void 0===r&&(r=0),void 0===i&&(i=1),void 0===o&&(o=1),void 0===s&&(s=0),void 0===a&&(a=0),void 0===l&&(l=0),void 0===u&&(u=0),void 0===c&&(c=0),this.position.x=t,this.position.y=r,this.scale.x=i||1,this.scale.y=o||1,this.rotation=s,this.skew.x=a,this.skew.y=l,this.pivot.x=u,this.pivot.y=c,this},e.prototype.destroy=function(t){this.parent&&this.parent.removeChild(this),this._destroyed=!0,this.transform=null,this.parent=null,this._bounds=null,this.mask=null,this.cullArea=null,this.filters=null,this.filterArea=null,this.hitArea=null,this.interactive=!1,this.interactiveChildren=!1,this.emit("destroyed"),this.removeAllListeners()},Object.defineProperty(e.prototype,"_tempDisplayObjectParent",{get:function(){return null===this.tempDisplayObjectParent&&(this.tempDisplayObjectParent=new s4),this.tempDisplayObjectParent},enumerable:!1,configurable:!0}),e.prototype.enableTempParent=function(){var t=this.parent;return this.parent=this._tempDisplayObjectParent,t},e.prototype.disableTempParent=function(t){this.parent=t},Object.defineProperty(e.prototype,"x",{get:function(){return this.position.x},set:function(t){this.transform.position.x=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"y",{get:function(){return this.position.y},set:function(t){this.transform.position.y=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"worldTransform",{get:function(){return this.transform.worldTransform},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"localTransform",{get:function(){return this.transform.localTransform},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"position",{get:function(){return this.transform.position},set:function(t){this.transform.position.copyFrom(t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"scale",{get:function(){return this.transform.scale},set:function(t){this.transform.scale.copyFrom(t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"pivot",{get:function(){return this.transform.pivot},set:function(t){this.transform.pivot.copyFrom(t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"skew",{get:function(){return this.transform.skew},set:function(t){this.transform.skew.copyFrom(t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"rotation",{get:function(){return this.transform.rotation},set:function(t){this.transform.rotation=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"angle",{get:function(){return this.transform.rotation*iM},set:function(t){this.transform.rotation=t*oM},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"zIndex",{get:function(){return this._zIndex},set:function(t){this._zIndex=t,this.parent&&(this.parent.sortDirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"worldVisible",{get:function(){var t=this;do{if(!t.visible)return!1;t=t.parent}while(t);return!0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"mask",{get:function(){return this._mask},set:function(t){var r;this._mask!==t&&(this._mask&&((r=this._mask.maskObject||this._mask)._maskRefCount--,0===r._maskRefCount&&(r.renderable=!0,r.isMask=!1)),this._mask=t,this._mask&&(0===(r=this._mask.maskObject||this._mask)._maskRefCount&&(r.renderable=!1,r.isMask=!0),r._maskRefCount++))},enumerable:!1,configurable:!0}),e}(Js()),s4=function(n){function e(){var t=null!==n&&n.apply(this,arguments)||this;return t.sortDirty=null,t}return Lm(e,n),e}(Fl);Fl.prototype.displayObjectUpdateTransform=Fl.prototype.updateTransform;var gd=(()=>{return(n=gd||(gd={}))[n.NONE=0]="NONE",n[n.SCISSOR=1]="SCISSOR",n[n.STENCIL=2]="STENCIL",n[n.SPRITE=3]="SPRITE",gd;var n})();function a4(n,e){return n.zIndex===e.zIndex?n._lastSortedIndex-e._lastSortedIndex:n.zIndex-e.zIndex}var pC=function(n){function e(){var t=n.call(this)||this;return t.children=[],t.sortableChildren=hC_SORTABLE_CHILDREN,t.sortDirty=!1,t}return Lm(e,n),e.prototype.onChildrenChange=function(t){},e.prototype.addChild=function(){for(var t=arguments,r=[],i=0;i<arguments.length;i++)r[i]=t[i];if(r.length>1)for(var o=0;o<r.length;o++)this.addChild(r[o]);else{var s=r[0];s.parent&&s.parent.removeChild(s),s.parent=this,this.sortDirty=!0,s.transform._parentID=-1,this.children.push(s),this._boundsID++,this.onChildrenChange(this.children.length-1),this.emit("childAdded",s,this,this.children.length-1),s.emit("added",this)}return r[0]},e.prototype.addChildAt=function(t,r){if(r<0||r>this.children.length)throw new Error(t+"addChildAt: The index "+r+" supplied is out of bounds "+this.children.length);return t.parent&&t.parent.removeChild(t),t.parent=this,this.sortDirty=!0,t.transform._parentID=-1,this.children.splice(r,0,t),this._boundsID++,this.onChildrenChange(r),t.emit("added",this),this.emit("childAdded",t,this,r),t},e.prototype.swapChildren=function(t,r){if(t!==r){var i=this.getChildIndex(t),o=this.getChildIndex(r);this.children[i]=r,this.children[o]=t,this.onChildrenChange(i<o?i:o)}},e.prototype.getChildIndex=function(t){var r=this.children.indexOf(t);if(-1===r)throw new Error("The supplied DisplayObject must be a child of the caller");return r},e.prototype.setChildIndex=function(t,r){if(r<0||r>=this.children.length)throw new Error("The index "+r+" supplied is out of bounds "+this.children.length);var i=this.getChildIndex(t);Ii(this.children,i,1),this.children.splice(r,0,t),this.onChildrenChange(r)},e.prototype.getChildAt=function(t){if(t<0||t>=this.children.length)throw new Error("getChildAt: Index ("+t+") does not exist.");return this.children[t]},e.prototype.removeChild=function(){for(var t=arguments,r=[],i=0;i<arguments.length;i++)r[i]=t[i];if(r.length>1)for(var o=0;o<r.length;o++)this.removeChild(r[o]);else{var s=r[0],a=this.children.indexOf(s);if(-1===a)return null;s.parent=null,s.transform._parentID=-1,Ii(this.children,a,1),this._boundsID++,this.onChildrenChange(a),s.emit("removed",this),this.emit("childRemoved",s,this,a)}return r[0]},e.prototype.removeChildAt=function(t){var r=this.getChildAt(t);return r.parent=null,r.transform._parentID=-1,Ii(this.children,t,1),this._boundsID++,this.onChildrenChange(t),r.emit("removed",this),this.emit("childRemoved",r,this,t),r},e.prototype.removeChildren=function(t,r){void 0===t&&(t=0),void 0===r&&(r=this.children.length);var a,s=r-t;if(s>0&&s<=r){a=this.children.splice(t,s);for(var l=0;l<a.length;++l)a[l].parent=null,a[l].transform&&(a[l].transform._parentID=-1);for(this._boundsID++,this.onChildrenChange(t),l=0;l<a.length;++l)a[l].emit("removed",this),this.emit("childRemoved",a[l],this,l);return a}if(0===s&&0===this.children.length)return[];throw new RangeError("removeChildren: numeric values are outside the acceptable range.")},e.prototype.sortChildren=function(){for(var t=!1,r=0,i=this.children.length;r<i;++r){var o=this.children[r];o._lastSortedIndex=r,!t&&0!==o.zIndex&&(t=!0)}t&&this.children.length>1&&this.children.sort(a4),this.sortDirty=!1},e.prototype.updateTransform=function(){this.sortableChildren&&this.sortDirty&&this.sortChildren(),this._boundsID++,this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha;for(var t=0,r=this.children.length;t<r;++t){var i=this.children[t];i.visible&&i.updateTransform()}},e.prototype.calculateBounds=function(){this._bounds.clear(),this._calculateBounds();for(var t=0;t<this.children.length;t++){var r=this.children[t];if(r.visible&&r.renderable)if(r.calculateBounds(),r._mask){var i=r._mask.maskObject||r._mask;i.calculateBounds(),this._bounds.addBoundsMask(r._bounds,i._bounds)}else r.filterArea?this._bounds.addBoundsArea(r._bounds,r.filterArea):this._bounds.addBounds(r._bounds)}this._bounds.updateID=this._boundsID},e.prototype.getLocalBounds=function(t,r){void 0===r&&(r=!1);var i=n.prototype.getLocalBounds.call(this,t);if(!r)for(var o=0,s=this.children.length;o<s;++o){var a=this.children[o];a.visible&&a.updateTransform()}return i},e.prototype._calculateBounds=function(){},e.prototype._renderWithCulling=function(t){var r=t.renderTexture.sourceFrame;if(r.width>0&&r.height>0){var i,o;if(this.cullArea?(i=this.cullArea,o=this.worldTransform):this._render!==e.prototype._render&&(i=this.getBounds(!0)),i&&r.intersects(i,o))this._render(t);else if(this.cullArea)return;for(var s=0,a=this.children.length;s<a;++s){var l=this.children[s],u=l.cullable;l.cullable=u||!this.cullArea,l.render(t),l.cullable=u}}},e.prototype.render=function(t){if(this.visible&&!(this.worldAlpha<=0)&&this.renderable)if(this._mask||this.filters&&this.filters.length)this.renderAdvanced(t);else if(this.cullable)this._renderWithCulling(t);else{this._render(t);for(var r=0,i=this.children.length;r<i;++r)this.children[r].render(t)}},e.prototype.renderAdvanced=function(t){var r=this.filters,i=this._mask;if(r){this._enabledFilters||(this._enabledFilters=[]),this._enabledFilters.length=0;for(var o=0;o<r.length;o++)r[o].enabled&&this._enabledFilters.push(r[o])}var s=r&&this._enabledFilters&&this._enabledFilters.length||i&&(!i.isMaskData||i.enabled&&(i.autoDetect||i.type!==gd.NONE));if(s&&t.batch.flush(),r&&this._enabledFilters&&this._enabledFilters.length&&t.filter.push(this,this._enabledFilters),i&&t.mask.push(this,this._mask),this.cullable)this._renderWithCulling(t);else{this._render(t),o=0;for(var a=this.children.length;o<a;++o)this.children[o].render(t)}s&&t.batch.flush(),i&&t.mask.pop(this),r&&this._enabledFilters&&this._enabledFilters.length&&t.filter.pop()},e.prototype._render=function(t){},e.prototype.destroy=function(t){n.prototype.destroy.call(this),this.sortDirty=!1;var r="boolean"==typeof t?t:t&&t.children,i=this.removeChildren(0,this.children.length);if(r)for(var o=0;o<i.length;++o)i[o].destroy(t)},Object.defineProperty(e.prototype,"width",{get:function(){return this.scale.x*this.getLocalBounds().width},set:function(t){var r=this.getLocalBounds().width;this.scale.x=0!==r?t/r:1,this._width=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this.scale.y*this.getLocalBounds().height},set:function(t){var r=this.getLocalBounds().height;this.scale.y=0!==r?t/r:1,this._height=t},enumerable:!1,configurable:!0}),e}(Fl);pC.prototype.containerUpdateTransform=pC.prototype.updateTransform;var Bm=new Fe,l4=function(){function n(e){this.renderer=e}return n.prototype.image=function(e,t,r){var i=new Image;return i.src=this.base64(e,t,r),i},n.prototype.base64=function(e,t,r){return this.canvas(e).toDataURL(t,r)},n.prototype.canvas=function(e){var r,i,s,t=this.renderer,o=!1,a=!1;e&&(e instanceof Ho?s=e:(s=this.renderer.generateTexture(e),a=!0)),s?(r=s.baseTexture.resolution,i=s.frame,o=!1,t.renderTexture.bind(s)):(r=this.renderer.resolution,o=!0,(i=Bm).width=this.renderer.width,i.height=this.renderer.height,t.renderTexture.bind(null));var l=Math.floor(i.width*r+1e-4),u=Math.floor(i.height*r+1e-4),c=new rM(l,u,1),d=new Uint8Array(4*l*u),h=t.gl;h.readPixels(i.x*r,i.y*r,l,u,h.RGBA,h.UNSIGNED_BYTE,d);var f=c.context.getImageData(0,0,l,u);if(n.arrayPostDivide(d,f.data),c.context.putImageData(f,0,0),o){var p=new rM(c.width,c.height,1);p.context.scale(1,-1),p.context.drawImage(c.canvas,0,-u),c.destroy(),c=p}return a&&s.destroy(!0),c.canvas},n.prototype.pixels=function(e,t){var i,o,s,r=this.renderer,a=!1;e&&(e instanceof Ho?s=e:e instanceof Fl&&(s=this.renderer.generateTexture(e),a=!0)),s?t?(i=t.resolution,o=s.frame,r.renderTexture.bind(s)):(i=s.baseTexture.resolution,o=s.frame,r.renderTexture.bind(s)):t?(i=t.resolution,(o=Bm).width=t.width,o.height=t.height,r.renderTexture.bind(null)):(i=r.resolution,(o=Bm).width=r.width,o.height=r.height,r.renderTexture.bind(null));var l=o.width*i,u=o.height*i,c=new Uint8Array(4*l*u),d=r.gl;return d.readPixels(o.x*i,o.y*i,l,u,d.RGBA,d.UNSIGNED_BYTE,c),a&&s.destroy(!0),n.arrayPostDivide(c,c),c},n.prototype.destroy=function(){this.renderer=null},n.arrayPostDivide=function(e,t){for(var r=0;r<e.length;r+=4){var i=t[r+3]=e[r+3];0!==i?(t[r]=Math.round(Math.min(255*e[r]/i,255)),t[r+1]=Math.round(Math.min(255*e[r+1]/i,255)),t[r+2]=Math.round(Math.min(255*e[r+2]/i,255))):(t[r]=e[r],t[r+1]=e[r+1],t[r+2]=e[r+2])}},n}(),vd=function(){function n(e,t,r){void 0===t&&(t=!1),this._fn=e,this._once=t,this._thisArg=r,this._next=this._prev=this._owner=null}return n.prototype.detach=function(){return null!==this._owner&&(this._owner.detach(this),!0)},n}();function mC(n,e){return n._head?(n._tail._next=e,e._prev=n._tail,n._tail=e):(n._head=e,n._tail=e),e._owner=n,e}var Ni=function(){function n(){this._head=this._tail=void 0}return n.prototype.handlers=function(e){void 0===e&&(e=!1);var t=this._head;if(e)return!!t;for(var r=[];t;)r.push(t),t=t._next;return r},n.prototype.has=function(e){if(!(e instanceof vd))throw new Error("MiniSignal#has(): First arg must be a SignalBinding object.");return e._owner===this},n.prototype.dispatch=function(){for(var e=arguments,t=[],r=0;r<arguments.length;r++)t[r]=e[r];var i=this._head;if(!i)return!1;for(;i;)i._once&&this.detach(i),i._fn.apply(i._thisArg,t),i=i._next;return!0},n.prototype.add=function(e,t){if(void 0===t&&(t=null),"function"!=typeof e)throw new Error("MiniSignal#add(): First arg must be a Function.");return mC(this,new vd(e,!1,t))},n.prototype.once=function(e,t){if(void 0===t&&(t=null),"function"!=typeof e)throw new Error("MiniSignal#once(): First arg must be a Function.");return mC(this,new vd(e,!0,t))},n.prototype.detach=function(e){if(!(e instanceof vd))throw new Error("MiniSignal#detach(): First arg must be a SignalBinding object.");return e._owner!==this||(e._prev&&(e._prev._next=e._next),e._next&&(e._next._prev=e._prev),e===this._head?(this._head=e._next,null===e._next&&(this._tail=null)):e===this._tail&&(this._tail=e._prev,this._tail._next=null),e._owner=null),this},n.prototype.detachAll=function(){var e=this._head;if(!e)return this;for(this._head=this._tail=null;e;)e._owner=null,e=e._next;return this},n}();function gC(n,e){for(var t={key:["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],q:{name:"queryKey",parser:/(?:^|&)([^&=]*)=?([^&]*)/g},parser:{strict:/^(?:([^:\/?#]+):)?(?:\/\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?))?((((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/,loose:/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/}},r=t.parser[(e=e||{}).strictMode?"strict":"loose"].exec(n),i={},o=14;o--;)i[t.key[o]]=r[o]||"";return i[t.q.name]={},i[t.key[12]].replace(t.q.parser,function(s,a,l){a&&(i[t.q.name][a]=l)}),i}var km,yd=null;function yC(){}function EC(n,e,t){e&&0===e.indexOf(".")&&(e=e.substring(1)),e&&(n[e]=t)}function Um(n){return n.toString().replace("object ","")}var n,e,zt=function(){function n(e,t,r){if(this._dequeue=yC,this._onLoadBinding=null,this._elementTimer=0,this._boundComplete=null,this._boundOnError=null,this._boundOnProgress=null,this._boundOnTimeout=null,this._boundXhrOnError=null,this._boundXhrOnTimeout=null,this._boundXhrOnAbort=null,this._boundXhrOnLoad=null,"string"!=typeof e||"string"!=typeof t)throw new Error("Both name and url are required for constructing a resource.");r=r||{},this._flags=0,this._setFlag(n.STATUS_FLAGS.DATA_URL,0===t.indexOf("data:")),this.name=e,this.url=t,this.extension=this._getExtension(),this.data=null,this.crossOrigin=!0===r.crossOrigin?"anonymous":r.crossOrigin,this.timeout=r.timeout||0,this.loadType=r.loadType||this._determineLoadType(),this.xhrType=r.xhrType,this.metadata=r.metadata||{},this.error=null,this.xhr=null,this.children=[],this.type=n.TYPE.UNKNOWN,this.progressChunk=0,this._dequeue=yC,this._onLoadBinding=null,this._elementTimer=0,this._boundComplete=this.complete.bind(this),this._boundOnError=this._onError.bind(this),this._boundOnProgress=this._onProgress.bind(this),this._boundOnTimeout=this._onTimeout.bind(this),this._boundXhrOnError=this._xhrOnError.bind(this),this._boundXhrOnTimeout=this._xhrOnTimeout.bind(this),this._boundXhrOnAbort=this._xhrOnAbort.bind(this),this._boundXhrOnLoad=this._xhrOnLoad.bind(this),this.onStart=new Ni,this.onProgress=new Ni,this.onComplete=new Ni,this.onAfterMiddleware=new Ni}return n.setExtensionLoadType=function(e,t){EC(n._loadTypeMap,e,t)},n.setExtensionXhrType=function(e,t){EC(n._xhrTypeMap,e,t)},Object.defineProperty(n.prototype,"isDataUrl",{get:function(){return this._hasFlag(n.STATUS_FLAGS.DATA_URL)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"isComplete",{get:function(){return this._hasFlag(n.STATUS_FLAGS.COMPLETE)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"isLoading",{get:function(){return this._hasFlag(n.STATUS_FLAGS.LOADING)},enumerable:!1,configurable:!0}),n.prototype.complete=function(){this._clearEvents(),this._finish()},n.prototype.abort=function(e){if(!this.error){if(this.error=new Error(e),this._clearEvents(),this.xhr)this.xhr.abort();else if(this.xdr)this.xdr.abort();else if(this.data)if(this.data.src)this.data.src=n.EMPTY_GIF;else for(;this.data.firstChild;)this.data.removeChild(this.data.firstChild);this._finish()}},n.prototype.load=function(e){var t=this;if(!this.isLoading){if(this.isComplete)return void(e&&setTimeout(function(){return e(t)},1));switch(e&&this.onComplete.once(e),this._setFlag(n.STATUS_FLAGS.LOADING,!0),this.onStart.dispatch(this),(!1===this.crossOrigin||"string"!=typeof this.crossOrigin)&&(this.crossOrigin=this._determineCrossOrigin(this.url)),this.loadType){case n.LOAD_TYPE.IMAGE:this.type=n.TYPE.IMAGE,this._loadElement("image");break;case n.LOAD_TYPE.AUDIO:this.type=n.TYPE.AUDIO,this._loadSourceElement("audio");break;case n.LOAD_TYPE.VIDEO:this.type=n.TYPE.VIDEO,this._loadSourceElement("video");break;default:void 0===km&&(km=!(!globalThis.XDomainRequest||"withCredentials"in new XMLHttpRequest)),km&&this.crossOrigin?this._loadXdr():this._loadXhr()}}},n.prototype._hasFlag=function(e){return 0!=(this._flags&e)},n.prototype._setFlag=function(e,t){this._flags=t?this._flags|e:this._flags&~e},n.prototype._clearEvents=function(){clearTimeout(this._elementTimer),this.data&&this.data.removeEventListener&&(this.data.removeEventListener("error",this._boundOnError,!1),this.data.removeEventListener("load",this._boundComplete,!1),this.data.removeEventListener("progress",this._boundOnProgress,!1),this.data.removeEventListener("canplaythrough",this._boundComplete,!1)),this.xhr&&(this.xhr.removeEventListener?(this.xhr.removeEventListener("error",this._boundXhrOnError,!1),this.xhr.removeEventListener("timeout",this._boundXhrOnTimeout,!1),this.xhr.removeEventListener("abort",this._boundXhrOnAbort,!1),this.xhr.removeEventListener("progress",this._boundOnProgress,!1),this.xhr.removeEventListener("load",this._boundXhrOnLoad,!1)):(this.xhr.onerror=null,this.xhr.ontimeout=null,this.xhr.onprogress=null,this.xhr.onload=null))},n.prototype._finish=function(){if(this.isComplete)throw new Error("Complete called again for an already completed resource.");this._setFlag(n.STATUS_FLAGS.COMPLETE,!0),this._setFlag(n.STATUS_FLAGS.LOADING,!1),this.onComplete.dispatch(this)},n.prototype._loadElement=function(e){this.data=this.metadata.loadElement?this.metadata.loadElement:"image"===e&&void 0!==globalThis.Image?new Image:document.createElement(e),this.crossOrigin&&(this.data.crossOrigin=this.crossOrigin),this.metadata.skipSource||(this.data.src=this.url),this.data.addEventListener("error",this._boundOnError,!1),this.data.addEventListener("load",this._boundComplete,!1),this.data.addEventListener("progress",this._boundOnProgress,!1),this.timeout&&(this._elementTimer=setTimeout(this._boundOnTimeout,this.timeout))},n.prototype._loadSourceElement=function(e){if(this.data=this.metadata.loadElement?this.metadata.loadElement:"audio"===e&&void 0!==globalThis.Audio?new Audio:document.createElement(e),null!==this.data){if(this.crossOrigin&&(this.data.crossOrigin=this.crossOrigin),!this.metadata.skipSource)if(navigator.isCocoonJS)this.data.src=Array.isArray(this.url)?this.url[0]:this.url;else if(Array.isArray(this.url))for(var t=this.metadata.mimeType,r=0;r<this.url.length;++r)this.data.appendChild(this._createSource(e,this.url[r],Array.isArray(t)?t[r]:t));else t=this.metadata.mimeType,this.data.appendChild(this._createSource(e,this.url,Array.isArray(t)?t[0]:t));this.data.addEventListener("error",this._boundOnError,!1),this.data.addEventListener("load",this._boundComplete,!1),this.data.addEventListener("progress",this._boundOnProgress,!1),this.data.addEventListener("canplaythrough",this._boundComplete,!1),this.data.load(),this.timeout&&(this._elementTimer=setTimeout(this._boundOnTimeout,this.timeout))}else this.abort("Unsupported element: "+e)},n.prototype._loadXhr=function(){"string"!=typeof this.xhrType&&(this.xhrType=this._determineXhrType());var e=this.xhr=new XMLHttpRequest;"use-credentials"===this.crossOrigin&&(e.withCredentials=!0),e.open("GET",this.url,!0),e.timeout=this.timeout,e.responseType=this.xhrType===n.XHR_RESPONSE_TYPE.JSON||this.xhrType===n.XHR_RESPONSE_TYPE.DOCUMENT?n.XHR_RESPONSE_TYPE.TEXT:this.xhrType,e.addEventListener("error",this._boundXhrOnError,!1),e.addEventListener("timeout",this._boundXhrOnTimeout,!1),e.addEventListener("abort",this._boundXhrOnAbort,!1),e.addEventListener("progress",this._boundOnProgress,!1),e.addEventListener("load",this._boundXhrOnLoad,!1),e.send()},n.prototype._loadXdr=function(){"string"!=typeof this.xhrType&&(this.xhrType=this._determineXhrType());var e=this.xhr=new globalThis.XDomainRequest;e.timeout=this.timeout||5e3,e.onerror=this._boundXhrOnError,e.ontimeout=this._boundXhrOnTimeout,e.onprogress=this._boundOnProgress,e.onload=this._boundXhrOnLoad,e.open("GET",this.url,!0),setTimeout(function(){return e.send()},1)},n.prototype._createSource=function(e,t,r){r||(r=e+"/"+this._getExtension(t));var i=document.createElement("source");return i.src=t,i.type=r,i},n.prototype._onError=function(e){this.abort("Failed to load element using: "+e.target.nodeName)},n.prototype._onProgress=function(e){e&&e.lengthComputable&&this.onProgress.dispatch(this,e.loaded/e.total)},n.prototype._onTimeout=function(){this.abort("Load timed out.")},n.prototype._xhrOnError=function(){var e=this.xhr;this.abort(Um(e)+" Request failed. Status: "+e.status+', text: "'+e.statusText+'"')},n.prototype._xhrOnTimeout=function(){this.abort(Um(this.xhr)+" Request timed out.")},n.prototype._xhrOnAbort=function(){this.abort(Um(this.xhr)+" Request was aborted by the user.")},n.prototype._xhrOnLoad=function(){var e=this.xhr,t="",r=void 0===e.status?200:e.status;if((""===e.responseType||"text"===e.responseType||void 0===e.responseType)&&(t=e.responseText),0===r&&(t.length>0||e.responseType===n.XHR_RESPONSE_TYPE.BUFFER)?r=200:1223===r&&(r=204),2==(r/100|0)){if(this.xhrType===n.XHR_RESPONSE_TYPE.TEXT)this.data=t,this.type=n.TYPE.TEXT;else if(this.xhrType===n.XHR_RESPONSE_TYPE.JSON)try{this.data=JSON.parse(t),this.type=n.TYPE.JSON}catch(a){return void this.abort("Error trying to parse loaded json: "+a)}else if(this.xhrType===n.XHR_RESPONSE_TYPE.DOCUMENT)try{if(globalThis.DOMParser){var o=new DOMParser;this.data=o.parseFromString(t,"text/xml")}else{var s=document.createElement("div");s.innerHTML=t,this.data=s}this.type=n.TYPE.XML}catch(a){return void this.abort("Error trying to parse loaded xml: "+a)}else this.data=e.response||t;this.complete()}else this.abort("["+e.status+"] "+e.statusText+": "+e.responseURL)},n.prototype._determineCrossOrigin=function(e,t){if(0===e.indexOf("data:"))return"";if(globalThis.origin!==globalThis.location.origin)return"anonymous";t=t||globalThis.location,yd||(yd=document.createElement("a")),yd.href=e;var r=gC(yd.href,{strictMode:!0});return r.host!==t.hostname||(r.port||""!==t.port)&&r.port!==t.port||(r.protocol?r.protocol+":":"")!==t.protocol?"anonymous":""},n.prototype._determineXhrType=function(){return n._xhrTypeMap[this.extension]||n.XHR_RESPONSE_TYPE.TEXT},n.prototype._determineLoadType=function(){return n._loadTypeMap[this.extension]||n.LOAD_TYPE.XHR},n.prototype._getExtension=function(e){void 0===e&&(e=this.url);var t="";if(this.isDataUrl){var r=e.indexOf("/");t=e.substring(r+1,e.indexOf(";",r))}else{var i=e.indexOf("?"),o=e.indexOf("#"),s=Math.min(i>-1?i:e.length,o>-1?o:e.length);t=(e=e.substring(0,s)).substring(e.lastIndexOf(".")+1)}return t.toLowerCase()},n.prototype._getMimeFromXhrType=function(e){switch(e){case n.XHR_RESPONSE_TYPE.BUFFER:return"application/octet-binary";case n.XHR_RESPONSE_TYPE.BLOB:return"application/blob";case n.XHR_RESPONSE_TYPE.DOCUMENT:return"application/xml";case n.XHR_RESPONSE_TYPE.JSON:return"application/json";default:return"text/plain"}},n}();function Wo(){}function f4(n){return function(){for(var t=arguments,r=[],i=0;i<arguments.length;i++)r[i]=t[i];if(null===n)throw new Error("Callback was already called.");var o=n;n=null,o.apply(this,r)}}(e=(n=zt||(zt={})).STATUS_FLAGS||(n.STATUS_FLAGS={}))[e.NONE=0]="NONE",e[e.DATA_URL=1]="DATA_URL",e[e.COMPLETE=2]="COMPLETE",e[e.LOADING=4]="LOADING",function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.JSON=1]="JSON",e[e.XML=2]="XML",e[e.IMAGE=3]="IMAGE",e[e.AUDIO=4]="AUDIO",e[e.VIDEO=5]="VIDEO",e[e.TEXT=6]="TEXT"}(n.TYPE||(n.TYPE={})),function(e){e[e.XHR=1]="XHR",e[e.IMAGE=2]="IMAGE",e[e.AUDIO=3]="AUDIO",e[e.VIDEO=4]="VIDEO"}(n.LOAD_TYPE||(n.LOAD_TYPE={})),function(e){e.DEFAULT="text",e.BUFFER="arraybuffer",e.BLOB="blob",e.DOCUMENT="document",e.JSON="json",e.TEXT="text"}(n.XHR_RESPONSE_TYPE||(n.XHR_RESPONSE_TYPE={})),n._loadTypeMap={gif:n.LOAD_TYPE.IMAGE,png:n.LOAD_TYPE.IMAGE,bmp:n.LOAD_TYPE.IMAGE,jpg:n.LOAD_TYPE.IMAGE,jpeg:n.LOAD_TYPE.IMAGE,tif:n.LOAD_TYPE.IMAGE,tiff:n.LOAD_TYPE.IMAGE,webp:n.LOAD_TYPE.IMAGE,tga:n.LOAD_TYPE.IMAGE,svg:n.LOAD_TYPE.IMAGE,"svg+xml":n.LOAD_TYPE.IMAGE,mp3:n.LOAD_TYPE.AUDIO,ogg:n.LOAD_TYPE.AUDIO,wav:n.LOAD_TYPE.AUDIO,mp4:n.LOAD_TYPE.VIDEO,webm:n.LOAD_TYPE.VIDEO},n._xhrTypeMap={xhtml:n.XHR_RESPONSE_TYPE.DOCUMENT,html:n.XHR_RESPONSE_TYPE.DOCUMENT,htm:n.XHR_RESPONSE_TYPE.DOCUMENT,xml:n.XHR_RESPONSE_TYPE.DOCUMENT,tmx:n.XHR_RESPONSE_TYPE.DOCUMENT,svg:n.XHR_RESPONSE_TYPE.DOCUMENT,tsx:n.XHR_RESPONSE_TYPE.DOCUMENT,gif:n.XHR_RESPONSE_TYPE.BLOB,png:n.XHR_RESPONSE_TYPE.BLOB,bmp:n.XHR_RESPONSE_TYPE.BLOB,jpg:n.XHR_RESPONSE_TYPE.BLOB,jpeg:n.XHR_RESPONSE_TYPE.BLOB,tif:n.XHR_RESPONSE_TYPE.BLOB,tiff:n.XHR_RESPONSE_TYPE.BLOB,webp:n.XHR_RESPONSE_TYPE.BLOB,tga:n.XHR_RESPONSE_TYPE.BLOB,json:n.XHR_RESPONSE_TYPE.JSON,text:n.XHR_RESPONSE_TYPE.TEXT,txt:n.XHR_RESPONSE_TYPE.TEXT,ttf:n.XHR_RESPONSE_TYPE.BUFFER,otf:n.XHR_RESPONSE_TYPE.BUFFER},n.EMPTY_GIF="data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==";var p4=function n(e,t){this.data=e,this.callback=t},Vm=function(){function n(e,t){var r=this;if(void 0===t&&(t=1),this.workers=0,this.saturated=Wo,this.unsaturated=Wo,this.empty=Wo,this.drain=Wo,this.error=Wo,this.started=!1,this.paused=!1,this._tasks=[],this._insert=function(i,o,s){if(s&&"function"!=typeof s)throw new Error("task callback must be a function");if(r.started=!0,null==i&&r.idle())setTimeout(function(){return r.drain()},1);else{var a=new p4(i,"function"==typeof s?s:Wo);o?r._tasks.unshift(a):r._tasks.push(a),setTimeout(r.process,1)}},this.process=function(){for(;!r.paused&&r.workers<r.concurrency&&r._tasks.length;){var i=r._tasks.shift();0===r._tasks.length&&r.empty(),r.workers+=1,r.workers===r.concurrency&&r.saturated(),r._worker(i.data,f4(r._next(i)))}},this._worker=e,0===t)throw new Error("Concurrency must not be zero");this.concurrency=t,this.buffer=t/4}return n.prototype._next=function(e){var t=this;return function(){for(var r=arguments,i=[],o=0;o<arguments.length;o++)i[o]=r[o];t.workers-=1,e.callback.apply(e,i),null!=i[0]&&t.error(i[0],e.data),t.workers<=t.concurrency-t.buffer&&t.unsaturated(),t.idle()&&t.drain(),t.process()}},n.prototype.push=function(e,t){this._insert(e,!1,t)},n.prototype.kill=function(){this.workers=0,this.drain=Wo,this.started=!1,this._tasks=[]},n.prototype.unshift=function(e,t){this._insert(e,!0,t)},n.prototype.length=function(){return this._tasks.length},n.prototype.running=function(){return this.workers},n.prototype.idle=function(){return this._tasks.length+this.workers===0},n.prototype.pause=function(){!0!==this.paused&&(this.paused=!0)},n.prototype.resume=function(){if(!1!==this.paused){this.paused=!1;for(var e=1;e<=this.concurrency;e++)this.process()}},n.eachSeries=function(e,t,r,i){var o=0,s=e.length;!function a(l){l||o===s?r&&r(l):i?setTimeout(function(){t(e[o++],a)},1):t(e[o++],a)}()},n.queue=function(e,t){return new n(e,t)},n}(),_4=/(#[\w-]+)?$/,di=function(){function n(e,t){var r=this;void 0===e&&(e=""),void 0===t&&(t=10),this.progress=0,this.loading=!1,this.defaultQueryString="",this._beforeMiddleware=[],this._afterMiddleware=[],this._resourcesParsing=[],this._boundLoadResource=function(l,u){return r._loadResource(l,u)},this.resources={},this.baseUrl=e,this._beforeMiddleware=[],this._afterMiddleware=[],this._resourcesParsing=[],this._boundLoadResource=function(l,u){return r._loadResource(l,u)},this._queue=Vm.queue(this._boundLoadResource,t),this._queue.pause(),this.resources={},this.onProgress=new Ni,this.onError=new Ni,this.onLoad=new Ni,this.onStart=new Ni,this.onComplete=new Ni;for(var i=0;i<n._plugins.length;++i){var o=n._plugins[i],s=o.pre,a=o.use;s&&this.pre(s),a&&this.use(a)}this._protected=!1}return n.prototype._add=function(e,t,r,i){if(this.loading&&(!r||!r.parentResource))throw new Error("Cannot add resources while the loader is running.");if(this.resources[e])throw new Error('Resource named "'+e+'" already exists.');if(t=this._prepareUrl(t),this.resources[e]=new zt(e,t,r),"function"==typeof i&&this.resources[e].onAfterMiddleware.once(i),this.loading){for(var o=r.parentResource,s=[],a=0;a<o.children.length;++a)o.children[a].isComplete||s.push(o.children[a]);var u=o.progressChunk*(s.length+1)/(s.length+2);for(o.children.push(this.resources[e]),o.progressChunk=u,a=0;a<s.length;++a)s[a].progressChunk=u;this.resources[e].progressChunk=u}return this._queue.push(this.resources[e]),this},n.prototype.pre=function(e){return this._beforeMiddleware.push(e),this},n.prototype.use=function(e){return this._afterMiddleware.push(e),this},n.prototype.reset=function(){for(var e in this.progress=0,this.loading=!1,this._queue.kill(),this._queue.pause(),this.resources){var t=this.resources[e];t._onLoadBinding&&t._onLoadBinding.detach(),t.isLoading&&t.abort("loader reset")}return this.resources={},this},n.prototype.load=function(e){if("function"==typeof e&&this.onComplete.once(e),this.loading)return this;if(this._queue.idle())this._onStart(),this._onComplete();else{for(var r=100/this._queue._tasks.length,i=0;i<this._queue._tasks.length;++i)this._queue._tasks[i].data.progressChunk=r;this._onStart(),this._queue.resume()}return this},Object.defineProperty(n.prototype,"concurrency",{get:function(){return this._queue.concurrency},set:function(e){this._queue.concurrency=e},enumerable:!1,configurable:!0}),n.prototype._prepareUrl=function(e){var r,t=gC(e,{strictMode:!0});if(r=t.protocol||!t.path||0===e.indexOf("//")?e:this.baseUrl.length&&this.baseUrl.lastIndexOf("/")!==this.baseUrl.length-1&&"/"!==e.charAt(0)?this.baseUrl+"/"+e:this.baseUrl+e,this.defaultQueryString){var i=_4.exec(r)[0];-1!==(r=r.slice(0,r.length-i.length)).indexOf("?")?r+="&"+this.defaultQueryString:r+="?"+this.defaultQueryString,r+=i}return r},n.prototype._loadResource=function(e,t){var r=this;e._dequeue=t,Vm.eachSeries(this._beforeMiddleware,function(i,o){i.call(r,e,function(){o(e.isComplete?{}:null)})},function(){e.isComplete?r._onLoad(e):(e._onLoadBinding=e.onComplete.once(r._onLoad,r),e.load())},!0)},n.prototype._onStart=function(){this.progress=0,this.loading=!0,this.onStart.dispatch(this)},n.prototype._onComplete=function(){this.progress=100,this.loading=!1,this.onComplete.dispatch(this,this.resources)},n.prototype._onLoad=function(e){var t=this;e._onLoadBinding=null,this._resourcesParsing.push(e),e._dequeue(),Vm.eachSeries(this._afterMiddleware,function(r,i){r.call(t,e,i)},function(){e.onAfterMiddleware.dispatch(e),t.progress=Math.min(100,t.progress+e.progressChunk),t.onProgress.dispatch(t,e),e.error?t.onError.dispatch(e.error,t,e):t.onLoad.dispatch(t,e),t._resourcesParsing.splice(t._resourcesParsing.indexOf(e),1),t._queue.idle()&&0===t._resourcesParsing.length&&t._onComplete()},!0)},n.prototype.destroy=function(){this._protected||this.reset()},Object.defineProperty(n,"shared",{get:function(){var e=n._shared;return e||((e=new n)._protected=!0,n._shared=e),e},enumerable:!1,configurable:!0}),n.registerPlugin=function(e){return n._plugins.push(e),e.add&&e.add(),n},n._plugins=[],n}();di.prototype.add=function(e,t,r,i){if(Array.isArray(e)){for(var o=0;o<e.length;++o)this.add(e[o]);return this}if("object"==typeof e&&(r=e,i=t||r.callback||r.onComplete,t=r.url,e=r.name||r.key||r.url),"string"!=typeof t&&(i=r,r=t,t=e),"string"!=typeof t)throw new Error("No url passed to add resource to loader.");return"function"==typeof r&&(i=r,r=null),this._add(e,t,r,i)};var m4=function(){function n(){}return n.init=function(e){e=Object.assign({sharedLoader:!1},e),this.loader=e.sharedLoader?di.shared:new di},n.destroy=function(){this.loader&&(this.loader.destroy(),this.loader=null)},n}(),g4=function(){function n(){}return n.add=function(){zt.setExtensionLoadType("svg",zt.LOAD_TYPE.XHR),zt.setExtensionXhrType("svg",zt.XHR_RESPONSE_TYPE.TEXT)},n.use=function(e,t){!e.data||e.type!==zt.TYPE.IMAGE&&"svg"!==e.extension?t():Ee.fromLoader(e.data,e.url,e.name,e.metadata).then(function(a){e.texture=a,t()}).catch(t)},n}();di.registerPlugin({use:function E4(n,e){if(n.data){if(n.xhr&&n.xhrType===zt.XHR_RESPONSE_TYPE.BLOB)if(self.Blob&&"string"!=typeof n.data){if(0===n.data.type.indexOf("image")){var r=globalThis.URL||globalThis.webkitURL,i=r.createObjectURL(n.data);return n.blob=n.data,n.data=new Image,n.data.src=i,n.type=zt.TYPE.IMAGE,void(n.data.onload=function(){r.revokeObjectURL(i),n.data.onload=null,e()})}}else{var t=n.xhr.getResponseHeader("content-type");if(t&&0===t.indexOf("image"))return n.data=new Image,n.data.src="data:"+t+";base64,"+function y4(n){for(var e="",t=0;t<n.length;){for(var r=[0,0,0],i=[0,0,0,0],o=0;o<r.length;++o)r[o]=t<n.length?255&n.charCodeAt(t++):0;switch(i[0]=r[0]>>2,i[1]=(3&r[0])<<4|r[1]>>4,i[2]=(15&r[1])<<2|r[2]>>6,i[3]=63&r[2],t-(n.length-1)){case 2:i[3]=64,i[2]=64;break;case 1:i[3]=64}for(o=0;o<i.length;++o)e+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(i[o])}return e}(n.xhr.responseText),n.type=zt.TYPE.IMAGE,void(n.data.onload=function(){n.data.onload=null,e()})}e()}else e()}}),di.registerPlugin(g4);var ut,Le=(()=>(function(n){n[n.COMPRESSED_RGB_S3TC_DXT1_EXT=33776]="COMPRESSED_RGB_S3TC_DXT1_EXT",n[n.COMPRESSED_RGBA_S3TC_DXT1_EXT=33777]="COMPRESSED_RGBA_S3TC_DXT1_EXT",n[n.COMPRESSED_RGBA_S3TC_DXT3_EXT=33778]="COMPRESSED_RGBA_S3TC_DXT3_EXT",n[n.COMPRESSED_RGBA_S3TC_DXT5_EXT=33779]="COMPRESSED_RGBA_S3TC_DXT5_EXT",n[n.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT=35917]="COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT",n[n.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT=35918]="COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT",n[n.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT=35919]="COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT",n[n.COMPRESSED_SRGB_S3TC_DXT1_EXT=35916]="COMPRESSED_SRGB_S3TC_DXT1_EXT",n[n.COMPRESSED_R11_EAC=37488]="COMPRESSED_R11_EAC",n[n.COMPRESSED_SIGNED_R11_EAC=37489]="COMPRESSED_SIGNED_R11_EAC",n[n.COMPRESSED_RG11_EAC=37490]="COMPRESSED_RG11_EAC",n[n.COMPRESSED_SIGNED_RG11_EAC=37491]="COMPRESSED_SIGNED_RG11_EAC",n[n.COMPRESSED_RGB8_ETC2=37492]="COMPRESSED_RGB8_ETC2",n[n.COMPRESSED_RGBA8_ETC2_EAC=37496]="COMPRESSED_RGBA8_ETC2_EAC",n[n.COMPRESSED_SRGB8_ETC2=37493]="COMPRESSED_SRGB8_ETC2",n[n.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC=37497]="COMPRESSED_SRGB8_ALPHA8_ETC2_EAC",n[n.COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2=37494]="COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2",n[n.COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2=37495]="COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2",n[n.COMPRESSED_RGB_PVRTC_4BPPV1_IMG=35840]="COMPRESSED_RGB_PVRTC_4BPPV1_IMG",n[n.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG=35842]="COMPRESSED_RGBA_PVRTC_4BPPV1_IMG",n[n.COMPRESSED_RGB_PVRTC_2BPPV1_IMG=35841]="COMPRESSED_RGB_PVRTC_2BPPV1_IMG",n[n.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG=35843]="COMPRESSED_RGBA_PVRTC_2BPPV1_IMG",n[n.COMPRESSED_RGB_ETC1_WEBGL=36196]="COMPRESSED_RGB_ETC1_WEBGL",n[n.COMPRESSED_RGB_ATC_WEBGL=35986]="COMPRESSED_RGB_ATC_WEBGL",n[n.COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL=35986]="COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL",n[n.COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL=34798]="COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL"}(Le||(Le={})),Le))(),Ed=((ut={})[Le.COMPRESSED_RGB_S3TC_DXT1_EXT]=.5,ut[Le.COMPRESSED_RGBA_S3TC_DXT1_EXT]=.5,ut[Le.COMPRESSED_RGBA_S3TC_DXT3_EXT]=1,ut[Le.COMPRESSED_RGBA_S3TC_DXT5_EXT]=1,ut[Le.COMPRESSED_SRGB_S3TC_DXT1_EXT]=.5,ut[Le.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT]=.5,ut[Le.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT]=1,ut[Le.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT]=1,ut[Le.COMPRESSED_R11_EAC]=.5,ut[Le.COMPRESSED_SIGNED_R11_EAC]=.5,ut[Le.COMPRESSED_RG11_EAC]=1,ut[Le.COMPRESSED_SIGNED_RG11_EAC]=1,ut[Le.COMPRESSED_RGB8_ETC2]=.5,ut[Le.COMPRESSED_RGBA8_ETC2_EAC]=1,ut[Le.COMPRESSED_SRGB8_ETC2]=.5,ut[Le.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC]=1,ut[Le.COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2]=.5,ut[Le.COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2]=.5,ut[Le.COMPRESSED_RGB_PVRTC_4BPPV1_IMG]=.5,ut[Le.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG]=.5,ut[Le.COMPRESSED_RGB_PVRTC_2BPPV1_IMG]=.25,ut[Le.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG]=.25,ut[Le.COMPRESSED_RGB_ETC1_WEBGL]=.5,ut[Le.COMPRESSED_RGB_ATC_WEBGL]=.5,ut[Le.COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL]=1,ut[Le.COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL]=1,ut),Hm=function(n,e){return(Hm=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var i in r)r.hasOwnProperty(i)&&(t[i]=r[i])})(n,e)};function bC(n,e){function t(){this.constructor=n}Hm(n,e),n.prototype=null===e?Object.create(e):(t.prototype=e.prototype,new t)}var Ll,Gr,D4=function(n){function e(t,r){void 0===r&&(r={width:1,height:1,autoLoad:!0});var o,s,i=this;return"string"==typeof t?(o=t,s=new Uint8Array):(o=null,s=t),(i=n.call(this,s,r)||this).origin=o,i.buffer=s?new Im(s):null,i.origin&&!1!==r.autoLoad&&i.load(),s&&s.length&&(i.loaded=!0,i.onBlobLoaded(i.buffer.rawBinaryData)),i}return bC(e,n),e.prototype.onBlobLoaded=function(t){},e.prototype.load=function(){return function b4(n,e,t,r){return new(t||(t=Promise))(function(i,o){function s(u){try{l(r.next(u))}catch(c){o(c)}}function a(u){try{l(r.throw(u))}catch(c){o(c)}}function l(u){u.done?i(u.value):new t(function(c){c(u.value)}).then(s,a)}l((r=r.apply(n,e||[])).next())})}(this,void 0,Promise,function(){var i;return function T4(n,e){var r,i,o,s,t={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return s={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function a(u){return function(c){return function l(u){if(r)throw new TypeError("Generator is already executing.");for(;t;)try{if(r=1,i&&(o=2&u[0]?i.return:u[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,u[1])).done)return o;switch(i=0,o&&(u=[2&u[0],o.value]),u[0]){case 0:case 1:o=u;break;case 4:return t.label++,{value:u[1],done:!1};case 5:t.label++,i=u[1],u=[0];continue;case 7:u=t.ops.pop(),t.trys.pop();continue;default:if(!(o=(o=t.trys).length>0&&o[o.length-1])&&(6===u[0]||2===u[0])){t=0;continue}if(3===u[0]&&(!o||u[1]>o[0]&&u[1]<o[3])){t.label=u[1];break}if(6===u[0]&&t.label<o[1]){t.label=o[1],o=u;break}if(o&&t.label<o[2]){t.label=o[2],t.ops.push(u);break}o[2]&&t.ops.pop(),t.trys.pop();continue}u=e.call(n,t)}catch(c){u=[6,c],i=0}finally{r=o=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}([u,c])}}}(this,function(o){switch(o.label){case 0:return[4,fetch(this.origin)];case 1:return[4,o.sent().blob()];case 2:return[4,o.sent().arrayBuffer()];case 3:return i=o.sent(),this.data=new Uint32Array(i),this.buffer=new Im(i),this.loaded=!0,this.onBlobLoaded(i),this.update(),[2,this]}})})},e}(sa),jm=function(n){function e(t,r){var i=n.call(this,t,r)||this;return i.format=r.format,i.levels=r.levels||1,i._width=r.width,i._height=r.height,i._extension=e._formatToExtension(i.format),(r.levelBuffers||i.buffer)&&(i._levelBuffers=r.levelBuffers||e._createLevelBuffers(t instanceof Uint8Array?t:i.buffer.uint8View,i.format,i.levels,4,4,i.width,i.height)),i}return bC(e,n),e.prototype.upload=function(t,r,i){var o=t.gl;if(!t.context.extensions[this._extension])throw new Error(this._extension+" textures are not supported on the current machine");if(!this._levelBuffers)return!1;for(var a=0,l=this.levels;a<l;a++){var u=this._levelBuffers[a];o.compressedTexImage2D(o.TEXTURE_2D,u.levelID,this.format,u.levelWidth,u.levelHeight,0,u.levelBuffer)}return!0},e.prototype.onBlobLoaded=function(){this._levelBuffers=e._createLevelBuffers(this.buffer.uint8View,this.format,this.levels,4,4,this.width,this.height)},e._formatToExtension=function(t){if(t>=33776&&t<=33779)return"s3tc";if(t>=37488&&t<=37497)return"etc";if(t>=35840&&t<=35843)return"pvrtc";if(t>=36196)return"etc1";if(t>=35986&&t<=34798)return"atc";throw new Error("Invalid (compressed) texture format given!")},e._createLevelBuffers=function(t,r,i,o,s,a,l){for(var u=new Array(i),c=t.byteOffset,d=a,h=l,f=d+o-1&~(o-1),p=h+s-1&~(s-1),_=f*p*Ed[r],m=0;m<i;m++)u[m]={levelID:m,levelWidth:i>1?d:f,levelHeight:i>1?h:p,levelBuffer:new Uint8Array(t.buffer,c,_)},c+=_,_=(f=(d=d>>1||1)+o-1&~(o-1))*(p=(h=h>>1||1)+s-1&~(s-1))*Ed[r];return u},e}(D4),S4=function(){function n(){}return n.use=function(e,t){var r=e.data;if(e.type===zt.TYPE.JSON&&r&&r.cacheID&&r.textures){for(var o=r.textures,s=void 0,a=void 0,l=0,u=o.length;l<u;l++){var c=o[l],d=c.src,h=c.format;if(h||(a=d),n.textureFormats[h]){s=d;break}}if(!(s=s||a))return void t(new Error("Cannot load compressed-textures in "+e.url+", make sure you provide a fallback"));if(s===e.url)return void t(new Error("URL of compressed texture cannot be the same as the manifest's URL"));var f={crossOrigin:e.crossOrigin,metadata:e.metadata.imageMetadata,parentResource:e},p=ta.resolve(e.url.replace(this.baseUrl,""),s);this.add(r.cacheID,p,f,function(m){if(m.error)t(m.error);else{var g=m.texture,y=m.textures;Object.assign(e,{texture:void 0===g?null:g,textures:void 0===y?{}:y}),t()}})}else t()},Object.defineProperty(n,"textureExtensions",{get:function(){if(!n._textureExtensions){var t=document.createElement("canvas").getContext("webgl");if(!t)return console.warn("WebGL not available for compressed textures. Silently failing."),{};var r={s3tc:t.getExtension("WEBGL_compressed_texture_s3tc"),s3tc_sRGB:t.getExtension("WEBGL_compressed_texture_s3tc_srgb"),etc:t.getExtension("WEBGL_compressed_texture_etc"),etc1:t.getExtension("WEBGL_compressed_texture_etc1"),pvrtc:t.getExtension("WEBGL_compressed_texture_pvrtc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc"),atc:t.getExtension("WEBGL_compressed_texture_atc"),astc:t.getExtension("WEBGL_compressed_texture_astc")};n._textureExtensions=r}return n._textureExtensions},enumerable:!1,configurable:!0}),Object.defineProperty(n,"textureFormats",{get:function(){if(!n._textureFormats){var e=n.textureExtensions;for(var t in n._textureFormats={},e){var r=e[t];!r||Object.assign(n._textureFormats,Object.getPrototypeOf(r))}}return n._textureFormats},enumerable:!1,configurable:!0}),n}();function TC(n,e,t){var r={textures:{},texture:null};return e?(e.map(function(o){return new Ee(new Xe(o,Object.assign({mipmap:li.OFF,alphaMode:_r.NO_PREMULTIPLIED_ALPHA},t)))}).forEach(function(o,s){var a=o.baseTexture,l=n+"-"+(s+1);Xe.addToCache(a,l),Ee.addToCache(o,l),0===s&&(Xe.addToCache(a,n),Ee.addToCache(o,n),r.texture=o),r.textures[l]=o}),r):r}zt.setExtensionXhrType("dds",zt.XHR_RESPONSE_TYPE.BUFFER);var oo,Fi,Bl,mr=(()=>(function(n){n[n.DXGI_FORMAT_UNKNOWN=0]="DXGI_FORMAT_UNKNOWN",n[n.DXGI_FORMAT_R32G32B32A32_TYPELESS=1]="DXGI_FORMAT_R32G32B32A32_TYPELESS",n[n.DXGI_FORMAT_R32G32B32A32_FLOAT=2]="DXGI_FORMAT_R32G32B32A32_FLOAT",n[n.DXGI_FORMAT_R32G32B32A32_UINT=3]="DXGI_FORMAT_R32G32B32A32_UINT",n[n.DXGI_FORMAT_R32G32B32A32_SINT=4]="DXGI_FORMAT_R32G32B32A32_SINT",n[n.DXGI_FORMAT_R32G32B32_TYPELESS=5]="DXGI_FORMAT_R32G32B32_TYPELESS",n[n.DXGI_FORMAT_R32G32B32_FLOAT=6]="DXGI_FORMAT_R32G32B32_FLOAT",n[n.DXGI_FORMAT_R32G32B32_UINT=7]="DXGI_FORMAT_R32G32B32_UINT",n[n.DXGI_FORMAT_R32G32B32_SINT=8]="DXGI_FORMAT_R32G32B32_SINT",n[n.DXGI_FORMAT_R16G16B16A16_TYPELESS=9]="DXGI_FORMAT_R16G16B16A16_TYPELESS",n[n.DXGI_FORMAT_R16G16B16A16_FLOAT=10]="DXGI_FORMAT_R16G16B16A16_FLOAT",n[n.DXGI_FORMAT_R16G16B16A16_UNORM=11]="DXGI_FORMAT_R16G16B16A16_UNORM",n[n.DXGI_FORMAT_R16G16B16A16_UINT=12]="DXGI_FORMAT_R16G16B16A16_UINT",n[n.DXGI_FORMAT_R16G16B16A16_SNORM=13]="DXGI_FORMAT_R16G16B16A16_SNORM",n[n.DXGI_FORMAT_R16G16B16A16_SINT=14]="DXGI_FORMAT_R16G16B16A16_SINT",n[n.DXGI_FORMAT_R32G32_TYPELESS=15]="DXGI_FORMAT_R32G32_TYPELESS",n[n.DXGI_FORMAT_R32G32_FLOAT=16]="DXGI_FORMAT_R32G32_FLOAT",n[n.DXGI_FORMAT_R32G32_UINT=17]="DXGI_FORMAT_R32G32_UINT",n[n.DXGI_FORMAT_R32G32_SINT=18]="DXGI_FORMAT_R32G32_SINT",n[n.DXGI_FORMAT_R32G8X24_TYPELESS=19]="DXGI_FORMAT_R32G8X24_TYPELESS",n[n.DXGI_FORMAT_D32_FLOAT_S8X24_UINT=20]="DXGI_FORMAT_D32_FLOAT_S8X24_UINT",n[n.DXGI_FORMAT_R32_FLOAT_X8X24_TYPELESS=21]="DXGI_FORMAT_R32_FLOAT_X8X24_TYPELESS",n[n.DXGI_FORMAT_X32_TYPELESS_G8X24_UINT=22]="DXGI_FORMAT_X32_TYPELESS_G8X24_UINT",n[n.DXGI_FORMAT_R10G10B10A2_TYPELESS=23]="DXGI_FORMAT_R10G10B10A2_TYPELESS",n[n.DXGI_FORMAT_R10G10B10A2_UNORM=24]="DXGI_FORMAT_R10G10B10A2_UNORM",n[n.DXGI_FORMAT_R10G10B10A2_UINT=25]="DXGI_FORMAT_R10G10B10A2_UINT",n[n.DXGI_FORMAT_R11G11B10_FLOAT=26]="DXGI_FORMAT_R11G11B10_FLOAT",n[n.DXGI_FORMAT_R8G8B8A8_TYPELESS=27]="DXGI_FORMAT_R8G8B8A8_TYPELESS",n[n.DXGI_FORMAT_R8G8B8A8_UNORM=28]="DXGI_FORMAT_R8G8B8A8_UNORM",n[n.DXGI_FORMAT_R8G8B8A8_UNORM_SRGB=29]="DXGI_FORMAT_R8G8B8A8_UNORM_SRGB",n[n.DXGI_FORMAT_R8G8B8A8_UINT=30]="DXGI_FORMAT_R8G8B8A8_UINT",n[n.DXGI_FORMAT_R8G8B8A8_SNORM=31]="DXGI_FORMAT_R8G8B8A8_SNORM",n[n.DXGI_FORMAT_R8G8B8A8_SINT=32]="DXGI_FORMAT_R8G8B8A8_SINT",n[n.DXGI_FORMAT_R16G16_TYPELESS=33]="DXGI_FORMAT_R16G16_TYPELESS",n[n.DXGI_FORMAT_R16G16_FLOAT=34]="DXGI_FORMAT_R16G16_FLOAT",n[n.DXGI_FORMAT_R16G16_UNORM=35]="DXGI_FORMAT_R16G16_UNORM",n[n.DXGI_FORMAT_R16G16_UINT=36]="DXGI_FORMAT_R16G16_UINT",n[n.DXGI_FORMAT_R16G16_SNORM=37]="DXGI_FORMAT_R16G16_SNORM",n[n.DXGI_FORMAT_R16G16_SINT=38]="DXGI_FORMAT_R16G16_SINT",n[n.DXGI_FORMAT_R32_TYPELESS=39]="DXGI_FORMAT_R32_TYPELESS",n[n.DXGI_FORMAT_D32_FLOAT=40]="DXGI_FORMAT_D32_FLOAT",n[n.DXGI_FORMAT_R32_FLOAT=41]="DXGI_FORMAT_R32_FLOAT",n[n.DXGI_FORMAT_R32_UINT=42]="DXGI_FORMAT_R32_UINT",n[n.DXGI_FORMAT_R32_SINT=43]="DXGI_FORMAT_R32_SINT",n[n.DXGI_FORMAT_R24G8_TYPELESS=44]="DXGI_FORMAT_R24G8_TYPELESS",n[n.DXGI_FORMAT_D24_UNORM_S8_UINT=45]="DXGI_FORMAT_D24_UNORM_S8_UINT",n[n.DXGI_FORMAT_R24_UNORM_X8_TYPELESS=46]="DXGI_FORMAT_R24_UNORM_X8_TYPELESS",n[n.DXGI_FORMAT_X24_TYPELESS_G8_UINT=47]="DXGI_FORMAT_X24_TYPELESS_G8_UINT",n[n.DXGI_FORMAT_R8G8_TYPELESS=48]="DXGI_FORMAT_R8G8_TYPELESS",n[n.DXGI_FORMAT_R8G8_UNORM=49]="DXGI_FORMAT_R8G8_UNORM",n[n.DXGI_FORMAT_R8G8_UINT=50]="DXGI_FORMAT_R8G8_UINT",n[n.DXGI_FORMAT_R8G8_SNORM=51]="DXGI_FORMAT_R8G8_SNORM",n[n.DXGI_FORMAT_R8G8_SINT=52]="DXGI_FORMAT_R8G8_SINT",n[n.DXGI_FORMAT_R16_TYPELESS=53]="DXGI_FORMAT_R16_TYPELESS",n[n.DXGI_FORMAT_R16_FLOAT=54]="DXGI_FORMAT_R16_FLOAT",n[n.DXGI_FORMAT_D16_UNORM=55]="DXGI_FORMAT_D16_UNORM",n[n.DXGI_FORMAT_R16_UNORM=56]="DXGI_FORMAT_R16_UNORM",n[n.DXGI_FORMAT_R16_UINT=57]="DXGI_FORMAT_R16_UINT",n[n.DXGI_FORMAT_R16_SNORM=58]="DXGI_FORMAT_R16_SNORM",n[n.DXGI_FORMAT_R16_SINT=59]="DXGI_FORMAT_R16_SINT",n[n.DXGI_FORMAT_R8_TYPELESS=60]="DXGI_FORMAT_R8_TYPELESS",n[n.DXGI_FORMAT_R8_UNORM=61]="DXGI_FORMAT_R8_UNORM",n[n.DXGI_FORMAT_R8_UINT=62]="DXGI_FORMAT_R8_UINT",n[n.DXGI_FORMAT_R8_SNORM=63]="DXGI_FORMAT_R8_SNORM",n[n.DXGI_FORMAT_R8_SINT=64]="DXGI_FORMAT_R8_SINT",n[n.DXGI_FORMAT_A8_UNORM=65]="DXGI_FORMAT_A8_UNORM",n[n.DXGI_FORMAT_R1_UNORM=66]="DXGI_FORMAT_R1_UNORM",n[n.DXGI_FORMAT_R9G9B9E5_SHAREDEXP=67]="DXGI_FORMAT_R9G9B9E5_SHAREDEXP",n[n.DXGI_FORMAT_R8G8_B8G8_UNORM=68]="DXGI_FORMAT_R8G8_B8G8_UNORM",n[n.DXGI_FORMAT_G8R8_G8B8_UNORM=69]="DXGI_FORMAT_G8R8_G8B8_UNORM",n[n.DXGI_FORMAT_BC1_TYPELESS=70]="DXGI_FORMAT_BC1_TYPELESS",n[n.DXGI_FORMAT_BC1_UNORM=71]="DXGI_FORMAT_BC1_UNORM",n[n.DXGI_FORMAT_BC1_UNORM_SRGB=72]="DXGI_FORMAT_BC1_UNORM_SRGB",n[n.DXGI_FORMAT_BC2_TYPELESS=73]="DXGI_FORMAT_BC2_TYPELESS",n[n.DXGI_FORMAT_BC2_UNORM=74]="DXGI_FORMAT_BC2_UNORM",n[n.DXGI_FORMAT_BC2_UNORM_SRGB=75]="DXGI_FORMAT_BC2_UNORM_SRGB",n[n.DXGI_FORMAT_BC3_TYPELESS=76]="DXGI_FORMAT_BC3_TYPELESS",n[n.DXGI_FORMAT_BC3_UNORM=77]="DXGI_FORMAT_BC3_UNORM",n[n.DXGI_FORMAT_BC3_UNORM_SRGB=78]="DXGI_FORMAT_BC3_UNORM_SRGB",n[n.DXGI_FORMAT_BC4_TYPELESS=79]="DXGI_FORMAT_BC4_TYPELESS",n[n.DXGI_FORMAT_BC4_UNORM=80]="DXGI_FORMAT_BC4_UNORM",n[n.DXGI_FORMAT_BC4_SNORM=81]="DXGI_FORMAT_BC4_SNORM",n[n.DXGI_FORMAT_BC5_TYPELESS=82]="DXGI_FORMAT_BC5_TYPELESS",n[n.DXGI_FORMAT_BC5_UNORM=83]="DXGI_FORMAT_BC5_UNORM",n[n.DXGI_FORMAT_BC5_SNORM=84]="DXGI_FORMAT_BC5_SNORM",n[n.DXGI_FORMAT_B5G6R5_UNORM=85]="DXGI_FORMAT_B5G6R5_UNORM",n[n.DXGI_FORMAT_B5G5R5A1_UNORM=86]="DXGI_FORMAT_B5G5R5A1_UNORM",n[n.DXGI_FORMAT_B8G8R8A8_UNORM=87]="DXGI_FORMAT_B8G8R8A8_UNORM",n[n.DXGI_FORMAT_B8G8R8X8_UNORM=88]="DXGI_FORMAT_B8G8R8X8_UNORM",n[n.DXGI_FORMAT_R10G10B10_XR_BIAS_A2_UNORM=89]="DXGI_FORMAT_R10G10B10_XR_BIAS_A2_UNORM",n[n.DXGI_FORMAT_B8G8R8A8_TYPELESS=90]="DXGI_FORMAT_B8G8R8A8_TYPELESS",n[n.DXGI_FORMAT_B8G8R8A8_UNORM_SRGB=91]="DXGI_FORMAT_B8G8R8A8_UNORM_SRGB",n[n.DXGI_FORMAT_B8G8R8X8_TYPELESS=92]="DXGI_FORMAT_B8G8R8X8_TYPELESS",n[n.DXGI_FORMAT_B8G8R8X8_UNORM_SRGB=93]="DXGI_FORMAT_B8G8R8X8_UNORM_SRGB",n[n.DXGI_FORMAT_BC6H_TYPELESS=94]="DXGI_FORMAT_BC6H_TYPELESS",n[n.DXGI_FORMAT_BC6H_UF16=95]="DXGI_FORMAT_BC6H_UF16",n[n.DXGI_FORMAT_BC6H_SF16=96]="DXGI_FORMAT_BC6H_SF16",n[n.DXGI_FORMAT_BC7_TYPELESS=97]="DXGI_FORMAT_BC7_TYPELESS",n[n.DXGI_FORMAT_BC7_UNORM=98]="DXGI_FORMAT_BC7_UNORM",n[n.DXGI_FORMAT_BC7_UNORM_SRGB=99]="DXGI_FORMAT_BC7_UNORM_SRGB",n[n.DXGI_FORMAT_AYUV=100]="DXGI_FORMAT_AYUV",n[n.DXGI_FORMAT_Y410=101]="DXGI_FORMAT_Y410",n[n.DXGI_FORMAT_Y416=102]="DXGI_FORMAT_Y416",n[n.DXGI_FORMAT_NV12=103]="DXGI_FORMAT_NV12",n[n.DXGI_FORMAT_P010=104]="DXGI_FORMAT_P010",n[n.DXGI_FORMAT_P016=105]="DXGI_FORMAT_P016",n[n.DXGI_FORMAT_420_OPAQUE=106]="DXGI_FORMAT_420_OPAQUE",n[n.DXGI_FORMAT_YUY2=107]="DXGI_FORMAT_YUY2",n[n.DXGI_FORMAT_Y210=108]="DXGI_FORMAT_Y210",n[n.DXGI_FORMAT_Y216=109]="DXGI_FORMAT_Y216",n[n.DXGI_FORMAT_NV11=110]="DXGI_FORMAT_NV11",n[n.DXGI_FORMAT_AI44=111]="DXGI_FORMAT_AI44",n[n.DXGI_FORMAT_IA44=112]="DXGI_FORMAT_IA44",n[n.DXGI_FORMAT_P8=113]="DXGI_FORMAT_P8",n[n.DXGI_FORMAT_A8P8=114]="DXGI_FORMAT_A8P8",n[n.DXGI_FORMAT_B4G4R4A4_UNORM=115]="DXGI_FORMAT_B4G4R4A4_UNORM",n[n.DXGI_FORMAT_P208=116]="DXGI_FORMAT_P208",n[n.DXGI_FORMAT_V208=117]="DXGI_FORMAT_V208",n[n.DXGI_FORMAT_V408=118]="DXGI_FORMAT_V408",n[n.DXGI_FORMAT_SAMPLER_FEEDBACK_MIN_MIP_OPAQUE=119]="DXGI_FORMAT_SAMPLER_FEEDBACK_MIN_MIP_OPAQUE",n[n.DXGI_FORMAT_SAMPLER_FEEDBACK_MIP_REGION_USED_OPAQUE=120]="DXGI_FORMAT_SAMPLER_FEEDBACK_MIP_REGION_USED_OPAQUE",n[n.DXGI_FORMAT_FORCE_UINT=121]="DXGI_FORMAT_FORCE_UINT"}(mr||(mr={})),mr))(),Sd=(()=>(function(n){n[n.DDS_DIMENSION_TEXTURE1D=2]="DDS_DIMENSION_TEXTURE1D",n[n.DDS_DIMENSION_TEXTURE2D=3]="DDS_DIMENSION_TEXTURE2D",n[n.DDS_DIMENSION_TEXTURE3D=6]="DDS_DIMENSION_TEXTURE3D"}(Sd||(Sd={})),Sd))(),U4=((Ll={})[827611204]=Le.COMPRESSED_RGBA_S3TC_DXT1_EXT,Ll[861165636]=Le.COMPRESSED_RGBA_S3TC_DXT3_EXT,Ll[894720068]=Le.COMPRESSED_RGBA_S3TC_DXT5_EXT,Ll),V4=((Gr={})[mr.DXGI_FORMAT_BC1_TYPELESS]=Le.COMPRESSED_RGBA_S3TC_DXT1_EXT,Gr[mr.DXGI_FORMAT_BC1_UNORM]=Le.COMPRESSED_RGBA_S3TC_DXT1_EXT,Gr[mr.DXGI_FORMAT_BC2_TYPELESS]=Le.COMPRESSED_RGBA_S3TC_DXT3_EXT,Gr[mr.DXGI_FORMAT_BC2_UNORM]=Le.COMPRESSED_RGBA_S3TC_DXT3_EXT,Gr[mr.DXGI_FORMAT_BC3_TYPELESS]=Le.COMPRESSED_RGBA_S3TC_DXT5_EXT,Gr[mr.DXGI_FORMAT_BC3_UNORM]=Le.COMPRESSED_RGBA_S3TC_DXT5_EXT,Gr[mr.DXGI_FORMAT_BC1_UNORM_SRGB]=Le.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT,Gr[mr.DXGI_FORMAT_BC2_UNORM_SRGB]=Le.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT,Gr[mr.DXGI_FORMAT_BC3_UNORM_SRGB]=Le.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT,Gr),G4=function(){function n(){}return n.use=function(e,t){if("dds"===e.extension&&e.data)try{Object.assign(e,TC(e.name||e.url,n.parse(e.data),e.metadata))}catch(r){return void t(r)}t()},n.parse=function(e){var t=new Uint32Array(e);if(542327876!==t[0])throw new Error("Invalid DDS file magic word");var i=new Uint32Array(e,0,124/Uint32Array.BYTES_PER_ELEMENT),o=i[3],s=i[4],a=i[7],l=new Uint32Array(e,19*Uint32Array.BYTES_PER_ELEMENT,32/Uint32Array.BYTES_PER_ELEMENT),u=l[1];if(4&u){var c=l[2];if(808540228!==c){var d=U4[c],f=new Uint8Array(e,128);return[new jm(f,{format:d,width:s,height:o,levels:a})]}var m=new Uint32Array(t.buffer,128,20/Uint32Array.BYTES_PER_ELEMENT),g=m[0],b=m[1],y=m[2],M=m[3],S=V4[g];if(void 0===S)throw new Error("DDSLoader cannot parse texture data with DXGI format "+g);if(4===y)throw new Error("DDSLoader does not support cubemap textures");if(b===Sd.DDS_DIMENSION_TEXTURE3D)throw new Error("DDSLoader does not supported 3D texture data");var T=new Array;if(1===M)T.push(new Uint8Array(e,148));else{for(var Q=Ed[S],B=0,U=s,ce=o,he=0;he<a;he++)B+=Math.max(1,U+3&-4)*Math.max(1,ce+3&-4)*Q,U>>>=1,ce>>>=1;var N=148;for(he=0;he<M;he++)T.push(new Uint8Array(e,N,B)),N+=B}return T.map(function(G){return new jm(G,{format:S,width:s,height:o,levels:a})})}throw 64&u?new Error("DDSLoader does not support uncompressed texture data."):512&u?new Error("DDSLoader does not supported YUV uncompressed texture data."):131072&u?new Error("DDSLoader does not support single-channel (lumninance) texture data!"):2&u?new Error("DDSLoader does not support single-channel (alpha) texture data!"):new Error("DDSLoader failed to load a texture file due to an unknown reason!")},n}();zt.setExtensionXhrType("ktx",zt.XHR_RESPONSE_TYPE.BUFFER);var SC=[171,75,84,88,32,49,49,187,13,10,26,10],MC=((oo={})[pe.UNSIGNED_BYTE]=1,oo[pe.UNSIGNED_SHORT]=2,oo[pe.INT]=4,oo[pe.UNSIGNED_INT]=4,oo[pe.FLOAT]=4,oo[pe.HALF_FLOAT]=8,oo),j4=((Fi={})[H.RGBA]=4,Fi[H.RGB]=3,Fi[H.RG]=2,Fi[H.RED]=1,Fi[H.LUMINANCE]=1,Fi[H.LUMINANCE_ALPHA]=2,Fi[H.ALPHA]=1,Fi),Y4=((Bl={})[pe.UNSIGNED_SHORT_4_4_4_4]=2,Bl[pe.UNSIGNED_SHORT_5_5_5_1]=2,Bl[pe.UNSIGNED_SHORT_5_6_5]=2,Bl),z4=function(){function n(){}return n.use=function(e,t){if("ktx"===e.extension&&e.data)try{var r=e.name||e.url,i=n.parse(r,e.data),o=i.compressed,s=i.uncompressed,a=i.kvData;if(o){var l=TC(r,o,e.metadata);if(a&&l.textures)for(var u in l.textures)l.textures[u].baseTexture.ktxKeyValueData=a;Object.assign(e,l)}else if(s){var c={};s.forEach(function(d,h){var f=new Ee(new Xe(d.resource,{mipmap:li.OFF,alphaMode:_r.NO_PREMULTIPLIED_ALPHA,type:d.type,format:d.format})),p=r+"-"+(h+1);a&&(f.baseTexture.ktxKeyValueData=a),Xe.addToCache(f.baseTexture,p),Ee.addToCache(f,p),0===h&&(c[r]=f,Xe.addToCache(f.baseTexture,r),Ee.addToCache(f,r)),c[p]=f}),Object.assign(e,{textures:c})}}catch(d){return void t(d)}t()},n.parse=function(e,t){var r=new DataView(t);if(!n.validate(e,r))return null;var i=67305985===r.getUint32(12,!0),o=r.getUint32(16,i),s=r.getUint32(24,i),a=r.getUint32(28,i),l=r.getUint32(36,i),u=r.getUint32(40,i)||1,c=r.getUint32(44,i)||1,d=r.getUint32(48,i)||1,h=r.getUint32(52,i),f=r.getUint32(56,i),p=r.getUint32(60,i);if(0===u||1!==c)throw new Error("Only 2D textures are supported");if(1!==h)throw new Error("CubeTextures are not supported by KTXLoader yet!");if(1!==d)throw new Error("WebGL does not support array textures");var S,g=l+3&-4,b=u+3&-4,y=new Array(d),M=l*u;if(0===o&&(M=g*b),void 0===(S=0!==o?MC[o]?MC[o]*j4[s]:Y4[o]:Ed[a]))throw new Error("Unable to resolve the pixel format stored in the *.ktx file!");for(var T=n.loadKeyValueData?n.parseKvData(r,p,i):null,Q=M*S,B=l,U=u,ce=g,he=b,we=64+p,Je=0;Je<f;Je++){for(var oe=r.getUint32(we,i),N=we+4,G=0;G<d;G++){var q=y[G];q||(q=y[G]=new Array(f)),q[Je]={levelID:Je,levelWidth:f>1||0!==o?B:ce,levelHeight:f>1||0!==o?U:he,levelBuffer:new Uint8Array(t,N,Q)},N+=Q}we=(we+=oe+4)%4!=0?we+4-we%4:we,Q=(ce=(B=B>>1||1)+4-1&-4)*(he=(U=U>>1||1)+4-1&-4)*S}return 0!==o?{uncompressed:y.map(function(J){var K=J[0].levelBuffer,Qt=!1;return o===pe.FLOAT?K=new Float32Array(J[0].levelBuffer.buffer,J[0].levelBuffer.byteOffset,J[0].levelBuffer.byteLength/4):o===pe.UNSIGNED_INT?(Qt=!0,K=new Uint32Array(J[0].levelBuffer.buffer,J[0].levelBuffer.byteOffset,J[0].levelBuffer.byteLength/4)):o===pe.INT&&(Qt=!0,K=new Int32Array(J[0].levelBuffer.buffer,J[0].levelBuffer.byteOffset,J[0].levelBuffer.byteLength/4)),{resource:new sa(K,{width:J[0].levelWidth,height:J[0].levelHeight}),type:o,format:Qt?n.convertFormatToInteger(s):s}}),kvData:T}:{compressed:y.map(function(J){return new jm(null,{format:a,width:l,height:u,levels:f,levelBuffers:J})}),kvData:T}},n.validate=function(e,t){for(var r=0;r<SC.length;r++)if(t.getUint8(r)!==SC[r])return console.error(e+" is not a valid *.ktx file!"),!1;return!0},n.convertFormatToInteger=function(e){switch(e){case H.RGBA:return H.RGBA_INTEGER;case H.RGB:return H.RGB_INTEGER;case H.RG:return H.RG_INTEGER;case H.RED:return H.RED_INTEGER;default:return e}},n.parseKvData=function(e,t,r){for(var i=new Map,o=0;o<t;){var s=e.getUint32(64+o,r),a=64+o+4,l=3-(s+3)%4;if(0===s||s>t-o){console.error("KTXLoader: keyAndValueByteSize out of bounds");break}for(var u=0;u<s&&0!==e.getUint8(a+u);u++);if(-1===u){console.error("KTXLoader: Failed to find null byte terminating kvData key");break}var c=(new TextDecoder).decode(new Uint8Array(e.buffer,a,u)),d=new DataView(e.buffer,a+u+1,s-u-1);i.set(c,d),o+=4+s+l}return i},n.loadKeyValueData=!1,n}(),Wm=function(n,e){return(Wm=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var i in r)r.hasOwnProperty(i)&&(t[i]=r[i])})(n,e)};function CC(n,e){function t(){this.constructor=n}Wm(n,e),n.prototype=null===e?Object.create(e):(t.prototype=e.prototype,new t)}!function(n){function e(t,r,i,o){void 0===t&&(t=1500),void 0===i&&(i=16384),void 0===o&&(o=!1);var s=n.call(this)||this;return i>16384&&(i=16384),s._properties=[!1,!0,!1,!1,!1],s._maxSize=t,s._batchSize=i,s._buffers=null,s._bufferUpdateIDs=[],s._updateID=0,s.interactiveChildren=!1,s.blendMode=ge.NORMAL,s.autoResize=o,s.roundPixels=!0,s.baseTexture=null,s.setProperties(r),s._tint=0,s.tintRgb=new Float32Array(4),s.tint=16777215,s}CC(e,n),e.prototype.setProperties=function(t){t&&(this._properties[0]="vertices"in t||"scale"in t?!!t.vertices||!!t.scale:this._properties[0],this._properties[1]="position"in t?!!t.position:this._properties[1],this._properties[2]="rotation"in t?!!t.rotation:this._properties[2],this._properties[3]="uvs"in t?!!t.uvs:this._properties[3],this._properties[4]="tint"in t||"alpha"in t?!!t.tint||!!t.alpha:this._properties[4])},e.prototype.updateTransform=function(){this.displayObjectUpdateTransform()},Object.defineProperty(e.prototype,"tint",{get:function(){return this._tint},set:function(t){this._tint=t,na(t,this.tintRgb)},enumerable:!1,configurable:!0}),e.prototype.render=function(t){var r=this;!this.visible||this.worldAlpha<=0||!this.children.length||!this.renderable||(this.baseTexture||(this.baseTexture=this.children[0]._texture.baseTexture,this.baseTexture.valid||this.baseTexture.once("update",function(){return r.onChildrenChange(0)})),t.batch.setObjectRenderer(t.plugins.particle),t.plugins.particle.render(this))},e.prototype.onChildrenChange=function(t){for(var r=Math.floor(t/this._batchSize);this._bufferUpdateIDs.length<r;)this._bufferUpdateIDs.push(0);this._bufferUpdateIDs[r]=++this._updateID},e.prototype.dispose=function(){if(this._buffers){for(var t=0;t<this._buffers.length;++t)this._buffers[t].destroy();this._buffers=null}},e.prototype.destroy=function(t){n.prototype.destroy.call(this,t),this.dispose(),this._properties=null,this._buffers=null,this._bufferUpdateIDs=null}}(ui);var AC=function(){function n(e,t,r){this.geometry=new xl,this.indexBuffer=null,this.size=r,this.dynamicProperties=[],this.staticProperties=[];for(var i=0;i<e.length;++i){var o=e[i];o={attributeName:o.attributeName,size:o.size,uploadFunction:o.uploadFunction,type:o.type||pe.FLOAT,offset:o.offset},t[i]?this.dynamicProperties.push(o):this.staticProperties.push(o)}this.staticStride=0,this.staticBuffer=null,this.staticData=null,this.staticDataUint32=null,this.dynamicStride=0,this.dynamicBuffer=null,this.dynamicData=null,this.dynamicDataUint32=null,this._updateID=0,this.initBuffers()}return n.prototype.initBuffers=function(){var e=this.geometry,t=0;this.indexBuffer=new un(function m3(n,e){void 0===e&&(e=null);var t=6*n;if((e=e||new Uint16Array(t)).length!==t)throw new Error("Out buffer length is incorrect, got "+e.length+" and expected "+t);for(var r=0,i=0;r<t;r+=6,i+=4)e[r+0]=i+0,e[r+1]=i+1,e[r+2]=i+2,e[r+3]=i+0,e[r+4]=i+2,e[r+5]=i+3;return e}(this.size),!0,!0),e.addIndex(this.indexBuffer),this.dynamicStride=0;for(var r=0;r<this.dynamicProperties.length;++r)(i=this.dynamicProperties[r]).offset=t,t+=i.size,this.dynamicStride+=i.size;var o=new ArrayBuffer(this.size*this.dynamicStride*4*4);this.dynamicData=new Float32Array(o),this.dynamicDataUint32=new Uint32Array(o),this.dynamicBuffer=new un(this.dynamicData,!1,!1);var s=0;for(this.staticStride=0,r=0;r<this.staticProperties.length;++r)(i=this.staticProperties[r]).offset=s,s+=i.size,this.staticStride+=i.size;var a=new ArrayBuffer(this.size*this.staticStride*4*4);for(this.staticData=new Float32Array(a),this.staticDataUint32=new Uint32Array(a),this.staticBuffer=new un(this.staticData,!0,!1),r=0;r<this.dynamicProperties.length;++r)e.addAttribute((i=this.dynamicProperties[r]).attributeName,this.dynamicBuffer,0,i.type===pe.UNSIGNED_BYTE,i.type,4*this.dynamicStride,4*i.offset);for(r=0;r<this.staticProperties.length;++r){var i;e.addAttribute((i=this.staticProperties[r]).attributeName,this.staticBuffer,0,i.type===pe.UNSIGNED_BYTE,i.type,4*this.staticStride,4*i.offset)}},n.prototype.uploadDynamic=function(e,t,r){for(var i=0;i<this.dynamicProperties.length;i++){var o=this.dynamicProperties[i];o.uploadFunction(e,t,r,o.type===pe.UNSIGNED_BYTE?this.dynamicDataUint32:this.dynamicData,this.dynamicStride,o.offset)}this.dynamicBuffer._updateID++},n.prototype.uploadStatic=function(e,t,r){for(var i=0;i<this.staticProperties.length;i++){var o=this.staticProperties[i];o.uploadFunction(e,t,r,o.type===pe.UNSIGNED_BYTE?this.staticDataUint32:this.staticData,this.staticStride,o.offset)}this.staticBuffer._updateID++},n.prototype.destroy=function(){this.indexBuffer=null,this.dynamicProperties=null,this.dynamicBuffer=null,this.dynamicData=null,this.dynamicDataUint32=null,this.staticProperties=null,this.staticBuffer=null,this.staticData=null,this.staticDataUint32=null,this.geometry.destroy()},n}(),$4=function(n){function e(t){var r=n.call(this,t)||this;return r.shader=null,r.properties=null,r.tempMatrix=new qt,r.properties=[{attributeName:"aVertexPosition",size:2,uploadFunction:r.uploadVertices,offset:0},{attributeName:"aPositionCoord",size:2,uploadFunction:r.uploadPosition,offset:0},{attributeName:"aRotation",size:1,uploadFunction:r.uploadRotation,offset:0},{attributeName:"aTextureCoord",size:2,uploadFunction:r.uploadUvs,offset:0},{attributeName:"aColor",size:1,type:pe.UNSIGNED_BYTE,uploadFunction:r.uploadTint,offset:0}],r.shader=no.from("attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\nattribute vec4 aColor;\n\nattribute vec2 aPositionCoord;\nattribute float aRotation;\n\nuniform mat3 translationMatrix;\nuniform vec4 uColor;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\n\nvoid main(void){\n    float x = (aVertexPosition.x) * cos(aRotation) - (aVertexPosition.y) * sin(aRotation);\n    float y = (aVertexPosition.x) * sin(aRotation) + (aVertexPosition.y) * cos(aRotation);\n\n    vec2 v = vec2(x, y);\n    v = v + aPositionCoord;\n\n    gl_Position = vec4((translationMatrix * vec3(v, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = aTextureCoord;\n    vColor = aColor * uColor;\n}\n","varying vec2 vTextureCoord;\nvarying vec4 vColor;\n\nuniform sampler2D uSampler;\n\nvoid main(void){\n    vec4 color = texture2D(uSampler, vTextureCoord) * vColor;\n    gl_FragColor = color;\n}",{}),r.state=Yo.for2d(),r}return CC(e,n),e.prototype.render=function(t){var r=t.children,i=t._maxSize,o=t._batchSize,s=this.renderer,a=r.length;if(0!==a){a>i&&!t.autoResize&&(a=i);var l=t._buffers;l||(l=t._buffers=this.generateBuffers(t));var u=r[0]._texture.baseTexture;this.state.blendMode=QS(t.blendMode,u.alphaMode),s.state.set(this.state);var c=s.gl,d=t.worldTransform.copyTo(this.tempMatrix);d.prepend(s.globalUniforms.uniforms.projectionMatrix),this.shader.uniforms.translationMatrix=d.toArray(!0),this.shader.uniforms.uColor=function _3(n,e,t,r){return t=t||new Float32Array(4),r||void 0===r?(t[0]=n[0]*e,t[1]=n[1]*e,t[2]=n[2]*e):(t[0]=n[0],t[1]=n[1],t[2]=n[2]),t[3]=e,t}(t.tintRgb,t.worldAlpha,this.shader.uniforms.uColor,u.alphaMode),this.shader.uniforms.uSampler=u,this.renderer.shader.bind(this.shader);for(var h=!1,f=0,p=0;f<a;f+=o,p+=1){var _=a-f;_>o&&(_=o),p>=l.length&&l.push(this._generateOneMoreBuffer(t));var m=l[p];m.uploadDynamic(r,f,_),(h=h||m._updateID<(t._bufferUpdateIDs[p]||0))&&(m._updateID=t._updateID,m.uploadStatic(r,f,_)),s.geometry.bind(m.geometry),c.drawElements(c.TRIANGLES,6*_,c.UNSIGNED_SHORT,0)}}},e.prototype.generateBuffers=function(t){for(var r=[],i=t._maxSize,o=t._batchSize,s=t._properties,a=0;a<i;a+=o)r.push(new AC(this.properties,s,o));return r},e.prototype._generateOneMoreBuffer=function(t){return new AC(this.properties,t._properties,t._batchSize)},e.prototype.uploadVertices=function(t,r,i,o,s,a){for(var l=0,u=0,c=0,d=0,h=0;h<i;++h){var f=t[r+h],p=f._texture,_=f.scale.x,m=f.scale.y,g=p.trim,b=p.orig;g?(l=(u=g.x-f.anchor.x*b.width)+g.width,c=(d=g.y-f.anchor.y*b.height)+g.height):(l=b.width*(1-f.anchor.x),u=b.width*-f.anchor.x,c=b.height*(1-f.anchor.y),d=b.height*-f.anchor.y),o[a]=u*_,o[a+1]=d*m,o[a+s]=l*_,o[a+s+1]=d*m,o[a+2*s]=l*_,o[a+2*s+1]=c*m,o[a+3*s]=u*_,o[a+3*s+1]=c*m,a+=4*s}},e.prototype.uploadPosition=function(t,r,i,o,s,a){for(var l=0;l<i;l++){var u=t[r+l].position;o[a]=u.x,o[a+1]=u.y,o[a+s]=u.x,o[a+s+1]=u.y,o[a+2*s]=u.x,o[a+2*s+1]=u.y,o[a+3*s]=u.x,o[a+3*s+1]=u.y,a+=4*s}},e.prototype.uploadRotation=function(t,r,i,o,s,a){for(var l=0;l<i;l++){var u=t[r+l].rotation;o[a]=u,o[a+s]=u,o[a+2*s]=u,o[a+3*s]=u,a+=4*s}},e.prototype.uploadUvs=function(t,r,i,o,s,a){for(var l=0;l<i;++l){var u=t[r+l]._texture._uvs;u?(o[a]=u.x0,o[a+1]=u.y0,o[a+s]=u.x1,o[a+s+1]=u.y1,o[a+2*s]=u.x2,o[a+2*s+1]=u.y2,o[a+3*s]=u.x3,o[a+3*s+1]=u.y3,a+=4*s):(o[a]=0,o[a+1]=0,o[a+s]=0,o[a+s+1]=0,o[a+2*s]=0,o[a+2*s+1]=0,o[a+3*s]=0,o[a+3*s+1]=0,a+=4*s)}},e.prototype.uploadTint=function(t,r,i,o,s,a){for(var l=0;l<i;++l){var u=t[r+l],d=u.alpha,h=d<1&&u._texture.baseTexture.alphaMode>0?tm(u._tintRGB,d):u._tintRGB+(255*d<<24);o[a]=h,o[a+s]=h,o[a+2*s]=h,o[a+3*s]=h,a+=4*s}},e.prototype.destroy=function(){n.prototype.destroy.call(this),this.shader&&(this.shader.destroy(),this.shader=null),this.tempMatrix=null},e}(sd),Li=(()=>(function(n){n.MITER="miter",n.BEVEL="bevel",n.ROUND="round"}(Li||(Li={})),Li))(),Bi=(()=>(function(n){n.BUTT="butt",n.ROUND="round",n.SQUARE="square"}(Bi||(Bi={})),Bi))(),kl={adaptive:!0,maxLength:10,minSegments:8,maxSegments:2048,epsilon:1e-4,_segmentsCount:function(n,e){if(void 0===e&&(e=20),!this.adaptive||!n||isNaN(n))return e;var t=Math.ceil(n/this.maxLength);return t<this.minSegments?t=this.minSegments:t>this.maxSegments&&(t=this.maxSegments),t}},wC=function(){function n(){this.color=16777215,this.alpha=1,this.texture=Ee.WHITE,this.matrix=null,this.visible=!1,this.reset()}return n.prototype.clone=function(){var e=new n;return e.color=this.color,e.alpha=this.alpha,e.texture=this.texture,e.matrix=this.matrix,e.visible=this.visible,e},n.prototype.reset=function(){this.color=16777215,this.alpha=1,this.texture=Ee.WHITE,this.matrix=null,this.visible=!1},n.prototype.destroy=function(){this.texture=null,this.matrix=null},n}(),Xm=function(n,e){return(Xm=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var i in r)r.hasOwnProperty(i)&&(t[i]=r[i])})(n,e)};function $m(n,e){function t(){this.constructor=n}Xm(n,e),n.prototype=null===e?Object.create(e):(t.prototype=e.prototype,new t)}function xC(n,e){var t,r;void 0===e&&(e=!1);var i=n.length;if(!(i<6)){for(var o=0,s=0,a=n[i-2],l=n[i-1];s<i;s+=2){var u=n[s],c=n[s+1];o+=(u-a)*(c+l),a=u,l=c}if(!e&&o>0||e&&o<=0){var d=i/2;for(s=d+d%2;s<i;s+=2){var h=i-s-2,f=i-s-1,p=s,_=s+1;n[h]=(t=[n[p],n[h]])[0],n[p]=t[1],n[f]=(r=[n[_],n[f]])[0],n[_]=r[1]}}}}var qm={build:function(n){n.points=n.shape.points.slice()},triangulate:function(n,e){var t=n.points,r=n.holes,i=e.points,o=e.indices;if(t.length>=6){xC(t,!1);for(var s=[],a=0;a<r.length;a++){var l=r[a];xC(l.points,!0),s.push(t.length/2),t=t.concat(l.points)}var u=WS()(t,s,2);if(!u)return;var c=i.length/2;for(a=0;a<u.length;a+=3)o.push(u[a]+c),o.push(u[a+1]+c),o.push(u[a+2]+c);for(a=0;a<t.length;a++)i.push(t[a])}}},Ul={build:function(n){var t,r,i,o,s,a,e=n.points;if(n.type===Rt.CIRC){var l=n.shape;t=l.x,r=l.y,s=a=l.radius,i=o=0}else if(n.type===Rt.ELIP){var u=n.shape;t=u.x,r=u.y,s=u.width,a=u.height,i=o=0}else{var c=n.shape,d=c.width/2,h=c.height/2;t=c.x+d,r=c.y+h,i=d-(s=a=Math.max(0,Math.min(c.radius,Math.min(d,h)))),o=h-a}if(s>=0&&a>=0&&i>=0&&o>=0){var f=Math.ceil(2.3*Math.sqrt(s+a)),p=8*f+(i?4:0)+(o?4:0);if(e.length=p,0!==p){if(0===f)return e.length=8,e[0]=e[6]=t+i,e[1]=e[3]=r+o,e[2]=e[4]=t-i,void(e[5]=e[7]=r-o);var y,M,S,_=0,m=4*f+(i?2:0)+2,g=m,b=p,T=t-(y=i+s),k=r+(M=o);if(e[_++]=S=t+y,e[_++]=k,e[--m]=k,e[--m]=T,o){var Q=r-M;e[g++]=T,e[g++]=Q,e[--b]=Q,e[--b]=S}for(var B=1;B<f;B++){var U=Math.PI/2*(B/f);T=t-(y=i+Math.cos(U)*s),k=r+(M=o+Math.sin(U)*a),Q=r-M,e[_++]=S=t+y,e[_++]=k,e[--m]=k,e[--m]=T,e[g++]=T,e[g++]=Q,e[--b]=Q,e[--b]=S}T=t-(y=i),k=r+(M=o+a),Q=r-M,e[_++]=S=t+y,e[_++]=k,e[--b]=Q,e[--b]=S,i&&(e[_++]=T,e[_++]=k,e[--b]=Q,e[--b]=T)}}else e.length=0},triangulate:function(n,e){var a,l,t=n.points,r=e.points,i=e.indices,o=r.length/2,s=o;if(n.type!==Rt.RREC){var u=n.shape;a=u.x,l=u.y}else{var c=n.shape;a=c.x+c.width/2,l=c.y+c.height/2}var d=n.matrix;r.push(n.matrix?d.a*a+d.c*l+d.tx:a,n.matrix?d.b*a+d.d*l+d.ty:l),o++,r.push(t[0],t[1]);for(var h=2;h<t.length;h+=2)r.push(t[h],t[h+1]),i.push(o++,s,o);i.push(s+1,s,o)}};function da(n,e,t){return n+(e-n)*t}function Md(n,e,t,r,i,o,s){void 0===s&&(s=[]);for(var l=s,u=0,c=0,d=0,h=0,f=0,p=0,_=0,m=0;_<=20;++_)u=da(n,t,m=_/20),c=da(e,r,m),d=da(t,i,m),h=da(r,o,m),f=da(u,d,m),p=da(c,h,m),(0!==_||l[l.length-2]!==f||l[l.length-1]!==p)&&l.push(f,p);return l}var IC={build:function(n){if(Ad.nextRoundedRectBehavior)Ul.build(n);else{var e=n.shape,t=n.points,r=e.x,i=e.y,o=e.width,s=e.height,a=Math.max(0,Math.min(e.radius,Math.min(o,s)/2));t.length=0,a?(Md(r,i+a,r,i,r+a,i,t),Md(r+o-a,i,r+o,i,r+o,i+a,t),Md(r+o,i+s-a,r+o,i+s,r+o-a,i+s,t),Md(r+a,i+s,r,i+s,r,i+s-a,t)):t.push(r,i,r+o,i,r+o,i+s,r,i+s)}},triangulate:function(n,e){if(Ad.nextRoundedRectBehavior)Ul.triangulate(n,e);else{for(var t=n.points,r=e.points,i=e.indices,o=r.length/2,s=WS()(t,null,2),a=0,l=s.length;a<l;a+=3)i.push(s[a]+o),i.push(s[a+1]+o),i.push(s[a+2]+o);for(a=0,l=t.length;a<l;a++)r.push(t[a],t[++a])}}};function OC(n,e,t,r,i,o,s,a){var h,f;s?(h=r,f=-t):(h=-r,f=t);var m=n+t*o+h,g=e+r*o+f;return a.push(n-t*i+h,e-r*i+f),a.push(m,g),2}function ha(n,e,t,r,i,o,s,a){var l=t-n,u=r-e,c=Math.atan2(l,u),d=Math.atan2(i-n,o-e);a&&c<d?c+=2*Math.PI:!a&&c>d&&(d+=2*Math.PI);var h=c,f=d-c,p=Math.abs(f),_=Math.sqrt(l*l+u*u),m=1+(15*p*Math.sqrt(_)/Math.PI>>0),g=f/m;if(h+=g,a){s.push(n,e),s.push(t,r);for(var b=1,y=h;b<m;b++,y+=g)s.push(n,e),s.push(n+Math.sin(y)*_,e+Math.cos(y)*_);s.push(n,e),s.push(i,o)}else{for(s.push(t,r),s.push(n,e),b=1,y=h;b<m;b++,y+=g)s.push(n+Math.sin(y)*_,e+Math.cos(y)*_),s.push(n,e);s.push(i,o),s.push(n,e)}return 2*m}function Km(n,e){n.lineStyle.native?function K4(n,e){var t=0,r=n.shape,i=n.points||r.points,o=r.type!==Rt.POLY||r.closeStroke;if(0!==i.length){var s=e.points,a=e.indices,l=i.length/2,u=s.length/2,c=u;for(s.push(i[0],i[1]),t=1;t<l;t++)s.push(i[2*t],i[2*t+1]),a.push(c,c+1),c++;o&&a.push(c,u)}}(n,e):function q4(n,e){var t=n.shape,r=n.points||t.points.slice(),i=e.closePointEps;if(0!==r.length){var o=n.lineStyle,s=new St(r[0],r[1]),a=new St(r[r.length-2],r[r.length-1]),l=t.type!==Rt.POLY||t.closeStroke,u=Math.abs(s.x-a.x)<i&&Math.abs(s.y-a.y)<i;if(l){r=r.slice(),u&&(r.pop(),r.pop(),a.set(r[r.length-2],r[r.length-1]));var c=.5*(s.x+a.x),d=.5*(a.y+s.y);r.unshift(c,d),r.push(c,d)}var h=e.points,f=r.length/2,p=r.length,_=h.length/2,m=o.width/2,g=m*m,b=o.miterLimit*o.miterLimit,y=r[0],M=r[1],S=r[2],T=r[3],k=0,Q=0,B=-(M-T),U=y-S,ce=0,he=0,we=Math.sqrt(B*B+U*U);B/=we,U/=we,B*=m,U*=m;var Je=o.alignment,oe=2*(1-Je),N=2*Je;l||(o.cap===Bi.ROUND?p+=ha(y-B*(oe-N)*.5,M-U*(oe-N)*.5,y-B*oe,M-U*oe,y+B*N,M+U*N,h,!0)+2:o.cap===Bi.SQUARE&&(p+=OC(y,M,B,U,oe,N,!0,h))),h.push(y-B*oe,M-U*oe),h.push(y+B*N,M+U*N);for(var G=1;G<f-1;++G){k=r[2*(G+1)],Q=r[2*(G+1)+1],B=-((M=r[2*(G-1)+1])-(T=r[2*G+1])),U=(y=r[2*(G-1)])-(S=r[2*G]),B/=we=Math.sqrt(B*B+U*U),U/=we,B*=m,U*=m,ce=-(T-Q),he=S-k,ce/=we=Math.sqrt(ce*ce+he*he),he/=we,ce*=m,he*=m;var q=S-y,J=M-T,K=S-k,Qt=Q-T,Wt=J*K-Qt*q,pn=Wt<0;if(Math.abs(Wt)<.1)h.push(S-B*oe,T-U*oe),h.push(S+B*N,T+U*N);else{var ot=(-B+y)*(-U+T)-(-B+S)*(-U+M),Hi=(-ce+k)*(-he+T)-(-ce+S)*(-he+Q),Tr=(q*Hi-K*ot)/Wt,Bt=(Qt*ot-J*Hi)/Wt,Wn=(Tr-S)*(Tr-S)+(Bt-T)*(Bt-T),It=S+(Tr-S)*oe,Rn=T+(Bt-T)*oe,In=S-(Tr-S)*N,Dr=T-(Bt-T)*N,ns=pn?oe:N;Wn<=Math.min(q*q+J*J,K*K+Qt*Qt)+ns*ns*g?o.join===Li.BEVEL||Wn/g>b?(pn?(h.push(It,Rn),h.push(S+B*N,T+U*N),h.push(It,Rn),h.push(S+ce*N,T+he*N)):(h.push(S-B*oe,T-U*oe),h.push(In,Dr),h.push(S-ce*oe,T-he*oe),h.push(In,Dr)),p+=2):o.join===Li.ROUND?pn?(h.push(It,Rn),h.push(S+B*N,T+U*N),p+=ha(S,T,S+B*N,T+U*N,S+ce*N,T+he*N,h,!0)+4,h.push(It,Rn),h.push(S+ce*N,T+he*N)):(h.push(S-B*oe,T-U*oe),h.push(In,Dr),p+=ha(S,T,S-B*oe,T-U*oe,S-ce*oe,T-he*oe,h,!1)+4,h.push(S-ce*oe,T-he*oe),h.push(In,Dr)):(h.push(It,Rn),h.push(In,Dr)):(h.push(S-B*oe,T-U*oe),h.push(S+B*N,T+U*N),o.join===Li.ROUND?p+=pn?ha(S,T,S+B*N,T+U*N,S+ce*N,T+he*N,h,!0)+2:ha(S,T,S-B*oe,T-U*oe,S-ce*oe,T-he*oe,h,!1)+2:o.join===Li.MITER&&Wn/g<=b&&(pn?(h.push(In,Dr),h.push(In,Dr)):(h.push(It,Rn),h.push(It,Rn)),p+=2),h.push(S-ce*oe,T-he*oe),h.push(S+ce*N,T+he*N),p+=2)}}B=-((M=r[2*(f-2)+1])-(T=r[2*(f-1)+1])),U=(y=r[2*(f-2)])-(S=r[2*(f-1)]),B/=we=Math.sqrt(B*B+U*U),U/=we,h.push(S-(B*=m)*oe,T-(U*=m)*oe),h.push(S+B*N,T+U*N),l||(o.cap===Bi.ROUND?p+=ha(S-B*(oe-N)*.5,T-U*(oe-N)*.5,S-B*oe,T-U*oe,S+B*N,T+U*N,h,!1)+2:o.cap===Bi.SQUARE&&(p+=OC(S,T,B,U,oe,N,!1,h)));var _i=e.indices,Ca=kl.epsilon*kl.epsilon;for(G=_;G<p+_-2;++G)y=h[2*G],M=h[2*G+1],S=h[2*(G+1)],T=h[2*(G+1)+1],k=h[2*(G+2)],Q=h[2*(G+2)+1],!(Math.abs(y*(T-Q)+S*(Q-M)+k*(M-T))<Ca)&&_i.push(G,G+1,G+2)}}(n,e)}var Xo,Qm=function(){function n(){}return n.curveTo=function(e,t,r,i,o,s){var u=s[s.length-1]-t,c=s[s.length-2]-e,d=i-t,h=r-e,f=Math.abs(u*h-c*d);if(f<1e-8||0===o)return(s[s.length-2]!==e||s[s.length-1]!==t)&&s.push(e,t),null;var p=u*u+c*c,_=d*d+h*h,m=u*d+c*h,g=o*Math.sqrt(p)/f,b=o*Math.sqrt(_)/f,y=g*m/p,M=b*m/_,S=g*h+b*c,T=g*d+b*u,B=h*(g+M),U=d*(g+M);return{cx:S+e,cy:T+t,radius:o,startAngle:Math.atan2(u*(b+y)-T,c*(b+y)-S),endAngle:Math.atan2(U-T,B-S),anticlockwise:c*d>h*u}},n.arc=function(e,t,r,i,o,s,a,l,u){for(var c=a-s,d=kl._segmentsCount(Math.abs(c)*o,40*Math.ceil(Math.abs(c)/qc)),h=c/(2*d),f=2*h,p=Math.cos(h),_=Math.sin(h),m=d-1,g=m%1/m,b=0;b<=m;++b){var M=h+s+f*(b+g*b),S=Math.cos(M),T=-Math.sin(M);u.push((p*S+_*T)*o+r,(p*-T+_*S)*o+i)}},n}(),PC=function(){function n(){}return n.curveLength=function(e,t,r,i,o,s,a,l){for(var c=0,d=0,h=0,f=0,p=0,_=0,m=0,g=0,b=0,y=0,M=0,S=e,T=t,k=1;k<=10;++k)y=S-(g=(m=(_=(p=1-(d=k/10))*p)*p)*e+3*_*d*r+3*p*(h=d*d)*o+(f=h*d)*a),M=T-(b=m*t+3*_*d*i+3*p*h*s+f*l),S=g,T=b,c+=Math.sqrt(y*y+M*M);return c},n.curveTo=function(e,t,r,i,o,s,a){var l=a[a.length-2],u=a[a.length-1];a.length-=2;var c=kl._segmentsCount(n.curveLength(l,u,e,t,r,i,o,s)),d=0,h=0,f=0,p=0,_=0;a.push(l,u);for(var m=1,g=0;m<=c;++m)a.push((f=(h=(d=1-(g=m/c))*d)*d)*l+3*h*g*e+3*d*(p=g*g)*r+(_=p*g)*o,f*u+3*h*g*t+3*d*p*i+_*s)},n}(),NC=function(){function n(){}return n.curveLength=function(e,t,r,i,o,s){var a=e-2*r+o,l=t-2*i+s,u=2*r-2*e,c=2*i-2*t,d=4*(a*a+l*l),h=4*(a*u+l*c),f=u*u+c*c,p=2*Math.sqrt(d+h+f),_=Math.sqrt(d),m=2*d*_,g=2*Math.sqrt(f),b=h/_;return(m*p+_*h*(p-g)+(4*f*d-h*h)*Math.log((2*_+b+p)/(b+g)))/(4*m)},n.curveTo=function(e,t,r,i,o){for(var s=o[o.length-2],a=o[o.length-1],l=kl._segmentsCount(n.curveLength(s,a,e,t,r,i)),u=0,c=0,d=1;d<=l;++d){var h=d/l;o.push((u=s+(e-s)*h)+(e+(r-e)*h-u)*h,(c=a+(t-a)*h)+(t+(i-t)*h-c)*h)}},n}(),FC=function(){function n(){this.reset()}return n.prototype.begin=function(e,t,r){this.reset(),this.style=e,this.start=t,this.attribStart=r},n.prototype.end=function(e,t){this.attribSize=t-this.attribStart,this.size=e-this.start},n.prototype.reset=function(){this.style=null,this.size=0,this.start=0,this.attribStart=0,this.attribSize=0},n}(),Cd=((Xo={})[Rt.POLY]=qm,Xo[Rt.CIRC]=Ul,Xo[Rt.ELIP]=Ul,Xo[Rt.RECT]={build:function(n){var e=n.shape,t=e.x,r=e.y,i=e.width,o=e.height,s=n.points;s.length=0,s.push(t,r,t+i,r,t+i,r+o,t,r+o)},triangulate:function(n,e){var t=n.points,r=e.points,i=r.length/2;r.push(t[0],t[1],t[2],t[3],t[6],t[7],t[4],t[5]),e.indices.push(i,i+1,i+2,i+1,i+2,i+3)}},Xo[Rt.RREC]=IC,Xo),Zm=[],Vl=[],LC=function(){function n(e,t,r,i){void 0===t&&(t=null),void 0===r&&(r=null),void 0===i&&(i=null),this.points=[],this.holes=[],this.shape=e,this.lineStyle=r,this.fillStyle=t,this.matrix=i,this.type=e.type}return n.prototype.clone=function(){return new n(this.shape,this.fillStyle,this.lineStyle,this.matrix)},n.prototype.destroy=function(){this.shape=null,this.holes.length=0,this.holes=null,this.points.length=0,this.points=null,this.lineStyle=null,this.fillStyle=null},n}(),fa=new St,Q4=new wl,Z4=function(n){function e(){var t=n.call(this)||this;return t.closePointEps=1e-4,t.boundsPadding=0,t.uvsFloat32=null,t.indicesUint16=null,t.batchable=!1,t.points=[],t.colors=[],t.uvs=[],t.indices=[],t.textureIds=[],t.graphicsData=[],t.drawCalls=[],t.batchDirty=-1,t.batches=[],t.dirty=0,t.cacheDirty=-1,t.clearDirty=0,t.shapeIndex=0,t._bounds=new wl,t.boundsDirty=-1,t}return $m(e,n),Object.defineProperty(e.prototype,"bounds",{get:function(){return this.boundsDirty!==this.dirty&&(this.boundsDirty=this.dirty,this.calculateBounds()),this._bounds},enumerable:!1,configurable:!0}),e.prototype.invalidate=function(){this.boundsDirty=-1,this.dirty++,this.batchDirty++,this.shapeIndex=0,this.points.length=0,this.colors.length=0,this.uvs.length=0,this.indices.length=0,this.textureIds.length=0;for(var t=0;t<this.drawCalls.length;t++)this.drawCalls[t].texArray.clear(),Vl.push(this.drawCalls[t]);for(this.drawCalls.length=0,t=0;t<this.batches.length;t++){var r=this.batches[t];r.reset(),Zm.push(r)}this.batches.length=0},e.prototype.clear=function(){return this.graphicsData.length>0&&(this.invalidate(),this.clearDirty++,this.graphicsData.length=0),this},e.prototype.drawShape=function(t,r,i,o){void 0===r&&(r=null),void 0===i&&(i=null),void 0===o&&(o=null);var s=new LC(t,r,i,o);return this.graphicsData.push(s),this.dirty++,this},e.prototype.drawHole=function(t,r){if(void 0===r&&(r=null),!this.graphicsData.length)return null;var i=new LC(t,null,null,r),o=this.graphicsData[this.graphicsData.length-1];return i.lineStyle=o.lineStyle,o.holes.push(i),this.dirty++,this},e.prototype.destroy=function(){n.prototype.destroy.call(this);for(var t=0;t<this.graphicsData.length;++t)this.graphicsData[t].destroy();this.points.length=0,this.points=null,this.colors.length=0,this.colors=null,this.uvs.length=0,this.uvs=null,this.indices.length=0,this.indices=null,this.indexBuffer.destroy(),this.indexBuffer=null,this.graphicsData.length=0,this.graphicsData=null,this.drawCalls.length=0,this.drawCalls=null,this.batches.length=0,this.batches=null,this._bounds=null},e.prototype.containsPoint=function(t){for(var r=this.graphicsData,i=0;i<r.length;++i){var o=r[i];if(o.fillStyle.visible&&o.shape&&(o.matrix?o.matrix.applyInverse(t,fa):fa.copyFrom(t),o.shape.contains(fa.x,fa.y))){var s=!1;if(o.holes)for(var a=0;a<o.holes.length;a++)if(o.holes[a].shape.contains(fa.x,fa.y)){s=!0;break}if(!s)return!0}}return!1},e.prototype.updateBatches=function(t){if(this.graphicsData.length){if(this.validateBatching()){this.cacheDirty=this.dirty;var r=this.uvs,i=this.graphicsData,o=null,s=null;this.batches.length>0&&(s=(o=this.batches[this.batches.length-1]).style);for(var a=this.shapeIndex;a<i.length;a++){this.shapeIndex++;var l=i[a],u=l.fillStyle,c=l.lineStyle;Cd[l.type].build(l),l.matrix&&this.transformPoints(l.points,l.matrix),(u.visible||c.visible)&&this.processHoles(l.holes);for(var h=0;h<2;h++){var f=0===h?u:c;if(f.visible){var _=this.indices.length,m=this.points.length/2;f.texture.baseTexture.wrapMode=ai.REPEAT,0===h?this.processFill(l):this.processLine(l);var g=this.points.length/2-m;0!==g&&(o&&!this._compareStyles(s,f)&&(o.end(_,m),o=null),o||((o=Zm.pop()||new FC).begin(f,_,m),this.batches.push(o),s=f),this.addUvs(this.points,r,f.texture,m,g,f.matrix))}}}var y=this.points.length/2;if(o&&o.end(this.indices.length,y),0===this.batches.length)return void(this.batchable=!0);this.indicesUint16&&this.indices.length===this.indicesUint16.length?this.indicesUint16.set(this.indices):this.indicesUint16=y>65535&&t?new Uint32Array(this.indices):new Uint16Array(this.indices),this.batchable=this.isBatchable(),this.batchable?this.packBatches():this.buildDrawCalls()}}else this.batchable=!0},e.prototype._compareStyles=function(t,r){return!(!t||!r||t.texture.baseTexture!==r.texture.baseTexture||t.color+t.alpha!==r.color+r.alpha||!!t.native!=!!r.native)},e.prototype.validateBatching=function(){if(this.dirty===this.cacheDirty||!this.graphicsData.length)return!1;for(var t=0,r=this.graphicsData.length;t<r;t++){var i=this.graphicsData[t],o=i.fillStyle,s=i.lineStyle;if(o&&!o.texture.baseTexture.valid||s&&!s.texture.baseTexture.valid)return!1}return!0},e.prototype.packBatches=function(){this.batchDirty++,this.uvsFloat32=new Float32Array(this.uvs);for(var t=this.batches,r=0,i=t.length;r<i;r++)for(var o=t[r],s=0;s<o.size;s++){var a=o.start+s;this.indicesUint16[a]=this.indicesUint16[a]-o.attribStart}},e.prototype.isBatchable=function(){if(this.points.length>131070)return!1;for(var t=this.batches,r=0;r<t.length;r++)if(t[r].style.native)return!1;return this.points.length<2*e.BATCHABLE_SIZE},e.prototype.buildDrawCalls=function(){for(var t=++Xe._globalBatch,r=0;r<this.drawCalls.length;r++)this.drawCalls[r].texArray.clear(),Vl.push(this.drawCalls[r]);this.drawCalls.length=0;var i=this.colors,o=this.textureIds,s=Vl.pop();s||((s=new xm).texArray=new Rm),s.texArray.count=0,s.start=0,s.size=0,s.type=pr.TRIANGLES;var a=0,l=null,u=0,c=!1,d=pr.TRIANGLES,h=0;for(this.drawCalls.push(s),r=0;r<this.batches.length;r++){var f=this.batches[r],_=f.style,m=_.texture.baseTexture;c!==!!_.native&&(d=(c=!!_.native)?pr.LINES:pr.TRIANGLES,l=null,a=8,t++),l!==m&&(l=m,m._batchEnabled!==t&&(8===a&&(t++,a=0,s.size>0&&((s=Vl.pop())||((s=new xm).texArray=new Rm),this.drawCalls.push(s)),s.start=h,s.size=0,s.texArray.count=0,s.type=d),m.touched=1,m._batchEnabled=t,m._batchLocation=a,m.wrapMode=ai.REPEAT,s.texArray.elements[s.texArray.count++]=m,a++)),s.size+=f.size,h+=f.size,u=m._batchLocation,this.addColors(i,_.color,_.alpha,f.attribSize,f.attribStart),this.addTextureIds(o,u,f.attribSize,f.attribStart)}Xe._globalBatch=t,this.packAttributes()},e.prototype.packAttributes=function(){for(var t=this.points,r=this.uvs,i=this.colors,o=this.textureIds,s=new ArrayBuffer(3*t.length*4),a=new Float32Array(s),l=new Uint32Array(s),u=0,c=0;c<t.length/2;c++)a[u++]=t[2*c],a[u++]=t[2*c+1],a[u++]=r[2*c],a[u++]=r[2*c+1],l[u++]=i[c],a[u++]=o[c];this._buffer.update(s),this._indexBuffer.update(this.indicesUint16)},e.prototype.processFill=function(t){t.holes.length?qm.triangulate(t,this):Cd[t.type].triangulate(t,this)},e.prototype.processLine=function(t){Km(t,this);for(var r=0;r<t.holes.length;r++)Km(t.holes[r],this)},e.prototype.processHoles=function(t){for(var r=0;r<t.length;r++){var i=t[r];Cd[i.type].build(i),i.matrix&&this.transformPoints(i.points,i.matrix)}},e.prototype.calculateBounds=function(){var t=this._bounds,r=Q4,i=qt.IDENTITY;this._bounds.clear(),r.clear();for(var o=0;o<this.graphicsData.length;o++){var s=this.graphicsData[o],a=s.shape,l=s.type,u=s.lineStyle,c=s.matrix||qt.IDENTITY,d=0;u&&u.visible&&(d=u.width,d*=l!==Rt.POLY||s.fillStyle.visible?Math.max(0,u.alignment):Math.max(u.alignment,1-u.alignment)),i!==c&&(r.isEmpty()||(t.addBoundsMatrix(r,i),r.clear()),i=c),l===Rt.RECT||l===Rt.RREC?r.addFramePad(a.x,a.y,a.x+a.width,a.y+a.height,d,d):l===Rt.CIRC?r.addFramePad(a.x,a.y,a.x,a.y,a.radius+d,a.radius+d):l===Rt.ELIP?r.addFramePad(a.x,a.y,a.x,a.y,a.width+d,a.height+d):t.addVerticesMatrix(i,a.points,0,a.points.length,d,d)}r.isEmpty()||t.addBoundsMatrix(r,i),t.pad(this.boundsPadding,this.boundsPadding)},e.prototype.transformPoints=function(t,r){for(var i=0;i<t.length/2;i++){var o=t[2*i],s=t[2*i+1];t[2*i]=r.a*o+r.c*s+r.tx,t[2*i+1]=r.b*o+r.d*s+r.ty}},e.prototype.addColors=function(t,r,i,o,s){void 0===s&&(s=0);var l=tm((r>>16)+(65280&r)+((255&r)<<16),i);t.length=Math.max(t.length,s+o);for(var u=0;u<o;u++)t[s+u]=l},e.prototype.addTextureIds=function(t,r,i,o){void 0===o&&(o=0),t.length=Math.max(t.length,o+i);for(var s=0;s<i;s++)t[o+s]=r},e.prototype.addUvs=function(t,r,i,o,s,a){void 0===a&&(a=null);for(var l=0,u=r.length,c=i.frame;l<s;){var d=t[2*(o+l)],h=t[2*(o+l)+1];if(a){var f=a.a*d+a.c*h+a.tx;h=a.b*d+a.d*h+a.ty,d=f}l++,r.push(d/c.width,h/c.height)}var p=i.baseTexture;(c.width<p.width||c.height<p.height)&&this.adjustUvs(r,i,u,s)},e.prototype.adjustUvs=function(t,r,i,o){for(var s=r.baseTexture,a=1e-6,l=i+2*o,u=r.frame,c=u.width/s.width,d=u.height/s.height,h=u.x/u.width,f=u.y/u.height,p=Math.floor(t[i]+a),_=Math.floor(t[i+1]+a),m=i+2;m<l;m+=2)p=Math.min(p,Math.floor(t[m]+a)),_=Math.min(_,Math.floor(t[m+1]+a));for(h-=p,f-=_,m=i;m<l;m+=2)t[m]=(t[m]+h)*c,t[m+1]=(t[m+1]+f)*d},e.BATCHABLE_SIZE=100,e}(ZM),J4=function(n){function e(){var t=null!==n&&n.apply(this,arguments)||this;return t.width=0,t.alignment=.5,t.native=!1,t.cap=Bi.BUTT,t.join=Li.MITER,t.miterLimit=10,t}return $m(e,n),e.prototype.clone=function(){var t=new e;return t.color=this.color,t.alpha=this.alpha,t.texture=this.texture,t.matrix=this.matrix,t.visible=this.visible,t.width=this.width,t.alignment=this.alignment,t.native=this.native,t.cap=this.cap,t.join=this.join,t.miterLimit=this.miterLimit,t},e.prototype.reset=function(){n.prototype.reset.call(this),this.color=0,this.alignment=.5,this.width=0,this.native=!1},e}(wC),ej=new Float32Array(3),Jm={},Ad=function(n){function e(t){void 0===t&&(t=null);var r=n.call(this)||this;return r.shader=null,r.pluginName="batch",r.currentPath=null,r.batches=[],r.batchTint=-1,r.batchDirty=-1,r.vertexData=null,r._fillStyle=new wC,r._lineStyle=new J4,r._matrix=null,r._holeMode=!1,r.state=Yo.for2d(),r._geometry=t||new Z4,r._geometry.refCount++,r._transformID=-1,r.tint=16777215,r.blendMode=ge.NORMAL,r}return $m(e,n),Object.defineProperty(e.prototype,"geometry",{get:function(){return this._geometry},enumerable:!1,configurable:!0}),e.prototype.clone=function(){return this.finishPoly(),new e(this._geometry)},Object.defineProperty(e.prototype,"blendMode",{get:function(){return this.state.blendMode},set:function(t){this.state.blendMode=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"tint",{get:function(){return this._tint},set:function(t){this._tint=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"fill",{get:function(){return this._fillStyle},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"line",{get:function(){return this._lineStyle},enumerable:!1,configurable:!0}),e.prototype.lineStyle=function(t,r,i,o,s){return void 0===t&&(t=null),void 0===r&&(r=0),void 0===i&&(i=1),void 0===o&&(o=.5),void 0===s&&(s=!1),"number"==typeof t&&(t={width:t,color:r,alpha:i,alignment:o,native:s}),this.lineTextureStyle(t)},e.prototype.lineTextureStyle=function(t){t=Object.assign({width:0,texture:Ee.WHITE,color:t&&t.texture?16777215:0,alpha:1,matrix:null,alignment:.5,native:!1,cap:Bi.BUTT,join:Li.MITER,miterLimit:10},t),this.currentPath&&this.startPoly();var r=t.width>0&&t.alpha>0;return r?(t.matrix&&(t.matrix=t.matrix.clone(),t.matrix.invert()),Object.assign(this._lineStyle,{visible:r},t)):this._lineStyle.reset(),this},e.prototype.startPoly=function(){if(this.currentPath){var t=this.currentPath.points,r=this.currentPath.points.length;r>2&&(this.drawShape(this.currentPath),this.currentPath=new Qc,this.currentPath.closeStroke=!1,this.currentPath.points.push(t[r-2],t[r-1]))}else this.currentPath=new Qc,this.currentPath.closeStroke=!1},e.prototype.finishPoly=function(){this.currentPath&&(this.currentPath.points.length>2?(this.drawShape(this.currentPath),this.currentPath=null):this.currentPath.points.length=0)},e.prototype.moveTo=function(t,r){return this.startPoly(),this.currentPath.points[0]=t,this.currentPath.points[1]=r,this},e.prototype.lineTo=function(t,r){this.currentPath||this.moveTo(0,0);var i=this.currentPath.points;return(i[i.length-2]!==t||i[i.length-1]!==r)&&i.push(t,r),this},e.prototype._initCurve=function(t,r){void 0===t&&(t=0),void 0===r&&(r=0),this.currentPath?0===this.currentPath.points.length&&(this.currentPath.points=[t,r]):this.moveTo(t,r)},e.prototype.quadraticCurveTo=function(t,r,i,o){this._initCurve();var s=this.currentPath.points;return 0===s.length&&this.moveTo(0,0),NC.curveTo(t,r,i,o,s),this},e.prototype.bezierCurveTo=function(t,r,i,o,s,a){return this._initCurve(),PC.curveTo(t,r,i,o,s,a,this.currentPath.points),this},e.prototype.arcTo=function(t,r,i,o,s){this._initCurve(t,r);var l=Qm.curveTo(t,r,i,o,s,this.currentPath.points);return l&&this.arc(l.cx,l.cy,l.radius,l.startAngle,l.endAngle,l.anticlockwise),this},e.prototype.arc=function(t,r,i,o,s,a){if(void 0===a&&(a=!1),o===s)return this;if(!a&&s<=o?s+=qc:a&&o<=s&&(o+=qc),0==s-o)return this;var u=t+Math.cos(o)*i,c=r+Math.sin(o)*i,d=this._geometry.closePointEps,h=this.currentPath?this.currentPath.points:null;if(h){var f=Math.abs(h[h.length-2]-u),p=Math.abs(h[h.length-1]-c);f<d&&p<d||h.push(u,c)}else this.moveTo(u,c),h=this.currentPath.points;return Qm.arc(u,c,t,r,i,o,s,a,h),this},e.prototype.beginFill=function(t,r){return void 0===t&&(t=0),void 0===r&&(r=1),this.beginTextureFill({texture:Ee.WHITE,color:t,alpha:r})},e.prototype.beginTextureFill=function(t){t=Object.assign({texture:Ee.WHITE,color:16777215,alpha:1,matrix:null},t),this.currentPath&&this.startPoly();var r=t.alpha>0;return r?(t.matrix&&(t.matrix=t.matrix.clone(),t.matrix.invert()),Object.assign(this._fillStyle,{visible:r},t)):this._fillStyle.reset(),this},e.prototype.endFill=function(){return this.finishPoly(),this._fillStyle.reset(),this},e.prototype.drawRect=function(t,r,i,o){return this.drawShape(new Fe(t,r,i,o))},e.prototype.drawRoundedRect=function(t,r,i,o,s){return this.drawShape(new S3(t,r,i,o,s))},e.prototype.drawCircle=function(t,r,i){return this.drawShape(new T3(t,r,i))},e.prototype.drawEllipse=function(t,r,i,o){return this.drawShape(new D3(t,r,i,o))},e.prototype.drawPolygon=function(){for(var t=arguments,r=[],i=0;i<arguments.length;i++)r[i]=t[i];var o,s=!0,a=r[0];a.points?(s=a.closeStroke,o=a.points):o=Array.isArray(r[0])?r[0]:r;var l=new Qc(o);return l.closeStroke=s,this.drawShape(l),this},e.prototype.drawShape=function(t){return this._holeMode?this._geometry.drawHole(t,this._matrix):this._geometry.drawShape(t,this._fillStyle.clone(),this._lineStyle.clone(),this._matrix),this},e.prototype.clear=function(){return this._geometry.clear(),this._lineStyle.reset(),this._fillStyle.reset(),this._boundsID++,this._matrix=null,this._holeMode=!1,this.currentPath=null,this},e.prototype.isFastRect=function(){var t=this._geometry.graphicsData;return!(1!==t.length||t[0].shape.type!==Rt.RECT||t[0].matrix||t[0].holes.length||t[0].lineStyle.visible&&t[0].lineStyle.width)},e.prototype._render=function(t){this.finishPoly();var r=this._geometry;r.updateBatches(t.context.supports.uint32Indices),r.batchable?(this.batchDirty!==r.batchDirty&&this._populateBatches(),this._renderBatched(t)):(t.batch.flush(),this._renderDirect(t))},e.prototype._populateBatches=function(){var t=this._geometry,r=this.blendMode,i=t.batches.length;this.batchTint=-1,this._transformID=-1,this.batchDirty=t.batchDirty,this.batches.length=i,this.vertexData=new Float32Array(t.points);for(var o=0;o<i;o++){var s=t.batches[o],a=s.style.color,l=new Float32Array(this.vertexData.buffer,4*s.attribStart*2,2*s.attribSize),u=new Float32Array(t.uvsFloat32.buffer,4*s.attribStart*2,2*s.attribSize),d={vertexData:l,blendMode:r,indices:new Uint16Array(t.indicesUint16.buffer,2*s.start,s.size),uvs:u,_batchRGB:na(a),_tintRGB:a,_texture:s.style.texture,alpha:s.style.alpha,worldAlpha:1};this.batches[o]=d}},e.prototype._renderBatched=function(t){if(this.batches.length){t.batch.setObjectRenderer(t.plugins[this.pluginName]),this.calculateVertices(),this.calculateTints();for(var r=0,i=this.batches.length;r<i;r++){var o=this.batches[r];o.worldAlpha=this.worldAlpha*o.alpha,t.plugins[this.pluginName].render(o)}}},e.prototype._renderDirect=function(t){var r=this._resolveDirectShader(t),i=this._geometry,o=this.tint,s=this.worldAlpha,a=r.uniforms,l=i.drawCalls;a.translationMatrix=this.transform.worldTransform,a.tint[0]=(o>>16&255)/255*s,a.tint[1]=(o>>8&255)/255*s,a.tint[2]=(255&o)/255*s,a.tint[3]=s,t.shader.bind(r),t.geometry.bind(i,r),t.state.set(this.state);for(var u=0,c=l.length;u<c;u++)this._renderDrawCallDirect(t,i.drawCalls[u])},e.prototype._renderDrawCallDirect=function(t,r){for(var i=r.texArray,o=r.type,s=r.size,a=r.start,l=i.count,u=0;u<l;u++)t.texture.bind(i.elements[u],u);t.geometry.draw(o,s,a)},e.prototype._resolveDirectShader=function(t){var r=this.shader,i=this.pluginName;if(!r){if(!Jm[i]){for(var o=t.plugins[i].MAX_TEXTURES,s=new Int32Array(o),a=0;a<o;a++)s[a]=a;var l={tint:new Float32Array([1,1,1,1]),translationMatrix:new qt,default:jo.from({uSamplers:s},!0)};Jm[i]=new no(t.plugins[i]._shader.program,l)}r=Jm[i]}return r},e.prototype._calculateBounds=function(){this.finishPoly();var t=this._geometry;if(t.graphicsData.length){var r=t.bounds;this._bounds.addFrame(this.transform,r.minX,r.minY,r.maxX,r.maxY)}},e.prototype.containsPoint=function(t){return this.worldTransform.applyInverse(t,e._TEMP_POINT),this._geometry.containsPoint(e._TEMP_POINT)},e.prototype.calculateTints=function(){if(this.batchTint!==this.tint){this.batchTint=this.tint;for(var t=na(this.tint,ej),r=0;r<this.batches.length;r++){var i=this.batches[r],o=i._batchRGB,u=(t[0]*o[0]*255<<16)+(t[1]*o[1]*255<<8)+(0|t[2]*o[2]*255);i._tintRGB=(u>>16)+(65280&u)+((255&u)<<16)}}},e.prototype.calculateVertices=function(){var t=this.transform._worldID;if(this._transformID!==t){this._transformID=t;for(var r=this.transform.worldTransform,i=r.a,o=r.b,s=r.c,a=r.d,l=r.tx,u=r.ty,c=this._geometry.points,d=this.vertexData,h=0,f=0;f<c.length;f+=2){var p=c[f],_=c[f+1];d[h++]=i*p+s*_+l,d[h++]=a*_+o*p+u}}},e.prototype.closePath=function(){var t=this.currentPath;return t&&(t.closeStroke=!0,this.finishPoly()),this},e.prototype.setMatrix=function(t){return this._matrix=t,this},e.prototype.beginHole=function(){return this.finishPoly(),this._holeMode=!0,this},e.prototype.endHole=function(){return this.finishPoly(),this._holeMode=!1,this},e.prototype.destroy=function(t){this._geometry.refCount--,0===this._geometry.refCount&&this._geometry.dispose(),this._matrix=null,this.currentPath=null,this._lineStyle.destroy(),this._lineStyle=null,this._fillStyle.destroy(),this._fillStyle=null,this._geometry=null,this.shader=null,this.vertexData=null,this.batches.length=0,this.batches=null,n.prototype.destroy.call(this,t)},e.nextRoundedRectBehavior=!1,e._TEMP_POINT=new St,e}(ui),eg=function(n,e){return(eg=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var i in r)r.hasOwnProperty(i)&&(t[i]=r[i])})(n,e)},Gl=new St,nj=new Uint16Array([0,1,2,0,2,3]),ki=function(n){function e(t){var r=n.call(this)||this;return r._anchor=new ia(r._onAnchorUpdate,r,t?t.defaultAnchor.x:0,t?t.defaultAnchor.y:0),r._texture=null,r._width=0,r._height=0,r._tint=null,r._tintRGB=null,r.tint=16777215,r.blendMode=ge.NORMAL,r._cachedTint=16777215,r.uvs=null,r.texture=t||Ee.EMPTY,r.vertexData=new Float32Array(8),r.vertexTrimmedData=null,r._transformID=-1,r._textureID=-1,r._transformTrimmedID=-1,r._textureTrimmedID=-1,r.indices=nj,r.pluginName="batch",r.isSprite=!0,r._roundPixels=de.ROUND_PIXELS,r}return function tj(n,e){function t(){this.constructor=n}eg(n,e),n.prototype=null===e?Object.create(e):(t.prototype=e.prototype,new t)}(e,n),e.prototype._onTextureUpdate=function(){this._textureID=-1,this._textureTrimmedID=-1,this._cachedTint=16777215,this._width&&(this.scale.x=ra(this.scale.x)*this._width/this._texture.orig.width),this._height&&(this.scale.y=ra(this.scale.y)*this._height/this._texture.orig.height)},e.prototype._onAnchorUpdate=function(){this._transformID=-1,this._transformTrimmedID=-1},e.prototype.calculateVertices=function(){var t=this._texture;if(this._transformID!==this.transform._worldID||this._textureID!==t._updateID){this._textureID!==t._updateID&&(this.uvs=this._texture._uvs.uvsFloat32),this._transformID=this.transform._worldID,this._textureID=t._updateID;var r=this.transform.worldTransform,i=r.a,o=r.b,s=r.c,a=r.d,l=r.tx,u=r.ty,c=this.vertexData,d=t.trim,h=t.orig,f=this._anchor,p=0,_=0,m=0,g=0;if(d?(p=(_=d.x-f._x*h.width)+d.width,m=(g=d.y-f._y*h.height)+d.height):(p=(_=-f._x*h.width)+h.width,m=(g=-f._y*h.height)+h.height),c[0]=i*_+s*g+l,c[1]=a*g+o*_+u,c[2]=i*p+s*g+l,c[3]=a*g+o*p+u,c[4]=i*p+s*m+l,c[5]=a*m+o*p+u,c[6]=i*_+s*m+l,c[7]=a*m+o*_+u,this._roundPixels)for(var b=de.RESOLUTION,y=0;y<c.length;++y)c[y]=Math.round((c[y]*b|0)/b)}},e.prototype.calculateTrimmedVertices=function(){if(this.vertexTrimmedData){if(this._transformTrimmedID===this.transform._worldID&&this._textureTrimmedID===this._texture._updateID)return}else this.vertexTrimmedData=new Float32Array(8);this._transformTrimmedID=this.transform._worldID,this._textureTrimmedID=this._texture._updateID;var r=this.vertexTrimmedData,i=this._texture.orig,o=this._anchor,s=this.transform.worldTransform,a=s.a,l=s.b,u=s.c,c=s.d,d=s.tx,h=s.ty,f=-o._x*i.width,p=f+i.width,_=-o._y*i.height,m=_+i.height;r[0]=a*f+u*_+d,r[1]=c*_+l*f+h,r[2]=a*p+u*_+d,r[3]=c*_+l*p+h,r[4]=a*p+u*m+d,r[5]=c*m+l*p+h,r[6]=a*f+u*m+d,r[7]=c*m+l*f+h},e.prototype._render=function(t){this.calculateVertices(),t.batch.setObjectRenderer(t.plugins[this.pluginName]),t.plugins[this.pluginName].render(this)},e.prototype._calculateBounds=function(){var t=this._texture.trim,r=this._texture.orig;!t||t.width===r.width&&t.height===r.height?(this.calculateVertices(),this._bounds.addQuad(this.vertexData)):(this.calculateTrimmedVertices(),this._bounds.addQuad(this.vertexTrimmedData))},e.prototype.getLocalBounds=function(t){return 0===this.children.length?(this._localBounds||(this._localBounds=new wl),this._localBounds.minX=this._texture.orig.width*-this._anchor._x,this._localBounds.minY=this._texture.orig.height*-this._anchor._y,this._localBounds.maxX=this._texture.orig.width*(1-this._anchor._x),this._localBounds.maxY=this._texture.orig.height*(1-this._anchor._y),t||(this._localBoundsRect||(this._localBoundsRect=new Fe),t=this._localBoundsRect),this._localBounds.getRectangle(t)):n.prototype.getLocalBounds.call(this,t)},e.prototype.containsPoint=function(t){this.worldTransform.applyInverse(t,Gl);var r=this._texture.orig.width,i=this._texture.orig.height,o=-r*this.anchor.x,s=0;return Gl.x>=o&&Gl.x<o+r&&Gl.y>=(s=-i*this.anchor.y)&&Gl.y<s+i},e.prototype.destroy=function(t){n.prototype.destroy.call(this,t),this._texture.off("update",this._onTextureUpdate,this),this._anchor=null,("boolean"==typeof t?t:t&&t.texture)&&this._texture.destroy(!!("boolean"==typeof t?t:t&&t.baseTexture)),this._texture=null},e.from=function(t,r){return new e(t instanceof Ee?t:Ee.from(t,r))},Object.defineProperty(e.prototype,"roundPixels",{get:function(){return this._roundPixels},set:function(t){this._roundPixels!==t&&(this._transformID=-1),this._roundPixels=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"width",{get:function(){return Math.abs(this.scale.x)*this._texture.orig.width},set:function(t){var r=ra(this.scale.x)||1;this.scale.x=r*t/this._texture.orig.width,this._width=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return Math.abs(this.scale.y)*this._texture.orig.height},set:function(t){var r=ra(this.scale.y)||1;this.scale.y=r*t/this._texture.orig.height,this._height=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"anchor",{get:function(){return this._anchor},set:function(t){this._anchor.copyFrom(t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"tint",{get:function(){return this._tint},set:function(t){this._tint=t,this._tintRGB=(t>>16)+(65280&t)+((255&t)<<16)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"texture",{get:function(){return this._texture},set:function(t){this._texture!==t&&(this._texture&&this._texture.off("update",this._onTextureUpdate,this),this._texture=t||Ee.EMPTY,this._cachedTint=16777215,this._textureID=-1,this._textureTrimmedID=-1,t&&(t.baseTexture.valid?this._onTextureUpdate():t.once("update",this._onTextureUpdate,this)))},enumerable:!1,configurable:!0}),e}(ui),tg=function(n,e){return(tg=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var i in r)r.hasOwnProperty(i)&&(t[i]=r[i])})(n,e)},pa=(()=>(function(n){n[n.LINEAR_VERTICAL=0]="LINEAR_VERTICAL",n[n.LINEAR_HORIZONTAL=1]="LINEAR_HORIZONTAL"}(pa||(pa={})),pa))(),ng={align:"left",breakWords:!1,dropShadow:!1,dropShadowAlpha:1,dropShadowAngle:Math.PI/6,dropShadowBlur:0,dropShadowColor:"black",dropShadowDistance:5,fill:"black",fillGradientType:pa.LINEAR_VERTICAL,fillGradientStops:[],fontFamily:"Arial",fontSize:26,fontStyle:"normal",fontVariant:"normal",fontWeight:"normal",letterSpacing:0,lineHeight:0,lineJoin:"miter",miterLimit:10,padding:0,stroke:"black",strokeThickness:0,textBaseline:"alphabetic",trim:!1,whiteSpace:"pre",wordWrap:!1,wordWrapWidth:100,leading:0},ij=["serif","sans-serif","monospace","cursive","fantasy","system-ui"],_a=function(){function n(e){this.styleID=0,this.reset(),ig(this,e,e)}return n.prototype.clone=function(){var e={};return ig(e,this,ng),new n(e)},n.prototype.reset=function(){ig(this,ng,ng)},Object.defineProperty(n.prototype,"align",{get:function(){return this._align},set:function(e){this._align!==e&&(this._align=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"breakWords",{get:function(){return this._breakWords},set:function(e){this._breakWords!==e&&(this._breakWords=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"dropShadow",{get:function(){return this._dropShadow},set:function(e){this._dropShadow!==e&&(this._dropShadow=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"dropShadowAlpha",{get:function(){return this._dropShadowAlpha},set:function(e){this._dropShadowAlpha!==e&&(this._dropShadowAlpha=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"dropShadowAngle",{get:function(){return this._dropShadowAngle},set:function(e){this._dropShadowAngle!==e&&(this._dropShadowAngle=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"dropShadowBlur",{get:function(){return this._dropShadowBlur},set:function(e){this._dropShadowBlur!==e&&(this._dropShadowBlur=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"dropShadowColor",{get:function(){return this._dropShadowColor},set:function(e){var t=rg(e);this._dropShadowColor!==t&&(this._dropShadowColor=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"dropShadowDistance",{get:function(){return this._dropShadowDistance},set:function(e){this._dropShadowDistance!==e&&(this._dropShadowDistance=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"fill",{get:function(){return this._fill},set:function(e){var t=rg(e);this._fill!==t&&(this._fill=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"fillGradientType",{get:function(){return this._fillGradientType},set:function(e){this._fillGradientType!==e&&(this._fillGradientType=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"fillGradientStops",{get:function(){return this._fillGradientStops},set:function(e){(function oj(n,e){if(!Array.isArray(n)||!Array.isArray(e)||n.length!==e.length)return!1;for(var t=0;t<n.length;++t)if(n[t]!==e[t])return!1;return!0})(this._fillGradientStops,e)||(this._fillGradientStops=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"fontFamily",{get:function(){return this._fontFamily},set:function(e){this.fontFamily!==e&&(this._fontFamily=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"fontSize",{get:function(){return this._fontSize},set:function(e){this._fontSize!==e&&(this._fontSize=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"fontStyle",{get:function(){return this._fontStyle},set:function(e){this._fontStyle!==e&&(this._fontStyle=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"fontVariant",{get:function(){return this._fontVariant},set:function(e){this._fontVariant!==e&&(this._fontVariant=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"fontWeight",{get:function(){return this._fontWeight},set:function(e){this._fontWeight!==e&&(this._fontWeight=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"letterSpacing",{get:function(){return this._letterSpacing},set:function(e){this._letterSpacing!==e&&(this._letterSpacing=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"lineHeight",{get:function(){return this._lineHeight},set:function(e){this._lineHeight!==e&&(this._lineHeight=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"leading",{get:function(){return this._leading},set:function(e){this._leading!==e&&(this._leading=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"lineJoin",{get:function(){return this._lineJoin},set:function(e){this._lineJoin!==e&&(this._lineJoin=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"miterLimit",{get:function(){return this._miterLimit},set:function(e){this._miterLimit!==e&&(this._miterLimit=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"padding",{get:function(){return this._padding},set:function(e){this._padding!==e&&(this._padding=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"stroke",{get:function(){return this._stroke},set:function(e){var t=rg(e);this._stroke!==t&&(this._stroke=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"strokeThickness",{get:function(){return this._strokeThickness},set:function(e){this._strokeThickness!==e&&(this._strokeThickness=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"textBaseline",{get:function(){return this._textBaseline},set:function(e){this._textBaseline!==e&&(this._textBaseline=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"trim",{get:function(){return this._trim},set:function(e){this._trim!==e&&(this._trim=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"whiteSpace",{get:function(){return this._whiteSpace},set:function(e){this._whiteSpace!==e&&(this._whiteSpace=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"wordWrap",{get:function(){return this._wordWrap},set:function(e){this._wordWrap!==e&&(this._wordWrap=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"wordWrapWidth",{get:function(){return this._wordWrapWidth},set:function(e){this._wordWrapWidth!==e&&(this._wordWrapWidth=e,this.styleID++)},enumerable:!1,configurable:!0}),n.prototype.toFontString=function(){var e="number"==typeof this.fontSize?this.fontSize+"px":this.fontSize,t=this.fontFamily;Array.isArray(this.fontFamily)||(t=this.fontFamily.split(","));for(var r=t.length-1;r>=0;r--){var i=t[r].trim();!/([\"\'])[^\'\"]+\1/.test(i)&&ij.indexOf(i)<0&&(i='"'+i+'"'),t[r]=i}return this.fontStyle+" "+this.fontVariant+" "+this.fontWeight+" "+e+" "+t.join(",")},n}();function BC(n){return"number"==typeof n?$S(n):("string"==typeof n&&0===n.indexOf("0x")&&(n=n.replace("0x","#")),n)}function rg(n){if(Array.isArray(n)){for(var e=0;e<n.length;++e)n[e]=BC(n[e]);return n}return BC(n)}function ig(n,e,t){for(var r in t)n[r]=Array.isArray(e[r])?e[r].slice():e[r]}var hi=function(){function n(e,t,r,i,o,s,a,l,u){this.text=e,this.style=t,this.width=r,this.height=i,this.lines=o,this.lineWidths=s,this.lineHeight=a,this.maxLineWidth=l,this.fontProperties=u}return n.measureText=function(e,t,r,i){void 0===i&&(i=n._canvas),r=null==r?t.wordWrap:r;var o=t.toFontString(),s=n.measureFont(o);0===s.fontSize&&(s.fontSize=t.fontSize,s.ascent=t.fontSize);var a=i.getContext("2d");a.font=o;for(var u=(r?n.wordWrap(e,t,i):e).split(/(?:\r\n|\r|\n)/),c=new Array(u.length),d=0,h=0;h<u.length;h++){var f=a.measureText(u[h]).width+(u[h].length-1)*t.letterSpacing;c[h]=f,d=Math.max(d,f)}var p=d+t.strokeThickness;t.dropShadow&&(p+=t.dropShadowDistance);var _=t.lineHeight||s.fontSize+t.strokeThickness,m=Math.max(_,s.fontSize+t.strokeThickness)+(u.length-1)*(_+t.leading);return t.dropShadow&&(m+=t.dropShadowDistance),new n(e,t,p,m,u,c,_+t.leading,d,s)},n.wordWrap=function(e,t,r){void 0===r&&(r=n._canvas);for(var i=r.getContext("2d"),o=0,s="",a="",l=Object.create(null),u=t.letterSpacing,c=t.whiteSpace,d=n.collapseSpaces(c),h=n.collapseNewlines(c),f=!d,p=t.wordWrapWidth+u,_=n.tokenize(e),m=0;m<_.length;m++){var g=_[m];if(n.isNewline(g)){if(!h){a+=n.addLine(s),f=!d,s="",o=0;continue}g=" "}if(d){var b=n.isBreakingSpace(g),y=n.isBreakingSpace(s[s.length-1]);if(b&&y)continue}var M=n.getFromCache(g,u,l,i);if(M>p)if(""!==s&&(a+=n.addLine(s),s="",o=0),n.canBreakWords(g,t.breakWords))for(var S=n.wordWrapSplit(g),T=0;T<S.length;T++){for(var k=S[T],Q=1;S[T+Q];){var B=S[T+Q];if(n.canBreakChars(k[k.length-1],B,g,T,t.breakWords))break;k+=B,Q++}T+=k.length-1;var ce=n.getFromCache(k,u,l,i);ce+o>p&&(a+=n.addLine(s),f=!1,s="",o=0),s+=k,o+=ce}else s.length>0&&(a+=n.addLine(s),s="",o=0),a+=n.addLine(g,!(m===_.length-1)),f=!1,s="",o=0;else M+o>p&&(f=!1,a+=n.addLine(s),s="",o=0),(s.length>0||!n.isBreakingSpace(g)||f)&&(s+=g,o+=M)}return a+n.addLine(s,!1)},n.addLine=function(e,t){return void 0===t&&(t=!0),e=n.trimRight(e),t?e+"\n":e},n.getFromCache=function(e,t,r,i){var o=r[e];if("number"!=typeof o){var s=e.length*t;o=i.measureText(e).width+s,r[e]=o}return o},n.collapseSpaces=function(e){return"normal"===e||"pre-line"===e},n.collapseNewlines=function(e){return"normal"===e},n.trimRight=function(e){if("string"!=typeof e)return"";for(var t=e.length-1;t>=0&&n.isBreakingSpace(e[t]);t--)e=e.slice(0,-1);return e},n.isNewline=function(e){return"string"==typeof e&&n._newlines.indexOf(e.charCodeAt(0))>=0},n.isBreakingSpace=function(e,t){return"string"==typeof e&&n._breakingSpaces.indexOf(e.charCodeAt(0))>=0},n.tokenize=function(e){var t=[],r="";if("string"!=typeof e)return t;for(var i=0;i<e.length;i++){var o=e[i];n.isBreakingSpace(o,e[i+1])||n.isNewline(o)?(""!==r&&(t.push(r),r=""),t.push(o)):r+=o}return""!==r&&t.push(r),t},n.canBreakWords=function(e,t){return t},n.canBreakChars=function(e,t,r,i,o){return!0},n.wordWrapSplit=function(e){return e.split("")},n.measureFont=function(e){if(n._fonts[e])return n._fonts[e];var t={ascent:0,descent:0,fontSize:0},r=n._canvas,i=n._context;i.font=e;var o=n.METRICS_STRING+n.BASELINE_SYMBOL,s=Math.ceil(i.measureText(o).width),a=Math.ceil(i.measureText(n.BASELINE_SYMBOL).width),l=Math.ceil(n.HEIGHT_MULTIPLIER*a);a=a*n.BASELINE_MULTIPLIER|0,r.width=s,r.height=l,i.fillStyle="#f00",i.fillRect(0,0,s,l),i.font=e,i.textBaseline="alphabetic",i.fillStyle="#000",i.fillText(o,0,a);var u=i.getImageData(0,0,s,l).data,c=u.length,d=4*s,h=0,f=0,p=!1;for(h=0;h<a;++h){for(var _=0;_<d;_+=4)if(255!==u[f+_]){p=!0;break}if(p)break;f+=d}for(t.ascent=a-h,f=c-d,p=!1,h=l;h>a;--h){for(_=0;_<d;_+=4)if(255!==u[f+_]){p=!0;break}if(p)break;f-=d}return t.descent=h-a,t.fontSize=t.ascent+t.descent,n._fonts[e]=t,t},n.clearMetrics=function(e){void 0===e&&(e=""),e?delete n._fonts[e]:n._fonts={}},Object.defineProperty(n,"_canvas",{get:function(){if(!n.__canvas){var e=void 0;try{var t=new OffscreenCanvas(0,0),r=t.getContext("2d");if(r&&r.measureText)return n.__canvas=t,t;e=document.createElement("canvas")}catch(i){e=document.createElement("canvas")}e.width=e.height=10,n.__canvas=e}return n.__canvas},enumerable:!1,configurable:!0}),Object.defineProperty(n,"_context",{get:function(){return n.__context||(n.__context=n._canvas.getContext("2d")),n.__context},enumerable:!1,configurable:!0}),n}();hi._fonts={},hi.METRICS_STRING="|\xc9q\xc5",hi.BASELINE_SYMBOL="M",hi.BASELINE_MULTIPLIER=1.4,hi.HEIGHT_MULTIPLIER=2,hi._newlines=[10,13],hi._breakingSpaces=[9,32,8192,8193,8194,8195,8196,8197,8198,8200,8201,8202,8287,12288];var sj={texture:!0,children:!1,baseTexture:!0},kC=function(n){function e(t,r,i){var o=this,s=!1;i||(i=document.createElement("canvas"),s=!0),i.width=3,i.height=3;var a=Ee.from(i);return a.orig=new Fe,a.trim=new Fe,(o=n.call(this,a)||this)._ownCanvas=s,o.canvas=i,o.context=o.canvas.getContext("2d"),o._resolution=de.RESOLUTION,o._autoResolution=!0,o._text=null,o._style=null,o._styleListener=null,o._font="",o.text=t,o.style=r,o.localStyleID=-1,o}return function rj(n,e){function t(){this.constructor=n}tg(n,e),n.prototype=null===e?Object.create(e):(t.prototype=e.prototype,new t)}(e,n),e.prototype.updateText=function(t){var r=this._style;if(this.localStyleID!==r.styleID&&(this.dirty=!0,this.localStyleID=r.styleID),this.dirty||!t){this._font=this._style.toFontString();var i=this.context,o=hi.measureText(this._text||" ",this._style,this._style.wordWrap,this.canvas),a=o.height,l=o.lines,u=o.lineHeight,c=o.lineWidths,d=o.maxLineWidth,h=o.fontProperties;this.canvas.width=Math.ceil(Math.ceil(Math.max(1,o.width)+2*r.padding)*this._resolution),this.canvas.height=Math.ceil(Math.ceil(Math.max(1,a)+2*r.padding)*this._resolution),i.scale(this._resolution,this._resolution),i.clearRect(0,0,this.canvas.width,this.canvas.height),i.font=this._font,i.lineWidth=r.strokeThickness,i.textBaseline=r.textBaseline,i.lineJoin=r.lineJoin,i.miterLimit=r.miterLimit;for(var f,p,_=r.dropShadow?2:1,m=0;m<_;++m){var g=r.dropShadow&&0===m,b=g?Math.ceil(Math.max(1,a)+2*r.padding):0,y=b*this._resolution;if(g){i.fillStyle="black",i.strokeStyle="black";var M=r.dropShadowColor,S=na("number"==typeof M?M:qS(M)),T=r.dropShadowBlur*this._resolution,k=r.dropShadowDistance*this._resolution;i.shadowColor="rgba("+255*S[0]+","+255*S[1]+","+255*S[2]+","+r.dropShadowAlpha+")",i.shadowBlur=T,i.shadowOffsetX=Math.cos(r.dropShadowAngle)*k,i.shadowOffsetY=Math.sin(r.dropShadowAngle)*k+y}else i.fillStyle=this._generateFillStyle(r,l,o),i.strokeStyle=r.stroke,i.shadowColor="black",i.shadowBlur=0,i.shadowOffsetX=0,i.shadowOffsetY=0;var Q=(u-h.fontSize)/2;(!e.nextLineHeightBehavior||u-h.fontSize<0)&&(Q=0);for(var B=0;B<l.length;B++)f=r.strokeThickness/2,p=r.strokeThickness/2+B*u+h.ascent+Q,"right"===r.align?f+=d-c[B]:"center"===r.align&&(f+=(d-c[B])/2),r.stroke&&r.strokeThickness&&this.drawLetterSpacing(l[B],f+r.padding,p+r.padding-b,!0),r.fill&&this.drawLetterSpacing(l[B],f+r.padding,p+r.padding-b)}this.updateTexture()}},e.prototype.drawLetterSpacing=function(t,r,i,o){void 0===o&&(o=!1);var a=this._style.letterSpacing,l=e.experimentalLetterSpacing&&("letterSpacing"in CanvasRenderingContext2D.prototype||"textLetterSpacing"in CanvasRenderingContext2D.prototype);if(0===a||l)return l&&(this.context.letterSpacing=a,this.context.textLetterSpacing=a),void(o?this.context.strokeText(t,r,i):this.context.fillText(t,r,i));for(var u=r,c=Array.from?Array.from(t):t.split(""),d=this.context.measureText(t).width,h=0,f=0;f<c.length;++f){var p=c[f];o?this.context.strokeText(p,u,i):this.context.fillText(p,u,i);for(var _="",m=f+1;m<c.length;++m)_+=c[m];u+=d-(h=this.context.measureText(_).width)+a,d=h}},e.prototype.updateTexture=function(){var t=this.canvas;if(this._style.trim){var r=function y3(n){var u,c,d,e=n.width,t=n.height,r=n.getContext("2d"),o=r.getImageData(0,0,e,t).data,s=o.length,a={top:null,left:null,right:null,bottom:null},l=null;for(u=0;u<s;u+=4)0!==o[u+3]&&(c=u/4%e,d=~~(u/4/e),null===a.top&&(a.top=d),(null===a.left||c<a.left)&&(a.left=c),(null===a.right||a.right<c)&&(a.right=c+1),(null===a.bottom||a.bottom<d)&&(a.bottom=d));return null!==a.top&&(l=r.getImageData(a.left,a.top,e=a.right-a.left,t=a.bottom-a.top+1)),{height:t,width:e,data:l}}(t);r.data&&(t.width=r.width,t.height=r.height,this.context.putImageData(r.data,0,0))}var i=this._texture,o=this._style,s=o.trim?0:o.padding,a=i.baseTexture;i.trim.width=i._frame.width=t.width/this._resolution,i.trim.height=i._frame.height=t.height/this._resolution,i.trim.x=-s,i.trim.y=-s,i.orig.width=i._frame.width-2*s,i.orig.height=i._frame.height-2*s,this._onTextureUpdate(),a.setRealSize(t.width,t.height,this._resolution),i.updateUvs(),this.dirty=!1},e.prototype._render=function(t){this._autoResolution&&this._resolution!==t.resolution&&(this._resolution=t.resolution,this.dirty=!0),this.updateText(!0),n.prototype._render.call(this,t)},e.prototype.updateTransform=function(){this.updateText(!0),n.prototype.updateTransform.call(this)},e.prototype.getBounds=function(t,r){return this.updateText(!0),-1===this._textureID&&(t=!1),n.prototype.getBounds.call(this,t,r)},e.prototype.getLocalBounds=function(t){return this.updateText(!0),n.prototype.getLocalBounds.call(this,t)},e.prototype._calculateBounds=function(){this.calculateVertices(),this._bounds.addQuad(this.vertexData)},e.prototype._generateFillStyle=function(t,r,i){var o=t.fill;if(!Array.isArray(o))return o;if(1===o.length)return o[0];var s,a=t.dropShadow?t.dropShadowDistance:0,l=t.padding||0,u=this.canvas.width/this._resolution-a-2*l,c=this.canvas.height/this._resolution-a-2*l,d=o.slice(),h=t.fillGradientStops.slice();if(!h.length)for(var f=d.length+1,p=1;p<f;++p)h.push(p/f);if(d.unshift(o[0]),h.unshift(0),d.push(o[o.length-1]),h.push(1),t.fillGradientType===pa.LINEAR_VERTICAL){s=this.context.createLinearGradient(u/2,l,u/2,c+l);var _=i.fontProperties.fontSize+t.strokeThickness;for(p=0;p<r.length;p++){var m=i.lineHeight*(p-1)+_,g=i.lineHeight*p,b=g;p>0&&m>g&&(b=(g+m)/2);var y=g+_,M=i.lineHeight*(p+1),S=y;p+1<r.length&&M<y&&(S=(y+M)/2);for(var T=(S-b)/c,k=0;k<d.length;k++){var B=Math.min(1,Math.max(0,b/c+("number"==typeof h[k]?h[k]:k/d.length)*T));B=Number(B.toFixed(5)),s.addColorStop(B,d[k])}}}else{s=this.context.createLinearGradient(l,c/2,u+l,c/2);var U=d.length+1,ce=1;for(p=0;p<d.length;p++)s.addColorStop("number"==typeof h[p]?h[p]:ce/U,d[p]),ce++}return s},e.prototype.destroy=function(t){"boolean"==typeof t&&(t={children:t}),t=Object.assign({},sj,t),n.prototype.destroy.call(this,t),this._ownCanvas&&(this.canvas.height=this.canvas.width=0),this.context=null,this.canvas=null,this._style=null},Object.defineProperty(e.prototype,"width",{get:function(){return this.updateText(!0),Math.abs(this.scale.x)*this._texture.orig.width},set:function(t){this.updateText(!0);var r=ra(this.scale.x)||1;this.scale.x=r*t/this._texture.orig.width,this._width=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this.updateText(!0),Math.abs(this.scale.y)*this._texture.orig.height},set:function(t){this.updateText(!0);var r=ra(this.scale.y)||1;this.scale.y=r*t/this._texture.orig.height,this._height=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"style",{get:function(){return this._style},set:function(t){this._style=(t=t||{})instanceof _a?t:new _a(t),this.localStyleID=-1,this.dirty=!0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"text",{get:function(){return this._text},set:function(t){t=String(null==t?"":t),this._text!==t&&(this._text=t,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"resolution",{get:function(){return this._resolution},set:function(t){this._autoResolution=!1,this._resolution!==t&&(this._resolution=t,this.dirty=!0)},enumerable:!1,configurable:!0}),e.nextLineHeightBehavior=!1,e.experimentalLetterSpacing=!1,e}(ki);de.UPLOADS_PER_FRAME=4;var og=function(n,e){return(og=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var i in r)r.hasOwnProperty(i)&&(t[i]=r[i])})(n,e)},lj=function(){function n(e){this.maxItemsPerFrame=e,this.itemsLeft=0}return n.prototype.beginFrame=function(){this.itemsLeft=this.maxItemsPerFrame},n.prototype.allowedToUpload=function(){return this.itemsLeft-- >0},n}();function uj(n,e){var t=!1;if(n&&n._textures&&n._textures.length)for(var r=0;r<n._textures.length;r++)if(n._textures[r]instanceof Ee){var i=n._textures[r].baseTexture;-1===e.indexOf(i)&&(e.push(i),t=!0)}return t}function cj(n,e){if(n.baseTexture instanceof Xe){var t=n.baseTexture;return-1===e.indexOf(t)&&e.push(t),!0}return!1}function dj(n,e){if(n._texture&&n._texture instanceof Ee){var t=n._texture.baseTexture;return-1===e.indexOf(t)&&e.push(t),!0}return!1}function hj(n,e){return e instanceof kC&&(e.updateText(!0),!0)}function fj(n,e){if(e instanceof _a){var t=e.toFontString();return hi.measureFont(t),!0}return!1}function pj(n,e){if(n instanceof kC){-1===e.indexOf(n.style)&&e.push(n.style),-1===e.indexOf(n)&&e.push(n);var t=n._texture.baseTexture;return-1===e.indexOf(t)&&e.push(t),!0}return!1}function _j(n,e){return n instanceof _a&&(-1===e.indexOf(n)&&e.push(n),!0)}var mj=function(){function n(e){var t=this;this.limiter=new lj(de.UPLOADS_PER_FRAME),this.renderer=e,this.uploadHookHelper=null,this.queue=[],this.addHooks=[],this.uploadHooks=[],this.completes=[],this.ticking=!1,this.delayedTick=function(){!t.queue||t.prepareItems()},this.registerFindHook(pj),this.registerFindHook(_j),this.registerFindHook(uj),this.registerFindHook(cj),this.registerFindHook(dj),this.registerUploadHook(hj),this.registerUploadHook(fj)}return n.prototype.upload=function(e,t){"function"==typeof e&&(t=e,e=null),e&&this.add(e),this.queue.length?(t&&this.completes.push(t),this.ticking||(this.ticking=!0,vn.system.addOnce(this.tick,this,ci.UTILITY))):t&&t()},n.prototype.tick=function(){setTimeout(this.delayedTick,0)},n.prototype.prepareItems=function(){for(this.limiter.beginFrame();this.queue.length&&this.limiter.allowedToUpload();){var e=this.queue[0],t=!1;if(e&&!e._destroyed)for(var r=0,i=this.uploadHooks.length;r<i;r++)if(this.uploadHooks[r](this.uploadHookHelper,e)){this.queue.shift(),t=!0;break}t||this.queue.shift()}if(this.queue.length)vn.system.addOnce(this.tick,this,ci.UTILITY);else{this.ticking=!1;var o=this.completes.slice(0);for(this.completes.length=0,r=0,i=o.length;r<i;r++)o[r]()}},n.prototype.registerFindHook=function(e){return e&&this.addHooks.push(e),this},n.prototype.registerUploadHook=function(e){return e&&this.uploadHooks.push(e),this},n.prototype.add=function(e){for(var t=0,r=this.addHooks.length;t<r&&!this.addHooks[t](e,this.queue);t++);if(e instanceof ui)for(t=e.children.length-1;t>=0;t--)this.add(e.children[t]);return this},n.prototype.destroy=function(){this.ticking&&vn.system.remove(this.tick,this),this.ticking=!1,this.addHooks=null,this.uploadHooks=null,this.renderer=null,this.completes=null,this.queue=null,this.limiter=null,this.uploadHookHelper=null},n}();function UC(n,e){return e instanceof Xe&&(e._glTextures[n.CONTEXT_UID]||n.texture.bind(e),!0)}function gj(n,e){if(!(e instanceof Ad))return!1;var t=e.geometry;e.finishPoly(),t.updateBatches();for(var r=t.batches,i=0;i<r.length;i++){var o=r[i].style.texture;o&&UC(n,o.baseTexture)}return t.batchable||n.geometry.bind(t,e._resolveDirectShader(n)),!0}function vj(n,e){return n instanceof Ad&&(e.push(n),!0)}var yj=function(n){function e(t){var r=n.call(this,t)||this;return r.uploadHookHelper=r.renderer,r.registerFindHook(vj),r.registerUploadHook(UC),r.registerUploadHook(gj),r}return function aj(n,e){function t(){this.constructor=n}og(n,e),n.prototype=null===e?Object.create(e):(t.prototype=e.prototype,new t)}(e,n),e}(mj),Ej=(function(){function n(e){this.maxMilliseconds=e,this.frameStart=0}n.prototype.beginFrame=function(){this.frameStart=Date.now()},n.prototype.allowedToUpload=function(){return Date.now()-this.frameStart<this.maxMilliseconds}}(),function(){function n(e,t,r){void 0===r&&(r=null),this._texture=e instanceof Ee?e:null,this.baseTexture=e instanceof Xe?e:this._texture.baseTexture,this.textures={},this.animations={},this.data=t;var i=this.baseTexture.resource;this.resolution=this._updateResolution(r||(i?i.url:null)),this._frames=this.data.frames,this._frameKeys=Object.keys(this._frames),this._batchIndex=0,this._callback=null}return n.prototype._updateResolution=function(e){void 0===e&&(e=null);var t=this.data.meta.scale,r=$c(e,null);return null===r&&(r=void 0!==t?parseFloat(t):1),1!==r&&this.baseTexture.setResolution(r),r},n.prototype.parse=function(e){this._batchIndex=0,this._callback=e,this._frameKeys.length<=n.BATCH_SIZE?(this._processFrames(0),this._processAnimations(),this._parseComplete()):this._nextBatch()},n.prototype._processFrames=function(e){for(var t=e,r=n.BATCH_SIZE;t-e<r&&t<this._frameKeys.length;){var i=this._frameKeys[t],o=this._frames[i],s=o.frame;if(s){var a,l=null,u=!1!==o.trimmed&&o.sourceSize?o.sourceSize:o.frame,c=new Fe(0,0,Math.floor(u.w)/this.resolution,Math.floor(u.h)/this.resolution);a=o.rotated?new Fe(Math.floor(s.x)/this.resolution,Math.floor(s.y)/this.resolution,Math.floor(s.h)/this.resolution,Math.floor(s.w)/this.resolution):new Fe(Math.floor(s.x)/this.resolution,Math.floor(s.y)/this.resolution,Math.floor(s.w)/this.resolution,Math.floor(s.h)/this.resolution),!1!==o.trimmed&&o.spriteSourceSize&&(l=new Fe(Math.floor(o.spriteSourceSize.x)/this.resolution,Math.floor(o.spriteSourceSize.y)/this.resolution,Math.floor(s.w)/this.resolution,Math.floor(s.h)/this.resolution)),this.textures[i]=new Ee(this.baseTexture,a,c,l,o.rotated?2:0,o.anchor),Ee.addToCache(this.textures[i],i)}t++}},n.prototype._processAnimations=function(){var e=this.data.animations||{};for(var t in e){this.animations[t]=[];for(var r=0;r<e[t].length;r++)this.animations[t].push(this.textures[e[t][r]])}},n.prototype._parseComplete=function(){var e=this._callback;this._callback=null,this._batchIndex=0,e.call(this,this.textures)},n.prototype._nextBatch=function(){var e=this;this._processFrames(this._batchIndex*n.BATCH_SIZE),this._batchIndex++,setTimeout(function(){e._batchIndex*n.BATCH_SIZE<e._frameKeys.length?e._nextBatch():(e._processAnimations(),e._parseComplete())},0)},n.prototype.destroy=function(e){var t;for(var r in void 0===e&&(e=!1),this.textures)this.textures[r].destroy();this._frames=null,this._frameKeys=null,this.data=null,this.textures=null,e&&(null===(t=this._texture)||void 0===t||t.destroy(),this.baseTexture.destroy()),this._texture=null,this.baseTexture=null},n.BATCH_SIZE=1e3,n}()),bj=function(){function n(){}return n.use=function(e,t){var r,i,o=this,s=e.name+"_image";if(e.data&&e.type===zt.TYPE.JSON&&e.data.frames&&!o.resources[s]){var a=null===(i=null===(r=e.data)||void 0===r?void 0:r.meta)||void 0===i?void 0:i.related_multi_packs;if(Array.isArray(a))for(var l=function(p){if("string"!=typeof p)return"continue";var _=p.replace(".json",""),m=ta.resolve(e.url.replace(o.baseUrl,""),p);if(o.resources[_]||Object.values(o.resources).some(function(b){return ta.format(ta.parse(b.url))===m}))return"continue";o.add(_,m,{crossOrigin:e.crossOrigin,loadType:zt.LOAD_TYPE.XHR,xhrType:zt.XHR_RESPONSE_TYPE.JSON,parentResource:e,metadata:e.metadata})},u=0,c=a;u<c.length;u++)l(c[u]);var h={crossOrigin:e.crossOrigin,metadata:e.metadata.imageMetadata,parentResource:e},f=n.getResourcePath(e,o.baseUrl);o.add(s,f,h,function(_){if(_.error)t(_.error);else{var m=new Ej(_.texture,e.data,e.url);m.parse(function(){e.spritesheet=m,e.textures=m.textures,t()})}})}else t()},n.getResourcePath=function(e,t){return e.isDataUrl?e.data.meta.image:ta.resolve(e.url.replace(t,""),e.data.meta.image)},n}(),sg=function(n,e){return(sg=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var i in r)r.hasOwnProperty(i)&&(t[i]=r[i])})(n,e)};function VC(n,e){function t(){this.constructor=n}sg(n,e),n.prototype=null===e?Object.create(e):(t.prototype=e.prototype,new t)}var Hl=new St,GC=(function(n){function e(t,r,i){void 0===r&&(r=100),void 0===i&&(i=100);var o=n.call(this,t)||this;return o.tileTransform=new im,o._width=r,o._height=i,o.uvMatrix=o.texture.uvMatrix||new Cm(t),o.pluginName="tilingSprite",o.uvRespectAnchor=!1,o}VC(e,n),Object.defineProperty(e.prototype,"clampMargin",{get:function(){return this.uvMatrix.clampMargin},set:function(t){this.uvMatrix.clampMargin=t,this.uvMatrix.update(!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"tileScale",{get:function(){return this.tileTransform.scale},set:function(t){this.tileTransform.scale.copyFrom(t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"tilePosition",{get:function(){return this.tileTransform.position},set:function(t){this.tileTransform.position.copyFrom(t)},enumerable:!1,configurable:!0}),e.prototype._onTextureUpdate=function(){this.uvMatrix&&(this.uvMatrix.texture=this._texture),this._cachedTint=16777215},e.prototype._render=function(t){var r=this._texture;!r||!r.valid||(this.tileTransform.updateLocalTransform(),this.uvMatrix.update(),t.batch.setObjectRenderer(t.plugins[this.pluginName]),t.plugins[this.pluginName].render(this))},e.prototype._calculateBounds=function(){this._bounds.addFrame(this.transform,this._width*-this._anchor._x,this._height*-this._anchor._y,this._width*(1-this._anchor._x),this._height*(1-this._anchor._y))},e.prototype.getLocalBounds=function(t){return 0===this.children.length?(this._bounds.minX=this._width*-this._anchor._x,this._bounds.minY=this._height*-this._anchor._y,this._bounds.maxX=this._width*(1-this._anchor._x),this._bounds.maxY=this._height*(1-this._anchor._y),t||(this._localBoundsRect||(this._localBoundsRect=new Fe),t=this._localBoundsRect),this._bounds.getRectangle(t)):n.prototype.getLocalBounds.call(this,t)},e.prototype.containsPoint=function(t){this.worldTransform.applyInverse(t,Hl);var r=this._width,i=this._height,o=-r*this.anchor._x;if(Hl.x>=o&&Hl.x<o+r){var s=-i*this.anchor._y;if(Hl.y>=s&&Hl.y<s+i)return!0}return!1},e.prototype.destroy=function(t){n.prototype.destroy.call(this,t),this.tileTransform=null,this.uvMatrix=null},e.from=function(t,r){return new e(t instanceof Ee?t:Ee.from(t,r),r.width,r.height)},Object.defineProperty(e.prototype,"width",{get:function(){return this._width},set:function(t){this._width=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this._height},set:function(t){this._height=t},enumerable:!1,configurable:!0})}(ki),"#version 100\n#define SHADER_NAME Tiling-Sprite-100\n\nprecision lowp float;\n\nattribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 translationMatrix;\nuniform mat3 uTransform;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = (uTransform * vec3(aTextureCoord, 1.0)).xy;\n}\n"),wd=new qt,Cj=function(n){function e(t){var r=n.call(this,t)||this;return t.runners.contextChange.add(r),r.quad=new TM,r.state=Yo.for2d(),r}return VC(e,n),e.prototype.contextChange=function(){var t=this.renderer,r={globals:t.globalUniforms};this.simpleShader=no.from(GC,"#version 100\n#define SHADER_NAME Tiling-Sprite-Simple-100\n\nprecision lowp float;\n\nvarying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform vec4 uColor;\n\nvoid main(void)\n{\n    vec4 texSample = texture2D(uSampler, vTextureCoord);\n    gl_FragColor = texSample * uColor;\n}\n",r),this.shader=t.context.webGLVersion>1?no.from("#version 300 es\n#define SHADER_NAME Tiling-Sprite-300\n\nprecision lowp float;\n\nin vec2 aVertexPosition;\nin vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 translationMatrix;\nuniform mat3 uTransform;\n\nout vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = (uTransform * vec3(aTextureCoord, 1.0)).xy;\n}\n","#version 300 es\n#define SHADER_NAME Tiling-Sprite-100\n\nprecision lowp float;\n\nin vec2 vTextureCoord;\n\nout vec4 fragmentColor;\n\nuniform sampler2D uSampler;\nuniform vec4 uColor;\nuniform mat3 uMapCoord;\nuniform vec4 uClampFrame;\nuniform vec2 uClampOffset;\n\nvoid main(void)\n{\n    vec2 coord = vTextureCoord + ceil(uClampOffset - vTextureCoord);\n    coord = (uMapCoord * vec3(coord, 1.0)).xy;\n    vec2 unclamped = coord;\n    coord = clamp(coord, uClampFrame.xy, uClampFrame.zw);\n\n    vec4 texSample = texture(uSampler, coord, unclamped == coord ? 0.0f : -32.0f);// lod-bias very negative to force lod 0\n\n    fragmentColor = texSample * uColor;\n}\n",r):no.from(GC,"#version 100\n#ifdef GL_EXT_shader_texture_lod\n    #extension GL_EXT_shader_texture_lod : enable\n#endif\n#define SHADER_NAME Tiling-Sprite-100\n\nprecision lowp float;\n\nvarying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform vec4 uColor;\nuniform mat3 uMapCoord;\nuniform vec4 uClampFrame;\nuniform vec2 uClampOffset;\n\nvoid main(void)\n{\n    vec2 coord = vTextureCoord + ceil(uClampOffset - vTextureCoord);\n    coord = (uMapCoord * vec3(coord, 1.0)).xy;\n    vec2 unclamped = coord;\n    coord = clamp(coord, uClampFrame.xy, uClampFrame.zw);\n\n    #ifdef GL_EXT_shader_texture_lod\n        vec4 texSample = unclamped == coord\n            ? texture2D(uSampler, coord) \n            : texture2DLodEXT(uSampler, coord, 0);\n    #else\n        vec4 texSample = texture2D(uSampler, coord);\n    #endif\n\n    gl_FragColor = texSample * uColor;\n}\n",r)},e.prototype.render=function(t){var r=this.renderer,i=this.quad,o=i.vertices;o[0]=o[6]=t._width*-t.anchor.x,o[1]=o[3]=t._height*-t.anchor.y,o[2]=o[4]=t._width*(1-t.anchor.x),o[5]=o[7]=t._height*(1-t.anchor.y);var s=t.uvRespectAnchor?t.anchor.x:0,a=t.uvRespectAnchor?t.anchor.y:0;(o=i.uvs)[0]=o[6]=-s,o[1]=o[3]=-a,o[2]=o[4]=1-s,o[5]=o[7]=1-a,i.invalidate();var l=t._texture,u=l.baseTexture,c=t.tileTransform.localTransform,d=t.uvMatrix,h=u.isPowerOfTwo&&l.frame.width===u.width&&l.frame.height===u.height;h&&(u._glTextures[r.CONTEXT_UID]?h=u.wrapMode!==ai.CLAMP:u.wrapMode===ai.CLAMP&&(u.wrapMode=ai.REPEAT));var f=h?this.simpleShader:this.shader,p=l.width,_=l.height,m=t._width,g=t._height;wd.set(c.a*p/m,c.b*p/g,c.c*_/m,c.d*_/g,c.tx/m,c.ty/g),wd.invert(),h?wd.prepend(d.mapCoord):(f.uniforms.uMapCoord=d.mapCoord.toArray(!0),f.uniforms.uClampFrame=d.uClampFrame,f.uniforms.uClampOffset=d.uClampOffset),f.uniforms.uTransform=wd.toArray(!0),f.uniforms.uColor=ZS(t.tint,t.worldAlpha,f.uniforms.uColor,u.alphaMode),f.uniforms.translationMatrix=t.transform.worldTransform.toArray(!0),f.uniforms.uSampler=l,r.shader.bind(f),r.geometry.bind(i),this.state.blendMode=QS(t.blendMode,u.alphaMode),r.state.set(this.state),r.geometry.draw(this.renderer.gl.TRIANGLES,6,0)},e}(sd),ag=function(n,e){return(ag=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var i in r)r.hasOwnProperty(i)&&(t[i]=r[i])})(n,e)};function lg(n,e){function t(){this.constructor=n}ag(n,e),n.prototype=null===e?Object.create(e):(t.prototype=e.prototype,new t)}var Aj=function(){function n(e,t){this.uvBuffer=e,this.uvMatrix=t,this.data=null,this._bufferUpdateId=-1,this._textureUpdateId=-1,this._updateID=0}return n.prototype.update=function(e){if(e||this._bufferUpdateId!==this.uvBuffer._updateID||this._textureUpdateId!==this.uvMatrix._updateID){this._bufferUpdateId=this.uvBuffer._updateID,this._textureUpdateId=this.uvMatrix._updateID;var t=this.uvBuffer.data;(!this.data||this.data.length!==t.length)&&(this.data=new Float32Array(t.length)),this.uvMatrix.multiplyUvs(t,this.data),this._updateID++}},n}(),ug=new St,HC=new Qc,jl=function(n){function e(t,r,i,o){void 0===o&&(o=pr.TRIANGLES);var s=n.call(this)||this;return s.geometry=t,s.shader=r,s.state=i||Yo.for2d(),s.drawMode=o,s.start=0,s.size=0,s.uvs=null,s.indices=null,s.vertexData=new Float32Array(1),s.vertexDirty=-1,s._transformID=-1,s._roundPixels=de.ROUND_PIXELS,s.batchUvs=null,s}return lg(e,n),Object.defineProperty(e.prototype,"geometry",{get:function(){return this._geometry},set:function(t){this._geometry!==t&&(this._geometry&&(this._geometry.refCount--,0===this._geometry.refCount&&this._geometry.dispose()),this._geometry=t,this._geometry&&this._geometry.refCount++,this.vertexDirty=-1)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"uvBuffer",{get:function(){return this.geometry.buffers[1]},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"verticesBuffer",{get:function(){return this.geometry.buffers[0]},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"material",{get:function(){return this.shader},set:function(t){this.shader=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"blendMode",{get:function(){return this.state.blendMode},set:function(t){this.state.blendMode=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"roundPixels",{get:function(){return this._roundPixels},set:function(t){this._roundPixels!==t&&(this._transformID=-1),this._roundPixels=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"tint",{get:function(){return"tint"in this.shader?this.shader.tint:null},set:function(t){this.shader.tint=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"texture",{get:function(){return"texture"in this.shader?this.shader.texture:null},set:function(t){this.shader.texture=t},enumerable:!1,configurable:!0}),e.prototype._render=function(t){this.shader.batchable&&this.drawMode===pr.TRIANGLES&&this.geometry.buffers[0].data.length<2*e.BATCHABLE_SIZE?this._renderToBatch(t):this._renderDefault(t)},e.prototype._renderDefault=function(t){var r=this.shader;r.alpha=this.worldAlpha,r.update&&r.update(),t.batch.flush(),r.uniforms.translationMatrix=this.transform.worldTransform.toArray(!0),t.shader.bind(r),t.state.set(this.state),t.geometry.bind(this.geometry,r),t.geometry.draw(this.drawMode,this.size,this.start,this.geometry.instanceCount)},e.prototype._renderToBatch=function(t){var r=this.geometry,i=this.shader;i.uvMatrix&&(i.uvMatrix.update(),this.calculateUvs()),this.calculateVertices(),this.indices=r.indexBuffer.data,this._tintRGB=i._tintRGB,this._texture=i.texture;var o=this.material.pluginName;t.batch.setObjectRenderer(t.plugins[o]),t.plugins[o].render(this)},e.prototype.calculateVertices=function(){var r=this.geometry.buffers[0],i=r.data,o=r._updateID;if(o!==this.vertexDirty||this._transformID!==this.transform._worldID){this._transformID=this.transform._worldID,this.vertexData.length!==i.length&&(this.vertexData=new Float32Array(i.length));for(var s=this.transform.worldTransform,a=s.a,l=s.b,u=s.c,c=s.d,d=s.tx,h=s.ty,f=this.vertexData,p=0;p<f.length/2;p++){var _=i[2*p],m=i[2*p+1];f[2*p]=a*_+u*m+d,f[2*p+1]=l*_+c*m+h}if(this._roundPixels){var g=de.RESOLUTION;for(p=0;p<f.length;++p)f[p]=Math.round((f[p]*g|0)/g)}this.vertexDirty=o}},e.prototype.calculateUvs=function(){var t=this.geometry.buffers[1],r=this.shader;r.uvMatrix.isSimple?this.uvs=t.data:(this.batchUvs||(this.batchUvs=new Aj(t,r.uvMatrix)),this.batchUvs.update(),this.uvs=this.batchUvs.data)},e.prototype._calculateBounds=function(){this.calculateVertices(),this._bounds.addVertexData(this.vertexData,0,this.vertexData.length)},e.prototype.containsPoint=function(t){if(!this.getBounds().contains(t.x,t.y))return!1;this.worldTransform.applyInverse(t,ug);for(var r=this.geometry.getBuffer("aVertexPosition").data,i=HC.points,o=this.geometry.getIndex().data,s=o.length,a=4===this.drawMode?3:1,l=0;l+2<s;l+=a){var u=2*o[l],c=2*o[l+1],d=2*o[l+2];if(i[0]=r[u],i[1]=r[u+1],i[2]=r[c],i[3]=r[c+1],i[4]=r[d],i[5]=r[d+1],HC.contains(ug.x,ug.y))return!0}return!1},e.prototype.destroy=function(t){n.prototype.destroy.call(this,t),this._cachedTexture&&(this._cachedTexture.destroy(),this._cachedTexture=null),this.geometry=null,this.shader=null,this.state=null,this.uvs=null,this.indices=null,this.vertexData=null},e.BATCHABLE_SIZE=100,e}(ui),Yl=function(n){function e(t,r){var i=this,o={uSampler:t,alpha:1,uTextureMatrix:qt.IDENTITY,uColor:new Float32Array([1,1,1,1])};return(r=Object.assign({tint:16777215,alpha:1,pluginName:"batch"},r)).uniforms&&Object.assign(o,r.uniforms),(i=n.call(this,r.program||Ol.from("attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 translationMatrix;\nuniform mat3 uTextureMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = (uTextureMatrix * vec3(aTextureCoord, 1.0)).xy;\n}\n","varying vec2 vTextureCoord;\nuniform vec4 uColor;\n\nuniform sampler2D uSampler;\n\nvoid main(void)\n{\n    gl_FragColor = texture2D(uSampler, vTextureCoord) * uColor;\n}\n"),o)||this)._colorDirty=!1,i.uvMatrix=new Cm(t),i.batchable=void 0===r.program,i.pluginName=r.pluginName,i.tint=r.tint,i.alpha=r.alpha,i}return lg(e,n),Object.defineProperty(e.prototype,"texture",{get:function(){return this.uniforms.uSampler},set:function(t){this.uniforms.uSampler!==t&&(!this.uniforms.uSampler.baseTexture.alphaMode!=!t.baseTexture.alphaMode&&(this._colorDirty=!0),this.uniforms.uSampler=t,this.uvMatrix.texture=t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"alpha",{get:function(){return this._alpha},set:function(t){t!==this._alpha&&(this._alpha=t,this._colorDirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"tint",{get:function(){return this._tint},set:function(t){t!==this._tint&&(this._tint=t,this._tintRGB=(t>>16)+(65280&t)+((255&t)<<16),this._colorDirty=!0)},enumerable:!1,configurable:!0}),e.prototype.update=function(){this._colorDirty&&(this._colorDirty=!1,ZS(this._tint,this._alpha,this.uniforms.uColor,this.texture.baseTexture.alphaMode)),this.uvMatrix.update()&&(this.uniforms.uTextureMatrix=this.uvMatrix.mapCoord)},e}(no),xd=function(n){function e(t,r,i){var o=n.call(this)||this,s=new un(t),a=new un(r,!0),l=new un(i,!0,!0);return o.addAttribute("aVertexPosition",s,2,!1,pe.FLOAT).addAttribute("aTextureCoord",a,2,!1,pe.FLOAT).addIndex(l),o._updateId=-1,o}return lg(e,n),Object.defineProperty(e.prototype,"vertexDirtyId",{get:function(){return this.buffers[0]._updateID},enumerable:!1,configurable:!0}),e}(xl),cg=function(n,e){return(cg=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var i in r)r.hasOwnProperty(i)&&(t[i]=r[i])})(n,e)},Rd=function n(){this.info=[],this.common=[],this.page=[],this.char=[],this.kerning=[],this.distanceField=[]},Ij=function(){function n(){}return n.test=function(e){return"string"==typeof e&&0===e.indexOf("info face=")},n.parse=function(e){var t=e.match(/^[a-z]+\s+.+$/gm),r={info:[],common:[],page:[],char:[],chars:[],kerning:[],kernings:[],distanceField:[]};for(var i in t){var o=t[i].match(/^[a-z]+/gm)[0],s=t[i].match(/[a-zA-Z]+=([^\s"']+|"([^"]*)")/gm),a={};for(var l in s){var u=s[l].split("="),c=u[0],d=u[1].replace(/"/gm,""),h=parseFloat(d),f=isNaN(h)?d:h;a[c]=f}r[o].push(a)}var p=new Rd;return r.info.forEach(function(_){return p.info.push({face:_.face,size:parseInt(_.size,10)})}),r.common.forEach(function(_){return p.common.push({lineHeight:parseInt(_.lineHeight,10)})}),r.page.forEach(function(_){return p.page.push({id:parseInt(_.id,10),file:_.file})}),r.char.forEach(function(_){return p.char.push({id:parseInt(_.id,10),page:parseInt(_.page,10),x:parseInt(_.x,10),y:parseInt(_.y,10),width:parseInt(_.width,10),height:parseInt(_.height,10),xoffset:parseInt(_.xoffset,10),yoffset:parseInt(_.yoffset,10),xadvance:parseInt(_.xadvance,10)})}),r.kerning.forEach(function(_){return p.kerning.push({first:parseInt(_.first,10),second:parseInt(_.second,10),amount:parseInt(_.amount,10)})}),r.distanceField.forEach(function(_){return p.distanceField.push({distanceRange:parseInt(_.distanceRange,10),fieldType:_.fieldType})}),p},n}(),dg=function(){function n(){}return n.test=function(e){return e instanceof XMLDocument&&e.getElementsByTagName("page").length&&null!==e.getElementsByTagName("info")[0].getAttribute("face")},n.parse=function(e){for(var t=new Rd,r=e.getElementsByTagName("info"),i=e.getElementsByTagName("common"),o=e.getElementsByTagName("page"),s=e.getElementsByTagName("char"),a=e.getElementsByTagName("kerning"),l=e.getElementsByTagName("distanceField"),u=0;u<r.length;u++)t.info.push({face:r[u].getAttribute("face"),size:parseInt(r[u].getAttribute("size"),10)});for(u=0;u<i.length;u++)t.common.push({lineHeight:parseInt(i[u].getAttribute("lineHeight"),10)});for(u=0;u<o.length;u++)t.page.push({id:parseInt(o[u].getAttribute("id"),10)||0,file:o[u].getAttribute("file")});for(u=0;u<s.length;u++){var c=s[u];t.char.push({id:parseInt(c.getAttribute("id"),10),page:parseInt(c.getAttribute("page"),10)||0,x:parseInt(c.getAttribute("x"),10),y:parseInt(c.getAttribute("y"),10),width:parseInt(c.getAttribute("width"),10),height:parseInt(c.getAttribute("height"),10),xoffset:parseInt(c.getAttribute("xoffset"),10),yoffset:parseInt(c.getAttribute("yoffset"),10),xadvance:parseInt(c.getAttribute("xadvance"),10)})}for(u=0;u<a.length;u++)t.kerning.push({first:parseInt(a[u].getAttribute("first"),10),second:parseInt(a[u].getAttribute("second"),10),amount:parseInt(a[u].getAttribute("amount"),10)});for(u=0;u<l.length;u++)t.distanceField.push({fieldType:l[u].getAttribute("fieldType"),distanceRange:parseInt(l[u].getAttribute("distanceRange"),10)});return t},n}(),Oj=function(){function n(){}return n.test=function(e){if("string"==typeof e&&e.indexOf("<font>")>-1){var t=(new globalThis.DOMParser).parseFromString(e,"text/xml");return dg.test(t)}return!1},n.parse=function(e){var t=(new globalThis.DOMParser).parseFromString(e,"text/xml");return dg.parse(t)},n}(),hg=[Ij,dg,Oj];function jC(n){for(var e=0;e<hg.length;e++)if(hg[e].test(n))return hg[e];return null}function Nj(n,e,t,r,i,o,s){var a=t.text,l=t.fontProperties;e.translate(r,i),e.scale(o,o);var u=s.strokeThickness/2,c=-s.strokeThickness/2;if(e.font=s.toFontString(),e.lineWidth=s.strokeThickness,e.textBaseline=s.textBaseline,e.lineJoin=s.lineJoin,e.miterLimit=s.miterLimit,e.fillStyle=function Pj(n,e,t,r,i,o){var s=t.fill;if(!Array.isArray(s))return s;if(1===s.length)return s[0];var a,l=t.dropShadow?t.dropShadowDistance:0,u=t.padding||0,c=n.width/r-l-2*u,d=n.height/r-l-2*u,h=s.slice(),f=t.fillGradientStops.slice();if(!f.length)for(var p=h.length+1,_=1;_<p;++_)f.push(_/p);if(h.unshift(s[0]),f.unshift(0),h.push(s[s.length-1]),f.push(1),t.fillGradientType===pa.LINEAR_VERTICAL){a=e.createLinearGradient(c/2,u,c/2,d+u);var m=0,b=(o.fontProperties.fontSize+t.strokeThickness)/d;for(_=0;_<i.length;_++)for(var y=o.lineHeight*_,M=0;M<h.length;M++){var k=Math.max(m,y/d+("number"==typeof f[M]?f[M]:M/h.length)*b);k=Math.min(k,1),a.addColorStop(k,h[M]),m=k}}else{a=e.createLinearGradient(u,d/2,c+u,d/2);var Q=h.length+1,B=1;for(_=0;_<h.length;_++)a.addColorStop("number"==typeof f[_]?f[_]:B/Q,h[_]),B++}return a}(n,e,s,o,[a],t),e.strokeStyle=s.stroke,s.dropShadow){var d=s.dropShadowColor,h=na("number"==typeof d?d:qS(d)),f=s.dropShadowBlur*o,p=s.dropShadowDistance*o;e.shadowColor="rgba("+255*h[0]+","+255*h[1]+","+255*h[2]+","+s.dropShadowAlpha+")",e.shadowBlur=f,e.shadowOffsetX=Math.cos(s.dropShadowAngle)*p,e.shadowOffsetY=Math.sin(s.dropShadowAngle)*p}else e.shadowColor="black",e.shadowBlur=0,e.shadowOffsetX=0,e.shadowOffsetY=0;s.stroke&&s.strokeThickness&&e.strokeText(a,u,c+t.lineHeight-l.descent),s.fill&&e.fillText(a,u,c+t.lineHeight-l.descent),e.setTransform(1,0,0,1,0,0),e.fillStyle="rgba(0, 0, 0, 0)"}function YC(n){return Array.from?Array.from(n):n.split("")}function Id(n){return n.codePointAt?n.codePointAt(0):n.charCodeAt(0)}var ma=function(){function n(e,t,r){var i,o,s=e.info[0],a=e.common[0],u=e.distanceField[0],c=$c(e.page[0].file),d={};this._ownsTextures=r,this.font=s.face,this.size=s.size,this.lineHeight=a.lineHeight/c,this.chars={},this.pageTextures=d;for(var h=0;h<e.page.length;h++){var f=e.page[h];d[p=f.id]=t instanceof Array?t[h]:t[f.file],(null==u?void 0:u.fieldType)&&"none"!==u.fieldType&&(d[p].baseTexture.alphaMode=_r.NO_PREMULTIPLIED_ALPHA)}for(h=0;h<e.char.length;h++){var m=e.char[h],p=m.id,g=m.page,b=e.char[h],y=b.x,M=b.y,S=b.width,T=b.height,k=b.xoffset,Q=b.yoffset,B=b.xadvance;k/=c,Q/=c,B/=c;var U=new Fe((y/=c)+d[g].frame.x/c,(M/=c)+d[g].frame.y/c,S/=c,T/=c);this.chars[p]={xOffset:k,yOffset:Q,xAdvance:B,kerning:{},texture:new Ee(d[g].baseTexture,U),page:g}}for(h=0;h<e.kerning.length;h++){var ce=e.kerning[h],he=ce.first,we=ce.second,Je=ce.amount;he/=c,Je/=c,this.chars[we/=c]&&(this.chars[we].kerning[he]=Je)}this.distanceFieldRange=null==u?void 0:u.distanceRange,this.distanceFieldType=null!==(o=null===(i=null==u?void 0:u.fieldType)||void 0===i?void 0:i.toLowerCase())&&void 0!==o?o:"none"}return n.prototype.destroy=function(){for(var e in this.chars)this.chars[e].texture.destroy(),this.chars[e].texture=null;for(var e in this.pageTextures)this._ownsTextures&&this.pageTextures[e].destroy(!0),this.pageTextures[e]=null;this.chars=null,this.pageTextures=null},n.install=function(e,t,r){var i;if(e instanceof Rd)i=e;else{var o=jC(e);if(!o)throw new Error("Unrecognized data format for font.");i=o.parse(e)}t instanceof Ee&&(t=[t]);var s=new n(i,t,r);return n.available[s.font]=s,s},n.uninstall=function(e){var t=n.available[e];if(!t)throw new Error("No font found named '"+e+"'");t.destroy(),delete n.available[e]},n.from=function(e,t,r){if(!e)throw new Error("[BitmapFont] Property `name` is required.");var i=Object.assign({},n.defaultOptions,r),s=i.padding,a=i.resolution,l=i.textureWidth,u=i.textureHeight,c=function Fj(n){"string"==typeof n&&(n=[n]);for(var e=[],t=0,r=n.length;t<r;t++){var i=n[t];if(Array.isArray(i)){if(2!==i.length)throw new Error("[BitmapFont]: Invalid character range length, expecting 2 got "+i.length+".");var o=i[0].charCodeAt(0),s=i[1].charCodeAt(0);if(s<o)throw new Error("[BitmapFont]: Invalid character range.");for(var a=o,l=s;a<=l;a++)e.push(String.fromCharCode(a))}else e.push.apply(e,YC(i))}if(0===e.length)throw new Error("[BitmapFont]: Empty set when resolving characters.");return e}(i.chars),d=t instanceof _a?t:new _a(t),h=l,f=new Rd;f.info[0]={face:d.fontFamily,size:d.fontSize},f.common[0]={lineHeight:d.fontSize};for(var m,g,b,p=0,_=0,y=0,M=[],S=0;S<c.length;S++){m||((m=document.createElement("canvas")).width=l,m.height=u,g=m.getContext("2d"),b=new Xe(m,{resolution:a}),M.push(new Ee(b)),f.page.push({id:M.length-1,file:""}));var T=hi.measureText(c[S],d,!1,m),k=T.width,Q=Math.ceil(T.height),B=Math.ceil(("italic"===d.fontStyle?2:1)*k);if(_>=u-Q*a){if(0===_)throw new Error("[BitmapFont] textureHeight "+u+"px is too small for "+d.fontSize+"px fonts");--S,m=null,g=null,b=null,_=0,p=0,y=0}else if(y=Math.max(Q+T.fontProperties.descent,y),B*a+p>=h)--S,_+=y*a,_=Math.ceil(_),p=0,y=0;else{Nj(m,g,T,p,_,a,d);var U=Id(T.text);f.char.push({id:U,page:M.length-1,x:p/a,y:_/a,width:B,height:Q,xoffset:0,yoffset:0,xadvance:Math.ceil(k-(d.dropShadow?d.dropShadowDistance:0)-(d.stroke?d.strokeThickness:0))}),p+=(B+2*s)*a,p=Math.ceil(p)}}S=0;for(var ce=c.length;S<ce;S++)for(var he=c[S],we=0;we<ce;we++){var Je=c[we],oe=g.measureText(he).width,N=g.measureText(Je).width,q=g.measureText(he+Je).width-(oe+N);q&&f.kerning.push({first:Id(he),second:Id(Je),amount:q})}var J=new n(f,M,!0);return void 0!==n.available[e]&&n.uninstall(e),n.available[e]=J,J},n.ALPHA=[["a","z"],["A","Z"]," "],n.NUMERIC=[["0","9"]],n.ALPHANUMERIC=[["a","z"],["A","Z"],["0","9"]," "],n.ASCII=[[" ","~"]],n.defaultOptions={resolution:1,textureWidth:512,textureHeight:512,padding:4,chars:n.ALPHANUMERIC},n.available={},n}(),kj=[],Uj=[],zC=[],Vj=(function(n){function e(t,r){void 0===r&&(r={});var i=n.call(this)||this;i._tint=16777215;var o=Object.assign({},e.styleDefaults,r),s=o.align,a=o.tint,l=o.maxWidth,u=o.letterSpacing,c=o.fontName,d=o.fontSize;if(!ma.available[c])throw new Error('Missing BitmapFont "'+c+'"');return i._activePagesMeshData=[],i._textWidth=0,i._textHeight=0,i._align=s,i._tint=a,i._fontName=c,i._fontSize=d||ma.available[c].size,i.text=t,i._maxWidth=l,i._maxLineHeight=0,i._letterSpacing=u,i._anchor=new ia(function(){i.dirty=!0},i,0,0),i._roundPixels=de.ROUND_PIXELS,i.dirty=!0,i._resolution=de.RESOLUTION,i._autoResolution=!0,i._textureCache={},i}(function Rj(n,e){function t(){this.constructor=n}cg(n,e),n.prototype=null===e?Object.create(e):(t.prototype=e.prototype,new t)})(e,n),e.prototype.updateText=function(){for(var t,r=ma.available[this._fontName],i=this._fontSize/r.size,o=new St,s=[],a=[],l=[],c=YC(this._text.replace(/(?:\r\n|\r)/g,"\n")||" "),d=this._maxWidth*r.size/this._fontSize,h="none"===r.distanceFieldType?kj:Uj,f=null,p=0,_=0,m=0,g=-1,b=0,y=0,M=0,S=0,T=0;T<c.length;T++){var Q=Id(k=c[T]);if(/(?:\s)/.test(k)&&(g=T,b=p,S++),"\r"!==k&&"\n"!==k){var B=r.chars[Q];if(B){f&&B.kerning[f]&&(o.x+=B.kerning[f]);var U=zC.pop()||{texture:Ee.EMPTY,line:0,charCode:0,prevSpaces:0,position:new St};U.texture=B.texture,U.line=m,U.charCode=Q,U.position.x=o.x+B.xOffset+this._letterSpacing/2,U.position.y=o.y+B.yOffset,U.prevSpaces=S,s.push(U),p=U.position.x+Math.max(B.xAdvance,B.texture.orig.width),o.x+=B.xAdvance+this._letterSpacing,M=Math.max(M,B.yOffset+B.texture.height),f=Q,-1!==g&&d>0&&o.x>d&&(Ii(s,1+g-++y,1+T-g),T=g,g=-1,a.push(b),l.push(s.length>0?s[s.length-1].prevSpaces:0),_=Math.max(_,b),m++,o.x=0,o.y+=r.lineHeight,f=null,S=0)}}else a.push(p),l.push(-1),_=Math.max(_,p),++m,++y,o.x=0,o.y+=r.lineHeight,f=null,S=0}var ce=c[c.length-1];"\r"!==ce&&"\n"!==ce&&(/(?:\s)/.test(ce)&&(p=b),a.push(p),_=Math.max(_,p),l.push(-1));var he=[];for(T=0;T<=m;T++){var we=0;"right"===this._align?we=_-a[T]:"center"===this._align?we=(_-a[T])/2:"justify"===this._align&&(we=l[T]<0?0:(_-a[T])/l[T]),he.push(we)}var Je=s.length,oe={},N=[],G=this._activePagesMeshData;for(T=0;T<G.length;T++)h.push(G[T]);for(T=0;T<Je;T++){var J=(q=s[T].texture).baseTexture.uid;if(!oe[J]){if(!(K=h.pop())){var Qt=new xd,Wt=void 0,pn=void 0;"none"===r.distanceFieldType?(Wt=new Yl(Ee.EMPTY),pn=ge.NORMAL):(Wt=new Yl(Ee.EMPTY,{program:Ol.from("// Mesh material default fragment\r\nattribute vec2 aVertexPosition;\r\nattribute vec2 aTextureCoord;\r\n\r\nuniform mat3 projectionMatrix;\r\nuniform mat3 translationMatrix;\r\nuniform mat3 uTextureMatrix;\r\n\r\nvarying vec2 vTextureCoord;\r\n\r\nvoid main(void)\r\n{\r\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\r\n\r\n    vTextureCoord = (uTextureMatrix * vec3(aTextureCoord, 1.0)).xy;\r\n}\r\n","// Pixi texture info\r\nvarying vec2 vTextureCoord;\r\nuniform sampler2D uSampler;\r\n\r\n// Tint\r\nuniform vec4 uColor;\r\n\r\n// on 2D applications fwidth is screenScale / glyphAtlasScale * distanceFieldRange\r\nuniform float uFWidth;\r\n\r\nvoid main(void) {\r\n\r\n  // To stack MSDF and SDF we need a non-pre-multiplied-alpha texture.\r\n  vec4 texColor = texture2D(uSampler, vTextureCoord);\r\n\r\n  // MSDF\r\n  float median = texColor.r + texColor.g + texColor.b -\r\n                  min(texColor.r, min(texColor.g, texColor.b)) -\r\n                  max(texColor.r, max(texColor.g, texColor.b));\r\n  // SDF\r\n  median = min(median, texColor.a);\r\n\r\n  float screenPxDistance = uFWidth * (median - 0.5);\r\n  float alpha = clamp(screenPxDistance + 0.5, 0.0, 1.0);\r\n\r\n  // NPM Textures, NPM outputs\r\n  gl_FragColor = vec4(uColor.rgb, uColor.a * alpha);\r\n\r\n}\r\n"),uniforms:{uFWidth:0}}),pn=ge.NORMAL_NPM);var ot=new jl(Qt,Wt);ot.blendMode=pn,K={index:0,indexCount:0,vertexCount:0,uvsCount:0,total:0,mesh:ot,vertices:null,uvs:null,indices:null}}K.index=0,K.indexCount=0,K.vertexCount=0,K.uvsCount=0,K.total=0;var Hi=this._textureCache;Hi[J]=Hi[J]||new Ee(q.baseTexture),K.mesh.texture=Hi[J],K.mesh.tint=this._tint,N.push(K),oe[J]=K}oe[J].total++}for(T=0;T<G.length;T++)-1===N.indexOf(G[T])&&this.removeChild(G[T].mesh);for(T=0;T<N.length;T++)N[T].mesh.parent!==this&&this.addChild(N[T].mesh);for(var T in this._activePagesMeshData=N,oe){var Tr=(K=oe[T]).total;if(!((null===(t=K.indices)||void 0===t?void 0:t.length)>6*Tr)||K.vertices.length<2*jl.BATCHABLE_SIZE)K.vertices=new Float32Array(8*Tr),K.uvs=new Float32Array(8*Tr),K.indices=new Uint16Array(6*Tr);else for(var Wn=K.vertices,It=4*K.total*2;It<Wn.length;It++)Wn[It]=0;K.mesh.size=6*Tr}for(T=0;T<Je;T++){var k,Rn=(k=s[T]).position.x+he[k.line]*("justify"===this._align?k.prevSpaces:1);this._roundPixels&&(Rn=Math.round(Rn));var q,In=Rn*i,Dr=k.position.y*i,Mt=oe[(q=k.texture).baseTexture.uid],ns=q.frame,pi=q._uvs,et=Mt.index++;Mt.indices[6*et+0]=0+4*et,Mt.indices[6*et+1]=1+4*et,Mt.indices[6*et+2]=2+4*et,Mt.indices[6*et+3]=0+4*et,Mt.indices[6*et+4]=2+4*et,Mt.indices[6*et+5]=3+4*et,Mt.vertices[8*et+0]=In,Mt.vertices[8*et+1]=Dr,Mt.vertices[8*et+2]=In+ns.width*i,Mt.vertices[8*et+3]=Dr,Mt.vertices[8*et+4]=In+ns.width*i,Mt.vertices[8*et+5]=Dr+ns.height*i,Mt.vertices[8*et+6]=In,Mt.vertices[8*et+7]=Dr+ns.height*i,Mt.uvs[8*et+0]=pi.x0,Mt.uvs[8*et+1]=pi.y0,Mt.uvs[8*et+2]=pi.x1,Mt.uvs[8*et+3]=pi.y1,Mt.uvs[8*et+4]=pi.x2,Mt.uvs[8*et+5]=pi.y2,Mt.uvs[8*et+6]=pi.x3,Mt.uvs[8*et+7]=pi.y3}for(var T in this._textWidth=_*i,this._textHeight=(o.y+r.lineHeight)*i,oe){var K=oe[T];if(0!==this.anchor.x||0!==this.anchor.y)for(var _i=0,Ca=this._textWidth*this.anchor.x,wh=this._textHeight*this.anchor.y,tR=0;tR<K.total;tR++)K.vertices[_i++]-=Ca,K.vertices[_i++]-=wh,K.vertices[_i++]-=Ca,K.vertices[_i++]-=wh,K.vertices[_i++]-=Ca,K.vertices[_i++]-=wh,K.vertices[_i++]-=Ca,K.vertices[_i++]-=wh;this._maxLineHeight=M*i;var nR=K.mesh.geometry.getBuffer("aVertexPosition"),rR=K.mesh.geometry.getBuffer("aTextureCoord"),iR=K.mesh.geometry.getIndex();nR.data=K.vertices,rR.data=K.uvs,iR.data=K.indices,nR.update(),rR.update(),iR.update()}for(T=0;T<s.length;T++)zC.push(s[T])},e.prototype.updateTransform=function(){this.validate(),this.containerUpdateTransform()},e.prototype._render=function(t){this._autoResolution&&this._resolution!==t.resolution&&(this._resolution=t.resolution,this.dirty=!0);var r=ma.available[this._fontName],i=r.distanceFieldRange,s=r.size;if("none"!==r.distanceFieldType)for(var a=this.worldTransform,l=a.a,u=a.b,c=a.c,d=a.d,h=Math.sqrt(l*l+u*u),f=Math.sqrt(c*c+d*d),p=(Math.abs(h)+Math.abs(f))/2,_=this._fontSize/s,m=0,g=this._activePagesMeshData;m<g.length;m++)g[m].mesh.shader.uniforms.uFWidth=p*i*_*this._resolution;n.prototype._render.call(this,t)},e.prototype.getLocalBounds=function(){return this.validate(),n.prototype.getLocalBounds.call(this)},e.prototype.validate=function(){this.dirty&&(this.updateText(),this.dirty=!1)},Object.defineProperty(e.prototype,"tint",{get:function(){return this._tint},set:function(t){if(this._tint!==t){this._tint=t;for(var r=0;r<this._activePagesMeshData.length;r++)this._activePagesMeshData[r].mesh.tint=t}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"align",{get:function(){return this._align},set:function(t){this._align!==t&&(this._align=t,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"fontName",{get:function(){return this._fontName},set:function(t){if(!ma.available[t])throw new Error('Missing BitmapFont "'+t+'"');this._fontName!==t&&(this._fontName=t,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"fontSize",{get:function(){return this._fontSize},set:function(t){this._fontSize!==t&&(this._fontSize=t,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"anchor",{get:function(){return this._anchor},set:function(t){"number"==typeof t?this._anchor.set(t):this._anchor.copyFrom(t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"text",{get:function(){return this._text},set:function(t){t=String(null==t?"":t),this._text!==t&&(this._text=t,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"maxWidth",{get:function(){return this._maxWidth},set:function(t){this._maxWidth!==t&&(this._maxWidth=t,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"maxLineHeight",{get:function(){return this.validate(),this._maxLineHeight},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"textWidth",{get:function(){return this.validate(),this._textWidth},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"letterSpacing",{get:function(){return this._letterSpacing},set:function(t){this._letterSpacing!==t&&(this._letterSpacing=t,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"roundPixels",{get:function(){return this._roundPixels},set:function(t){t!==this._roundPixels&&(this._roundPixels=t,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"textHeight",{get:function(){return this.validate(),this._textHeight},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"resolution",{get:function(){return this._resolution},set:function(t){this._autoResolution=!1,this._resolution!==t&&(this._resolution=t,this.dirty=!0)},enumerable:!1,configurable:!0}),e.prototype.destroy=function(t){var r=this._textureCache;for(var i in r)r[i].destroy(),delete r[i];this._textureCache=null,n.prototype.destroy.call(this,t)},e.styleDefaults={align:"left",tint:16777215,maxWidth:0,letterSpacing:0}}(ui),function(){function n(){}return n.add=function(){zt.setExtensionXhrType("fnt",zt.XHR_RESPONSE_TYPE.TEXT)},n.use=function(e,t){var r=jC(e.data);if(r)for(var i=n.getBaseUrl(this,e),o=r.parse(e.data),s={},a=function(_){s[_.metadata.pageFile]=_.texture,Object.keys(s).length===o.page.length&&(e.bitmapFont=ma.install(o,s,!0),t())},l=0;l<o.page.length;++l){var u=o.page[l].file,c=i+u,d=!1;for(var h in this.resources){var f=this.resources[h];if(f.url===c){f.metadata.pageFile=u,f.texture?a(f):f.onAfterMiddleware.add(a),d=!0;break}}if(!d){var p={crossOrigin:e.crossOrigin,loadType:zt.LOAD_TYPE.IMAGE,metadata:Object.assign({pageFile:u},e.metadata.imageMetadata),parentResource:e};this.add(c,p,a)}}else t()},n.getBaseUrl=function(e,t){var r=t.isDataUrl?"":n.dirname(t.url);return t.isDataUrl&&("."===r&&(r=""),e.baseUrl&&r&&"/"===e.baseUrl.charAt(e.baseUrl.length-1)&&(r+="/")),(r=r.replace(e.baseUrl,""))&&"/"!==r.charAt(r.length-1)&&(r+="/"),r},n.dirname=function(e){var t=e.replace(/\\/g,"/").replace(/\/$/,"").replace(/\/[^\/]*$/,"");return t===e?".":""===t?"/":t},n}()),fg=function(n,e){return(fg=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var i in r)r.hasOwnProperty(i)&&(t[i]=r[i])})(n,e)};!function(n){function e(t){void 0===t&&(t=1);var r=n.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}","varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform float uAlpha;\n\nvoid main(void)\n{\n   gl_FragColor = texture2D(uSampler, vTextureCoord) * uAlpha;\n}\n",{uAlpha:1})||this;return r.alpha=t,r}(function Gj(n,e){function t(){this.constructor=n}fg(n,e),n.prototype=null===e?Object.create(e):(t.prototype=e.prototype,new t)})(e,n),Object.defineProperty(e.prototype,"alpha",{get:function(){return this.uniforms.uAlpha},set:function(t){this.uniforms.uAlpha=t},enumerable:!1,configurable:!0})}(ro);var pg=function(n,e){return(pg=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var i in r)r.hasOwnProperty(i)&&(t[i]=r[i])})(n,e)};function WC(n,e){function t(){this.constructor=n}pg(n,e),n.prototype=null===e?Object.create(e):(t.prototype=e.prototype,new t)}var Wj={5:[.153388,.221461,.250301],7:[.071303,.131514,.189879,.214607],9:[.028532,.067234,.124009,.179044,.20236],11:[.0093,.028002,.065984,.121703,.175713,.198596],13:[.002406,.009255,.027867,.065666,.121117,.174868,.197641],15:[489e-6,.002403,.009246,.02784,.065602,.120999,.174697,.197448]},Xj=["varying vec2 vBlurTexCoords[%size%];","uniform sampler2D uSampler;","void main(void)","{","    gl_FragColor = vec4(0.0);","    %blur%","}"].join("\n"),ga=(()=>(function(n){n[n.NO=0]="NO",n[n.YES=1]="YES",n[n.AUTO=2]="AUTO",n[n.BLEND=0]="BLEND",n[n.CLEAR=1]="CLEAR",n[n.BLIT=2]="BLIT"}(ga||(ga={})),ga))(),_g=function(n){function e(t,r,i,o,s){void 0===r&&(r=8),void 0===i&&(i=4),void 0===o&&(o=de.FILTER_RESOLUTION),void 0===s&&(s=5);var a=this,l=function zj(n,e){var o,t=Math.ceil(n/2),r="\n    attribute vec2 aVertexPosition;\n\n    uniform mat3 projectionMatrix;\n\n    uniform float strength;\n\n    varying vec2 vBlurTexCoords[%size%];\n\n    uniform vec4 inputSize;\n    uniform vec4 outputFrame;\n\n    vec4 filterVertexPosition( void )\n    {\n        vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;\n\n        return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);\n    }\n\n    vec2 filterTextureCoord( void )\n    {\n        return aVertexPosition * (outputFrame.zw * inputSize.zw);\n    }\n\n    void main(void)\n    {\n        gl_Position = filterVertexPosition();\n\n        vec2 textureCoord = filterTextureCoord();\n        %blur%\n    }",i="";o=e?"vBlurTexCoords[%index%] =  textureCoord + vec2(%sampleIndex% * strength, 0.0);":"vBlurTexCoords[%index%] =  textureCoord + vec2(0.0, %sampleIndex% * strength);";for(var s=0;s<n;s++){var a=o.replace("%index%",s.toString());i+=a=a.replace("%sampleIndex%",s-(t-1)+".0"),i+="\n"}return(r=r.replace("%blur%",i)).replace("%size%",n.toString())}(s,t),u=function $j(n){for(var s,e=Wj[n],t=e.length,r=Xj,i="",a=0;a<n;a++){var l="gl_FragColor += texture2D(uSampler, vBlurTexCoords[%index%]) * %value%;".replace("%index%",a.toString());s=a,a>=t&&(s=n-a-1),i+=l=l.replace("%value%",e[s].toString()),i+="\n"}return(r=r.replace("%blur%",i)).replace("%size%",n.toString())}(s);return(a=n.call(this,l,u)||this).horizontal=t,a.resolution=o,a._quality=0,a.quality=i,a.blur=r,a}return WC(e,n),e.prototype.apply=function(t,r,i,o){if(this.uniforms.strength=i?this.horizontal?1/i.width*(i.width/r.width):1/i.height*(i.height/r.height):this.horizontal?1/t.renderer.width*(t.renderer.width/r.width):1/t.renderer.height*(t.renderer.height/r.height),this.uniforms.strength*=this.strength,this.uniforms.strength/=this.passes,1===this.passes)t.applyFilter(this,r,i,o);else{var s=t.getFilterTexture(),a=t.renderer,l=r,u=s;this.state.blend=!1,t.applyFilter(this,l,u,ga.CLEAR);for(var c=1;c<this.passes-1;c++){t.bindAndClear(l,ga.BLIT),this.uniforms.uSampler=u;var d=u;u=l,l=d,a.shader.bind(this),a.geometry.draw(5)}this.state.blend=!0,t.applyFilter(this,u,i,o),t.returnFilterTexture(s)}},Object.defineProperty(e.prototype,"blur",{get:function(){return this.strength},set:function(t){this.padding=1+2*Math.abs(t),this.strength=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"quality",{get:function(){return this._quality},set:function(t){this._quality=t,this.passes=t},enumerable:!1,configurable:!0}),e}(ro),mg=(function(n){function e(t,r,i,o){void 0===t&&(t=8),void 0===r&&(r=4),void 0===i&&(i=de.FILTER_RESOLUTION),void 0===o&&(o=5);var s=n.call(this)||this;return s.blurXFilter=new _g(!0,t,r,i,o),s.blurYFilter=new _g(!1,t,r,i,o),s.resolution=i,s.quality=r,s.blur=t,s.repeatEdgePixels=!1,s}WC(e,n),e.prototype.apply=function(t,r,i,o){var s=Math.abs(this.blurXFilter.strength),a=Math.abs(this.blurYFilter.strength);if(s&&a){var l=t.getFilterTexture();this.blurXFilter.apply(t,r,l,ga.CLEAR),this.blurYFilter.apply(t,l,i,o),t.returnFilterTexture(l)}else a?this.blurYFilter.apply(t,r,i,o):this.blurXFilter.apply(t,r,i,o)},e.prototype.updatePadding=function(){this.padding=this._repeatEdgePixels?0:2*Math.max(Math.abs(this.blurXFilter.strength),Math.abs(this.blurYFilter.strength))},Object.defineProperty(e.prototype,"blur",{get:function(){return this.blurXFilter.blur},set:function(t){this.blurXFilter.blur=this.blurYFilter.blur=t,this.updatePadding()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"quality",{get:function(){return this.blurXFilter.quality},set:function(t){this.blurXFilter.quality=this.blurYFilter.quality=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"blurX",{get:function(){return this.blurXFilter.blur},set:function(t){this.blurXFilter.blur=t,this.updatePadding()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"blurY",{get:function(){return this.blurYFilter.blur},set:function(t){this.blurYFilter.blur=t,this.updatePadding()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"blendMode",{get:function(){return this.blurYFilter.blendMode},set:function(t){this.blurYFilter.blendMode=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"repeatEdgePixels",{get:function(){return this._repeatEdgePixels},set:function(t){this._repeatEdgePixels=t,this.updatePadding()},enumerable:!1,configurable:!0})}(ro),function(n,e){return(mg=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var i in r)r.hasOwnProperty(i)&&(t[i]=r[i])})(n,e)}),gg=function(n){function e(){var t=this,r={m:new Float32Array([1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0]),uAlpha:1};return(t=n.call(this,QM,"varying vec2 vTextureCoord;\nuniform sampler2D uSampler;\nuniform float m[20];\nuniform float uAlpha;\n\nvoid main(void)\n{\n    vec4 c = texture2D(uSampler, vTextureCoord);\n\n    if (uAlpha == 0.0) {\n        gl_FragColor = c;\n        return;\n    }\n\n    // Un-premultiply alpha before applying the color matrix. See issue #3539.\n    if (c.a > 0.0) {\n      c.rgb /= c.a;\n    }\n\n    vec4 result;\n\n    result.r = (m[0] * c.r);\n        result.r += (m[1] * c.g);\n        result.r += (m[2] * c.b);\n        result.r += (m[3] * c.a);\n        result.r += m[4];\n\n    result.g = (m[5] * c.r);\n        result.g += (m[6] * c.g);\n        result.g += (m[7] * c.b);\n        result.g += (m[8] * c.a);\n        result.g += m[9];\n\n    result.b = (m[10] * c.r);\n       result.b += (m[11] * c.g);\n       result.b += (m[12] * c.b);\n       result.b += (m[13] * c.a);\n       result.b += m[14];\n\n    result.a = (m[15] * c.r);\n       result.a += (m[16] * c.g);\n       result.a += (m[17] * c.b);\n       result.a += (m[18] * c.a);\n       result.a += m[19];\n\n    vec3 rgb = mix(c.rgb, result.rgb, uAlpha);\n\n    // Premultiply alpha again.\n    rgb *= result.a;\n\n    gl_FragColor = vec4(rgb, result.a);\n}\n",r)||this).alpha=1,t}return function Kj(n,e){function t(){this.constructor=n}mg(n,e),n.prototype=null===e?Object.create(e):(t.prototype=e.prototype,new t)}(e,n),e.prototype._loadMatrix=function(t,r){void 0===r&&(r=!1);var i=t;r&&(this._multiply(i,this.uniforms.m,t),i=this._colorMatrix(i)),this.uniforms.m=i},e.prototype._multiply=function(t,r,i){return t[0]=r[0]*i[0]+r[1]*i[5]+r[2]*i[10]+r[3]*i[15],t[1]=r[0]*i[1]+r[1]*i[6]+r[2]*i[11]+r[3]*i[16],t[2]=r[0]*i[2]+r[1]*i[7]+r[2]*i[12]+r[3]*i[17],t[3]=r[0]*i[3]+r[1]*i[8]+r[2]*i[13]+r[3]*i[18],t[4]=r[0]*i[4]+r[1]*i[9]+r[2]*i[14]+r[3]*i[19]+r[4],t[5]=r[5]*i[0]+r[6]*i[5]+r[7]*i[10]+r[8]*i[15],t[6]=r[5]*i[1]+r[6]*i[6]+r[7]*i[11]+r[8]*i[16],t[7]=r[5]*i[2]+r[6]*i[7]+r[7]*i[12]+r[8]*i[17],t[8]=r[5]*i[3]+r[6]*i[8]+r[7]*i[13]+r[8]*i[18],t[9]=r[5]*i[4]+r[6]*i[9]+r[7]*i[14]+r[8]*i[19]+r[9],t[10]=r[10]*i[0]+r[11]*i[5]+r[12]*i[10]+r[13]*i[15],t[11]=r[10]*i[1]+r[11]*i[6]+r[12]*i[11]+r[13]*i[16],t[12]=r[10]*i[2]+r[11]*i[7]+r[12]*i[12]+r[13]*i[17],t[13]=r[10]*i[3]+r[11]*i[8]+r[12]*i[13]+r[13]*i[18],t[14]=r[10]*i[4]+r[11]*i[9]+r[12]*i[14]+r[13]*i[19]+r[14],t[15]=r[15]*i[0]+r[16]*i[5]+r[17]*i[10]+r[18]*i[15],t[16]=r[15]*i[1]+r[16]*i[6]+r[17]*i[11]+r[18]*i[16],t[17]=r[15]*i[2]+r[16]*i[7]+r[17]*i[12]+r[18]*i[17],t[18]=r[15]*i[3]+r[16]*i[8]+r[17]*i[13]+r[18]*i[18],t[19]=r[15]*i[4]+r[16]*i[9]+r[17]*i[14]+r[18]*i[19]+r[19],t},e.prototype._colorMatrix=function(t){var r=new Float32Array(t);return r[4]/=255,r[9]/=255,r[14]/=255,r[19]/=255,r},e.prototype.brightness=function(t,r){this._loadMatrix([t,0,0,0,0,0,t,0,0,0,0,0,t,0,0,0,0,0,1,0],r)},e.prototype.tint=function(t,r){this._loadMatrix([(t>>16&255)/255,0,0,0,0,0,(t>>8&255)/255,0,0,0,0,0,(255&t)/255,0,0,0,0,0,1,0],r)},e.prototype.greyscale=function(t,r){this._loadMatrix([t,t,t,0,0,t,t,t,0,0,t,t,t,0,0,0,0,0,1,0],r)},e.prototype.blackAndWhite=function(t){this._loadMatrix([.3,.6,.1,0,0,.3,.6,.1,0,0,.3,.6,.1,0,0,0,0,0,1,0],t)},e.prototype.hue=function(t,r){t=(t||0)/180*Math.PI;var i=Math.cos(t),o=Math.sin(t),a=1/3,l=(0,Math.sqrt)(a);this._loadMatrix([i+(1-i)*a,a*(1-i)-l*o,a*(1-i)+l*o,0,0,a*(1-i)+l*o,i+a*(1-i),a*(1-i)-l*o,0,0,a*(1-i)-l*o,a*(1-i)+l*o,i+a*(1-i),0,0,0,0,0,1,0],r)},e.prototype.contrast=function(t,r){var i=(t||0)+1,o=-.5*(i-1);this._loadMatrix([i,0,0,0,o,0,i,0,0,o,0,0,i,0,o,0,0,0,1,0],r)},e.prototype.saturate=function(t,r){void 0===t&&(t=0);var i=2*t/3+1,o=-.5*(i-1);this._loadMatrix([i,o,o,0,0,o,i,o,0,0,o,o,i,0,0,0,0,0,1,0],r)},e.prototype.desaturate=function(){this.saturate(-1)},e.prototype.negative=function(t){this._loadMatrix([-1,0,0,1,0,0,-1,0,1,0,0,0,-1,1,0,0,0,0,1,0],t)},e.prototype.sepia=function(t){this._loadMatrix([.393,.7689999,.18899999,0,0,.349,.6859999,.16799999,0,0,.272,.5339999,.13099999,0,0,0,0,0,1,0],t)},e.prototype.technicolor=function(t){this._loadMatrix([1.9125277891456083,-.8545344976951645,-.09155508482755585,0,11.793603434377337,-.3087833385928097,1.7658908555458428,-.10601743074722245,0,-70.35205161461398,-.231103377548616,-.7501899197440212,1.847597816108189,0,30.950940869491138,0,0,0,1,0],t)},e.prototype.polaroid=function(t){this._loadMatrix([1.438,-.062,-.062,0,0,-.122,1.378,-.122,0,0,-.016,-.016,1.483,0,0,0,0,0,1,0],t)},e.prototype.toBGR=function(t){this._loadMatrix([0,0,1,0,0,0,1,0,0,0,1,0,0,0,0,0,0,0,1,0],t)},e.prototype.kodachrome=function(t){this._loadMatrix([1.1285582396593525,-.3967382283601348,-.03992559172921793,0,63.72958762196502,-.16404339962244616,1.0835251566291304,-.05498805115633132,0,24.732407896706203,-.16786010706155763,-.5603416277695248,1.6014850761964943,0,35.62982807460946,0,0,0,1,0],t)},e.prototype.browni=function(t){this._loadMatrix([.5997023498159715,.34553243048391263,-.2708298674538042,0,47.43192855600873,-.037703249837783157,.8609577587992641,.15059552388459913,0,-36.96841498319127,.24113635128153335,-.07441037908422492,.44972182064877153,0,-7.562075277591283,0,0,0,1,0],t)},e.prototype.vintage=function(t){this._loadMatrix([.6279345635605994,.3202183420819367,-.03965408211312453,0,9.651285835294123,.02578397704808868,.6441188644374771,.03259127616149294,0,7.462829176470591,.0466055556782719,-.0851232987247891,.5241648018700465,0,5.159190588235296,0,0,0,1,0],t)},e.prototype.colorTone=function(t,r,i,o,s){var a=((i=i||16770432)>>16&255)/255,l=(i>>8&255)/255,u=(255&i)/255,c=((o=o||3375104)>>16&255)/255,d=(o>>8&255)/255,h=(255&o)/255;this._loadMatrix([.3,.59,.11,0,0,a,l,u,t=t||.2,0,c,d,h,r=r||.15,0,a-c,l-d,u-h,0,0],s)},e.prototype.night=function(t,r){this._loadMatrix([-2*(t=t||.1),-t,0,0,0,-t,0,t,0,0,0,t,2*t,0,0,0,0,0,1,0],r)},e.prototype.predator=function(t,r){this._loadMatrix([11.224130630493164*t,-4.794486999511719*t,-2.8746118545532227*t,0*t,.40342438220977783*t,-3.6330697536468506*t,9.193157196044922*t,-2.951810836791992*t,0*t,-1.316135048866272*t,-3.2184197902679443*t,-4.2375030517578125*t,7.476448059082031*t,0*t,.8044459223747253*t,0,0,0,1,0],r)},e.prototype.lsd=function(t){this._loadMatrix([2,-.4,.5,0,0,-.5,2,-.4,0,0,-.4,-.5,3,0,0,0,0,0,1,0],t)},e.prototype.reset=function(){this._loadMatrix([1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],!1)},Object.defineProperty(e.prototype,"matrix",{get:function(){return this.uniforms.m},set:function(t){this.uniforms.m=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"alpha",{get:function(){return this.uniforms.uAlpha},set:function(t){this.uniforms.uAlpha=t},enumerable:!1,configurable:!0}),e}(ro);gg.prototype.grayscale=gg.prototype.greyscale;var vg=function(n,e){return(vg=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var i in r)r.hasOwnProperty(i)&&(t[i]=r[i])})(n,e)};!function(n){function e(t,r){var i=this,o=new qt;return t.renderable=!1,(i=n.call(this,"attribute vec2 aVertexPosition;\n\nuniform mat3 projectionMatrix;\nuniform mat3 filterMatrix;\n\nvarying vec2 vTextureCoord;\nvarying vec2 vFilterCoord;\n\nuniform vec4 inputSize;\nuniform vec4 outputFrame;\n\nvec4 filterVertexPosition( void )\n{\n    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;\n\n    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);\n}\n\nvec2 filterTextureCoord( void )\n{\n    return aVertexPosition * (outputFrame.zw * inputSize.zw);\n}\n\nvoid main(void)\n{\n\tgl_Position = filterVertexPosition();\n\tvTextureCoord = filterTextureCoord();\n\tvFilterCoord = ( filterMatrix * vec3( vTextureCoord, 1.0)  ).xy;\n}\n","varying vec2 vFilterCoord;\nvarying vec2 vTextureCoord;\n\nuniform vec2 scale;\nuniform mat2 rotation;\nuniform sampler2D uSampler;\nuniform sampler2D mapSampler;\n\nuniform highp vec4 inputSize;\nuniform vec4 inputClamp;\n\nvoid main(void)\n{\n  vec4 map =  texture2D(mapSampler, vFilterCoord);\n\n  map -= 0.5;\n  map.xy = scale * inputSize.zw * (rotation * map.xy);\n\n  gl_FragColor = texture2D(uSampler, clamp(vec2(vTextureCoord.x + map.x, vTextureCoord.y + map.y), inputClamp.xy, inputClamp.zw));\n}\n",{mapSampler:t._texture,filterMatrix:o,scale:{x:1,y:1},rotation:new Float32Array([1,0,0,1])})||this).maskSprite=t,i.maskMatrix=o,null==r&&(r=20),i.scale=new St(r,r),i}(function Zj(n,e){function t(){this.constructor=n}vg(n,e),n.prototype=null===e?Object.create(e):(t.prototype=e.prototype,new t)})(e,n),e.prototype.apply=function(t,r,i,o){this.uniforms.filterMatrix=t.calculateSpriteMatrix(this.maskMatrix,this.maskSprite),this.uniforms.scale.x=this.scale.x,this.uniforms.scale.y=this.scale.y;var s=this.maskSprite.worldTransform,a=Math.sqrt(s.a*s.a+s.b*s.b),l=Math.sqrt(s.c*s.c+s.d*s.d);0!==a&&0!==l&&(this.uniforms.rotation[0]=s.a/a,this.uniforms.rotation[1]=s.b/a,this.uniforms.rotation[2]=s.c/l,this.uniforms.rotation[3]=s.d/l),t.applyFilter(this,r,i,o)},Object.defineProperty(e.prototype,"map",{get:function(){return this.uniforms.mapSampler},set:function(t){this.uniforms.mapSampler=t},enumerable:!1,configurable:!0})}(ro);var yg=function(n,e){return(yg=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var i in r)r.hasOwnProperty(i)&&(t[i]=r[i])})(n,e)};!function(n){!function n5(n,e){function t(){this.constructor=n}yg(n,e),n.prototype=null===e?Object.create(e):(t.prototype=e.prototype,new t)}(function e(){return n.call(this,"\nattribute vec2 aVertexPosition;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 v_rgbNW;\nvarying vec2 v_rgbNE;\nvarying vec2 v_rgbSW;\nvarying vec2 v_rgbSE;\nvarying vec2 v_rgbM;\n\nvarying vec2 vFragCoord;\n\nuniform vec4 inputSize;\nuniform vec4 outputFrame;\n\nvec4 filterVertexPosition( void )\n{\n    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;\n\n    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);\n}\n\nvoid texcoords(vec2 fragCoord, vec2 inverseVP,\n               out vec2 v_rgbNW, out vec2 v_rgbNE,\n               out vec2 v_rgbSW, out vec2 v_rgbSE,\n               out vec2 v_rgbM) {\n    v_rgbNW = (fragCoord + vec2(-1.0, -1.0)) * inverseVP;\n    v_rgbNE = (fragCoord + vec2(1.0, -1.0)) * inverseVP;\n    v_rgbSW = (fragCoord + vec2(-1.0, 1.0)) * inverseVP;\n    v_rgbSE = (fragCoord + vec2(1.0, 1.0)) * inverseVP;\n    v_rgbM = vec2(fragCoord * inverseVP);\n}\n\nvoid main(void) {\n\n   gl_Position = filterVertexPosition();\n\n   vFragCoord = aVertexPosition * outputFrame.zw;\n\n   texcoords(vFragCoord, inputSize.zw, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);\n}\n",'varying vec2 v_rgbNW;\nvarying vec2 v_rgbNE;\nvarying vec2 v_rgbSW;\nvarying vec2 v_rgbSE;\nvarying vec2 v_rgbM;\n\nvarying vec2 vFragCoord;\nuniform sampler2D uSampler;\nuniform highp vec4 inputSize;\n\n\n/**\n Basic FXAA implementation based on the code on geeks3d.com with the\n modification that the texture2DLod stuff was removed since it\'s\n unsupported by WebGL.\n\n --\n\n From:\n https://github.com/mitsuhiko/webgl-meincraft\n\n Copyright (c) 2011 by Armin Ronacher.\n\n Some rights reserved.\n\n Redistribution and use in source and binary forms, with or without\n modification, are permitted provided that the following conditions are\n met:\n\n * Redistributions of source code must retain the above copyright\n notice, this list of conditions and the following disclaimer.\n\n * Redistributions in binary form must reproduce the above\n copyright notice, this list of conditions and the following\n disclaimer in the documentation and/or other materials provided\n with the distribution.\n\n * The names of the contributors may not be used to endorse or\n promote products derived from this software without specific\n prior written permission.\n\n THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS\n "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT\n LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR\n A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT\n OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,\n SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT\n LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,\n DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY\n THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE\n OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\n\n#ifndef FXAA_REDUCE_MIN\n#define FXAA_REDUCE_MIN   (1.0/ 128.0)\n#endif\n#ifndef FXAA_REDUCE_MUL\n#define FXAA_REDUCE_MUL   (1.0 / 8.0)\n#endif\n#ifndef FXAA_SPAN_MAX\n#define FXAA_SPAN_MAX     8.0\n#endif\n\n//optimized version for mobile, where dependent\n//texture reads can be a bottleneck\nvec4 fxaa(sampler2D tex, vec2 fragCoord, vec2 inverseVP,\n          vec2 v_rgbNW, vec2 v_rgbNE,\n          vec2 v_rgbSW, vec2 v_rgbSE,\n          vec2 v_rgbM) {\n    vec4 color;\n    vec3 rgbNW = texture2D(tex, v_rgbNW).xyz;\n    vec3 rgbNE = texture2D(tex, v_rgbNE).xyz;\n    vec3 rgbSW = texture2D(tex, v_rgbSW).xyz;\n    vec3 rgbSE = texture2D(tex, v_rgbSE).xyz;\n    vec4 texColor = texture2D(tex, v_rgbM);\n    vec3 rgbM  = texColor.xyz;\n    vec3 luma = vec3(0.299, 0.587, 0.114);\n    float lumaNW = dot(rgbNW, luma);\n    float lumaNE = dot(rgbNE, luma);\n    float lumaSW = dot(rgbSW, luma);\n    float lumaSE = dot(rgbSE, luma);\n    float lumaM  = dot(rgbM,  luma);\n    float lumaMin = min(lumaM, min(min(lumaNW, lumaNE), min(lumaSW, lumaSE)));\n    float lumaMax = max(lumaM, max(max(lumaNW, lumaNE), max(lumaSW, lumaSE)));\n\n    mediump vec2 dir;\n    dir.x = -((lumaNW + lumaNE) - (lumaSW + lumaSE));\n    dir.y =  ((lumaNW + lumaSW) - (lumaNE + lumaSE));\n\n    float dirReduce = max((lumaNW + lumaNE + lumaSW + lumaSE) *\n                          (0.25 * FXAA_REDUCE_MUL), FXAA_REDUCE_MIN);\n\n    float rcpDirMin = 1.0 / (min(abs(dir.x), abs(dir.y)) + dirReduce);\n    dir = min(vec2(FXAA_SPAN_MAX, FXAA_SPAN_MAX),\n              max(vec2(-FXAA_SPAN_MAX, -FXAA_SPAN_MAX),\n                  dir * rcpDirMin)) * inverseVP;\n\n    vec3 rgbA = 0.5 * (\n                       texture2D(tex, fragCoord * inverseVP + dir * (1.0 / 3.0 - 0.5)).xyz +\n                       texture2D(tex, fragCoord * inverseVP + dir * (2.0 / 3.0 - 0.5)).xyz);\n    vec3 rgbB = rgbA * 0.5 + 0.25 * (\n                                     texture2D(tex, fragCoord * inverseVP + dir * -0.5).xyz +\n                                     texture2D(tex, fragCoord * inverseVP + dir * 0.5).xyz);\n\n    float lumaB = dot(rgbB, luma);\n    if ((lumaB < lumaMin) || (lumaB > lumaMax))\n        color = vec4(rgbA, texColor.a);\n    else\n        color = vec4(rgbB, texColor.a);\n    return color;\n}\n\nvoid main() {\n\n      vec4 color;\n\n      color = fxaa(uSampler, vFragCoord, inputSize.zw, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);\n\n      gl_FragColor = color;\n}\n')||this},n)}(ro);var Eg=function(n,e){return(Eg=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var i in r)r.hasOwnProperty(i)&&(t[i]=r[i])})(n,e)};!function(n){function e(t,r){void 0===t&&(t=.5),void 0===r&&(r=Math.random());var i=n.call(this,QM,"precision highp float;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\n\nuniform float uNoise;\nuniform float uSeed;\nuniform sampler2D uSampler;\n\nfloat rand(vec2 co)\n{\n    return fract(sin(dot(co.xy, vec2(12.9898, 78.233))) * 43758.5453);\n}\n\nvoid main()\n{\n    vec4 color = texture2D(uSampler, vTextureCoord);\n    float randomValue = rand(gl_FragCoord.xy * uSeed);\n    float diff = (randomValue - 0.5) * uNoise;\n\n    // Un-premultiply alpha before applying the color matrix. See issue #3539.\n    if (color.a > 0.0) {\n        color.rgb /= color.a;\n    }\n\n    color.r += diff;\n    color.g += diff;\n    color.b += diff;\n\n    // Premultiply alpha again.\n    color.rgb *= color.a;\n\n    gl_FragColor = color;\n}\n",{uNoise:0,uSeed:0})||this;return i.noise=t,i.seed=r,i}(function a5(n,e){function t(){this.constructor=n}Eg(n,e),n.prototype=null===e?Object.create(e):(t.prototype=e.prototype,new t)})(e,n),Object.defineProperty(e.prototype,"noise",{get:function(){return this.uniforms.uNoise},set:function(t){this.uniforms.uNoise=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"seed",{get:function(){return this.uniforms.uSeed},set:function(t){this.uniforms.uSeed=t},enumerable:!1,configurable:!0})}(ro);var Od=(()=>(function(n){n[n.NONE=0]="NONE",n[n.LOW=2]="LOW",n[n.MEDIUM=4]="MEDIUM",n[n.HIGH=8]="HIGH"}(Od||(Od={})),Od))(),XC=new qt;Kt.prototype._cacheAsBitmap=!1,Kt.prototype._cacheData=null,Kt.prototype._cacheAsBitmapResolution=null,Kt.prototype._cacheAsBitmapMultisample=Od.NONE;var c5=function n(){this.textureCacheId=null,this.originalRender=null,this.originalRenderCanvas=null,this.originalCalculateBounds=null,this.originalGetLocalBounds=null,this.originalUpdateTransform=null,this.originalDestroy=null,this.originalMask=null,this.originalFilterArea=null,this.originalContainsPoint=null,this.sprite=null};Object.defineProperties(Kt.prototype,{cacheAsBitmapResolution:{get:function(){return this._cacheAsBitmapResolution},set:function(n){n!==this._cacheAsBitmapResolution&&(this._cacheAsBitmapResolution=n,this.cacheAsBitmap&&(this.cacheAsBitmap=!1,this.cacheAsBitmap=!0))}},cacheAsBitmapMultisample:{get:function(){return this._cacheAsBitmapMultisample},set:function(n){n!==this._cacheAsBitmapMultisample&&(this._cacheAsBitmapMultisample=n,this.cacheAsBitmap&&(this.cacheAsBitmap=!1,this.cacheAsBitmap=!0))}},cacheAsBitmap:{get:function(){return this._cacheAsBitmap},set:function(n){var e;this._cacheAsBitmap!==n&&(this._cacheAsBitmap=n,n?(this._cacheData||(this._cacheData=new c5),(e=this._cacheData).originalRender=this.render,e.originalRenderCanvas=this.renderCanvas,e.originalUpdateTransform=this.updateTransform,e.originalCalculateBounds=this.calculateBounds,e.originalGetLocalBounds=this.getLocalBounds,e.originalDestroy=this.destroy,e.originalContainsPoint=this.containsPoint,e.originalMask=this._mask,e.originalFilterArea=this.filterArea,this.render=this._renderCached,this.renderCanvas=this._renderCachedCanvas,this.destroy=this._cacheAsBitmapDestroy):((e=this._cacheData).sprite&&this._destroyCachedDisplayObject(),this.render=e.originalRender,this.renderCanvas=e.originalRenderCanvas,this.calculateBounds=e.originalCalculateBounds,this.getLocalBounds=e.originalGetLocalBounds,this.destroy=e.originalDestroy,this.updateTransform=e.originalUpdateTransform,this.containsPoint=e.originalContainsPoint,this._mask=e.originalMask,this.filterArea=e.originalFilterArea))}}}),Kt.prototype._renderCached=function(e){!this.visible||this.worldAlpha<=0||!this.renderable||(this._initCachedDisplayObject(e),this._cacheData.sprite.transform._worldID=this.transform._worldID,this._cacheData.sprite.worldAlpha=this.worldAlpha,this._cacheData.sprite._render(e))},Kt.prototype._initCachedDisplayObject=function(e){var t;if(!this._cacheData||!this._cacheData.sprite){var r=this.alpha;this.alpha=1,e.batch.flush();var i=this.getLocalBounds(null,!0).clone();this.filters&&this.filters.length&&i.pad(this.filters[0].padding),i.ceil(de.RESOLUTION);var s=e.renderTexture.current,a=e.renderTexture.sourceFrame.clone(),l=e.renderTexture.destinationFrame.clone(),u=e.projection.transform,c=Ho.create({width:i.width,height:i.height,resolution:this.cacheAsBitmapResolution||e.resolution,multisample:null!==(t=this.cacheAsBitmapMultisample)&&void 0!==t?t:e.multisample}),d="cacheAsBitmap_"+Bo();this._cacheData.textureCacheId=d,Xe.addToCache(c.baseTexture,d),Ee.addToCache(c,d);var h=this.transform.localTransform.copyTo(XC).invert().translate(-i.x,-i.y);this.render=this._cacheData.originalRender,e.render(this,{renderTexture:c,clear:!0,transform:h,skipUpdateTransform:!1}),e.framebuffer.blit(),e.projection.transform=u,e.renderTexture.bind(s,a,l),this.render=this._renderCached,this.updateTransform=this.displayObjectUpdateTransform,this.calculateBounds=this._calculateCachedBounds,this.getLocalBounds=this._getCachedLocalBounds,this._mask=null,this.filterArea=null,this.alpha=r;var f=new ki(c);f.transform.worldTransform=this.transform.worldTransform,f.anchor.x=-i.x/i.width,f.anchor.y=-i.y/i.height,f.alpha=r,f._bounds=this._bounds,this._cacheData.sprite=f,this.transform._parentID=-1,this.parent?this.updateTransform():(this.enableTempParent(),this.updateTransform(),this.disableTempParent(null)),this.containsPoint=f.containsPoint.bind(f)}},Kt.prototype._renderCachedCanvas=function(e){!this.visible||this.worldAlpha<=0||!this.renderable||(this._initCachedDisplayObjectCanvas(e),this._cacheData.sprite.worldAlpha=this.worldAlpha,this._cacheData.sprite._renderCanvas(e))},Kt.prototype._initCachedDisplayObjectCanvas=function(e){if(!this._cacheData||!this._cacheData.sprite){var t=this.getLocalBounds(null,!0),r=this.alpha;this.alpha=1;var i=e.context,o=e._projTransform;t.ceil(de.RESOLUTION);var s=Ho.create({width:t.width,height:t.height}),a="cacheAsBitmap_"+Bo();this._cacheData.textureCacheId=a,Xe.addToCache(s.baseTexture,a),Ee.addToCache(s,a);var l=XC;this.transform.localTransform.copyTo(l),l.invert(),l.tx-=t.x,l.ty-=t.y,this.renderCanvas=this._cacheData.originalRenderCanvas,e.render(this,{renderTexture:s,clear:!0,transform:l,skipUpdateTransform:!1}),e.context=i,e._projTransform=o,this.renderCanvas=this._renderCachedCanvas,this.updateTransform=this.displayObjectUpdateTransform,this.calculateBounds=this._calculateCachedBounds,this.getLocalBounds=this._getCachedLocalBounds,this._mask=null,this.filterArea=null,this.alpha=r;var u=new ki(s);u.transform.worldTransform=this.transform.worldTransform,u.anchor.x=-t.x/t.width,u.anchor.y=-t.y/t.height,u.alpha=r,u._bounds=this._bounds,this._cacheData.sprite=u,this.transform._parentID=-1,this.parent?this.updateTransform():(this.parent=e._tempDisplayObjectParent,this.updateTransform(),this.parent=null),this.containsPoint=u.containsPoint.bind(u)}},Kt.prototype._calculateCachedBounds=function(){this._bounds.clear(),this._cacheData.sprite.transform._worldID=this.transform._worldID,this._cacheData.sprite._calculateBounds(),this._bounds.updateID=this._boundsID},Kt.prototype._getCachedLocalBounds=function(){return this._cacheData.sprite.getLocalBounds(null)},Kt.prototype._destroyCachedDisplayObject=function(){this._cacheData.sprite._texture.destroy(!0),this._cacheData.sprite=null,Xe.removeFromCache(this._cacheData.textureCacheId),Ee.removeFromCache(this._cacheData.textureCacheId),this._cacheData.textureCacheId=null},Kt.prototype._cacheAsBitmapDestroy=function(e){this.cacheAsBitmap=!1,this.destroy(e)},Kt.prototype.name=null,ui.prototype.getChildByName=function(e,t){for(var r=0,i=this.children.length;r<i;r++)if(this.children[r].name===e)return this.children[r];if(t)for(r=0,i=this.children.length;r<i;r++)if(this.children[r].getChildByName){var s=this.children[r].getChildByName(e,!0);if(s)return s}return null},Kt.prototype.getGlobalPosition=function(e,t){return void 0===e&&(e=new St),void 0===t&&(t=!1),this.parent?this.parent.toGlobal(this.position,e,t):(e.x=this.position.x,e.y=this.position.y),e};var bg=function(n,e){return(bg=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var i in r)r.hasOwnProperty(i)&&(t[i]=r[i])})(n,e)};function va(n,e){function t(){this.constructor=n}bg(n,e),n.prototype=null===e?Object.create(e):(t.prototype=e.prototype,new t)}var d5=function(n){function e(t,r,i,o){void 0===t&&(t=100),void 0===r&&(r=100),void 0===i&&(i=10),void 0===o&&(o=10);var s=n.call(this)||this;return s.segWidth=i,s.segHeight=o,s.width=t,s.height=r,s.build(),s}return va(e,n),e.prototype.build=function(){for(var t=this.segWidth*this.segHeight,r=[],i=[],o=[],s=this.segWidth-1,a=this.segHeight-1,l=this.width/s,u=this.height/a,c=0;c<t;c++){var d=c%this.segWidth,h=c/this.segWidth|0;r.push(d*l,h*u),i.push(d/s,h/a)}var f=s*a;for(c=0;c<f;c++){var p=c%s,_=c/s|0,g=_*this.segWidth+p+1,b=(_+1)*this.segWidth+p;o.push(_*this.segWidth+p,g,b,g,(_+1)*this.segWidth+p+1,b)}this.buffers[0].data=new Float32Array(r),this.buffers[1].data=new Float32Array(i),this.indexBuffer.data=new Uint16Array(o),this.buffers[0].update(),this.buffers[1].update(),this.indexBuffer.update()},e}(xd),h5=function(n){function e(t,r,i){void 0===t&&(t=200),void 0===i&&(i=0);var o=n.call(this,new Float32Array(4*r.length),new Float32Array(4*r.length),new Uint16Array(6*(r.length-1)))||this;return o.points=r,o._width=t,o.textureScale=i,o.build(),o}return va(e,n),Object.defineProperty(e.prototype,"width",{get:function(){return this._width},enumerable:!1,configurable:!0}),e.prototype.build=function(){var t=this.points;if(t){var r=this.getBuffer("aVertexPosition"),i=this.getBuffer("aTextureCoord"),o=this.getIndex();if(!(t.length<1)){r.data.length/4!==t.length&&(r.data=new Float32Array(4*t.length),i.data=new Float32Array(4*t.length),o.data=new Uint16Array(6*(t.length-1)));var s=i.data,a=o.data;s[0]=0,s[1]=0,s[2]=0,s[3]=1;for(var l=0,u=t[0],c=this._width*this.textureScale,d=t.length,h=0;h<d;h++){var f=4*h;if(this.textureScale>0){var p=u.x-t[h].x,_=u.y-t[h].y,m=Math.sqrt(p*p+_*_);u=t[h],l+=m/c}else l=h/(d-1);s[f]=l,s[f+1]=0,s[f+2]=l,s[f+3]=1}var g=0;for(h=0;h<d-1;h++)a[g++]=f=2*h,a[g++]=f+1,a[g++]=f+2,a[g++]=f+2,a[g++]=f+1,a[g++]=f+3;i.update(),o.update(),this.updateVertices()}}},e.prototype.updateVertices=function(){var t=this.points;if(!(t.length<1)){for(var i,r=t[0],o=0,s=0,a=this.buffers[0].data,l=t.length,u=0;u<l;u++){var c=t[u],d=4*u;s=-((i=u<t.length-1?t[u+1]:c).x-r.x),o=i.y-r.y;var h=Math.sqrt(o*o+s*s),f=this.textureScale>0?this.textureScale*this._width/2:this._width/2;o/=h,s/=h,s*=f,a[d]=c.x+(o*=f),a[d+1]=c.y+s,a[d+2]=c.x-o,a[d+3]=c.y-s,r=c}this.buffers[0].update()}},e.prototype.update=function(){this.textureScale>0?this.build():this.updateVertices()},e}(xd),f5=(function(n){function e(t,r,i){void 0===i&&(i=0);var o=this,s=new h5(t.height,r,i),a=new Yl(t);return i>0&&(t.baseTexture.wrapMode=ai.REPEAT),(o=n.call(this,s,a)||this).autoUpdate=!0,o}va(e,n),e.prototype._render=function(t){var r=this.geometry;(this.autoUpdate||r._width!==this.shader.texture.height)&&(r._width=this.shader.texture.height,r.update()),n.prototype._render.call(this,t)}}(jl),function(n){function e(t,r,i){var o=this,s=new d5(t.width,t.height,r,i),a=new Yl(Ee.WHITE);return(o=n.call(this,s,a)||this).texture=t,o.autoResize=!0,o}return va(e,n),e.prototype.textureUpdated=function(){this._textureID=this.shader.texture._updateID;var t=this.geometry,r=this.shader.texture;this.autoResize&&(t.width!==r.width||t.height!==r.height)&&(t.width=this.shader.texture.width,t.height=this.shader.texture.height,t.build())},Object.defineProperty(e.prototype,"texture",{get:function(){return this.shader.texture},set:function(t){this.shader.texture!==t&&(this.shader.texture=t,this._textureID=-1,t.baseTexture.valid?this.textureUpdated():t.once("update",this.textureUpdated,this))},enumerable:!1,configurable:!0}),e.prototype._render=function(t){this._textureID!==this.shader.texture._updateID&&this.textureUpdated(),n.prototype._render.call(this,t)},e.prototype.destroy=function(t){this.shader.texture.off("update",this.textureUpdated,this),n.prototype.destroy.call(this,t)},e}(jl)),Tg=(function(n){function e(t,r,i,o,s){void 0===t&&(t=Ee.EMPTY);var a=this,l=new xd(r,i,o);l.getBuffer("aVertexPosition").static=!1;var u=new Yl(t);return(a=n.call(this,l,u,null,s)||this).autoUpdate=!0,a}va(e,n),Object.defineProperty(e.prototype,"vertices",{get:function(){return this.geometry.getBuffer("aVertexPosition").data},set:function(t){this.geometry.getBuffer("aVertexPosition").data=t},enumerable:!1,configurable:!0}),e.prototype._render=function(t){this.autoUpdate&&this.geometry.getBuffer("aVertexPosition").update(),n.prototype._render.call(this,t)}}(jl),function(n){function e(t,r,i,o,s){void 0===r&&(r=10),void 0===i&&(i=10),void 0===o&&(o=10),void 0===s&&(s=10);var a=n.call(this,Ee.WHITE,4,4)||this;return a._origWidth=t.orig.width,a._origHeight=t.orig.height,a._width=a._origWidth,a._height=a._origHeight,a._leftWidth=r,a._rightWidth=o,a._topHeight=i,a._bottomHeight=s,a.texture=t,a}va(e,n),e.prototype.textureUpdated=function(){this._textureID=this.shader.texture._updateID,this._refresh()},Object.defineProperty(e.prototype,"vertices",{get:function(){return this.geometry.getBuffer("aVertexPosition").data},set:function(t){this.geometry.getBuffer("aVertexPosition").data=t},enumerable:!1,configurable:!0}),e.prototype.updateHorizontalVertices=function(){var t=this.vertices,r=this._getMinScale();t[9]=t[11]=t[13]=t[15]=this._topHeight*r,t[17]=t[19]=t[21]=t[23]=this._height-this._bottomHeight*r,t[25]=t[27]=t[29]=t[31]=this._height},e.prototype.updateVerticalVertices=function(){var t=this.vertices,r=this._getMinScale();t[2]=t[10]=t[18]=t[26]=this._leftWidth*r,t[4]=t[12]=t[20]=t[28]=this._width-this._rightWidth*r,t[6]=t[14]=t[22]=t[30]=this._width},e.prototype._getMinScale=function(){var t=this._leftWidth+this._rightWidth,i=this._topHeight+this._bottomHeight;return Math.min(this._width>t?1:this._width/t,this._height>i?1:this._height/i)},Object.defineProperty(e.prototype,"width",{get:function(){return this._width},set:function(t){this._width=t,this._refresh()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this._height},set:function(t){this._height=t,this._refresh()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"leftWidth",{get:function(){return this._leftWidth},set:function(t){this._leftWidth=t,this._refresh()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"rightWidth",{get:function(){return this._rightWidth},set:function(t){this._rightWidth=t,this._refresh()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"topHeight",{get:function(){return this._topHeight},set:function(t){this._topHeight=t,this._refresh()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"bottomHeight",{get:function(){return this._bottomHeight},set:function(t){this._bottomHeight=t,this._refresh()},enumerable:!1,configurable:!0}),e.prototype._refresh=function(){var t=this.texture,r=this.geometry.buffers[1].data;this._origWidth=t.orig.width,this._origHeight=t.orig.height;var i=1/this._origWidth,o=1/this._origHeight;r[0]=r[8]=r[16]=r[24]=0,r[1]=r[3]=r[5]=r[7]=0,r[6]=r[14]=r[22]=r[30]=1,r[25]=r[27]=r[29]=r[31]=1,r[2]=r[10]=r[18]=r[26]=i*this._leftWidth,r[4]=r[12]=r[20]=r[28]=1-i*this._rightWidth,r[9]=r[11]=r[13]=r[15]=o*this._topHeight,r[17]=r[19]=r[21]=r[23]=1-o*this._bottomHeight,this.updateHorizontalVertices(),this.updateVerticalVertices(),this.geometry.buffers[0].update(),this.geometry.buffers[1].update()}}(f5),function(n,e){return(Tg=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var i in r)r.hasOwnProperty(i)&&(t[i]=r[i])})(n,e)});!function(n){function e(t,r){void 0===r&&(r=!0);var i=n.call(this,t[0]instanceof Ee?t[0]:t[0].texture)||this;return i._textures=null,i._durations=null,i._autoUpdate=r,i._isConnectedToTicker=!1,i.animationSpeed=1,i.loop=!0,i.updateAnchor=!1,i.onComplete=null,i.onFrameChange=null,i.onLoop=null,i._currentTime=0,i._playing=!1,i._previousFrame=null,i.textures=t,i}(function p5(n,e){function t(){this.constructor=n}Tg(n,e),n.prototype=null===e?Object.create(e):(t.prototype=e.prototype,new t)})(e,n),e.prototype.stop=function(){!this._playing||(this._playing=!1,this._autoUpdate&&this._isConnectedToTicker&&(vn.shared.remove(this.update,this),this._isConnectedToTicker=!1))},e.prototype.play=function(){this._playing||(this._playing=!0,this._autoUpdate&&!this._isConnectedToTicker&&(vn.shared.add(this.update,this,ci.HIGH),this._isConnectedToTicker=!0))},e.prototype.gotoAndStop=function(t){this.stop();var r=this.currentFrame;this._currentTime=t,r!==this.currentFrame&&this.updateTexture()},e.prototype.gotoAndPlay=function(t){var r=this.currentFrame;this._currentTime=t,r!==this.currentFrame&&this.updateTexture(),this.play()},e.prototype.update=function(t){if(this._playing){var r=this.animationSpeed*t,i=this.currentFrame;if(null!==this._durations){var o=this._currentTime%1*this._durations[this.currentFrame];for(o+=r/60*1e3;o<0;)this._currentTime--,o+=this._durations[this.currentFrame];var s=Math.sign(this.animationSpeed*t);for(this._currentTime=Math.floor(this._currentTime);o>=this._durations[this.currentFrame];)o-=this._durations[this.currentFrame]*s,this._currentTime+=s;this._currentTime+=o/this._durations[this.currentFrame]}else this._currentTime+=r;this._currentTime<0&&!this.loop?(this.gotoAndStop(0),this.onComplete&&this.onComplete()):this._currentTime>=this._textures.length&&!this.loop?(this.gotoAndStop(this._textures.length-1),this.onComplete&&this.onComplete()):i!==this.currentFrame&&(this.loop&&this.onLoop&&(this.animationSpeed>0&&this.currentFrame<i||this.animationSpeed<0&&this.currentFrame>i)&&this.onLoop(),this.updateTexture())}},e.prototype.updateTexture=function(){var t=this.currentFrame;this._previousFrame!==t&&(this._previousFrame=t,this._texture=this._textures[t],this._textureID=-1,this._textureTrimmedID=-1,this._cachedTint=16777215,this.uvs=this._texture._uvs.uvsFloat32,this.updateAnchor&&this._anchor.copyFrom(this._texture.defaultAnchor),this.onFrameChange&&this.onFrameChange(this.currentFrame))},e.prototype.destroy=function(t){this.stop(),n.prototype.destroy.call(this,t),this.onComplete=null,this.onFrameChange=null,this.onLoop=null},e.fromFrames=function(t){for(var r=[],i=0;i<t.length;++i)r.push(Ee.from(t[i]));return new e(r)},e.fromImages=function(t){for(var r=[],i=0;i<t.length;++i)r.push(Ee.from(t[i]));return new e(r)},Object.defineProperty(e.prototype,"totalFrames",{get:function(){return this._textures.length},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"textures",{get:function(){return this._textures},set:function(t){if(t[0]instanceof Ee)this._textures=t,this._durations=null;else{this._textures=[],this._durations=[];for(var r=0;r<t.length;r++)this._textures.push(t[r].texture),this._durations.push(t[r].time)}this._previousFrame=null,this.gotoAndStop(0),this.updateTexture()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"currentFrame",{get:function(){var t=Math.floor(this._currentTime)%this._textures.length;return t<0&&(t+=this._textures.length),t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"playing",{get:function(){return this._playing},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"autoUpdate",{get:function(){return this._autoUpdate},set:function(t){t!==this._autoUpdate&&(this._autoUpdate=t,!this._autoUpdate&&this._isConnectedToTicker?(vn.shared.remove(this.update,this),this._isConnectedToTicker=!1):this._autoUpdate&&!this._isConnectedToTicker&&this._playing&&(vn.shared.add(this.update,this),this._isConnectedToTicker=!0))},enumerable:!1,configurable:!0})}(ki),io.registerPlugin("accessibility",N3),io.registerPlugin("extract",l4),io.registerPlugin("interaction",V3),io.registerPlugin("particle",$4),io.registerPlugin("prepare",yj),io.registerPlugin("batch",qH),io.registerPlugin("tilingSprite",Cj),di.registerPlugin(Vj),di.registerPlugin(S4),di.registerPlugin(G4),di.registerPlugin(z4),di.registerPlugin(bj),Nl.registerPlugin(F3),Nl.registerPlugin(m4);class Dg{constructor(e,t){this.NUMBER_OF_COLUMNS_IN_TILESET=12,this.type=t,this.existingItemsCount=e,this.tileSelectorGraphic=new Nl({transparent:!0,width:32*this.NUMBER_OF_COLUMNS_IN_TILESET,height:32*Math.ceil(e/this.NUMBER_OF_COLUMNS_IN_TILESET)}),this.tiles=[];for(var r=0;r<Math.ceil(this.existingItemsCount/this.NUMBER_OF_COLUMNS_IN_TILESET);r++){this.tiles[r]=[];for(var i=0;i<12;i++){const o=r*this.NUMBER_OF_COLUMNS_IN_TILESET+i;this.tiles[r][i]=new ki,o<e&&(this.tiles[r][i].texture=this.generateTileTexture(o),this.tiles[r][i].y=32*r,this.tiles[r][i].x=32*i,this.tileSelectorGraphic.stage.addChild(this.tiles[r][i]))}}}resetSelections(){this.tiles.forEach(e=>{e.forEach(t=>{t.alpha=1})})}generateTileTexture(e){let t=Ee.from("./../assets/TILE_SELECTION_"+this.type+".png");return new Ee(t.baseTexture,new Fe(e%this.NUMBER_OF_COLUMNS_IN_TILESET*32,(e-e%this.NUMBER_OF_COLUMNS_IN_TILESET)/this.NUMBER_OF_COLUMNS_IN_TILESET*32,32,32))}getSelectedTileValue(){for(var e=0;e<this.tiles.length;e++)for(var t=0;t<this.tiles[e].length;t++)if(.5==this.tiles[e][t].alpha)return e*this.NUMBER_OF_COLUMNS_IN_TILESET+t;return-1}}var gr=(()=>(function(n){n[n.Terrain=0]="Terrain",n[n.Mobs=1]="Mobs",n[n.Spawning=2]="Spawning",n[n.Settings=3]="Settings",n[n.ImportExport=4]="ImportExport"}(gr||(gr={})),gr))();class _5{constructor(e){this.existingTerrainCount=50,this.existingMobCount=40,this.existingSpawnings=2,this.selectedValue=-1,this.goToTerrainSection=()=>{this.resetAllGraphics(),this.resetAllSelections(),this.state=gr.Terrain,this.addToTilePickerSection(this.terrainSelector.tileSelectorGraphic.view)},this.goToMobSection=()=>{this.resetAllGraphics(),this.resetAllSelections(),this.state=gr.Mobs,this.addToTilePickerSection(this.mobSelector.tileSelectorGraphic.view)},this.goToSpawnSection=()=>{this.resetAllGraphics(),this.resetAllSelections(),this.state=gr.Spawning,this.addToTilePickerSection(this.spawnSelector.tileSelectorGraphic.view)},this.goToSettingsSection=()=>{this.resetAllGraphics(),this.resetAllSelections(),this.state=gr.Settings},this.goToImportExportSection=()=>{this.resetAllGraphics(),this.resetAllSelections(),this.state=gr.ImportExport},this.mouseService=e,this.terrainSelector=new Dg(this.existingTerrainCount,"TERRAIN"),this.mobSelector=new Dg(this.existingMobCount,"MOB"),this.spawnSelector=new Dg(this.existingSpawnings,"SPAWN"),this.addMouseListenersToTileSelectorGraphic(this.terrainSelector),this.addMouseListenersToTileSelectorGraphic(this.mobSelector),this.addMouseListenersToTileSelectorGraphic(this.spawnSelector),this.goToTerrainSection()}addMouseListenersToTileSelectorGraphic(e){e.tiles.forEach(t=>{t.forEach(r=>{r.interactive=!0,r.on("mousedown",i=>{this.handleMouseDown(i)}),r.on("click",i=>{this.handleClick(i)})})})}handleMouseDown(e){this.mouseDownCoordinates=[e.data.originalEvent.clientX,e.data.originalEvent.clientY]}handleClick(e){const r=this.mouseDownCoordinates[1],o=e.data.originalEvent.clientY;Math.abs(this.mouseDownCoordinates[0]-e.data.originalEvent.clientX)<10&&Math.abs(r-o)<10&&(this.resetAllSelections(),e.currentTarget.alpha=.5,this.setSelectedTile())}setSelectedTile(){this.selectedValue=Math.max(this.terrainSelector.getSelectedTileValue(),this.mobSelector.getSelectedTileValue(),this.spawnSelector.getSelectedTileValue())}resetAllGraphics(){this.terrainSelector.tileSelectorGraphic.view.remove(),this.mobSelector.tileSelectorGraphic.view.remove(),this.spawnSelector.tileSelectorGraphic.view.remove()}resetAllSelections(){this.terrainSelector.resetSelections(),this.mobSelector.resetSelections(),this.spawnSelector.resetSelections()}addToTilePickerSection(e){document.getElementById("tile-picker-section").appendChild(e)}}class xn{constructor(e,t){this.name=e,this.value=t}}class m5{constructor(e,t){this.gameMap=e.map(r=>r.map(i=>({terrain:i.terrainValue,mob:i.mobValue,spawn:i.spawnValue}))),this.settings=t}toString(){return JSON.stringify({gameMap:this.gameMap,settings:this.settings})}}class Nd{constructor(e,t){this.terrainValue=0,this.terrainSprite=new ki,this.terrainSprite.x=e,this.terrainSprite.y=t,this.terrainSprite.texture=this.generateTerrainTileTexture(0),this.terrainSprite.interactive=!0,this.mobValue=-1,this.mobSprite=new ki,this.mobSprite.x=e,this.mobSprite.y=t,this.mobSprite.texture=null,this.spawnValue=-1,this.spawnSprite=new ki,this.spawnSprite.x=e,this.spawnSprite.y=t,this.spawnSprite.alpha=.3}reset(){this.terrainValue=0,this.terrainSprite.texture=this.generateTerrainTileTexture(0),this.mobValue=-1,this.mobSprite.texture=null,this.spawnValue=-1,this.spawnSprite.texture=null}updateTerrain(e){this.terrainValue=e,this.terrainSprite.texture=this.generateTerrainTileTexture(e)}updateMob(e){this.mobValue=e,this.mobSprite.texture=this.generateMobTileTexture(e)}updateSpawn(e){this.spawnValue=e,this.spawnSprite.texture=this.generateSpawnTileTexture(e)}generateTerrainTileTexture(e){let t=Ee.from("./../assets/TILESET_TERRAIN.png");return new Ee(t.baseTexture,new Fe(e%12*32,(e-e%12)/12*32,32,32))}generateMobTileTexture(e){if(e<0)return;let t=Ee.from("./../assets/TILESET_MOB.png");return new Ee(t.baseTexture,new Fe(e%12*32,(e-e%12)/12*32,32,32))}generateSpawnTileTexture(e){if(e<0)return;let t=Ee.from("./../assets/TILESET_SPAWN.png");return new Ee(t.baseTexture,new Fe(e%12*32,(e-e%12)/12*32,32,32))}}class g5{constructor(e,t,r){this.mouseService=r,this.width=e,this.height=t,this.mapSettings=[new xn("Red Key",10),new xn("Yellow Key",10),new xn("Blue Key",10),new xn("Green Key",4),new xn("Flippers",4),new xn("Fire Boots",4),new xn("Ice Skates",4),new xn("Force Boots",4),new xn("Bomb",20),new xn("Chip",50),new xn("Bowling Ball",10),new xn("Whistle",15),new xn("Toggle Chip",20),new xn("Golden Chip",4),new xn("Treasure Chest",1)],this.tileSelector=new _5(this.mouseService),this.gameMapGraphic=new Nl({transparent:!0,height:32*this.height,width:32*this.width}),this.map=[];for(var i=0;i<this.width;i++){this.map[i]=[];for(var o=0;o<this.height;o++)this.map[i][o]=new Nd(32*i,32*o),this.addMouseListeners(this.map[i][o].terrainSprite),this.gameMapGraphic.stage.addChild(this.map[i][o].terrainSprite),this.gameMapGraphic.stage.addChild(this.map[i][o].mobSprite),this.gameMapGraphic.stage.addChild(this.map[i][o].spawnSprite)}}regenerateMap(e,t){this.width=t.length,this.height=t[0].length;for(var r=this.gameMapGraphic.stage.children.length-1;r>=0;r--)this.gameMapGraphic.stage.removeChild(this.gameMapGraphic.stage.children[r]);for(var o of(this.resize(),this.mapSettings=e,["Red Key","Yellow Key","Blue Key","Green Key","Flippers","Fire Boots","Ice Skates","Force Boots","Bomb","Chip","Bowling Ball","Whistle","Toggle Chip","Golden Chip","Treasure Chest"]))null==this.getMapSettingByName(o)&&this.mapSettings.push(new xn(o,0));for(this.map=[],r=0;r<this.width;r++){this.map[r]=[];for(var s=0;s<this.height;s++)this.map[r][s]=new Nd(32*r,32*s),this.map[r][s].updateTerrain(t[r][s].terrain),this.map[r][s].updateMob(t[r][s].mob),this.map[r][s].updateSpawn(t[r][s].spawn),this.addMouseListeners(this.map[r][s].terrainSprite),this.gameMapGraphic.stage.addChild(this.map[r][s].terrainSprite),this.gameMapGraphic.stage.addChild(this.map[r][s].mobSprite),this.gameMapGraphic.stage.addChild(this.map[r][s].spawnSprite)}}resize(){this.gameMapGraphic.renderer.resize(32*this.width,32*this.height)}decrementHeight(){if(this.height>9){this.height--,this.resize();for(var e=0;e<this.map.length;e++)this.gameMapGraphic.stage.removeChild(this.map[e][this.map[0].length-1].terrainSprite),this.gameMapGraphic.stage.removeChild(this.map[e][this.map[0].length-1].mobSprite),this.gameMapGraphic.stage.removeChild(this.map[e][this.map[0].length-1].spawnSprite);for(e=0;e<this.map.length;e++)this.map[e].pop()}}incrementHeight(){if(this.height<32){this.height++,this.resize();for(var e=this.map[0].length,t=0;t<this.map.length;t++)this.map[t][e]=new Nd(32*t,32*e),this.addMouseListeners(this.map[t][e].terrainSprite),this.gameMapGraphic.stage.addChild(this.map[t][e].terrainSprite),this.gameMapGraphic.stage.addChild(this.map[t][e].mobSprite),this.gameMapGraphic.stage.addChild(this.map[t][e].spawnSprite)}}decrementWidth(){if(this.width>9){this.width--,this.resize();for(var e=0;e<this.map[0].length;e++)this.gameMapGraphic.stage.removeChild(this.map[this.map.length-1][e].terrainSprite),this.gameMapGraphic.stage.removeChild(this.map[this.map.length-1][e].mobSprite),this.gameMapGraphic.stage.removeChild(this.map[this.map.length-1][e].spawnSprite);this.map.pop()}}incrementWidth(){if(this.width<32){this.width++,this.resize();var e=this.map.length;this.map.push([]);for(var t=0;t<this.map[0].length;t++)this.map[e][t]=new Nd(32*e,32*t),this.addMouseListeners(this.map[e][t].terrainSprite),this.gameMapGraphic.stage.addChild(this.map[e][t].terrainSprite),this.gameMapGraphic.stage.addChild(this.map[e][t].mobSprite),this.gameMapGraphic.stage.addChild(this.map[e][t].spawnSprite)}}generateExportFile(){return new m5(this.map,this.mapSettings)}getMapSettingByName(e){for(var t=0;t<this.mapSettings.length;t++)if(this.mapSettings[t].name==e)return this.mapSettings[t];return null}updateTile(e,t,r){if(!(r<0))try{switch(this.tileSelector.state){case gr.Terrain:this.map[e][t].updateTerrain(r);break;case gr.Mobs:this.map[e][t].updateMob(r);break;case gr.Spawning:this.map[e][t].updateSpawn(r)}}catch(i){this.mouseService.leftClickDown=!1}}addMouseListeners(e){e.on("mousedown",()=>{this.mouseService.leftClickDown=!0}),e.on("rightdown",()=>{this.mouseService.rightClickDown=!0}),e.on("mousemove",t=>{var r=Math.floor(t.data.global.x/32),i=Math.floor(t.data.global.y/32);this.mouseService.leftClickDown?this.updateTile(r,i,this.tileSelector.selectedValue):this.mouseService.rightClickDown&&this.map[r][i].reset()}),e.on("mouseup",t=>{var r=Math.floor(t.data.global.x/32),i=Math.floor(t.data.global.y/32);this.mouseService.leftClickDown&&this.updateTile(r,i,this.tileSelector.selectedValue),this.mouseService.leftClickDown=!1}),e.on("rightup",t=>{var r=Math.floor(t.data.global.x/32),i=Math.floor(t.data.global.y/32);this.mouseService.rightClickDown&&this.map[r][i].reset(),this.mouseService.rightClickDown=!1})}}class v5{constructor(){this.leftClickDown=!1,this.rightClickDown=!1}}let Sg;try{Sg="undefined"!=typeof Intl&&Intl.v8BreakIterator}catch(n){Sg=!1}let zl,Mg,ya=(()=>{class n{constructor(t){this._platformId=t,this.isBrowser=this._platformId?function T2(n){return n===cS}(this._platformId):"object"==typeof document&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!(!window.chrome&&!Sg)&&"undefined"!=typeof CSS&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}}return n.\u0275fac=function(t){return new(t||n)(Y(d_))},n.\u0275prov=Ce({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function so(n){return function y5(){if(null==zl&&"undefined"!=typeof window)try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:()=>zl=!0}))}finally{zl=zl||!1}return zl}()?n:!!n.capture}function Cg(n){if(function E5(){if(null==Mg){const n="undefined"!=typeof document?document.head:null;Mg=!(!n||!n.createShadowRoot&&!n.attachShadow)}return Mg}()){const e=n.getRootNode?n.getRootNode():null;if("undefined"!=typeof ShadowRoot&&ShadowRoot&&e instanceof ShadowRoot)return e}return null}function Ui(n){return n.composedPath?n.composedPath()[0]:n.target}function jr(n){return null!=n&&"false"!=`${n}`}function qC(n){return Array.isArray(n)?n:[n]}function cn(n){return n instanceof fn?n.nativeElement:n}function qo(...n){return yo(n,Aa(n))}function KC(n,e){return ve((t,r)=>{let i=0;t.subscribe(V(r,o=>n.call(e,o,i++)&&r.next(o)))})}function Wl(n){return ve((e,t)=>{Sr(n).subscribe(V(t,()=>t.complete(),He)),!t.closed&&e.subscribe(t)})}class V5 extends ae{constructor(e,t){super()}schedule(e,t=0){return this}}const Ld={setInterval(n,e,...t){const{delegate:r}=Ld;return null!=r&&r.setInterval?r.setInterval(n,e,...t):setInterval(n,e,...t)},clearInterval(n){const{delegate:e}=Ld;return((null==e?void 0:e.clearInterval)||clearInterval)(n)},delegate:void 0};class Ag extends V5{constructor(e,t){super(e,t),this.scheduler=e,this.work=t,this.pending=!1}schedule(e,t=0){if(this.closed)return this;this.state=e;const r=this.id,i=this.scheduler;return null!=r&&(this.id=this.recycleAsyncId(i,r,t)),this.pending=!0,this.delay=t,this.id=this.id||this.requestAsyncId(i,this.id,t),this}requestAsyncId(e,t,r=0){return Ld.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,t,r=0){if(null!=r&&this.delay===r&&!1===this.pending)return t;Ld.clearInterval(t)}execute(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const r=this._execute(e,t);if(r)return r;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,t){let i,r=!1;try{this.work(e)}catch(o){r=!0,i=o||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){const{id:e,scheduler:t}=this,{actions:r}=t;this.work=this.state=this.scheduler=null,this.pending=!1,De(r,this),null!=e&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null,super.unsubscribe()}}}const ZC={now:()=>(ZC.delegate||Date).now(),delegate:void 0};class Xl{constructor(e,t=Xl.now){this.schedulerActionCtor=e,this.now=t}schedule(e,t=0,r){return new this.schedulerActionCtor(this,e).schedule(r,t)}}Xl.now=ZC.now;class wg extends Xl{constructor(e,t=Xl.now){super(e,t),this.actions=[],this._active=!1,this._scheduled=void 0}flush(e){const{actions:t}=this;if(this._active)return void t.push(e);let r;this._active=!0;do{if(r=e.execute(e.state,e.delay))break}while(e=t.shift());if(this._active=!1,r){for(;e=t.shift();)e.unsubscribe();throw r}}}const Bd=new wg(Ag),G5=Bd;let eA=(()=>{class n{create(t){return"undefined"==typeof MutationObserver?null:new MutationObserver(t)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=Ce({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),kd=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=At({type:n}),n.\u0275inj=Dt({providers:[eA]}),n})();const{isArray:Y5}=Array,{getPrototypeOf:z5,prototype:W5,keys:X5}=Object;function tA(n){if(1===n.length){const e=n[0];if(Y5(e))return{args:e,keys:null};if(function $5(n){return n&&"object"==typeof n&&z5(n)===W5}(e)){const t=X5(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}const{isArray:q5}=Array;function nA(n){return $(e=>function K5(n,e){return q5(e)?n(...e):n(e)}(n,e))}function rA(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}function iA(n,e,t){n?mi(t,n,e):e()}function xg(...n){return function J5(){return qv(1)}()(yo(n,Aa(n)))}function Rg(...n){const e=Aa(n);return ve((t,r)=>{(e?xg(n,t,e):xg(n,t)).subscribe(r)})}const oA=new Set;let ba,e8=(()=>{class n{constructor(t){this._platform=t,this._matchMedia=this._platform.isBrowser&&window.matchMedia?window.matchMedia.bind(window):n8}matchMedia(t){return(this._platform.WEBKIT||this._platform.BLINK)&&function t8(n){if(!oA.has(n))try{ba||(ba=document.createElement("style"),ba.setAttribute("type","text/css"),document.head.appendChild(ba)),ba.sheet&&(ba.sheet.insertRule(`@media ${n} {body{ }}`,0),oA.add(n))}catch(e){console.error(e)}}(t),this._matchMedia(t)}}return n.\u0275fac=function(t){return new(t||n)(Y(ya))},n.\u0275prov=Ce({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function n8(n){return{matches:"all"===n||""===n,media:n,addListener:()=>{},removeListener:()=>{}}}let r8=(()=>{class n{constructor(t,r){this._mediaMatcher=t,this._zone=r,this._queries=new Map,this._destroySubject=new O}ngOnDestroy(){this._destroySubject.next(),this._destroySubject.complete()}isMatched(t){return sA(qC(t)).some(i=>this._registerQuery(i).mql.matches)}observe(t){let o=function Q5(...n){const e=Aa(n),t=Qv(n),{args:r,keys:i}=tA(n);if(0===r.length)return yo([],e);const o=new E(function Z5(n,e,t=vt){return r=>{iA(e,()=>{const{length:i}=n,o=new Array(i);let s=i,a=i;for(let l=0;l<i;l++)iA(e,()=>{const u=yo(n[l],e);let c=!1;u.subscribe(V(r,d=>{o[l]=d,c||(c=!0,a--),a||r.next(t(o.slice()))},()=>{--s||r.complete()}))},r)},r)}}(r,e,i?s=>rA(i,s):vt));return t?o.pipe(nA(t)):o}(sA(qC(t)).map(s=>this._registerQuery(s).observable));return o=xg(o.pipe(wa(1)),o.pipe(function QC(n){return KC((e,t)=>n<=t)}(1),function JC(n,e=Bd){return ve((t,r)=>{let i=null,o=null,s=null;const a=()=>{if(i){i.unsubscribe(),i=null;const u=o;o=null,r.next(u)}};function l(){const u=s+n,c=e.now();if(c<u)return i=this.schedule(void 0,u-c),void r.add(i);a()}t.subscribe(V(r,u=>{o=u,s=e.now(),i||(i=e.schedule(l,n),r.add(i))},()=>{a(),r.complete()},void 0,()=>{o=i=null}))})}(0))),o.pipe($(s=>{const a={matches:!1,breakpoints:{}};return s.forEach(({matches:l,query:u})=>{a.matches=a.matches||l,a.breakpoints[u]=l}),a}))}_registerQuery(t){if(this._queries.has(t))return this._queries.get(t);const r=this._mediaMatcher.matchMedia(t),o={observable:new E(s=>{const a=l=>this._zone.run(()=>s.next(l));return r.addListener(a),()=>{r.removeListener(a)}}).pipe(Rg(r),$(({matches:s})=>({query:t,matches:s})),Wl(this._destroySubject)),mql:r};return this._queries.set(t,o),o}}return n.\u0275fac=function(t){return new(t||n)(Y(e8),Y(it))},n.\u0275prov=Ce({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function sA(n){return n.map(e=>e.split(",")).reduce((e,t)=>e.concat(t)).map(e=>e.trim())}const hA="cdk-high-contrast-black-on-white",fA="cdk-high-contrast-white-on-black",Pg="cdk-high-contrast-active";let pA=(()=>{class n{constructor(t,r){this._platform=t,this._document=r,this._breakpointSubscription=ja(r8).observe("(forced-colors: active)").subscribe(()=>{this._hasCheckedHighContrastMode&&(this._hasCheckedHighContrastMode=!1,this._applyBodyHighContrastModeCssClasses())})}getHighContrastMode(){if(!this._platform.isBrowser)return 0;const t=this._document.createElement("div");t.style.backgroundColor="rgb(1,2,3)",t.style.position="absolute",this._document.body.appendChild(t);const r=this._document.defaultView||window,i=r&&r.getComputedStyle?r.getComputedStyle(t):null,o=(i&&i.backgroundColor||"").replace(/ /g,"");switch(t.remove(),o){case"rgb(0,0,0)":return 2;case"rgb(255,255,255)":return 1}return 0}ngOnDestroy(){this._breakpointSubscription.unsubscribe()}_applyBodyHighContrastModeCssClasses(){if(!this._hasCheckedHighContrastMode&&this._platform.isBrowser&&this._document.body){const t=this._document.body.classList;t.remove(Pg,hA,fA),this._hasCheckedHighContrastMode=!0;const r=this.getHighContrastMode();1===r?t.add(Pg,hA):2===r&&t.add(Pg,fA)}}}return n.\u0275fac=function(t){return new(t||n)(Y(ya),Y(_t))},n.\u0275prov=Ce({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),m8=(()=>{class n{constructor(t){t._applyBodyHighContrastModeCssClasses()}}return n.\u0275fac=function(t){return new(t||n)(Y(pA))},n.\u0275mod=At({type:n}),n.\u0275inj=Dt({imports:[kd]}),n})();function _A(n=0,e,t=G5){let r=-1;return null!=e&&(Kv(e)?t=e:r=e),new E(i=>{let o=function g8(n){return n instanceof Date&&!isNaN(n)}(n)?+n-t.now():n;o<0&&(o=0);let s=0;return t.schedule(function(){i.closed||(i.next(s++),0<=r?this.schedule(void 0,r):i.complete())},o)})}const $l={schedule(n){let e=requestAnimationFrame,t=cancelAnimationFrame;const{delegate:r}=$l;r&&(e=r.requestAnimationFrame,t=r.cancelAnimationFrame);const i=e(o=>{t=void 0,n(o)});return new ae(()=>null==t?void 0:t(i))},requestAnimationFrame(...n){const{delegate:e}=$l;return((null==e?void 0:e.requestAnimationFrame)||requestAnimationFrame)(...n)},cancelAnimationFrame(...n){const{delegate:e}=$l;return((null==e?void 0:e.cancelAnimationFrame)||cancelAnimationFrame)(...n)},delegate:void 0},mA=new class E8 extends wg{flush(e){this._active=!0;const t=this._scheduled;this._scheduled=void 0;const{actions:r}=this;let i;e=e||r.shift();do{if(i=e.execute(e.state,e.delay))break}while((e=r[0])&&e.id===t&&r.shift());if(this._active=!1,i){for(;(e=r[0])&&e.id===t&&r.shift();)e.unsubscribe();throw i}}}(class y8 extends Ag{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}requestAsyncId(e,t,r=0){return null!==r&&r>0?super.requestAsyncId(e,t,r):(e.actions.push(this),e._scheduled||(e._scheduled=$l.requestAnimationFrame(()=>e.flush(void 0))))}recycleAsyncId(e,t,r=0){if(null!=r&&r>0||null==r&&this.delay>0)return super.recycleAsyncId(e,t,r);e.actions.some(i=>i.id===t)||($l.cancelAnimationFrame(t),e._scheduled=void 0)}});function Vd(n,e,t){const r=se(n)||e||t?{next:n,error:e,complete:t}:n;return r?ve((i,o)=>{var s;null===(s=r.subscribe)||void 0===s||s.call(r);let a=!0;i.subscribe(V(o,l=>{var u;null===(u=r.next)||void 0===u||u.call(r,l),o.next(l)},()=>{var l;a=!1,null===(l=r.complete)||void 0===l||l.call(r),o.complete()},l=>{var u;a=!1,null===(u=r.error)||void 0===u||u.call(r,l),o.error(l)},()=>{var l,u;a&&(null===(l=r.unsubscribe)||void 0===l||l.call(r)),null===(u=r.finalize)||void 0===u||u.call(r)}))}):vt}let Ng,T8=1;const Gd={};function gA(n){return n in Gd&&(delete Gd[n],!0)}const D8={setImmediate(n){const e=T8++;return Gd[e]=!0,Ng||(Ng=Promise.resolve()),Ng.then(()=>gA(e)&&n()),e},clearImmediate(n){gA(n)}},{setImmediate:S8,clearImmediate:M8}=D8,Hd={setImmediate(...n){const{delegate:e}=Hd;return((null==e?void 0:e.setImmediate)||S8)(...n)},clearImmediate(n){const{delegate:e}=Hd;return((null==e?void 0:e.clearImmediate)||M8)(n)},delegate:void 0};new class A8 extends wg{flush(e){this._active=!0;const t=this._scheduled;this._scheduled=void 0;const{actions:r}=this;let i;e=e||r.shift();do{if(i=e.execute(e.state,e.delay))break}while((e=r[0])&&e.id===t&&r.shift());if(this._active=!1,i){for(;(e=r[0])&&e.id===t&&r.shift();)e.unsubscribe();throw i}}}(class C8 extends Ag{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}requestAsyncId(e,t,r=0){return null!==r&&r>0?super.requestAsyncId(e,t,r):(e.actions.push(this),e._scheduled||(e._scheduled=Hd.setImmediate(e.flush.bind(e,void 0))))}recycleAsyncId(e,t,r=0){if(null!=r&&r>0||null==r&&this.delay>0)return super.recycleAsyncId(e,t,r);e.actions.some(i=>i.id===t)||(Hd.clearImmediate(t),e._scheduled=void 0)}});let O8=(()=>{class n{constructor(t,r,i){this._platform=t,this._change=new O,this._changeListener=o=>{this._change.next(o)},this._document=i,r.runOutsideAngular(()=>{if(t.isBrowser){const o=this._getWindow();o.addEventListener("resize",this._changeListener),o.addEventListener("orientationchange",this._changeListener)}this.change().subscribe(()=>this._viewportSize=null)})}ngOnDestroy(){if(this._platform.isBrowser){const t=this._getWindow();t.removeEventListener("resize",this._changeListener),t.removeEventListener("orientationchange",this._changeListener)}this._change.complete()}getViewportSize(){this._viewportSize||this._updateViewportSize();const t={width:this._viewportSize.width,height:this._viewportSize.height};return this._platform.isBrowser||(this._viewportSize=null),t}getViewportRect(){const t=this.getViewportScrollPosition(),{width:r,height:i}=this.getViewportSize();return{top:t.top,left:t.left,bottom:t.top+i,right:t.left+r,height:i,width:r}}getViewportScrollPosition(){if(!this._platform.isBrowser)return{top:0,left:0};const t=this._document,r=this._getWindow(),i=t.documentElement,o=i.getBoundingClientRect();return{top:-o.top||t.body.scrollTop||r.scrollY||i.scrollTop||0,left:-o.left||t.body.scrollLeft||r.scrollX||i.scrollLeft||0}}change(t=20){return t>0?this._change.pipe(function R8(n,e=Bd){return function x8(n){return ve((e,t)=>{let r=!1,i=null,o=null,s=!1;const a=()=>{if(null==o||o.unsubscribe(),o=null,r){r=!1;const u=i;i=null,t.next(u)}s&&t.complete()},l=()=>{o=null,s&&t.complete()};e.subscribe(V(t,u=>{r=!0,i=u,o||Sr(n(u)).subscribe(o=V(t,a,l))},()=>{s=!0,(!r||!o||o.closed)&&t.complete()}))})}(()=>_A(n,e))}(t)):this._change}_getWindow(){return this._document.defaultView||window}_updateViewportSize(){const t=this._getWindow();this._viewportSize=this._platform.isBrowser?{width:t.innerWidth,height:t.innerHeight}:{width:0,height:0}}}return n.\u0275fac=function(t){return new(t||n)(Y(ya),Y(it),Y(_t,8))},n.\u0275prov=Ce({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),P8=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=At({type:n}),n.\u0275inj=Dt({}),n})();const N8=new j("cdk-dir-doc",{providedIn:"root",factory:function F8(){return ja(_t)}}),L8=/^(ar|ckb|dv|he|iw|fa|nqo|ps|sd|ug|ur|yi|.*[-_](Adlm|Arab|Hebr|Nkoo|Rohg|Thaa))(?!.*[-_](Latn|Cyrl)($|-|_))($|-|_)/i;let vA=(()=>{class n{constructor(t){if(this.value="ltr",this.change=new rt,t){const i=t.documentElement?t.documentElement.dir:null;this.value=function B8(n){const e=(null==n?void 0:n.toLowerCase())||"";return"auto"===e&&"undefined"!=typeof navigator&&(null==navigator?void 0:navigator.language)?L8.test(navigator.language)?"rtl":"ltr":"rtl"===e?"rtl":"ltr"}((t.body?t.body.dir:null)||i||"ltr")}}ngOnDestroy(){this.change.complete()}}return n.\u0275fac=function(t){return new(t||n)(Y(N8,8))},n.\u0275prov=Ce({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),yA=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=At({type:n}),n.\u0275inj=Dt({}),n})();function Fg(n,e,t){for(let r in e)if(e.hasOwnProperty(r)){const i=e[r];i?n.setProperty(r,i,null!=t&&t.has(r)?"important":""):n.removeProperty(r)}return n}function Da(n,e){const t=e?"":"none";Fg(n.style,{"touch-action":e?"":"none","-webkit-user-drag":e?"":"none","-webkit-tap-highlight-color":e?"":"transparent","user-select":t,"-ms-user-select":t,"-webkit-user-select":t,"-moz-user-select":t})}function EA(n,e,t){Fg(n.style,{position:e?"":"fixed",top:e?"":"0",opacity:e?"":"0",left:e?"":"-999em"},t)}function jd(n,e){return e&&"none"!=e?n+" "+e:n}function bA(n){const e=n.toLowerCase().indexOf("ms")>-1?1:1e3;return parseFloat(n)*e}function Lg(n,e){return n.getPropertyValue(e).split(",").map(r=>r.trim())}function Bg(n){const e=n.getBoundingClientRect();return{top:e.top,right:e.right,bottom:e.bottom,left:e.left,width:e.width,height:e.height,x:e.x,y:e.y}}function kg(n,e,t){const{top:r,bottom:i,left:o,right:s}=n;return t>=r&&t<=i&&e>=o&&e<=s}function ql(n,e,t){n.top+=e,n.bottom=n.top+n.height,n.left+=t,n.right=n.left+n.width}function TA(n,e,t,r){const{top:i,right:o,bottom:s,left:a,width:l,height:u}=n,c=l*e,d=u*e;return r>i-d&&r<s+d&&t>a-c&&t<o+c}class DA{constructor(e){this._document=e,this.positions=new Map}clear(){this.positions.clear()}cache(e){this.clear(),this.positions.set(this._document,{scrollPosition:this.getViewportScrollPosition()}),e.forEach(t=>{this.positions.set(t,{scrollPosition:{top:t.scrollTop,left:t.scrollLeft},clientRect:Bg(t)})})}handleScroll(e){const t=Ui(e),r=this.positions.get(t);if(!r)return null;const i=r.scrollPosition;let o,s;if(t===this._document){const u=this.getViewportScrollPosition();o=u.top,s=u.left}else o=t.scrollTop,s=t.scrollLeft;const a=i.top-o,l=i.left-s;return this.positions.forEach((u,c)=>{u.clientRect&&t!==c&&t.contains(c)&&ql(u.clientRect,a,l)}),i.top=o,i.left=s,{top:a,left:l}}getViewportScrollPosition(){return{top:window.scrollY,left:window.scrollX}}}function SA(n){const e=n.cloneNode(!0),t=e.querySelectorAll("[id]"),r=n.nodeName.toLowerCase();e.removeAttribute("id");for(let i=0;i<t.length;i++)t[i].removeAttribute("id");return"canvas"===r?AA(n,e):("input"===r||"select"===r||"textarea"===r)&&CA(n,e),MA("canvas",n,e,AA),MA("input, textarea, select",n,e,CA),e}function MA(n,e,t,r){const i=e.querySelectorAll(n);if(i.length){const o=t.querySelectorAll(n);for(let s=0;s<i.length;s++)r(i[s],o[s])}}let U8=0;function CA(n,e){"file"!==e.type&&(e.value=n.value),"radio"===e.type&&e.name&&(e.name=`mat-clone-${e.name}-${U8++}`)}function AA(n,e){const t=e.getContext("2d");if(t)try{t.drawImage(n,0,0)}catch(r){}}const wA=so({passive:!0}),Yd=so({passive:!1}),Ug=new Set(["position"]);class G8{constructor(e,t,r,i,o,s){this._config=t,this._document=r,this._ngZone=i,this._viewportRuler=o,this._dragDropRegistry=s,this._passiveTransform={x:0,y:0},this._activeTransform={x:0,y:0},this._hasStartedDragging=!1,this._moveEvents=new O,this._pointerMoveSubscription=ae.EMPTY,this._pointerUpSubscription=ae.EMPTY,this._scrollSubscription=ae.EMPTY,this._resizeSubscription=ae.EMPTY,this._boundaryElement=null,this._nativeInteractionsEnabled=!0,this._handles=[],this._disabledHandles=new Set,this._direction="ltr",this.dragStartDelay=0,this._disabled=!1,this.beforeStarted=new O,this.started=new O,this.released=new O,this.ended=new O,this.entered=new O,this.exited=new O,this.dropped=new O,this.moved=this._moveEvents,this._pointerDown=a=>{if(this.beforeStarted.next(),this._handles.length){const l=this._getTargetHandle(a);l&&!this._disabledHandles.has(l)&&!this.disabled&&this._initializeDragSequence(l,a)}else this.disabled||this._initializeDragSequence(this._rootElement,a)},this._pointerMove=a=>{const l=this._getPointerPositionOnPage(a);if(!this._hasStartedDragging){if(Math.abs(l.x-this._pickupPositionOnPage.x)+Math.abs(l.y-this._pickupPositionOnPage.y)>=this._config.dragStartThreshold){const f=Date.now()>=this._dragStartTime+this._getDragStartDelay(a),p=this._dropContainer;if(!f)return void this._endDragSequence(a);(!p||!p.isDragging()&&!p.isReceiving())&&(a.preventDefault(),this._hasStartedDragging=!0,this._ngZone.run(()=>this._startDragSequence(a)))}return}a.preventDefault();const u=this._getConstrainedPointerPosition(l);if(this._hasMoved=!0,this._lastKnownPointerPosition=l,this._updatePointerDirectionDelta(u),this._dropContainer)this._updateActiveDropContainer(u,l);else{const c=this.constrainPosition?this._initialClientRect:this._pickupPositionOnPage,d=this._activeTransform;d.x=u.x-c.x+this._passiveTransform.x,d.y=u.y-c.y+this._passiveTransform.y,this._applyRootElementTransform(d.x,d.y)}this._moveEvents.observers.length&&this._ngZone.run(()=>{this._moveEvents.next({source:this,pointerPosition:u,event:a,distance:this._getDragDistance(u),delta:this._pointerDirectionDelta})})},this._pointerUp=a=>{this._endDragSequence(a)},this._nativeDragStart=a=>{if(this._handles.length){const l=this._getTargetHandle(a);l&&!this._disabledHandles.has(l)&&!this.disabled&&a.preventDefault()}else this.disabled||a.preventDefault()},this.withRootElement(e).withParent(t.parentDragRef||null),this._parentPositions=new DA(r),s.registerDragItem(this)}get disabled(){return this._disabled||!(!this._dropContainer||!this._dropContainer.disabled)}set disabled(e){const t=jr(e);t!==this._disabled&&(this._disabled=t,this._toggleNativeDragInteractions(),this._handles.forEach(r=>Da(r,t)))}getPlaceholderElement(){return this._placeholder}getRootElement(){return this._rootElement}getVisibleElement(){return this.isDragging()?this.getPlaceholderElement():this.getRootElement()}withHandles(e){this._handles=e.map(r=>cn(r)),this._handles.forEach(r=>Da(r,this.disabled)),this._toggleNativeDragInteractions();const t=new Set;return this._disabledHandles.forEach(r=>{this._handles.indexOf(r)>-1&&t.add(r)}),this._disabledHandles=t,this}withPreviewTemplate(e){return this._previewTemplate=e,this}withPlaceholderTemplate(e){return this._placeholderTemplate=e,this}withRootElement(e){const t=cn(e);return t!==this._rootElement&&(this._rootElement&&this._removeRootElementListeners(this._rootElement),this._ngZone.runOutsideAngular(()=>{t.addEventListener("mousedown",this._pointerDown,Yd),t.addEventListener("touchstart",this._pointerDown,wA),t.addEventListener("dragstart",this._nativeDragStart,Yd)}),this._initialTransform=void 0,this._rootElement=t),"undefined"!=typeof SVGElement&&this._rootElement instanceof SVGElement&&(this._ownerSVGElement=this._rootElement.ownerSVGElement),this}withBoundaryElement(e){return this._boundaryElement=e?cn(e):null,this._resizeSubscription.unsubscribe(),e&&(this._resizeSubscription=this._viewportRuler.change(10).subscribe(()=>this._containInsideBoundaryOnResize())),this}withParent(e){return this._parentDragRef=e,this}dispose(){var e,t;this._removeRootElementListeners(this._rootElement),this.isDragging()&&(null===(e=this._rootElement)||void 0===e||e.remove()),null===(t=this._anchor)||void 0===t||t.remove(),this._destroyPreview(),this._destroyPlaceholder(),this._dragDropRegistry.removeDragItem(this),this._removeSubscriptions(),this.beforeStarted.complete(),this.started.complete(),this.released.complete(),this.ended.complete(),this.entered.complete(),this.exited.complete(),this.dropped.complete(),this._moveEvents.complete(),this._handles=[],this._disabledHandles.clear(),this._dropContainer=void 0,this._resizeSubscription.unsubscribe(),this._parentPositions.clear(),this._boundaryElement=this._rootElement=this._ownerSVGElement=this._placeholderTemplate=this._previewTemplate=this._anchor=this._parentDragRef=null}isDragging(){return this._hasStartedDragging&&this._dragDropRegistry.isDragging(this)}reset(){this._rootElement.style.transform=this._initialTransform||"",this._activeTransform={x:0,y:0},this._passiveTransform={x:0,y:0}}disableHandle(e){!this._disabledHandles.has(e)&&this._handles.indexOf(e)>-1&&(this._disabledHandles.add(e),Da(e,!0))}enableHandle(e){this._disabledHandles.has(e)&&(this._disabledHandles.delete(e),Da(e,this.disabled))}withDirection(e){return this._direction=e,this}_withDropContainer(e){this._dropContainer=e}getFreeDragPosition(){const e=this.isDragging()?this._activeTransform:this._passiveTransform;return{x:e.x,y:e.y}}setFreeDragPosition(e){return this._activeTransform={x:0,y:0},this._passiveTransform.x=e.x,this._passiveTransform.y=e.y,this._dropContainer||this._applyRootElementTransform(e.x,e.y),this}withPreviewContainer(e){return this._previewContainer=e,this}_sortFromLastPointerPosition(){const e=this._lastKnownPointerPosition;e&&this._dropContainer&&this._updateActiveDropContainer(this._getConstrainedPointerPosition(e),e)}_removeSubscriptions(){this._pointerMoveSubscription.unsubscribe(),this._pointerUpSubscription.unsubscribe(),this._scrollSubscription.unsubscribe()}_destroyPreview(){var e,t;null===(e=this._preview)||void 0===e||e.remove(),null===(t=this._previewRef)||void 0===t||t.destroy(),this._preview=this._previewRef=null}_destroyPlaceholder(){var e,t;null===(e=this._placeholder)||void 0===e||e.remove(),null===(t=this._placeholderRef)||void 0===t||t.destroy(),this._placeholder=this._placeholderRef=null}_endDragSequence(e){if(this._dragDropRegistry.isDragging(this)&&(this._removeSubscriptions(),this._dragDropRegistry.stopDragging(this),this._toggleNativeDragInteractions(),this._handles&&(this._rootElement.style.webkitTapHighlightColor=this._rootElementTapHighlight),this._hasStartedDragging))if(this.released.next({source:this,event:e}),this._dropContainer)this._dropContainer._stopScrolling(),this._animatePreviewToPlaceholder().then(()=>{this._cleanupDragArtifacts(e),this._cleanupCachedDimensions(),this._dragDropRegistry.stopDragging(this)});else{this._passiveTransform.x=this._activeTransform.x;const t=this._getPointerPositionOnPage(e);this._passiveTransform.y=this._activeTransform.y,this._ngZone.run(()=>{this.ended.next({source:this,distance:this._getDragDistance(t),dropPoint:t,event:e})}),this._cleanupCachedDimensions(),this._dragDropRegistry.stopDragging(this)}}_startDragSequence(e){Kl(e)&&(this._lastTouchEventTime=Date.now()),this._toggleNativeDragInteractions();const t=this._dropContainer;if(t){const r=this._rootElement,i=r.parentNode,o=this._placeholder=this._createPlaceholderElement(),s=this._anchor=this._anchor||this._document.createComment(""),a=this._getShadowRoot();i.insertBefore(s,r),this._initialTransform=r.style.transform||"",this._preview=this._createPreviewElement(),EA(r,!1,Ug),this._document.body.appendChild(i.replaceChild(o,r)),this._getPreviewInsertionPoint(i,a).appendChild(this._preview),this.started.next({source:this,event:e}),t.start(),this._initialContainer=t,this._initialIndex=t.getItemIndex(this)}else this.started.next({source:this,event:e}),this._initialContainer=this._initialIndex=void 0;this._parentPositions.cache(t?t.getScrollableParents():[])}_initializeDragSequence(e,t){this._parentDragRef&&t.stopPropagation();const r=this.isDragging(),i=Kl(t),o=!i&&0!==t.button,s=this._rootElement,a=Ui(t),l=!i&&this._lastTouchEventTime&&this._lastTouchEventTime+800>Date.now(),u=i?function Og(n){const e=n.touches&&n.touches[0]||n.changedTouches&&n.changedTouches[0];return!(!e||-1!==e.identifier||null!=e.radiusX&&1!==e.radiusX||null!=e.radiusY&&1!==e.radiusY)}(t):function Ig(n){return 0===n.buttons||0===n.offsetX&&0===n.offsetY}(t);if(a&&a.draggable&&"mousedown"===t.type&&t.preventDefault(),r||o||l||u)return;if(this._handles.length){const h=s.style;this._rootElementTapHighlight=h.webkitTapHighlightColor||"",h.webkitTapHighlightColor="transparent"}this._hasStartedDragging=this._hasMoved=!1,this._removeSubscriptions(),this._initialClientRect=this._rootElement.getBoundingClientRect(),this._pointerMoveSubscription=this._dragDropRegistry.pointerMove.subscribe(this._pointerMove),this._pointerUpSubscription=this._dragDropRegistry.pointerUp.subscribe(this._pointerUp),this._scrollSubscription=this._dragDropRegistry.scrolled(this._getShadowRoot()).subscribe(h=>this._updateOnScroll(h)),this._boundaryElement&&(this._boundaryRect=Bg(this._boundaryElement));const c=this._previewTemplate;this._pickupPositionInElement=c&&c.template&&!c.matchSize?{x:0,y:0}:this._getPointerPositionInElement(this._initialClientRect,e,t);const d=this._pickupPositionOnPage=this._lastKnownPointerPosition=this._getPointerPositionOnPage(t);this._pointerDirectionDelta={x:0,y:0},this._pointerPositionAtLastDirectionChange={x:d.x,y:d.y},this._dragStartTime=Date.now(),this._dragDropRegistry.startDragging(this,t)}_cleanupDragArtifacts(e){EA(this._rootElement,!0,Ug),this._anchor.parentNode.replaceChild(this._rootElement,this._anchor),this._destroyPreview(),this._destroyPlaceholder(),this._initialClientRect=this._boundaryRect=this._previewRect=this._initialTransform=void 0,this._ngZone.run(()=>{const t=this._dropContainer,r=t.getItemIndex(this),i=this._getPointerPositionOnPage(e),o=this._getDragDistance(i),s=t._isOverContainer(i.x,i.y);this.ended.next({source:this,distance:o,dropPoint:i,event:e}),this.dropped.next({item:this,currentIndex:r,previousIndex:this._initialIndex,container:t,previousContainer:this._initialContainer,isPointerOverContainer:s,distance:o,dropPoint:i,event:e}),t.drop(this,r,this._initialIndex,this._initialContainer,s,o,i),this._dropContainer=this._initialContainer})}_updateActiveDropContainer({x:e,y:t},{x:r,y:i}){let o=this._initialContainer._getSiblingContainerFromPosition(this,e,t);!o&&this._dropContainer!==this._initialContainer&&this._initialContainer._isOverContainer(e,t)&&(o=this._initialContainer),o&&o!==this._dropContainer&&this._ngZone.run(()=>{this.exited.next({item:this,container:this._dropContainer}),this._dropContainer.exit(this),this._dropContainer=o,this._dropContainer.enter(this,e,t,o===this._initialContainer&&o.sortingDisabled?this._initialIndex:void 0),this.entered.next({item:this,container:o,currentIndex:o.getItemIndex(this)})}),this.isDragging()&&(this._dropContainer._startScrollingIfNecessary(r,i),this._dropContainer._sortItem(this,e,t,this._pointerDirectionDelta),this.constrainPosition?this._applyPreviewTransform(e,t):this._applyPreviewTransform(e-this._pickupPositionInElement.x,t-this._pickupPositionInElement.y))}_createPreviewElement(){const e=this._previewTemplate,t=this.previewClass,r=e?e.template:null;let i;if(r&&e){const o=e.matchSize?this._initialClientRect:null,s=e.viewContainer.createEmbeddedView(r,e.context);s.detectChanges(),i=RA(s,this._document),this._previewRef=s,e.matchSize?IA(i,o):i.style.transform=zd(this._pickupPositionOnPage.x,this._pickupPositionOnPage.y)}else i=SA(this._rootElement),IA(i,this._initialClientRect),this._initialTransform&&(i.style.transform=this._initialTransform);return Fg(i.style,{"pointer-events":"none",margin:"0",position:"fixed",top:"0",left:"0","z-index":`${this._config.zIndex||1e3}`},Ug),Da(i,!1),i.classList.add("cdk-drag-preview"),i.setAttribute("dir",this._direction),t&&(Array.isArray(t)?t.forEach(o=>i.classList.add(o)):i.classList.add(t)),i}_animatePreviewToPlaceholder(){if(!this._hasMoved)return Promise.resolve();const e=this._placeholder.getBoundingClientRect();this._preview.classList.add("cdk-drag-animating"),this._applyPreviewTransform(e.left,e.top);const t=function k8(n){const e=getComputedStyle(n),t=Lg(e,"transition-property"),r=t.find(a=>"transform"===a||"all"===a);if(!r)return 0;const i=t.indexOf(r),o=Lg(e,"transition-duration"),s=Lg(e,"transition-delay");return bA(o[i])+bA(s[i])}(this._preview);return 0===t?Promise.resolve():this._ngZone.runOutsideAngular(()=>new Promise(r=>{const i=s=>{var a;(!s||Ui(s)===this._preview&&"transform"===s.propertyName)&&(null===(a=this._preview)||void 0===a||a.removeEventListener("transitionend",i),r(),clearTimeout(o))},o=setTimeout(i,1.5*t);this._preview.addEventListener("transitionend",i)}))}_createPlaceholderElement(){const e=this._placeholderTemplate,t=e?e.template:null;let r;return t?(this._placeholderRef=e.viewContainer.createEmbeddedView(t,e.context),this._placeholderRef.detectChanges(),r=RA(this._placeholderRef,this._document)):r=SA(this._rootElement),r.style.pointerEvents="none",r.classList.add("cdk-drag-placeholder"),r}_getPointerPositionInElement(e,t,r){const i=t===this._rootElement?null:t,o=i?i.getBoundingClientRect():e,s=Kl(r)?r.targetTouches[0]:r,a=this._getViewportScrollPosition();return{x:o.left-e.left+(s.pageX-o.left-a.left),y:o.top-e.top+(s.pageY-o.top-a.top)}}_getPointerPositionOnPage(e){const t=this._getViewportScrollPosition(),r=Kl(e)?e.touches[0]||e.changedTouches[0]||{pageX:0,pageY:0}:e,i=r.pageX-t.left,o=r.pageY-t.top;if(this._ownerSVGElement){const s=this._ownerSVGElement.getScreenCTM();if(s){const a=this._ownerSVGElement.createSVGPoint();return a.x=i,a.y=o,a.matrixTransform(s.inverse())}}return{x:i,y:o}}_getConstrainedPointerPosition(e){const t=this._dropContainer?this._dropContainer.lockAxis:null;let{x:r,y:i}=this.constrainPosition?this.constrainPosition(e,this,this._initialClientRect):e;if("x"===this.lockAxis||"x"===t?i=this._pickupPositionOnPage.y:("y"===this.lockAxis||"y"===t)&&(r=this._pickupPositionOnPage.x),this._boundaryRect){const{x:o,y:s}=this._pickupPositionInElement,a=this._boundaryRect,{width:l,height:u}=this._getPreviewRect(),c=a.top+s,d=a.bottom-(u-s);r=xA(r,a.left+o,a.right-(l-o)),i=xA(i,c,d)}return{x:r,y:i}}_updatePointerDirectionDelta(e){const{x:t,y:r}=e,i=this._pointerDirectionDelta,o=this._pointerPositionAtLastDirectionChange,s=Math.abs(t-o.x),a=Math.abs(r-o.y);return s>this._config.pointerDirectionChangeThreshold&&(i.x=t>o.x?1:-1,o.x=t),a>this._config.pointerDirectionChangeThreshold&&(i.y=r>o.y?1:-1,o.y=r),i}_toggleNativeDragInteractions(){if(!this._rootElement||!this._handles)return;const e=this._handles.length>0||!this.isDragging();e!==this._nativeInteractionsEnabled&&(this._nativeInteractionsEnabled=e,Da(this._rootElement,e))}_removeRootElementListeners(e){e.removeEventListener("mousedown",this._pointerDown,Yd),e.removeEventListener("touchstart",this._pointerDown,wA),e.removeEventListener("dragstart",this._nativeDragStart,Yd)}_applyRootElementTransform(e,t){const r=zd(e,t),i=this._rootElement.style;null==this._initialTransform&&(this._initialTransform=i.transform&&"none"!=i.transform?i.transform:""),i.transform=jd(r,this._initialTransform)}_applyPreviewTransform(e,t){var r;const i=null!==(r=this._previewTemplate)&&void 0!==r&&r.template?void 0:this._initialTransform,o=zd(e,t);this._preview.style.transform=jd(o,i)}_getDragDistance(e){const t=this._pickupPositionOnPage;return t?{x:e.x-t.x,y:e.y-t.y}:{x:0,y:0}}_cleanupCachedDimensions(){this._boundaryRect=this._previewRect=void 0,this._parentPositions.clear()}_containInsideBoundaryOnResize(){let{x:e,y:t}=this._passiveTransform;if(0===e&&0===t||this.isDragging()||!this._boundaryElement)return;const r=this._rootElement.getBoundingClientRect(),i=this._boundaryElement.getBoundingClientRect();if(0===i.width&&0===i.height||0===r.width&&0===r.height)return;const o=i.left-r.left,s=r.right-i.right,a=i.top-r.top,l=r.bottom-i.bottom;i.width>r.width?(o>0&&(e+=o),s>0&&(e-=s)):e=0,i.height>r.height?(a>0&&(t+=a),l>0&&(t-=l)):t=0,(e!==this._passiveTransform.x||t!==this._passiveTransform.y)&&this.setFreeDragPosition({y:t,x:e})}_getDragStartDelay(e){const t=this.dragStartDelay;return"number"==typeof t?t:Kl(e)?t.touch:t?t.mouse:0}_updateOnScroll(e){const t=this._parentPositions.handleScroll(e);if(t){const r=Ui(e);this._boundaryRect&&r!==this._boundaryElement&&r.contains(this._boundaryElement)&&ql(this._boundaryRect,t.top,t.left),this._pickupPositionOnPage.x+=t.left,this._pickupPositionOnPage.y+=t.top,this._dropContainer||(this._activeTransform.x-=t.left,this._activeTransform.y-=t.top,this._applyRootElementTransform(this._activeTransform.x,this._activeTransform.y))}}_getViewportScrollPosition(){var e;return(null===(e=this._parentPositions.positions.get(this._document))||void 0===e?void 0:e.scrollPosition)||this._parentPositions.getViewportScrollPosition()}_getShadowRoot(){return void 0===this._cachedShadowRoot&&(this._cachedShadowRoot=Cg(this._rootElement)),this._cachedShadowRoot}_getPreviewInsertionPoint(e,t){const r=this._previewContainer||"global";if("parent"===r)return e;if("global"===r){const i=this._document;return t||i.fullscreenElement||i.webkitFullscreenElement||i.mozFullScreenElement||i.msFullscreenElement||i.body}return cn(r)}_getPreviewRect(){return(!this._previewRect||!this._previewRect.width&&!this._previewRect.height)&&(this._previewRect=this._preview?this._preview.getBoundingClientRect():this._initialClientRect),this._previewRect}_getTargetHandle(e){return this._handles.find(t=>e.target&&(e.target===t||t.contains(e.target)))}}function zd(n,e){return`translate3d(${Math.round(n)}px, ${Math.round(e)}px, 0)`}function xA(n,e,t){return Math.max(e,Math.min(t,n))}function Kl(n){return"t"===n.type[0]}function RA(n,e){const t=n.rootNodes;if(1===t.length&&t[0].nodeType===e.ELEMENT_NODE)return t[0];const r=e.createElement("div");return t.forEach(i=>r.appendChild(i)),r}function IA(n,e){n.style.width=`${e.width}px`,n.style.height=`${e.height}px`,n.style.transform=zd(e.left,e.top)}function Ql(n,e){return Math.max(0,Math.min(e,n))}class j8{constructor(e,t){this._element=e,this._dragDropRegistry=t,this._itemPositions=[],this.orientation="vertical",this._previousSwap={drag:null,delta:0,overlaps:!1}}start(e){this.withItems(e)}sort(e,t,r,i){const o=this._itemPositions,s=this._getItemIndexFromPointerPosition(e,t,r,i);if(-1===s&&o.length>0)return null;const a="horizontal"===this.orientation,l=o.findIndex(m=>m.drag===e),u=o[s],d=u.clientRect,h=l>s?1:-1,f=this._getItemOffsetPx(o[l].clientRect,d,h),p=this._getSiblingOffsetPx(l,o,h),_=o.slice();return function H8(n,e,t){const r=Ql(e,n.length-1),i=Ql(t,n.length-1);if(r===i)return;const o=n[r],s=i<r?-1:1;for(let a=r;a!==i;a+=s)n[a]=n[a+s];n[i]=o}(o,l,s),o.forEach((m,g)=>{if(_[g]===m)return;const b=m.drag===e,y=b?f:p,M=b?e.getPlaceholderElement():m.drag.getRootElement();m.offset+=y,a?(M.style.transform=jd(`translate3d(${Math.round(m.offset)}px, 0, 0)`,m.initialTransform),ql(m.clientRect,0,y)):(M.style.transform=jd(`translate3d(0, ${Math.round(m.offset)}px, 0)`,m.initialTransform),ql(m.clientRect,y,0))}),this._previousSwap.overlaps=kg(d,t,r),this._previousSwap.drag=u.drag,this._previousSwap.delta=a?i.x:i.y,{previousIndex:l,currentIndex:s}}enter(e,t,r,i){const o=null==i||i<0?this._getItemIndexFromPointerPosition(e,t,r):i,s=this._activeDraggables,a=s.indexOf(e),l=e.getPlaceholderElement();let u=s[o];if(u===e&&(u=s[o+1]),!u&&(null==o||-1===o||o<s.length-1)&&this._shouldEnterAsFirstChild(t,r)&&(u=s[0]),a>-1&&s.splice(a,1),u&&!this._dragDropRegistry.isDragging(u)){const c=u.getRootElement();c.parentElement.insertBefore(l,c),s.splice(o,0,e)}else cn(this._element).appendChild(l),s.push(e);l.style.transform="",this._cacheItemPositions()}withItems(e){this._activeDraggables=e.slice(),this._cacheItemPositions()}withSortPredicate(e){this._sortPredicate=e}reset(){this._activeDraggables.forEach(e=>{var t;const r=e.getRootElement();if(r){const i=null===(t=this._itemPositions.find(o=>o.drag===e))||void 0===t?void 0:t.initialTransform;r.style.transform=i||""}}),this._itemPositions=[],this._activeDraggables=[],this._previousSwap.drag=null,this._previousSwap.delta=0,this._previousSwap.overlaps=!1}getActiveItemsSnapshot(){return this._activeDraggables}getItemIndex(e){return("horizontal"===this.orientation&&"rtl"===this.direction?this._itemPositions.slice().reverse():this._itemPositions).findIndex(r=>r.drag===e)}updateOnScroll(e,t){this._itemPositions.forEach(({clientRect:r})=>{ql(r,e,t)}),this._itemPositions.forEach(({drag:r})=>{this._dragDropRegistry.isDragging(r)&&r._sortFromLastPointerPosition()})}_cacheItemPositions(){const e="horizontal"===this.orientation;this._itemPositions=this._activeDraggables.map(t=>{const r=t.getVisibleElement();return{drag:t,offset:0,initialTransform:r.style.transform||"",clientRect:Bg(r)}}).sort((t,r)=>e?t.clientRect.left-r.clientRect.left:t.clientRect.top-r.clientRect.top)}_getItemOffsetPx(e,t,r){const i="horizontal"===this.orientation;let o=i?t.left-e.left:t.top-e.top;return-1===r&&(o+=i?t.width-e.width:t.height-e.height),o}_getSiblingOffsetPx(e,t,r){const i="horizontal"===this.orientation,o=t[e].clientRect,s=t[e+-1*r];let a=o[i?"width":"height"]*r;if(s){const l=i?"left":"top",u=i?"right":"bottom";-1===r?a-=s.clientRect[l]-o[u]:a+=o[l]-s.clientRect[u]}return a}_shouldEnterAsFirstChild(e,t){if(!this._activeDraggables.length)return!1;const r=this._itemPositions,i="horizontal"===this.orientation;if(r[0].drag!==this._activeDraggables[0]){const s=r[r.length-1].clientRect;return i?e>=s.right:t>=s.bottom}{const s=r[0].clientRect;return i?e<=s.left:t<=s.top}}_getItemIndexFromPointerPosition(e,t,r,i){const o="horizontal"===this.orientation,s=this._itemPositions.findIndex(({drag:a,clientRect:l})=>{if(a===e)return!1;if(i){const u=o?i.x:i.y;if(a===this._previousSwap.drag&&this._previousSwap.overlaps&&u===this._previousSwap.delta)return!1}return o?t>=Math.floor(l.left)&&t<Math.floor(l.right):r>=Math.floor(l.top)&&r<Math.floor(l.bottom)});return-1!==s&&this._sortPredicate(s,e)?s:-1}}class Y8{constructor(e,t,r,i,o){this._dragDropRegistry=t,this._ngZone=i,this._viewportRuler=o,this.disabled=!1,this.sortingDisabled=!1,this.autoScrollDisabled=!1,this.autoScrollStep=2,this.enterPredicate=()=>!0,this.sortPredicate=()=>!0,this.beforeStarted=new O,this.entered=new O,this.exited=new O,this.dropped=new O,this.sorted=new O,this._isDragging=!1,this._draggables=[],this._siblings=[],this._activeSiblings=new Set,this._viewportScrollSubscription=ae.EMPTY,this._verticalScrollDirection=0,this._horizontalScrollDirection=0,this._stopScrollTimers=new O,this._cachedShadowRoot=null,this._startScrollInterval=()=>{this._stopScrolling(),function v8(n=0,e=Bd){return n<0&&(n=0),_A(n,n,e)}(0,mA).pipe(Wl(this._stopScrollTimers)).subscribe(()=>{const s=this._scrollNode,a=this.autoScrollStep;1===this._verticalScrollDirection?s.scrollBy(0,-a):2===this._verticalScrollDirection&&s.scrollBy(0,a),1===this._horizontalScrollDirection?s.scrollBy(-a,0):2===this._horizontalScrollDirection&&s.scrollBy(a,0)})},this.element=cn(e),this._document=r,this.withScrollableParents([this.element]),t.registerDropContainer(this),this._parentPositions=new DA(r),this._sortStrategy=new j8(this.element,t),this._sortStrategy.withSortPredicate((s,a)=>this.sortPredicate(s,a,this))}dispose(){this._stopScrolling(),this._stopScrollTimers.complete(),this._viewportScrollSubscription.unsubscribe(),this.beforeStarted.complete(),this.entered.complete(),this.exited.complete(),this.dropped.complete(),this.sorted.complete(),this._activeSiblings.clear(),this._scrollNode=null,this._parentPositions.clear(),this._dragDropRegistry.removeDropContainer(this)}isDragging(){return this._isDragging}start(){this._draggingStarted(),this._notifyReceivingSiblings()}enter(e,t,r,i){this._draggingStarted(),null==i&&this.sortingDisabled&&(i=this._draggables.indexOf(e)),this._sortStrategy.enter(e,t,r,i),this._cacheParentPositions(),this._notifyReceivingSiblings(),this.entered.next({item:e,container:this,currentIndex:this.getItemIndex(e)})}exit(e){this._reset(),this.exited.next({item:e,container:this})}drop(e,t,r,i,o,s,a,l={}){this._reset(),this.dropped.next({item:e,currentIndex:t,previousIndex:r,container:this,previousContainer:i,isPointerOverContainer:o,distance:s,dropPoint:a,event:l})}withItems(e){const t=this._draggables;return this._draggables=e,e.forEach(r=>r._withDropContainer(this)),this.isDragging()&&(t.filter(i=>i.isDragging()).every(i=>-1===e.indexOf(i))?this._reset():this._sortStrategy.withItems(this._draggables)),this}withDirection(e){return this._sortStrategy.direction=e,this}connectedTo(e){return this._siblings=e.slice(),this}withOrientation(e){return this._sortStrategy.orientation=e,this}withScrollableParents(e){const t=cn(this.element);return this._scrollableElements=-1===e.indexOf(t)?[t,...e]:e.slice(),this}getScrollableParents(){return this._scrollableElements}getItemIndex(e){return this._isDragging?this._sortStrategy.getItemIndex(e):this._draggables.indexOf(e)}isReceiving(){return this._activeSiblings.size>0}_sortItem(e,t,r,i){if(this.sortingDisabled||!this._clientRect||!TA(this._clientRect,.05,t,r))return;const o=this._sortStrategy.sort(e,t,r,i);o&&this.sorted.next({previousIndex:o.previousIndex,currentIndex:o.currentIndex,container:this,item:e})}_startScrollingIfNecessary(e,t){if(this.autoScrollDisabled)return;let r,i=0,o=0;if(this._parentPositions.positions.forEach((s,a)=>{a===this._document||!s.clientRect||r||TA(s.clientRect,.05,e,t)&&([i,o]=function z8(n,e,t,r){const i=NA(e,r),o=FA(e,t);let s=0,a=0;if(i){const l=n.scrollTop;1===i?l>0&&(s=1):n.scrollHeight-l>n.clientHeight&&(s=2)}if(o){const l=n.scrollLeft;1===o?l>0&&(a=1):n.scrollWidth-l>n.clientWidth&&(a=2)}return[s,a]}(a,s.clientRect,e,t),(i||o)&&(r=a))}),!i&&!o){const{width:s,height:a}=this._viewportRuler.getViewportSize(),l={width:s,height:a,top:0,right:s,bottom:a,left:0};i=NA(l,t),o=FA(l,e),r=window}r&&(i!==this._verticalScrollDirection||o!==this._horizontalScrollDirection||r!==this._scrollNode)&&(this._verticalScrollDirection=i,this._horizontalScrollDirection=o,this._scrollNode=r,(i||o)&&r?this._ngZone.runOutsideAngular(this._startScrollInterval):this._stopScrolling())}_stopScrolling(){this._stopScrollTimers.next()}_draggingStarted(){const e=cn(this.element).style;this.beforeStarted.next(),this._isDragging=!0,this._initialScrollSnap=e.msScrollSnapType||e.scrollSnapType||"",e.scrollSnapType=e.msScrollSnapType="none",this._sortStrategy.start(this._draggables),this._cacheParentPositions(),this._viewportScrollSubscription.unsubscribe(),this._listenToScrollEvents()}_cacheParentPositions(){const e=cn(this.element);this._parentPositions.cache(this._scrollableElements),this._clientRect=this._parentPositions.positions.get(e).clientRect}_reset(){this._isDragging=!1;const e=cn(this.element).style;e.scrollSnapType=e.msScrollSnapType=this._initialScrollSnap,this._siblings.forEach(t=>t._stopReceiving(this)),this._sortStrategy.reset(),this._stopScrolling(),this._viewportScrollSubscription.unsubscribe(),this._parentPositions.clear()}_isOverContainer(e,t){return null!=this._clientRect&&kg(this._clientRect,e,t)}_getSiblingContainerFromPosition(e,t,r){return this._siblings.find(i=>i._canReceive(e,t,r))}_canReceive(e,t,r){if(!this._clientRect||!kg(this._clientRect,t,r)||!this.enterPredicate(e,this))return!1;const i=this._getShadowRoot().elementFromPoint(t,r);if(!i)return!1;const o=cn(this.element);return i===o||o.contains(i)}_startReceiving(e,t){const r=this._activeSiblings;!r.has(e)&&t.every(i=>this.enterPredicate(i,this)||this._draggables.indexOf(i)>-1)&&(r.add(e),this._cacheParentPositions(),this._listenToScrollEvents())}_stopReceiving(e){this._activeSiblings.delete(e),this._viewportScrollSubscription.unsubscribe()}_listenToScrollEvents(){this._viewportScrollSubscription=this._dragDropRegistry.scrolled(this._getShadowRoot()).subscribe(e=>{if(this.isDragging()){const t=this._parentPositions.handleScroll(e);t&&this._sortStrategy.updateOnScroll(t.top,t.left)}else this.isReceiving()&&this._cacheParentPositions()})}_getShadowRoot(){if(!this._cachedShadowRoot){const e=Cg(cn(this.element));this._cachedShadowRoot=e||this._document}return this._cachedShadowRoot}_notifyReceivingSiblings(){const e=this._sortStrategy.getActiveItemsSnapshot().filter(t=>t.isDragging());this._siblings.forEach(t=>t._startReceiving(this,e))}}function NA(n,e){const{top:t,bottom:r,height:i}=n,o=.05*i;return e>=t-o&&e<=t+o?1:e>=r-o&&e<=r+o?2:0}function FA(n,e){const{left:t,right:r,width:i}=n,o=.05*i;return e>=t-o&&e<=t+o?1:e>=r-o&&e<=r+o?2:0}const Wd=so({passive:!1,capture:!0});let W8=(()=>{class n{constructor(t,r){this._ngZone=t,this._dropInstances=new Set,this._dragInstances=new Set,this._activeDragInstances=[],this._globalListeners=new Map,this._draggingPredicate=i=>i.isDragging(),this.pointerMove=new O,this.pointerUp=new O,this.scroll=new O,this._preventDefaultWhileDragging=i=>{this._activeDragInstances.length>0&&i.preventDefault()},this._persistentTouchmoveListener=i=>{this._activeDragInstances.length>0&&(this._activeDragInstances.some(this._draggingPredicate)&&i.preventDefault(),this.pointerMove.next(i))},this._document=r}registerDropContainer(t){this._dropInstances.has(t)||this._dropInstances.add(t)}registerDragItem(t){this._dragInstances.add(t),1===this._dragInstances.size&&this._ngZone.runOutsideAngular(()=>{this._document.addEventListener("touchmove",this._persistentTouchmoveListener,Wd)})}removeDropContainer(t){this._dropInstances.delete(t)}removeDragItem(t){this._dragInstances.delete(t),this.stopDragging(t),0===this._dragInstances.size&&this._document.removeEventListener("touchmove",this._persistentTouchmoveListener,Wd)}startDragging(t,r){if(!(this._activeDragInstances.indexOf(t)>-1)&&(this._activeDragInstances.push(t),1===this._activeDragInstances.length)){const i=r.type.startsWith("touch");this._globalListeners.set(i?"touchend":"mouseup",{handler:o=>this.pointerUp.next(o),options:!0}).set("scroll",{handler:o=>this.scroll.next(o),options:!0}).set("selectstart",{handler:this._preventDefaultWhileDragging,options:Wd}),i||this._globalListeners.set("mousemove",{handler:o=>this.pointerMove.next(o),options:Wd}),this._ngZone.runOutsideAngular(()=>{this._globalListeners.forEach((o,s)=>{this._document.addEventListener(s,o.handler,o.options)})})}}stopDragging(t){const r=this._activeDragInstances.indexOf(t);r>-1&&(this._activeDragInstances.splice(r,1),0===this._activeDragInstances.length&&this._clearGlobalListeners())}isDragging(t){return this._activeDragInstances.indexOf(t)>-1}scrolled(t){const r=[this.scroll];return t&&t!==this._document&&r.push(new E(i=>this._ngZone.runOutsideAngular(()=>{const s=a=>{this._activeDragInstances.length&&i.next(a)};return t.addEventListener("scroll",s,!0),()=>{t.removeEventListener("scroll",s,!0)}}))),Oh(...r)}ngOnDestroy(){this._dragInstances.forEach(t=>this.removeDragItem(t)),this._dropInstances.forEach(t=>this.removeDropContainer(t)),this._clearGlobalListeners(),this.pointerMove.complete(),this.pointerUp.complete()}_clearGlobalListeners(){this._globalListeners.forEach((t,r)=>{this._document.removeEventListener(r,t.handler,t.options)}),this._globalListeners.clear()}}return n.\u0275fac=function(t){return new(t||n)(Y(it),Y(_t))},n.\u0275prov=Ce({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const X8={dragStartThreshold:5,pointerDirectionChangeThreshold:5};let LA=(()=>{class n{constructor(t,r,i,o){this._document=t,this._ngZone=r,this._viewportRuler=i,this._dragDropRegistry=o}createDrag(t,r=X8){return new G8(t,r,this._document,this._ngZone,this._viewportRuler,this._dragDropRegistry)}createDropList(t){return new Y8(t,this._dragDropRegistry,this._document,this._ngZone,this._viewportRuler)}}return n.\u0275fac=function(t){return new(t||n)(Y(_t),Y(it),Y(O8),Y(W8))},n.\u0275prov=Ce({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const BA=new j("CDK_DRAG_PARENT"),$8=new j("CDK_DRAG_CONFIG"),q8=new j("CdkDropList"),kA=new j("CdkDragHandle"),K8=new j("CdkDragPlaceholder"),Q8=new j("CdkDragPreview");let J8=(()=>{class n{constructor(t,r,i,o,s,a,l,u,c,d,h){this.element=t,this.dropContainer=r,this._ngZone=o,this._viewContainerRef=s,this._dir=l,this._changeDetectorRef=c,this._selfHandle=d,this._parentDrag=h,this._destroyed=new O,this.started=new rt,this.released=new rt,this.ended=new rt,this.entered=new rt,this.exited=new rt,this.dropped=new rt,this.moved=new E(f=>{const p=this._dragRef.moved.pipe($(_=>({source:this,pointerPosition:_.pointerPosition,event:_.event,delta:_.delta,distance:_.distance}))).subscribe(f);return()=>{p.unsubscribe()}}),this._dragRef=u.createDrag(t,{dragStartThreshold:a&&null!=a.dragStartThreshold?a.dragStartThreshold:5,pointerDirectionChangeThreshold:a&&null!=a.pointerDirectionChangeThreshold?a.pointerDirectionChangeThreshold:5,zIndex:null==a?void 0:a.zIndex}),this._dragRef.data=this,n._dragInstances.push(this),a&&this._assignDefaults(a),r&&(this._dragRef._withDropContainer(r._dropListRef),r.addItem(this)),this._syncInputs(this._dragRef),this._handleEvents(this._dragRef)}get disabled(){return this._disabled||this.dropContainer&&this.dropContainer.disabled}set disabled(t){this._disabled=jr(t),this._dragRef.disabled=this._disabled}getPlaceholderElement(){return this._dragRef.getPlaceholderElement()}getRootElement(){return this._dragRef.getRootElement()}reset(){this._dragRef.reset()}getFreeDragPosition(){return this._dragRef.getFreeDragPosition()}setFreeDragPosition(t){this._dragRef.setFreeDragPosition(t)}ngAfterViewInit(){this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.pipe(wa(1),Wl(this._destroyed)).subscribe(()=>{this._updateRootElement(),this._setupHandlesListener(),this.freeDragPosition&&this._dragRef.setFreeDragPosition(this.freeDragPosition)})})}ngOnChanges(t){const r=t.rootElementSelector,i=t.freeDragPosition;r&&!r.firstChange&&this._updateRootElement(),i&&!i.firstChange&&this.freeDragPosition&&this._dragRef.setFreeDragPosition(this.freeDragPosition)}ngOnDestroy(){this.dropContainer&&this.dropContainer.removeItem(this);const t=n._dragInstances.indexOf(this);t>-1&&n._dragInstances.splice(t,1),this._ngZone.runOutsideAngular(()=>{this._destroyed.next(),this._destroyed.complete(),this._dragRef.dispose()})}_updateRootElement(){var t;const r=this.element.nativeElement;let i=r;this.rootElementSelector&&(i=void 0!==r.closest?r.closest(this.rootElementSelector):null===(t=r.parentElement)||void 0===t?void 0:t.closest(this.rootElementSelector)),this._dragRef.withRootElement(i||r)}_getBoundaryElement(){const t=this.boundaryElement;return t?"string"==typeof t?this.element.nativeElement.closest(t):cn(t):null}_syncInputs(t){t.beforeStarted.subscribe(()=>{if(!t.isDragging()){const r=this._dir,i=this.dragStartDelay,o=this._placeholderTemplate?{template:this._placeholderTemplate.templateRef,context:this._placeholderTemplate.data,viewContainer:this._viewContainerRef}:null,s=this._previewTemplate?{template:this._previewTemplate.templateRef,context:this._previewTemplate.data,matchSize:this._previewTemplate.matchSize,viewContainer:this._viewContainerRef}:null;t.disabled=this.disabled,t.lockAxis=this.lockAxis,t.dragStartDelay="object"==typeof i&&i?i:function ao(n,e=0){return function T5(n){return!isNaN(parseFloat(n))&&!isNaN(Number(n))}(n)?Number(n):e}(i),t.constrainPosition=this.constrainPosition,t.previewClass=this.previewClass,t.withBoundaryElement(this._getBoundaryElement()).withPlaceholderTemplate(o).withPreviewTemplate(s).withPreviewContainer(this.previewContainer||"global"),r&&t.withDirection(r.value)}}),t.beforeStarted.pipe(wa(1)).subscribe(()=>{var r;if(this._parentDrag)return void t.withParent(this._parentDrag._dragRef);let i=this.element.nativeElement.parentElement;for(;i;){if(i.classList.contains("cdk-drag")){t.withParent((null===(r=n._dragInstances.find(o=>o.element.nativeElement===i))||void 0===r?void 0:r._dragRef)||null);break}i=i.parentElement}})}_handleEvents(t){t.started.subscribe(r=>{this.started.emit({source:this,event:r.event}),this._changeDetectorRef.markForCheck()}),t.released.subscribe(r=>{this.released.emit({source:this,event:r.event})}),t.ended.subscribe(r=>{this.ended.emit({source:this,distance:r.distance,dropPoint:r.dropPoint,event:r.event}),this._changeDetectorRef.markForCheck()}),t.entered.subscribe(r=>{this.entered.emit({container:r.container.data,item:this,currentIndex:r.currentIndex})}),t.exited.subscribe(r=>{this.exited.emit({container:r.container.data,item:this})}),t.dropped.subscribe(r=>{this.dropped.emit({previousIndex:r.previousIndex,currentIndex:r.currentIndex,previousContainer:r.previousContainer.data,container:r.container.data,isPointerOverContainer:r.isPointerOverContainer,item:this,distance:r.distance,dropPoint:r.dropPoint,event:r.event})})}_assignDefaults(t){const{lockAxis:r,dragStartDelay:i,constrainPosition:o,previewClass:s,boundaryElement:a,draggingDisabled:l,rootElementSelector:u,previewContainer:c}=t;this.disabled=null!=l&&l,this.dragStartDelay=i||0,r&&(this.lockAxis=r),o&&(this.constrainPosition=o),s&&(this.previewClass=s),a&&(this.boundaryElement=a),u&&(this.rootElementSelector=u),c&&(this.previewContainer=c)}_setupHandlesListener(){this._handles.changes.pipe(Rg(this._handles),Vd(t=>{const r=t.filter(i=>i._parentDrag===this).map(i=>i.element);this._selfHandle&&this.rootElementSelector&&r.push(this.element),this._dragRef.withHandles(r)}),function b8(n,e){return ve((t,r)=>{let i=null,o=0,s=!1;const a=()=>s&&!i&&r.complete();t.subscribe(V(r,l=>{null==i||i.unsubscribe();let u=0;const c=o++;Sr(n(l,c)).subscribe(i=V(r,d=>r.next(e?e(l,d,c,u++):d),()=>{i=null,a()}))},()=>{s=!0,a()}))})}(t=>Oh(...t.map(r=>r._stateChanges.pipe(Rg(r))))),Wl(this._destroyed)).subscribe(t=>{const r=this._dragRef,i=t.element.nativeElement;t.disabled?r.disableHandle(i):r.enableHandle(i)})}}return n._dragInstances=[],n.\u0275fac=function(t){return new(t||n)(F(fn),F(q8,12),F(_t),F(it),F(Fr),F($8,8),F(vA,8),F(LA),F(yl),F(kA,10),F(BA,12))},n.\u0275dir=be({type:n,selectors:[["","cdkDrag",""]],contentQueries:function(t,r,i){if(1&t&&(pc(i,Q8,5),pc(i,K8,5),pc(i,kA,5)),2&t){let o;Xs(o=$s())&&(r._previewTemplate=o.first),Xs(o=$s())&&(r._placeholderTemplate=o.first),Xs(o=$s())&&(r._handles=o)}},hostAttrs:[1,"cdk-drag"],hostVars:4,hostBindings:function(t,r){2&t&&Zr("cdk-drag-disabled",r.disabled)("cdk-drag-dragging",r._dragRef.isDragging())},inputs:{data:["cdkDragData","data"],lockAxis:["cdkDragLockAxis","lockAxis"],rootElementSelector:["cdkDragRootElement","rootElementSelector"],boundaryElement:["cdkDragBoundary","boundaryElement"],dragStartDelay:["cdkDragStartDelay","dragStartDelay"],freeDragPosition:["cdkDragFreeDragPosition","freeDragPosition"],disabled:["cdkDragDisabled","disabled"],constrainPosition:["cdkDragConstrainPosition","constrainPosition"],previewClass:["cdkDragPreviewClass","previewClass"],previewContainer:["cdkDragPreviewContainer","previewContainer"]},outputs:{started:"cdkDragStarted",released:"cdkDragReleased",ended:"cdkDragEnded",entered:"cdkDragEntered",exited:"cdkDragExited",dropped:"cdkDragDropped",moved:"cdkDragMoved"},exportAs:["cdkDrag"],features:[lt([{provide:BA,useExisting:n}]),zr]}),n})(),eY=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=At({type:n}),n.\u0275inj=Dt({providers:[LA],imports:[P8]}),n})();const nY=new j("mat-sanity-checks",{providedIn:"root",factory:function tY(){return!0}});let zn=(()=>{class n{constructor(t,r,i){this._sanityChecks=r,this._document=i,this._hasDoneGlobalChecks=!1,t._applyBodyHighContrastModeCssClasses(),this._hasDoneGlobalChecks||(this._hasDoneGlobalChecks=!0)}_checkIsEnabled(t){return!function b5(){return"undefined"!=typeof __karma__&&!!__karma__||"undefined"!=typeof jasmine&&!!jasmine||"undefined"!=typeof jest&&!!jest||"undefined"!=typeof Mocha&&!!Mocha}()&&("boolean"==typeof this._sanityChecks?this._sanityChecks:!!this._sanityChecks[t])}}return n.\u0275fac=function(t){return new(t||n)(Y(pA),Y(nY,8),Y(_t))},n.\u0275mod=At({type:n}),n.\u0275inj=Dt({imports:[yA,yA]}),n})();function Vg(n,e){return class extends n{constructor(...t){super(...t),this.defaultColor=e,this.color=e}get color(){return this._color}set color(t){const r=t||this.defaultColor;r!==this._color&&(this._color&&this._elementRef.nativeElement.classList.remove(`mat-${this._color}`),r&&this._elementRef.nativeElement.classList.add(`mat-${r}`),this._color=r)}}}let Hg=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=At({type:n}),n.\u0275inj=Dt({imports:[zn,zn]}),n})();function WA(...n){const e=Qv(n),{args:t,keys:r}=tA(n),i=new E(o=>{const{length:s}=t;if(!s)return void o.complete();const a=new Array(s);let l=s,u=s;for(let c=0;c<s;c++){let d=!1;Sr(t[c]).subscribe(V(o,h=>{d||(d=!0,u--),a[c]=h},()=>l--,void 0,()=>{(!l||!d)&&(u||o.next(r?rA(r,a):a),o.complete())}))}});return e?i.pipe(nA(e)):i}function XA(n){return ve((e,t)=>{let o,r=null,i=!1;r=e.subscribe(V(t,void 0,void 0,s=>{o=Sr(n(s,XA(n)(e))),r?(r.unsubscribe(),r=null,o.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,o.subscribe(t))})}class pY{}class lo{constructor(e){this.normalizedNames=new Map,this.lazyUpdate=null,e?this.lazyInit="string"==typeof e?()=>{this.headers=new Map,e.split("\n").forEach(t=>{const r=t.indexOf(":");if(r>0){const i=t.slice(0,r),o=i.toLowerCase(),s=t.slice(r+1).trim();this.maybeSetNormalizedName(i,o),this.headers.has(o)?this.headers.get(o).push(s):this.headers.set(o,[s])}})}:()=>{this.headers=new Map,Object.keys(e).forEach(t=>{let r=e[t];const i=t.toLowerCase();"string"==typeof r&&(r=[r]),r.length>0&&(this.headers.set(i,r),this.maybeSetNormalizedName(t,i))})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();const t=this.headers.get(e.toLowerCase());return t&&t.length>0?t[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,t){return this.clone({name:e,value:t,op:"a"})}set(e,t){return this.clone({name:e,value:t,op:"s"})}delete(e,t){return this.clone({name:e,value:t,op:"d"})}maybeSetNormalizedName(e,t){this.normalizedNames.has(t)||this.normalizedNames.set(t,e)}init(){this.lazyInit&&(this.lazyInit instanceof lo?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(t=>{this.headers.set(t,e.headers.get(t)),this.normalizedNames.set(t,e.normalizedNames.get(t))})}clone(e){const t=new lo;return t.lazyInit=this.lazyInit&&this.lazyInit instanceof lo?this.lazyInit:this,t.lazyUpdate=(this.lazyUpdate||[]).concat([e]),t}applyUpdate(e){const t=e.name.toLowerCase();switch(e.op){case"a":case"s":let r=e.value;if("string"==typeof r&&(r=[r]),0===r.length)return;this.maybeSetNormalizedName(e.name,t);const i=("a"===e.op?this.headers.get(t):void 0)||[];i.push(...r),this.headers.set(t,i);break;case"d":const o=e.value;if(o){let s=this.headers.get(t);if(!s)return;s=s.filter(a=>-1===o.indexOf(a)),0===s.length?(this.headers.delete(t),this.normalizedNames.delete(t)):this.headers.set(t,s)}else this.headers.delete(t),this.normalizedNames.delete(t)}}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(t=>e(this.normalizedNames.get(t),this.headers.get(t)))}}class _Y{encodeKey(e){return $A(e)}encodeValue(e){return $A(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}}const gY=/%(\d[a-f0-9])/gi,vY={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function $A(n){return encodeURIComponent(n).replace(gY,(e,t)=>{var r;return null!==(r=vY[t])&&void 0!==r?r:e})}function Xd(n){return`${n}`}class uo{constructor(e={}){if(this.updates=null,this.cloneFrom=null,this.encoder=e.encoder||new _Y,e.fromString){if(e.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function mY(n,e){const t=new Map;return n.length>0&&n.replace(/^\?/,"").split("&").forEach(i=>{const o=i.indexOf("="),[s,a]=-1==o?[e.decodeKey(i),""]:[e.decodeKey(i.slice(0,o)),e.decodeValue(i.slice(o+1))],l=t.get(s)||[];l.push(a),t.set(s,l)}),t}(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(t=>{const r=e.fromObject[t],i=Array.isArray(r)?r.map(Xd):[Xd(r)];this.map.set(t,i)})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();const t=this.map.get(e);return t?t[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,t){return this.clone({param:e,value:t,op:"a"})}appendAll(e){const t=[];return Object.keys(e).forEach(r=>{const i=e[r];Array.isArray(i)?i.forEach(o=>{t.push({param:r,value:o,op:"a"})}):t.push({param:r,value:i,op:"a"})}),this.clone(t)}set(e,t){return this.clone({param:e,value:t,op:"s"})}delete(e,t){return this.clone({param:e,value:t,op:"d"})}toString(){return this.init(),this.keys().map(e=>{const t=this.encoder.encodeKey(e);return this.map.get(e).map(r=>t+"="+this.encoder.encodeValue(r)).join("&")}).filter(e=>""!==e).join("&")}clone(e){const t=new uo({encoder:this.encoder});return t.cloneFrom=this.cloneFrom||this,t.updates=(this.updates||[]).concat(e),t}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":const t=("a"===e.op?this.map.get(e.param):void 0)||[];t.push(Xd(e.value)),this.map.set(e.param,t);break;case"d":if(void 0===e.value){this.map.delete(e.param);break}{let r=this.map.get(e.param)||[];const i=r.indexOf(Xd(e.value));-1!==i&&r.splice(i,1),r.length>0?this.map.set(e.param,r):this.map.delete(e.param)}}}),this.cloneFrom=this.updates=null)}}class yY{constructor(){this.map=new Map}set(e,t){return this.map.set(e,t),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}has(e){return this.map.has(e)}keys(){return this.map.keys()}}function qA(n){return"undefined"!=typeof ArrayBuffer&&n instanceof ArrayBuffer}function KA(n){return"undefined"!=typeof Blob&&n instanceof Blob}function QA(n){return"undefined"!=typeof FormData&&n instanceof FormData}class Jl{constructor(e,t,r,i){let o;if(this.url=t,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=e.toUpperCase(),function EY(n){switch(n){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||i?(this.body=void 0!==r?r:null,o=i):o=r,o&&(this.reportProgress=!!o.reportProgress,this.withCredentials=!!o.withCredentials,o.responseType&&(this.responseType=o.responseType),o.headers&&(this.headers=o.headers),o.context&&(this.context=o.context),o.params&&(this.params=o.params)),this.headers||(this.headers=new lo),this.context||(this.context=new yY),this.params){const s=this.params.toString();if(0===s.length)this.urlWithParams=t;else{const a=t.indexOf("?");this.urlWithParams=t+(-1===a?"?":a<t.length-1?"&":"")+s}}else this.params=new uo,this.urlWithParams=t}serializeBody(){return null===this.body?null:qA(this.body)||KA(this.body)||QA(this.body)||function bY(n){return"undefined"!=typeof URLSearchParams&&n instanceof URLSearchParams}(this.body)||"string"==typeof this.body?this.body:this.body instanceof uo?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||QA(this.body)?null:KA(this.body)?this.body.type||null:qA(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof uo?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(e={}){var t;const r=e.method||this.method,i=e.url||this.url,o=e.responseType||this.responseType,s=void 0!==e.body?e.body:this.body,a=void 0!==e.withCredentials?e.withCredentials:this.withCredentials,l=void 0!==e.reportProgress?e.reportProgress:this.reportProgress;let u=e.headers||this.headers,c=e.params||this.params;const d=null!==(t=e.context)&&void 0!==t?t:this.context;return void 0!==e.setHeaders&&(u=Object.keys(e.setHeaders).reduce((h,f)=>h.set(f,e.setHeaders[f]),u)),e.setParams&&(c=Object.keys(e.setParams).reduce((h,f)=>h.set(f,e.setParams[f]),c)),new Jl(r,i,s,{params:c,headers:u,context:d,reportProgress:l,responseType:o,withCredentials:a})}}var yn=(()=>((yn=yn||{})[yn.Sent=0]="Sent",yn[yn.UploadProgress=1]="UploadProgress",yn[yn.ResponseHeader=2]="ResponseHeader",yn[yn.DownloadProgress=3]="DownloadProgress",yn[yn.Response=4]="Response",yn[yn.User=5]="User",yn))();class jg extends class TY{constructor(e,t=200,r="OK"){this.headers=e.headers||new lo,this.status=void 0!==e.status?e.status:t,this.statusText=e.statusText||r,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}}{constructor(e={}){super(e),this.type=yn.Response,this.body=void 0!==e.body?e.body:null}clone(e={}){return new jg({body:void 0!==e.body?e.body:this.body,headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}function Yg(n,e){return{body:e,headers:n.headers,context:n.context,observe:n.observe,params:n.params,reportProgress:n.reportProgress,responseType:n.responseType,withCredentials:n.withCredentials}}let JA=(()=>{class n{constructor(t){this.handler=t}request(t,r,i={}){let o;if(t instanceof Jl)o=t;else{let l,u;l=i.headers instanceof lo?i.headers:new lo(i.headers),i.params&&(u=i.params instanceof uo?i.params:new uo({fromObject:i.params})),o=new Jl(t,r,void 0!==i.body?i.body:null,{headers:l,context:i.context,params:u,reportProgress:i.reportProgress,responseType:i.responseType||"json",withCredentials:i.withCredentials})}const s=qo(o).pipe(function fY(n,e){return se(e)?du(n,e,1):du(n,1)}(l=>this.handler.handle(l)));if(t instanceof Jl||"events"===i.observe)return s;const a=s.pipe(KC(l=>l instanceof jg));switch(i.observe||"body"){case"body":switch(o.responseType){case"arraybuffer":return a.pipe($(l=>{if(null!==l.body&&!(l.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return l.body}));case"blob":return a.pipe($(l=>{if(null!==l.body&&!(l.body instanceof Blob))throw new Error("Response is not a Blob.");return l.body}));case"text":return a.pipe($(l=>{if(null!==l.body&&"string"!=typeof l.body)throw new Error("Response is not a string.");return l.body}));default:return a.pipe($(l=>l.body))}case"response":return a;default:throw new Error(`Unreachable: unhandled observe type ${i.observe}}`)}}delete(t,r={}){return this.request("DELETE",t,r)}get(t,r={}){return this.request("GET",t,r)}head(t,r={}){return this.request("HEAD",t,r)}jsonp(t,r){return this.request("JSONP",t,{params:(new uo).append(r,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(t,r={}){return this.request("OPTIONS",t,r)}patch(t,r,i={}){return this.request("PATCH",t,Yg(i,r))}post(t,r,i={}){return this.request("POST",t,Yg(i,r))}put(t,r,i={}){return this.request("PUT",t,Yg(i,r))}}return n.\u0275fac=function(t){return new(t||n)(Y(pY))},n.\u0275prov=Ce({token:n,factory:n.\u0275fac}),n})();const SY=["*"];let $d;function eu(n){var e;return(null===(e=function MY(){if(void 0===$d&&($d=null,"undefined"!=typeof window)){const n=window;void 0!==n.trustedTypes&&($d=n.trustedTypes.createPolicy("angular#components",{createHTML:e=>e}))}return $d}())||void 0===e?void 0:e.createHTML(n))||n}function ew(n){return Error(`Unable to find icon with the name "${n}"`)}function tw(n){return Error(`The URL provided to MatIconRegistry was not trusted as a resource URL via Angular's DomSanitizer. Attempted URL was "${n}".`)}function nw(n){return Error(`The literal provided to MatIconRegistry was not trusted as safe HTML by Angular's DomSanitizer. Attempted literal was "${n}".`)}class Ko{constructor(e,t,r){this.url=e,this.svgText=t,this.options=r}}let qd=(()=>{class n{constructor(t,r,i,o){this._httpClient=t,this._sanitizer=r,this._errorHandler=o,this._svgIconConfigs=new Map,this._iconSetConfigs=new Map,this._cachedIconsByUrl=new Map,this._inProgressUrlFetches=new Map,this._fontCssClassesByAlias=new Map,this._resolvers=[],this._defaultFontSetClass=["material-icons"],this._document=i}addSvgIcon(t,r,i){return this.addSvgIconInNamespace("",t,r,i)}addSvgIconLiteral(t,r,i){return this.addSvgIconLiteralInNamespace("",t,r,i)}addSvgIconInNamespace(t,r,i,o){return this._addSvgIconConfig(t,r,new Ko(i,null,o))}addSvgIconResolver(t){return this._resolvers.push(t),this}addSvgIconLiteralInNamespace(t,r,i,o){const s=this._sanitizer.sanitize(Ke.HTML,i);if(!s)throw nw(i);const a=eu(s);return this._addSvgIconConfig(t,r,new Ko("",a,o))}addSvgIconSet(t,r){return this.addSvgIconSetInNamespace("",t,r)}addSvgIconSetLiteral(t,r){return this.addSvgIconSetLiteralInNamespace("",t,r)}addSvgIconSetInNamespace(t,r,i){return this._addSvgIconSetConfig(t,new Ko(r,null,i))}addSvgIconSetLiteralInNamespace(t,r,i){const o=this._sanitizer.sanitize(Ke.HTML,r);if(!o)throw nw(r);const s=eu(o);return this._addSvgIconSetConfig(t,new Ko("",s,i))}registerFontClassAlias(t,r=t){return this._fontCssClassesByAlias.set(t,r),this}classNameForFontAlias(t){return this._fontCssClassesByAlias.get(t)||t}setDefaultFontSetClass(...t){return this._defaultFontSetClass=t,this}getDefaultFontSetClass(){return this._defaultFontSetClass}getSvgIconFromUrl(t){const r=this._sanitizer.sanitize(Ke.RESOURCE_URL,t);if(!r)throw tw(t);const i=this._cachedIconsByUrl.get(r);return i?qo(Kd(i)):this._loadSvgIconFromConfig(new Ko(t,null)).pipe(Vd(o=>this._cachedIconsByUrl.set(r,o)),$(o=>Kd(o)))}getNamedSvgIcon(t,r=""){const i=rw(r,t);let o=this._svgIconConfigs.get(i);if(o)return this._getSvgFromConfig(o);if(o=this._getIconConfigFromResolvers(r,t),o)return this._svgIconConfigs.set(i,o),this._getSvgFromConfig(o);const s=this._iconSetConfigs.get(r);return s?this._getSvgFromIconSetConfigs(t,s):function dY(n,e){const t=se(n)?n:()=>n,r=i=>i.error(t());return new E(e?i=>e.schedule(r,0,i):r)}(ew(i))}ngOnDestroy(){this._resolvers=[],this._svgIconConfigs.clear(),this._iconSetConfigs.clear(),this._cachedIconsByUrl.clear()}_getSvgFromConfig(t){return t.svgText?qo(Kd(this._svgElementFromConfig(t))):this._loadSvgIconFromConfig(t).pipe($(r=>Kd(r)))}_getSvgFromIconSetConfigs(t,r){const i=this._extractIconWithNameFromAnySet(t,r);return i?qo(i):WA(r.filter(s=>!s.svgText).map(s=>this._loadSvgIconSetFromConfig(s).pipe(XA(a=>{const u=`Loading icon set URL: ${this._sanitizer.sanitize(Ke.RESOURCE_URL,s.url)} failed: ${a.message}`;return this._errorHandler.handleError(new Error(u)),qo(null)})))).pipe($(()=>{const s=this._extractIconWithNameFromAnySet(t,r);if(!s)throw ew(t);return s}))}_extractIconWithNameFromAnySet(t,r){for(let i=r.length-1;i>=0;i--){const o=r[i];if(o.svgText&&o.svgText.toString().indexOf(t)>-1){const s=this._svgElementFromConfig(o),a=this._extractSvgIconFromSet(s,t,o.options);if(a)return a}}return null}_loadSvgIconFromConfig(t){return this._fetchIcon(t).pipe(Vd(r=>t.svgText=r),$(()=>this._svgElementFromConfig(t)))}_loadSvgIconSetFromConfig(t){return t.svgText?qo(null):this._fetchIcon(t).pipe(Vd(r=>t.svgText=r))}_extractSvgIconFromSet(t,r,i){const o=t.querySelector(`[id="${r}"]`);if(!o)return null;const s=o.cloneNode(!0);if(s.removeAttribute("id"),"svg"===s.nodeName.toLowerCase())return this._setSvgAttributes(s,i);if("symbol"===s.nodeName.toLowerCase())return this._setSvgAttributes(this._toSvgElement(s),i);const a=this._svgElementFromString(eu("<svg></svg>"));return a.appendChild(s),this._setSvgAttributes(a,i)}_svgElementFromString(t){const r=this._document.createElement("DIV");r.innerHTML=t;const i=r.querySelector("svg");if(!i)throw Error("<svg> tag not found");return i}_toSvgElement(t){const r=this._svgElementFromString(eu("<svg></svg>")),i=t.attributes;for(let o=0;o<i.length;o++){const{name:s,value:a}=i[o];"id"!==s&&r.setAttribute(s,a)}for(let o=0;o<t.childNodes.length;o++)t.childNodes[o].nodeType===this._document.ELEMENT_NODE&&r.appendChild(t.childNodes[o].cloneNode(!0));return r}_setSvgAttributes(t,r){return t.setAttribute("fit",""),t.setAttribute("height","100%"),t.setAttribute("width","100%"),t.setAttribute("preserveAspectRatio","xMidYMid meet"),t.setAttribute("focusable","false"),r&&r.viewBox&&t.setAttribute("viewBox",r.viewBox),t}_fetchIcon(t){var r;const{url:i,options:o}=t,s=null!==(r=null==o?void 0:o.withCredentials)&&void 0!==r&&r;if(!this._httpClient)throw function CY(){return Error("Could not find HttpClient provider for use with Angular Material icons. Please include the HttpClientModule from @angular/common/http in your app imports.")}();if(null==i)throw Error(`Cannot fetch icon from URL "${i}".`);const a=this._sanitizer.sanitize(Ke.RESOURCE_URL,i);if(!a)throw tw(i);const l=this._inProgressUrlFetches.get(a);if(l)return l;const u=this._httpClient.get(a,{responseType:"text",withCredentials:s}).pipe($(c=>eu(c)),function hY(n){return ve((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}(()=>this._inProgressUrlFetches.delete(a)),ty());return this._inProgressUrlFetches.set(a,u),u}_addSvgIconConfig(t,r,i){return this._svgIconConfigs.set(rw(t,r),i),this}_addSvgIconSetConfig(t,r){const i=this._iconSetConfigs.get(t);return i?i.push(r):this._iconSetConfigs.set(t,[r]),this}_svgElementFromConfig(t){if(!t.svgElement){const r=this._svgElementFromString(t.svgText);this._setSvgAttributes(r,t.options),t.svgElement=r}return t.svgElement}_getIconConfigFromResolvers(t,r){for(let i=0;i<this._resolvers.length;i++){const o=this._resolvers[i](r,t);if(o)return wY(o)?new Ko(o.url,null,o.options):new Ko(o,null)}}}return n.\u0275fac=function(t){return new(t||n)(Y(JA,8),Y(Y_),Y(_t,8),Y(Ti))},n.\u0275prov=Ce({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function Kd(n){return n.cloneNode(!0)}function rw(n,e){return n+":"+e}function wY(n){return!(!n.url||!n.options)}const xY=Vg(class{constructor(n){this._elementRef=n}}),RY=new j("MAT_ICON_DEFAULT_OPTIONS"),IY=new j("mat-icon-location",{providedIn:"root",factory:function OY(){const n=ja(_t),e=n?n.location:null;return{getPathname:()=>e?e.pathname+e.search:""}}}),iw=["clip-path","color-profile","src","cursor","fill","filter","marker","marker-start","marker-mid","marker-end","mask","stroke"],PY=iw.map(n=>`[${n}]`).join(", "),NY=/^url\(['"]?#(.*?)['"]?\)$/;let FY=(()=>{class n extends xY{constructor(t,r,i,o,s,a){super(t),this._iconRegistry=r,this._location=o,this._errorHandler=s,this._inline=!1,this._previousFontSetClass=[],this._currentIconFetch=ae.EMPTY,a&&(a.color&&(this.color=this.defaultColor=a.color),a.fontSet&&(this.fontSet=a.fontSet)),i||t.nativeElement.setAttribute("aria-hidden","true")}get inline(){return this._inline}set inline(t){this._inline=jr(t)}get svgIcon(){return this._svgIcon}set svgIcon(t){t!==this._svgIcon&&(t?this._updateSvgIcon(t):this._svgIcon&&this._clearSvgElement(),this._svgIcon=t)}get fontSet(){return this._fontSet}set fontSet(t){const r=this._cleanupFontValue(t);r!==this._fontSet&&(this._fontSet=r,this._updateFontIconClasses())}get fontIcon(){return this._fontIcon}set fontIcon(t){const r=this._cleanupFontValue(t);r!==this._fontIcon&&(this._fontIcon=r,this._updateFontIconClasses())}_splitIconName(t){if(!t)return["",""];const r=t.split(":");switch(r.length){case 1:return["",r[0]];case 2:return r;default:throw Error(`Invalid icon name: "${t}"`)}}ngOnInit(){this._updateFontIconClasses()}ngAfterViewChecked(){const t=this._elementsWithExternalReferences;if(t&&t.size){const r=this._location.getPathname();r!==this._previousPath&&(this._previousPath=r,this._prependPathToReferences(r))}}ngOnDestroy(){this._currentIconFetch.unsubscribe(),this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear()}_usingFontIcon(){return!this.svgIcon}_setSvgElement(t){this._clearSvgElement();const r=this._location.getPathname();this._previousPath=r,this._cacheChildrenWithExternalReferences(t),this._prependPathToReferences(r),this._elementRef.nativeElement.appendChild(t)}_clearSvgElement(){const t=this._elementRef.nativeElement;let r=t.childNodes.length;for(this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear();r--;){const i=t.childNodes[r];(1!==i.nodeType||"svg"===i.nodeName.toLowerCase())&&i.remove()}}_updateFontIconClasses(){if(!this._usingFontIcon())return;const t=this._elementRef.nativeElement,r=(this.fontSet?[this._iconRegistry.classNameForFontAlias(this.fontSet)]:this._iconRegistry.getDefaultFontSetClass()).filter(i=>i.length>0);this._previousFontSetClass.forEach(i=>t.classList.remove(i)),r.forEach(i=>t.classList.add(i)),this._previousFontSetClass=r,this.fontIcon!==this._previousFontIconClass&&(this._previousFontIconClass&&t.classList.remove(this._previousFontIconClass),this.fontIcon&&t.classList.add(this.fontIcon),this._previousFontIconClass=this.fontIcon)}_cleanupFontValue(t){return"string"==typeof t?t.trim().split(" ")[0]:t}_prependPathToReferences(t){const r=this._elementsWithExternalReferences;r&&r.forEach((i,o)=>{i.forEach(s=>{o.setAttribute(s.name,`url('${t}#${s.value}')`)})})}_cacheChildrenWithExternalReferences(t){const r=t.querySelectorAll(PY),i=this._elementsWithExternalReferences=this._elementsWithExternalReferences||new Map;for(let o=0;o<r.length;o++)iw.forEach(s=>{const a=r[o],l=a.getAttribute(s),u=l?l.match(NY):null;if(u){let c=i.get(a);c||(c=[],i.set(a,c)),c.push({name:s,value:u[1]})}})}_updateSvgIcon(t){if(this._svgNamespace=null,this._svgName=null,this._currentIconFetch.unsubscribe(),t){const[r,i]=this._splitIconName(t);r&&(this._svgNamespace=r),i&&(this._svgName=i),this._currentIconFetch=this._iconRegistry.getNamedSvgIcon(i,r).pipe(wa(1)).subscribe(o=>this._setSvgElement(o),o=>{this._errorHandler.handleError(new Error(`Error retrieving icon ${r}:${i}! ${o.message}`))})}}}return n.\u0275fac=function(t){return new(t||n)(F(fn),F(qd),function ms(n){return function xI(n,e){if("class"===e)return n.classes;if("style"===e)return n.styles;const t=n.attrs;if(t){const r=t.length;let i=0;for(;i<r;){const o=t[i];if(Ry(o))break;if(0===o)i+=2;else if("number"==typeof o)for(i++;i<r&&"string"==typeof t[i];)i++;else{if(o===e)return t[i+1];i+=2}}}return null}(on(),n)}("aria-hidden"),F(IY),F(Ti),F(RY,8))},n.\u0275cmp=Eo({type:n,selectors:[["mat-icon"]],hostAttrs:["role","img",1,"mat-icon","notranslate"],hostVars:7,hostBindings:function(t,r){2&t&&(Hn("data-mat-icon-type",r._usingFontIcon()?"font":"svg")("data-mat-icon-name",r._svgName||r.fontIcon)("data-mat-icon-namespace",r._svgNamespace||r.fontSet),Zr("mat-icon-inline",r.inline)("mat-icon-no-color","primary"!==r.color&&"accent"!==r.color&&"warn"!==r.color))},inputs:{color:"color",inline:"inline",svgIcon:"svgIcon",fontSet:"fontSet",fontIcon:"fontIcon"},exportAs:["matIcon"],features:[We],ngContentSelectors:SY,decls:1,vars:0,template:function(t,r){1&t&&(function Lp(n){const e=L()[16][6];if(!e.projection){const r=e.projection=Va(n?n.length:1,null),i=r.slice();let o=e.child;for(;null!==o;){const s=n?v1(o,n):0;null!==s&&(i[s]?i[s].projectionNext=o:r[s]=o,i[s]=o),o=o.next}}}(),function Bp(n,e=0,t){const r=L(),i=ze(),o=ws(i,22+n,16,null,t||null);null===o.projection&&(o.projection=e),tf(),64!=(64&o.flags)&&function gP(n,e,t){VE(e[11],0,e,t,xE(n,t,e),NE(t.parent||e[6],t,e))}(i,r,o)}(0))},styles:[".mat-icon{-webkit-user-select:none;user-select:none;background-repeat:no-repeat;display:inline-block;fill:currentColor;height:24px;width:24px;overflow:hidden}.mat-icon.mat-icon-inline{font-size:inherit;height:inherit;line-height:inherit;width:inherit}[dir=rtl] .mat-icon-rtl-mirror{transform:scale(-1, 1)}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon{display:block}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon-button .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon-button .mat-icon{margin:auto}"],encapsulation:2,changeDetection:0}),n})(),LY=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=At({type:n}),n.\u0275inj=Dt({imports:[zn,zn]}),n})(),ow=(()=>{class n{constructor(t,r){this._renderer=t,this._elementRef=r,this.onChange=i=>{},this.onTouched=()=>{}}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}}return n.\u0275fac=function(t){return new(t||n)(F(No),F(fn))},n.\u0275dir=be({type:n}),n})(),Qo=(()=>{class n extends ow{}return n.\u0275fac=function(){let e;return function(r){return(e||(e=mn(n)))(r||n)}}(),n.\u0275dir=be({type:n,features:[We]}),n})();const vr=new j("NgValueAccessor"),kY={provide:vr,useExisting:nt(()=>Qd),multi:!0},VY=new j("CompositionEventMode");let Qd=(()=>{class n extends ow{constructor(t,r,i){super(t,r),this._compositionMode=i,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function UY(){const n=Lo()?Lo().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}())}writeValue(t){this.setProperty("value",null==t?"":t)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}}return n.\u0275fac=function(t){return new(t||n)(F(No),F(fn),F(VY,8))},n.\u0275dir=be({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(t,r){1&t&&pt("input",function(o){return r._handleInput(o.target.value)})("blur",function(){return r.onTouched()})("compositionstart",function(){return r._compositionStart()})("compositionend",function(o){return r._compositionEnd(o.target.value)})},features:[lt([kY]),We]}),n})();const En=new j("NgValidators"),ho=new j("NgAsyncValidators");function mw(n){return null!=n}function gw(n){const e=ic(n)?yo(n):n;return v0(e),e}function vw(n){let e={};return n.forEach(t=>{e=null!=t?Object.assign(Object.assign({},e),t):e}),0===Object.keys(e).length?null:e}function yw(n,e){return e.map(t=>t(n))}function Ew(n){return n.map(e=>function HY(n){return!n.validate}(e)?e:t=>e.validate(t))}function zg(n){return null!=n?function bw(n){if(!n)return null;const e=n.filter(mw);return 0==e.length?null:function(t){return vw(yw(t,e))}}(Ew(n)):null}function Wg(n){return null!=n?function Tw(n){if(!n)return null;const e=n.filter(mw);return 0==e.length?null:function(t){return WA(yw(t,e).map(gw)).pipe($(vw))}}(Ew(n)):null}function Dw(n,e){return null===n?[e]:Array.isArray(n)?[...n,e]:[n,e]}function Xg(n){return n?Array.isArray(n)?n:[n]:[]}function Jd(n,e){return Array.isArray(n)?n.includes(e):n===e}function Cw(n,e){const t=Xg(e);return Xg(n).forEach(i=>{Jd(t,i)||t.push(i)}),t}function Aw(n,e){return Xg(e).filter(t=>!Jd(n,t))}class ww{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=zg(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=Wg(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e){this.control&&this.control.reset(e)}hasError(e,t){return!!this.control&&this.control.hasError(e,t)}getError(e,t){return this.control?this.control.getError(e,t):null}}class fo extends ww{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class Un extends ww{get formDirective(){return null}get path(){return null}}let Rw=(()=>{class n extends class xw{constructor(e){this._cd=e}get isTouched(){var e,t;return!(null===(t=null===(e=this._cd)||void 0===e?void 0:e.control)||void 0===t||!t.touched)}get isUntouched(){var e,t;return!(null===(t=null===(e=this._cd)||void 0===e?void 0:e.control)||void 0===t||!t.untouched)}get isPristine(){var e,t;return!(null===(t=null===(e=this._cd)||void 0===e?void 0:e.control)||void 0===t||!t.pristine)}get isDirty(){var e,t;return!(null===(t=null===(e=this._cd)||void 0===e?void 0:e.control)||void 0===t||!t.dirty)}get isValid(){var e,t;return!(null===(t=null===(e=this._cd)||void 0===e?void 0:e.control)||void 0===t||!t.valid)}get isInvalid(){var e,t;return!(null===(t=null===(e=this._cd)||void 0===e?void 0:e.control)||void 0===t||!t.invalid)}get isPending(){var e,t;return!(null===(t=null===(e=this._cd)||void 0===e?void 0:e.control)||void 0===t||!t.pending)}get isSubmitted(){var e;return!(null===(e=this._cd)||void 0===e||!e.submitted)}}{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(F(fo,2))},n.\u0275dir=be({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(t,r){2&t&&Zr("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)},features:[We]}),n})();const tu="VALID",th="INVALID",Sa="PENDING",nu="DISABLED";function Ow(n){return Array.isArray(n)?zg(n):n||null}function Pw(n){return Array.isArray(n)?Wg(n):n||null}function nh(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}function ru(n,e){var t,r;(function ev(n,e){const t=function Sw(n){return n._rawValidators}(n);null!==e.validator?n.setValidators(Dw(t,e.validator)):"function"==typeof t&&n.setValidators([t]);const r=function Mw(n){return n._rawAsyncValidators}(n);null!==e.asyncValidator?n.setAsyncValidators(Dw(r,e.asyncValidator)):"function"==typeof r&&n.setAsyncValidators([r]);const i=()=>n.updateValueAndValidity();oh(e._rawValidators,i),oh(e._rawAsyncValidators,i)})(n,e),e.valueAccessor.writeValue(n.value),n.disabled&&(null===(r=(t=e.valueAccessor).setDisabledState)||void 0===r||r.call(t,!0)),function ZY(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&Bw(n,e)})}(n,e),function e6(n,e){const t=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}(n,e),function JY(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&Bw(n,e),"submit"!==n.updateOn&&n.markAsTouched()})}(n,e),function QY(n,e){if(e.valueAccessor.setDisabledState){const t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}(n,e)}function oh(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function Bw(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function Gw(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}function Hw(n){return"object"==typeof n&&null!==n&&2===Object.keys(n).length&&"value"in n&&"disabled"in n}const l6={provide:fo,useExisting:nt(()=>iv)},Ww=(()=>Promise.resolve(null))();let iv=(()=>{class n extends fo{constructor(t,r,i,o,s){super(),this._changeDetectorRef=s,this.control=new class extends class Lw{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=e,this._rawAsyncValidators=t,this._composedValidatorFn=Ow(this._rawValidators),this._composedAsyncValidatorFn=Pw(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===tu}get invalid(){return this.status===th}get pending(){return this.status==Sa}get disabled(){return this.status===nu}get enabled(){return this.status!==nu}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._rawValidators=e,this._composedValidatorFn=Ow(e)}setAsyncValidators(e){this._rawAsyncValidators=e,this._composedAsyncValidatorFn=Pw(e)}addValidators(e){this.setValidators(Cw(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(Cw(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(Aw(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(Aw(e,this._rawAsyncValidators))}hasValidator(e){return Jd(this._rawValidators,e)}hasAsyncValidator(e){return Jd(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=Sa,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=nu,this.errors=null,this._forEachChild(r=>{r.disable(Object.assign(Object.assign({},e),{onlySelf:!0}))}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Object.assign(Object.assign({},e),{skipPristineCheck:t})),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=tu,this._forEachChild(r=>{r.enable(Object.assign(Object.assign({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(Object.assign(Object.assign({},e),{skipPristineCheck:t})),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===tu||this.status===Sa)&&this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?nu:tu}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=Sa,this._hasOwnPendingAsyncValidator=!0;const t=gw(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(!1!==t.emitEvent)}get(e){let t=e;return null==t||(Array.isArray(t)||(t=t.split(".")),0===t.length)?null:t.reduce((r,i)=>r&&r._find(i),this)}getError(e,t){const r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new rt,this.statusChanges=new rt}_calculateStatus(){return this._allControlsDisabled()?nu:this.errors?th:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Sa)?Sa:this._anyControlsHaveStatus(th)?th:tu}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){nh(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(e){return null}}{constructor(e=null,t,r){super(function Qg(n){return(nh(n)?n.validators:n)||null}(t),function Zg(n,e){return(nh(e)?e.asyncValidators:n)||null}(r,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),nh(t)&&(t.nonNullable||t.initialValueIsDefault)&&(this.defaultValue=Hw(e)?e.value:e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(r=>r(this.value,!1!==t.emitViewToModelChange)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){Gw(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){Gw(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){Hw(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}},this._registered=!1,this.update=new rt,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=function nv(n,e){if(!e)return null;let t,r,i;return Array.isArray(e),e.forEach(o=>{o.constructor===Qd?t=o:function r6(n){return Object.getPrototypeOf(n.constructor)===Qo}(o)?r=o:i=o}),i||r||t||null}(0,o)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){const r=t.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),function tv(n,e){if(!n.hasOwnProperty("model"))return!1;const t=n.model;return!!t.isFirstChange()||!Object.is(e,t.currentValue)}(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){ru(this.control,this),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(t){Ww.then(()=>{var r;this.control.setValue(t,{emitViewToModelChange:!1}),null===(r=this._changeDetectorRef)||void 0===r||r.markForCheck()})}_updateDisabled(t){const r=t.isDisabled.currentValue,i=0!==r&&function D_(n){return"boolean"==typeof n?n:null!=n&&"false"!==n}(r);Ww.then(()=>{var o;i&&!this.control.disabled?this.control.disable():!i&&this.control.disabled&&this.control.enable(),null===(o=this._changeDetectorRef)||void 0===o||o.markForCheck()})}_getPath(t){return this._parent?function rh(n,e){return[...e.path,n]}(t,this._parent):[t]}}return n.\u0275fac=function(t){return new(t||n)(F(Un,9),F(En,10),F(ho,10),F(vr,10),F(yl,8))},n.\u0275dir=be({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[lt([l6]),We,zr]}),n})();const c6={provide:vr,useExisting:nt(()=>ov),multi:!0};let ov=(()=>{class n extends Qo{writeValue(t){this.setProperty("value",null==t?"":t)}registerOnChange(t){this.onChange=r=>{t(""==r?null:parseFloat(r))}}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=mn(n)))(r||n)}}(),n.\u0275dir=be({type:n,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(t,r){1&t&&pt("input",function(o){return r.onChange(o.target.value)})("blur",function(){return r.onTouched()})},features:[lt([c6]),We]}),n})(),Xw=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=At({type:n}),n.\u0275inj=Dt({}),n})(),P6=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=At({type:n}),n.\u0275inj=Dt({imports:[Xw]}),n})(),N6=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=At({type:n}),n.\u0275inj=Dt({imports:[P6]}),n})(),B6=(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=Eo({type:n,selectors:[["app-tab"]],inputs:{iconName:"iconName",iconAlt:"iconAlt"},decls:2,vars:2,consts:[[1,"btn","btn-primary"],["width","32","height","32",3,"src","alt"]],template:function(t,r){1&t&&(Qe(0,"button",0),Ci(1,"img",1),at()),2&t&&(xt(1),en("src","assets/icons/"+r.iconName+".png",Af)("alt",r.iconAlt))},styles:["button[_ngcontent-%COMP%]{width:72px;margin:2px}"]}),n})();function k6(n,e){if(1&n){const t=rc();Qe(0,"div",8)(1,"div",13)(2,"strong"),jn(3),at()(),Qe(4,"div",10)(5,"input",14),pt("ngModelChange",function(i){return Xi(Wi(t).$implicit.value=i)}),at()()()}if(2&n){const t=e.$implicit;xt(3),Gs("",t.name," Frequency"),xt(2),en("ngModel",t.value)}}function U6(n,e){if(1&n){const t=rc();Qe(0,"div")(1,"div",7)(2,"div",8)(3,"div",9)(4,"strong"),jn(5,"Height"),at()(),Qe(6,"div",10)(7,"mat-icon",11),pt("click",function(){return Wi(t),Xi(Zi().gameMap.decrementHeight())}),jn(8,"arrow_left"),at(),jn(9),Qe(10,"mat-icon",11),pt("click",function(){return Wi(t),Xi(Zi().gameMap.incrementHeight())}),jn(11,"arrow_right"),at()()(),Qe(12,"div",8)(13,"div",9)(14,"strong"),jn(15,"Width"),at()(),Qe(16,"div",10)(17,"mat-icon",11),pt("click",function(){return Wi(t),Xi(Zi().gameMap.decrementWidth())}),jn(18,"arrow_left"),at(),jn(19),Qe(20,"mat-icon",11),pt("click",function(){return Wi(t),Xi(Zi().gameMap.incrementWidth())}),jn(21,"arrow_right"),at()()(),nc(22,k6,6,2,"div",12),at()()}if(2&n){const t=Zi();xt(9),Gs(" ",t.gameMap.height," "),xt(10),Gs(" ",t.gameMap.width," "),xt(3),en("ngForOf",t.gameMap.mapSettings)}}function V6(n,e){if(1&n){const t=rc();Qe(0,"div")(1,"label",15),jn(2," Import "),Qe(3,"input",16),pt("change",function(i){return Wi(t),Xi(Zi().uploadLevel(i))}),at()(),Qe(4,"button",17),pt("click",function(){return Wi(t),Xi(Zi().downloadLevel())}),jn(5," Export "),at()()}}const G6=function(n,e){return{height:n,width:e}};let H6=(()=>{class n{constructor(){this.TileSelectorState=gr}onRightClick(t){t.preventDefault()}ngOnInit(){return ji(this,void 0,void 0,function*(){this.mouseService=new v5,this.gameMap=new g5(24,24,this.mouseService),document.getElementById("map").appendChild(this.gameMap.gameMapGraphic.view)})}downloadLevel(){var t=this.gameMap.generateExportFile().toString();let r=document.createElement("a");var i=new Blob([t],{type:"text/plain"});r.href=URL.createObjectURL(i),r.download="ChipsMMO-Level",r.click()}uploadLevel(t){var r=t.target.files[0];let i=new FileReader;i.onload=()=>{try{var o=JSON.parse(i.result);this.gameMap.regenerateMap(o.settings,o.gameMap)}catch(s){console.log("Not a valid level!")}},i.readAsText(r)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=Eo({type:n,selectors:[["app-root"]],hostBindings:function(t,r){1&t&&pt("contextmenu",function(o){return r.onRightClick(o)})},decls:12,vars:16,consts:[["id","fullArea"],["id","map",3,"ngStyle"],["id","tile-picker","cdkDrag","","cdkDragBoundary","#fullArea"],[1,"tile-picker-tabs"],[3,"iconName","iconAlt","click"],["id","tile-picker-section"],[4,"ngIf"],[1,"settings-box"],[1,"settings-box-singular"],[1,"settings-box-singular-title"],[1,"settings-box-singular-value"],[3,"click"],["class","settings-box-singular",4,"ngFor","ngForOf"],[1,"settings-box-singular-title-2"],["matInput","","type","number","step","1",3,"ngModel","ngModelChange"],[1,"btn","btn-success"],["type","file","name","image",2,"display","none",3,"change"],["type","button",1,"btn","btn-success",3,"click"]],template:function(t,r){1&t&&(Qe(0,"div",0),Ci(1,"div",1),Qe(2,"div",2)(3,"div",3)(4,"app-tab",4),pt("click",function(){return r.gameMap.tileSelector.goToTerrainSection()}),at(),Qe(5,"app-tab",4),pt("click",function(){return r.gameMap.tileSelector.goToMobSection()}),at(),Qe(6,"app-tab",4),pt("click",function(){return r.gameMap.tileSelector.goToSpawnSection()}),at(),Qe(7,"app-tab",4),pt("click",function(){return r.gameMap.tileSelector.goToSettingsSection()}),at(),Qe(8,"app-tab",4),pt("click",function(){return r.gameMap.tileSelector.goToImportExportSection()}),at()(),Qe(9,"div",5),nc(10,U6,23,3,"div",6),nc(11,V6,6,0,"div",6),at()()()),2&t&&(xt(1),en("ngStyle",jT(13,G6,32*r.gameMap.height+"px",32*r.gameMap.width+"px")),xt(3),en("iconName","terrain")("iconAlt","Terrain"),xt(1),en("iconName","mobs")("iconAlt","Mobs"),xt(1),en("iconName","spawning")("iconAlt","Spawning"),xt(1),en("iconName","settings")("iconAlt","Settings"),xt(1),en("iconName","save")("iconAlt","Save/Open"),xt(2),en("ngIf",r.gameMap.tileSelector.state==r.TileSelectorState.Settings),xt(1),en("ngIf",r.gameMap.tileSelector.state==r.TileSelectorState.ImportExport))},dependencies:[iS,sS,F_,J8,FY,Qd,ov,Rw,iv,B6],styles:["#fullArea[_ngcontent-%COMP%]{height:95vh;margin:auto;background:gray}#map[_ngcontent-%COMP%]{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%)}#tile-picker[_ngcontent-%COMP%]{width:392px;position:absolute;top:20px;left:20px;padding:4px;background:black}.tile-picker-button[_ngcontent-%COMP%]{width:20%;color:#fff;background-color:#54c800;border:1px solid gray;font-size:10px;height:30px;cursor:pointer}.tile-picker-button[_ngcontent-%COMP%]:hover{background:#347F01}.settings-box[_ngcontent-%COMP%]{width:100%;background:white}.mat-icon[_ngcontent-%COMP%]{vertical-align:middle}.settings-box-singular-title[_ngcontent-%COMP%]{display:inline-block;width:20%}.settings-box-singular-title-2[_ngcontent-%COMP%]{display:inline-block;width:50%}.settings-box-singular-value[_ngcontent-%COMP%]{display:inline-block}.tile-picker-tabs[_ngcontent-%COMP%]{margin-bottom:4px}"]}),n})(),W6=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=At({type:n}),n.\u0275inj=Dt({}),n})();class cx{}const Vi="*";function hx(n,e=null){return{type:2,steps:n,options:e}}function Gi(n){return{type:6,styles:n,offset:null}}function fx(n){Promise.resolve(null).then(n)}class ou{constructor(e=0,t=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=e+t}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}onStart(e){this._onStartFns.push(e)}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){fx(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(e=>e()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this._started=!1}setPosition(e){this._position=this.totalTime?e*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}}class px{constructor(e){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=e;let t=0,r=0,i=0;const o=this.players.length;0==o?fx(()=>this._onFinish()):this.players.forEach(s=>{s.onDone(()=>{++t==o&&this._onFinish()}),s.onDestroy(()=>{++r==o&&this._onDestroy()}),s.onStart(()=>{++i==o&&this._onStart()})}),this.totalTime=this.players.reduce((s,a)=>Math.max(s,a.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this.players.forEach(e=>e.init())}onStart(e){this._onStartFns.push(e)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(e=>e()),this._onStartFns=[])}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(e=>e.play())}pause(){this.players.forEach(e=>e.pause())}restart(){this.players.forEach(e=>e.restart())}finish(){this._onFinish(),this.players.forEach(e=>e.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(e=>e.destroy()),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this.players.forEach(e=>e.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(e){const t=e*this.totalTime;this.players.forEach(r=>{const i=r.totalTime?Math.min(1,t/r.totalTime):1;r.setPosition(i)})}getPosition(){const e=this.players.reduce((t,r)=>null===t||r.totalTime>t.totalTime?r:t,null);return null!=e?e.getPosition():0}beforeDestroy(){this.players.forEach(e=>{e.beforeDestroy&&e.beforeDestroy()})}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}}let Z6=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=At({type:n}),n.\u0275inj=Dt({imports:[Pc,zn,W6,Hg,kd,m8,zn]}),n})();const Ye=!1;function _x(n){return new z(3e3,Ye)}function Pz(){return"undefined"!=typeof window&&void 0!==window.document}function pv(){return"undefined"!=typeof process&&"[object process]"==={}.toString.call(process)}function po(n){switch(n.length){case 0:return new ou;case 1:return n[0];default:return new px(n)}}function mx(n,e,t,r,i=new Map,o=new Map){const s=[],a=[];let l=-1,u=null;if(r.forEach(c=>{const d=c.get("offset"),h=d==l,f=h&&u||new Map;c.forEach((p,_)=>{let m=_,g=p;if("offset"!==_)switch(m=e.normalizePropertyName(m,s),g){case"!":g=i.get(_);break;case Vi:g=o.get(_);break;default:g=e.normalizeStyleValue(_,m,g,s)}f.set(m,g)}),h||a.push(f),u=f,l=d}),s.length)throw function bz(n){return new z(3502,Ye)}();return a}function _v(n,e,t,r){switch(e){case"start":n.onStart(()=>r(t&&mv(t,"start",n)));break;case"done":n.onDone(()=>r(t&&mv(t,"done",n)));break;case"destroy":n.onDestroy(()=>r(t&&mv(t,"destroy",n)))}}function mv(n,e,t){const r=t.totalTime,o=gv(n.element,n.triggerName,n.fromState,n.toState,e||n.phaseName,null==r?n.totalTime:r,!!t.disabled),s=n._data;return null!=s&&(o._data=s),o}function gv(n,e,t,r,i="",o=0,s){return{element:n,triggerName:e,fromState:t,toState:r,phaseName:i,totalTime:o,disabled:!!s}}function ir(n,e,t){let r=n.get(e);return r||n.set(e,r=t),r}function gx(n){const e=n.indexOf(":");return[n.substring(1,e),n.slice(e+1)]}let vv=(n,e)=>!1,vx=(n,e,t)=>[],yx=null;function yv(n){const e=n.parentNode||n.host;return e===yx?null:e}(pv()||"undefined"!=typeof Element)&&(Pz()?(yx=(()=>document.documentElement)(),vv=(n,e)=>{for(;e;){if(e===n)return!0;e=yv(e)}return!1}):vv=(n,e)=>n.contains(e),vx=(n,e,t)=>{if(t)return Array.from(n.querySelectorAll(e));const r=n.querySelector(e);return r?[r]:[]});let Jo=null,Ex=!1;const bx=vv,Tx=vx;let Dx=(()=>{class n{validateStyleProperty(t){return function Fz(n){Jo||(Jo=function Lz(){return"undefined"!=typeof document?document.body:null}()||{},Ex=!!Jo.style&&"WebkitAppearance"in Jo.style);let e=!0;return Jo.style&&!function Nz(n){return"ebkit"==n.substring(1,6)}(n)&&(e=n in Jo.style,!e&&Ex&&(e="Webkit"+n.charAt(0).toUpperCase()+n.slice(1)in Jo.style)),e}(t)}matchesElement(t,r){return!1}containsElement(t,r){return bx(t,r)}getParentElement(t){return yv(t)}query(t,r,i){return Tx(t,r,i)}computeStyle(t,r,i){return i||""}animate(t,r,i,o,s,a=[],l){return new ou(i,o)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=Ce({token:n,factory:n.\u0275fac}),n})(),Ev=(()=>{class n{}return n.NOOP=new Dx,n})();const bv="ng-enter",dh="ng-leave",hh="ng-trigger",fh=".ng-trigger",Mx="ng-animating",Tv=".ng-animating";function _o(n){if("number"==typeof n)return n;const e=n.match(/^(-?[\.\d]+)(m?s)/);return!e||e.length<2?0:Dv(parseFloat(e[1]),e[2])}function Dv(n,e){return"s"===e?1e3*n:n}function ph(n,e,t){return n.hasOwnProperty("duration")?n:function Uz(n,e,t){let i,o=0,s="";if("string"==typeof n){const a=n.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===a)return e.push(_x()),{duration:0,delay:0,easing:""};i=Dv(parseFloat(a[1]),a[2]);const l=a[3];null!=l&&(o=Dv(parseFloat(l),a[4]));const u=a[5];u&&(s=u)}else i=n;if(!t){let a=!1,l=e.length;i<0&&(e.push(function J6(){return new z(3100,Ye)}()),a=!0),o<0&&(e.push(function ez(){return new z(3101,Ye)}()),a=!0),a&&e.splice(l,0,_x())}return{duration:i,delay:o,easing:s}}(n,e,t)}function su(n,e={}){return Object.keys(n).forEach(t=>{e[t]=n[t]}),e}function Cx(n){const e=new Map;return Object.keys(n).forEach(t=>{e.set(t,n[t])}),e}function mo(n,e=new Map,t){if(t)for(let[r,i]of t)e.set(r,i);for(let[r,i]of n)e.set(r,i);return e}function wx(n,e,t){return t?e+":"+t+";":""}function xx(n){let e="";for(let t=0;t<n.style.length;t++){const r=n.style.item(t);e+=wx(0,r,n.style.getPropertyValue(r))}for(const t in n.style)n.style.hasOwnProperty(t)&&!t.startsWith("_")&&(e+=wx(0,jz(t),n.style[t]));n.setAttribute("style",e)}function fi(n,e,t){n.style&&(e.forEach((r,i)=>{const o=Mv(i);t&&!t.has(i)&&t.set(i,n.style[o]),n.style[o]=r}),pv()&&xx(n))}function es(n,e){n.style&&(e.forEach((t,r)=>{const i=Mv(r);n.style[i]=""}),pv()&&xx(n))}function au(n){return Array.isArray(n)?1==n.length?n[0]:hx(n):n}const Sv=new RegExp("{{\\s*(.+?)\\s*}}","g");function Rx(n){let e=[];if("string"==typeof n){let t;for(;t=Sv.exec(n);)e.push(t[1]);Sv.lastIndex=0}return e}function _h(n,e,t){const r=n.toString(),i=r.replace(Sv,(o,s)=>{let a=e[s];return null==a&&(t.push(function nz(n){return new z(3003,Ye)}()),a=""),a.toString()});return i==r?n:i}function mh(n){const e=[];let t=n.next();for(;!t.done;)e.push(t.value),t=n.next();return e}const Hz=/-+([a-z0-9])/g;function Mv(n){return n.replace(Hz,(...e)=>e[1].toUpperCase())}function jz(n){return n.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function or(n,e,t){switch(e.type){case 7:return n.visitTrigger(e,t);case 0:return n.visitState(e,t);case 1:return n.visitTransition(e,t);case 2:return n.visitSequence(e,t);case 3:return n.visitGroup(e,t);case 4:return n.visitAnimate(e,t);case 5:return n.visitKeyframes(e,t);case 6:return n.visitStyle(e,t);case 8:return n.visitReference(e,t);case 9:return n.visitAnimateChild(e,t);case 10:return n.visitAnimateRef(e,t);case 11:return n.visitQuery(e,t);case 12:return n.visitStagger(e,t);default:throw function rz(n){return new z(3004,Ye)}()}}function Ix(n,e){return window.getComputedStyle(n)[e]}function qz(n,e){const t=[];return"string"==typeof n?n.split(/\s*,\s*/).forEach(r=>function Kz(n,e,t){if(":"==n[0]){const l=function Qz(n,e){switch(n){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(t,r)=>parseFloat(r)>parseFloat(t);case":decrement":return(t,r)=>parseFloat(r)<parseFloat(t);default:return e.push(function gz(n){return new z(3016,Ye)}()),"* => *"}}(n,t);if("function"==typeof l)return void e.push(l);n=l}const r=n.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==r||r.length<4)return t.push(function mz(n){return new z(3015,Ye)}()),e;const i=r[1],o=r[2],s=r[3];e.push(Ox(i,s));"<"==o[0]&&!("*"==i&&"*"==s)&&e.push(Ox(s,i))}(r,t,e)):t.push(n),t}const Eh=new Set(["true","1"]),bh=new Set(["false","0"]);function Ox(n,e){const t=Eh.has(n)||bh.has(n),r=Eh.has(e)||bh.has(e);return(i,o)=>{let s="*"==n||n==i,a="*"==e||e==o;return!s&&t&&"boolean"==typeof i&&(s=i?Eh.has(n):bh.has(n)),!a&&r&&"boolean"==typeof o&&(a=o?Eh.has(e):bh.has(e)),s&&a}}const Zz=new RegExp("s*:selfs*,?","g");function Cv(n,e,t,r){return new Jz(n).build(e,t,r)}class Jz{constructor(e){this._driver=e}build(e,t,r){const i=new nW(t);return this._resetContextStyleTimingState(i),or(this,au(e),i)}_resetContextStyleTimingState(e){e.currentQuerySelector="",e.collectedStyles=new Map,e.collectedStyles.set("",new Map),e.currentTime=0}visitTrigger(e,t){let r=t.queryCount=0,i=t.depCount=0;const o=[],s=[];return"@"==e.name.charAt(0)&&t.errors.push(function oz(){return new z(3006,Ye)}()),e.definitions.forEach(a=>{if(this._resetContextStyleTimingState(t),0==a.type){const l=a,u=l.name;u.toString().split(/\s*,\s*/).forEach(c=>{l.name=c,o.push(this.visitState(l,t))}),l.name=u}else if(1==a.type){const l=this.visitTransition(a,t);r+=l.queryCount,i+=l.depCount,s.push(l)}else t.errors.push(function sz(){return new z(3007,Ye)}())}),{type:7,name:e.name,states:o,transitions:s,queryCount:r,depCount:i,options:null}}visitState(e,t){const r=this.visitStyle(e.styles,t),i=e.options&&e.options.params||null;if(r.containsDynamicStyles){const o=new Set,s=i||{};r.styles.forEach(a=>{a instanceof Map&&a.forEach(l=>{Rx(l).forEach(u=>{s.hasOwnProperty(u)||o.add(u)})})}),o.size&&(mh(o.values()),t.errors.push(function az(n,e){return new z(3008,Ye)}()))}return{type:0,name:e.name,style:r,options:i?{params:i}:null}}visitTransition(e,t){t.queryCount=0,t.depCount=0;const r=or(this,au(e.animation),t);return{type:1,matchers:qz(e.expr,t.errors),animation:r,queryCount:t.queryCount,depCount:t.depCount,options:ts(e.options)}}visitSequence(e,t){return{type:2,steps:e.steps.map(r=>or(this,r,t)),options:ts(e.options)}}visitGroup(e,t){const r=t.currentTime;let i=0;const o=e.steps.map(s=>{t.currentTime=r;const a=or(this,s,t);return i=Math.max(i,t.currentTime),a});return t.currentTime=i,{type:3,steps:o,options:ts(e.options)}}visitAnimate(e,t){const r=function iW(n,e){if(n.hasOwnProperty("duration"))return n;if("number"==typeof n)return Av(ph(n,e).duration,0,"");const t=n;if(t.split(/\s+/).some(o=>"{"==o.charAt(0)&&"{"==o.charAt(1))){const o=Av(0,0,"");return o.dynamic=!0,o.strValue=t,o}const i=ph(t,e);return Av(i.duration,i.delay,i.easing)}(e.timings,t.errors);t.currentAnimateTimings=r;let i,o=e.styles?e.styles:Gi({});if(5==o.type)i=this.visitKeyframes(o,t);else{let s=e.styles,a=!1;if(!s){a=!0;const u={};r.easing&&(u.easing=r.easing),s=Gi(u)}t.currentTime+=r.duration+r.delay;const l=this.visitStyle(s,t);l.isEmptyStep=a,i=l}return t.currentAnimateTimings=null,{type:4,timings:r,style:i,options:null}}visitStyle(e,t){const r=this._makeStyleAst(e,t);return this._validateStyleAst(r,t),r}_makeStyleAst(e,t){const r=[],i=Array.isArray(e.styles)?e.styles:[e.styles];for(let a of i)"string"==typeof a?a===Vi?r.push(a):t.errors.push(new z(3002,Ye)):r.push(Cx(a));let o=!1,s=null;return r.forEach(a=>{if(a instanceof Map&&(a.has("easing")&&(s=a.get("easing"),a.delete("easing")),!o))for(let l of a.values())if(l.toString().indexOf("{{")>=0){o=!0;break}}),{type:6,styles:r,easing:s,offset:e.offset,containsDynamicStyles:o,options:null}}_validateStyleAst(e,t){const r=t.currentAnimateTimings;let i=t.currentTime,o=t.currentTime;r&&o>0&&(o-=r.duration+r.delay),e.styles.forEach(s=>{"string"!=typeof s&&s.forEach((a,l)=>{const u=t.collectedStyles.get(t.currentQuerySelector),c=u.get(l);let d=!0;c&&(o!=i&&o>=c.startTime&&i<=c.endTime&&(t.errors.push(function uz(n,e,t,r,i){return new z(3010,Ye)}()),d=!1),o=c.startTime),d&&u.set(l,{startTime:o,endTime:i}),t.options&&function Gz(n,e,t){const r=e.params||{},i=Rx(n);i.length&&i.forEach(o=>{r.hasOwnProperty(o)||t.push(function tz(n){return new z(3001,Ye)}())})}(a,t.options,t.errors)})})}visitKeyframes(e,t){const r={type:5,styles:[],options:null};if(!t.currentAnimateTimings)return t.errors.push(function cz(){return new z(3011,Ye)}()),r;let o=0;const s=[];let a=!1,l=!1,u=0;const c=e.steps.map(g=>{const b=this._makeStyleAst(g,t);let y=null!=b.offset?b.offset:function rW(n){if("string"==typeof n)return null;let e=null;if(Array.isArray(n))n.forEach(t=>{if(t instanceof Map&&t.has("offset")){const r=t;e=parseFloat(r.get("offset")),r.delete("offset")}});else if(n instanceof Map&&n.has("offset")){const t=n;e=parseFloat(t.get("offset")),t.delete("offset")}return e}(b.styles),M=0;return null!=y&&(o++,M=b.offset=y),l=l||M<0||M>1,a=a||M<u,u=M,s.push(M),b});l&&t.errors.push(function dz(){return new z(3012,Ye)}()),a&&t.errors.push(function hz(){return new z(3200,Ye)}());const d=e.steps.length;let h=0;o>0&&o<d?t.errors.push(function fz(){return new z(3202,Ye)}()):0==o&&(h=1/(d-1));const f=d-1,p=t.currentTime,_=t.currentAnimateTimings,m=_.duration;return c.forEach((g,b)=>{const y=h>0?b==f?1:h*b:s[b],M=y*m;t.currentTime=p+_.delay+M,_.duration=M,this._validateStyleAst(g,t),g.offset=y,r.styles.push(g)}),r}visitReference(e,t){return{type:8,animation:or(this,au(e.animation),t),options:ts(e.options)}}visitAnimateChild(e,t){return t.depCount++,{type:9,options:ts(e.options)}}visitAnimateRef(e,t){return{type:10,animation:this.visitReference(e.animation,t),options:ts(e.options)}}visitQuery(e,t){const r=t.currentQuerySelector,i=e.options||{};t.queryCount++,t.currentQuery=e;const[o,s]=function eW(n){const e=!!n.split(/\s*,\s*/).find(t=>":self"==t);return e&&(n=n.replace(Zz,"")),n=n.replace(/@\*/g,fh).replace(/@\w+/g,t=>fh+"-"+t.slice(1)).replace(/:animating/g,Tv),[n,e]}(e.selector);t.currentQuerySelector=r.length?r+" "+o:o,ir(t.collectedStyles,t.currentQuerySelector,new Map);const a=or(this,au(e.animation),t);return t.currentQuery=null,t.currentQuerySelector=r,{type:11,selector:o,limit:i.limit||0,optional:!!i.optional,includeSelf:s,animation:a,originalSelector:e.selector,options:ts(e.options)}}visitStagger(e,t){t.currentQuery||t.errors.push(function pz(){return new z(3013,Ye)}());const r="full"===e.timings?{duration:0,delay:0,easing:"full"}:ph(e.timings,t.errors,!0);return{type:12,animation:or(this,au(e.animation),t),timings:r,options:null}}}class nW{constructor(e){this.errors=e,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles=new Map,this.options=null,this.unsupportedCSSPropertiesFound=new Set,this.nonAnimatableCSSPropertiesFound=new Set}}function ts(n){return n?(n=su(n)).params&&(n.params=function tW(n){return n?su(n):null}(n.params)):n={},n}function Av(n,e,t){return{duration:n,delay:e,easing:t}}function wv(n,e,t,r,i,o,s=null,a=!1){return{type:1,element:n,keyframes:e,preStyleProps:t,postStyleProps:r,duration:i,delay:o,totalTime:i+o,easing:s,subTimeline:a}}class Th{constructor(){this._map=new Map}get(e){return this._map.get(e)||[]}append(e,t){let r=this._map.get(e);r||this._map.set(e,r=[]),r.push(...t)}has(e){return this._map.has(e)}clear(){this._map.clear()}}const aW=new RegExp(":enter","g"),uW=new RegExp(":leave","g");function xv(n,e,t,r,i,o=new Map,s=new Map,a,l,u=[]){return(new cW).buildKeyframes(n,e,t,r,i,o,s,a,l,u)}class cW{buildKeyframes(e,t,r,i,o,s,a,l,u,c=[]){u=u||new Th;const d=new Rv(e,t,u,i,o,c,[]);d.options=l;const h=l.delay?_o(l.delay):0;d.currentTimeline.delayNextStep(h),d.currentTimeline.setStyles([s],null,d.errors,l),or(this,r,d);const f=d.timelines.filter(p=>p.containsAnimation());if(f.length&&a.size){let p;for(let _=f.length-1;_>=0;_--){const m=f[_];if(m.element===t){p=m;break}}p&&!p.allowOnlyTimelineStyles()&&p.setStyles([a],null,d.errors,l)}return f.length?f.map(p=>p.buildKeyframes()):[wv(t,[],[],[],0,h,"",!1)]}visitTrigger(e,t){}visitState(e,t){}visitTransition(e,t){}visitAnimateChild(e,t){const r=t.subInstructions.get(t.element);if(r){const i=t.createSubContext(e.options),o=t.currentTimeline.currentTime,s=this._visitSubInstructions(r,i,i.options);o!=s&&t.transformIntoNewTimeline(s)}t.previousNode=e}visitAnimateRef(e,t){const r=t.createSubContext(e.options);r.transformIntoNewTimeline(),this.visitReference(e.animation,r),t.transformIntoNewTimeline(r.currentTimeline.currentTime),t.previousNode=e}_visitSubInstructions(e,t,r){let o=t.currentTimeline.currentTime;const s=null!=r.duration?_o(r.duration):null,a=null!=r.delay?_o(r.delay):null;return 0!==s&&e.forEach(l=>{const u=t.appendInstructionToTimeline(l,s,a);o=Math.max(o,u.duration+u.delay)}),o}visitReference(e,t){t.updateOptions(e.options,!0),or(this,e.animation,t),t.previousNode=e}visitSequence(e,t){const r=t.subContextCount;let i=t;const o=e.options;if(o&&(o.params||o.delay)&&(i=t.createSubContext(o),i.transformIntoNewTimeline(),null!=o.delay)){6==i.previousNode.type&&(i.currentTimeline.snapshotCurrentStyles(),i.previousNode=Dh);const s=_o(o.delay);i.delayNextStep(s)}e.steps.length&&(e.steps.forEach(s=>or(this,s,i)),i.currentTimeline.applyStylesToKeyframe(),i.subContextCount>r&&i.transformIntoNewTimeline()),t.previousNode=e}visitGroup(e,t){const r=[];let i=t.currentTimeline.currentTime;const o=e.options&&e.options.delay?_o(e.options.delay):0;e.steps.forEach(s=>{const a=t.createSubContext(e.options);o&&a.delayNextStep(o),or(this,s,a),i=Math.max(i,a.currentTimeline.currentTime),r.push(a.currentTimeline)}),r.forEach(s=>t.currentTimeline.mergeTimelineCollectedStyles(s)),t.transformIntoNewTimeline(i),t.previousNode=e}_visitTiming(e,t){if(e.dynamic){const r=e.strValue;return ph(t.params?_h(r,t.params,t.errors):r,t.errors)}return{duration:e.duration,delay:e.delay,easing:e.easing}}visitAnimate(e,t){const r=t.currentAnimateTimings=this._visitTiming(e.timings,t),i=t.currentTimeline;r.delay&&(t.incrementTime(r.delay),i.snapshotCurrentStyles());const o=e.style;5==o.type?this.visitKeyframes(o,t):(t.incrementTime(r.duration),this.visitStyle(o,t),i.applyStylesToKeyframe()),t.currentAnimateTimings=null,t.previousNode=e}visitStyle(e,t){const r=t.currentTimeline,i=t.currentAnimateTimings;!i&&r.hasCurrentStyleProperties()&&r.forwardFrame();const o=i&&i.easing||e.easing;e.isEmptyStep?r.applyEmptyStep(o):r.setStyles(e.styles,o,t.errors,t.options),t.previousNode=e}visitKeyframes(e,t){const r=t.currentAnimateTimings,i=t.currentTimeline.duration,o=r.duration,a=t.createSubContext().currentTimeline;a.easing=r.easing,e.styles.forEach(l=>{a.forwardTime((l.offset||0)*o),a.setStyles(l.styles,l.easing,t.errors,t.options),a.applyStylesToKeyframe()}),t.currentTimeline.mergeTimelineCollectedStyles(a),t.transformIntoNewTimeline(i+o),t.previousNode=e}visitQuery(e,t){const r=t.currentTimeline.currentTime,i=e.options||{},o=i.delay?_o(i.delay):0;o&&(6===t.previousNode.type||0==r&&t.currentTimeline.hasCurrentStyleProperties())&&(t.currentTimeline.snapshotCurrentStyles(),t.previousNode=Dh);let s=r;const a=t.invokeQuery(e.selector,e.originalSelector,e.limit,e.includeSelf,!!i.optional,t.errors);t.currentQueryTotal=a.length;let l=null;a.forEach((u,c)=>{t.currentQueryIndex=c;const d=t.createSubContext(e.options,u);o&&d.delayNextStep(o),u===t.element&&(l=d.currentTimeline),or(this,e.animation,d),d.currentTimeline.applyStylesToKeyframe(),s=Math.max(s,d.currentTimeline.currentTime)}),t.currentQueryIndex=0,t.currentQueryTotal=0,t.transformIntoNewTimeline(s),l&&(t.currentTimeline.mergeTimelineCollectedStyles(l),t.currentTimeline.snapshotCurrentStyles()),t.previousNode=e}visitStagger(e,t){const r=t.parentContext,i=t.currentTimeline,o=e.timings,s=Math.abs(o.duration),a=s*(t.currentQueryTotal-1);let l=s*t.currentQueryIndex;switch(o.duration<0?"reverse":o.easing){case"reverse":l=a-l;break;case"full":l=r.currentStaggerTime}const c=t.currentTimeline;l&&c.delayNextStep(l);const d=c.currentTime;or(this,e.animation,t),t.previousNode=e,r.currentStaggerTime=i.currentTime-d+(i.startTime-r.currentTimeline.startTime)}}const Dh={};class Rv{constructor(e,t,r,i,o,s,a,l){this._driver=e,this.element=t,this.subInstructions=r,this._enterClassName=i,this._leaveClassName=o,this.errors=s,this.timelines=a,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=Dh,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=l||new Sh(this._driver,t,0),a.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(e,t){if(!e)return;const r=e;let i=this.options;null!=r.duration&&(i.duration=_o(r.duration)),null!=r.delay&&(i.delay=_o(r.delay));const o=r.params;if(o){let s=i.params;s||(s=this.options.params={}),Object.keys(o).forEach(a=>{(!t||!s.hasOwnProperty(a))&&(s[a]=_h(o[a],s,this.errors))})}}_copyOptions(){const e={};if(this.options){const t=this.options.params;if(t){const r=e.params={};Object.keys(t).forEach(i=>{r[i]=t[i]})}}return e}createSubContext(e=null,t,r){const i=t||this.element,o=new Rv(this._driver,i,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(i,r||0));return o.previousNode=this.previousNode,o.currentAnimateTimings=this.currentAnimateTimings,o.options=this._copyOptions(),o.updateOptions(e),o.currentQueryIndex=this.currentQueryIndex,o.currentQueryTotal=this.currentQueryTotal,o.parentContext=this,this.subContextCount++,o}transformIntoNewTimeline(e){return this.previousNode=Dh,this.currentTimeline=this.currentTimeline.fork(this.element,e),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(e,t,r){const i={duration:null!=t?t:e.duration,delay:this.currentTimeline.currentTime+(null!=r?r:0)+e.delay,easing:""},o=new dW(this._driver,e.element,e.keyframes,e.preStyleProps,e.postStyleProps,i,e.stretchStartingKeyframe);return this.timelines.push(o),i}incrementTime(e){this.currentTimeline.forwardTime(this.currentTimeline.duration+e)}delayNextStep(e){e>0&&this.currentTimeline.delayNextStep(e)}invokeQuery(e,t,r,i,o,s){let a=[];if(i&&a.push(this.element),e.length>0){e=(e=e.replace(aW,"."+this._enterClassName)).replace(uW,"."+this._leaveClassName);let u=this._driver.query(this.element,e,1!=r);0!==r&&(u=r<0?u.slice(u.length+r,u.length):u.slice(0,r)),a.push(...u)}return!o&&0==a.length&&s.push(function _z(n){return new z(3014,Ye)}()),a}}class Sh{constructor(e,t,r,i){this._driver=e,this.element=t,this.startTime=r,this._elementTimelineStylesLookup=i,this.duration=0,this._previousKeyframe=new Map,this._currentKeyframe=new Map,this._keyframes=new Map,this._styleSummary=new Map,this._localTimelineStyles=new Map,this._pendingStyles=new Map,this._backFill=new Map,this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(t),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(t,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.hasCurrentStyleProperties();default:return!0}}hasCurrentStyleProperties(){return this._currentKeyframe.size>0}get currentTime(){return this.startTime+this.duration}delayNextStep(e){const t=1===this._keyframes.size&&this._pendingStyles.size;this.duration||t?(this.forwardTime(this.currentTime+e),t&&this.snapshotCurrentStyles()):this.startTime+=e}fork(e,t){return this.applyStylesToKeyframe(),new Sh(this._driver,e,t||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=new Map,this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(e){this.applyStylesToKeyframe(),this.duration=e,this._loadKeyframe()}_updateStyle(e,t){this._localTimelineStyles.set(e,t),this._globalTimelineStyles.set(e,t),this._styleSummary.set(e,{time:this.currentTime,value:t})}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(e){e&&this._previousKeyframe.set("easing",e);for(let[t,r]of this._globalTimelineStyles)this._backFill.set(t,r||Vi),this._currentKeyframe.set(t,Vi);this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(e,t,r,i){t&&this._previousKeyframe.set("easing",t);const o=i&&i.params||{},s=function hW(n,e){const t=new Map;let r;return n.forEach(i=>{if("*"===i){r=r||e.keys();for(let o of r)t.set(o,Vi)}else mo(i,t)}),t}(e,this._globalTimelineStyles);for(let[a,l]of s){const u=_h(l,o,r);this._pendingStyles.set(a,u),this._localTimelineStyles.has(a)||this._backFill.set(a,this._globalTimelineStyles.get(a)||Vi),this._updateStyle(a,u)}}applyStylesToKeyframe(){0!=this._pendingStyles.size&&(this._pendingStyles.forEach((e,t)=>{this._currentKeyframe.set(t,e)}),this._pendingStyles.clear(),this._localTimelineStyles.forEach((e,t)=>{this._currentKeyframe.has(t)||this._currentKeyframe.set(t,e)}))}snapshotCurrentStyles(){for(let[e,t]of this._localTimelineStyles)this._pendingStyles.set(e,t),this._updateStyle(e,t)}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const e=[];for(let t in this._currentKeyframe)e.push(t);return e}mergeTimelineCollectedStyles(e){e._styleSummary.forEach((t,r)=>{const i=this._styleSummary.get(r);(!i||t.time>i.time)&&this._updateStyle(r,t.value)})}buildKeyframes(){this.applyStylesToKeyframe();const e=new Set,t=new Set,r=1===this._keyframes.size&&0===this.duration;let i=[];this._keyframes.forEach((a,l)=>{const u=mo(a,new Map,this._backFill);u.forEach((c,d)=>{"!"===c?e.add(d):c===Vi&&t.add(d)}),r||u.set("offset",l/this.duration),i.push(u)});const o=e.size?mh(e.values()):[],s=t.size?mh(t.values()):[];if(r){const a=i[0],l=new Map(a);a.set("offset",0),l.set("offset",1),i=[a,l]}return wv(this.element,i,o,s,this.duration,this.startTime,this.easing,!1)}}class dW extends Sh{constructor(e,t,r,i,o,s,a=!1){super(e,t,s.delay),this.keyframes=r,this.preStyleProps=i,this.postStyleProps=o,this._stretchStartingKeyframe=a,this.timings={duration:s.duration,delay:s.delay,easing:s.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let e=this.keyframes,{delay:t,duration:r,easing:i}=this.timings;if(this._stretchStartingKeyframe&&t){const o=[],s=r+t,a=t/s,l=mo(e[0]);l.set("offset",0),o.push(l);const u=mo(e[0]);u.set("offset",Fx(a)),o.push(u);const c=e.length-1;for(let d=1;d<=c;d++){let h=mo(e[d]);const f=h.get("offset");h.set("offset",Fx((t+f*r)/s)),o.push(h)}r=s,t=0,i="",e=o}return wv(this.element,e,this.preStyleProps,this.postStyleProps,r,t,i,!0)}}function Fx(n,e=3){const t=Math.pow(10,e-1);return Math.round(n*t)/t}class Iv{}const fW=new Set(["width","height","minWidth","minHeight","maxWidth","maxHeight","left","top","bottom","right","fontSize","outlineWidth","outlineOffset","paddingTop","paddingLeft","paddingBottom","paddingRight","marginTop","marginLeft","marginBottom","marginRight","borderRadius","borderWidth","borderTopWidth","borderLeftWidth","borderRightWidth","borderBottomWidth","textIndent","perspective"]);class pW extends Iv{normalizePropertyName(e,t){return Mv(e)}normalizeStyleValue(e,t,r,i){let o="";const s=r.toString().trim();if(fW.has(t)&&0!==r&&"0"!==r)if("number"==typeof r)o="px";else{const a=r.match(/^[+-]?[\d\.]+([a-z]*)$/);a&&0==a[1].length&&i.push(function iz(n,e){return new z(3005,Ye)}())}return s+o}}function Lx(n,e,t,r,i,o,s,a,l,u,c,d,h){return{type:0,element:n,triggerName:e,isRemovalTransition:i,fromState:t,fromStyles:o,toState:r,toStyles:s,timelines:a,queriedElements:l,preStyleProps:u,postStyleProps:c,totalTime:d,errors:h}}const Ov={};class Bx{constructor(e,t,r){this._triggerName=e,this.ast=t,this._stateStyles=r}match(e,t,r,i){return function _W(n,e,t,r,i){return n.some(o=>o(e,t,r,i))}(this.ast.matchers,e,t,r,i)}buildStyles(e,t,r){let i=this._stateStyles.get("*");return void 0!==e&&(i=this._stateStyles.get(null==e?void 0:e.toString())||i),i?i.buildStyles(t,r):new Map}build(e,t,r,i,o,s,a,l,u,c){var d;const h=[],f=this.ast.options&&this.ast.options.params||Ov,_=this.buildStyles(r,a&&a.params||Ov,h),m=l&&l.params||Ov,g=this.buildStyles(i,m,h),b=new Set,y=new Map,M=new Map,S="void"===i,T={params:mW(m,f),delay:null===(d=this.ast.options)||void 0===d?void 0:d.delay},k=c?[]:xv(e,t,this.ast.animation,o,s,_,g,T,u,h);let Q=0;if(k.forEach(U=>{Q=Math.max(U.duration+U.delay,Q)}),h.length)return Lx(t,this._triggerName,r,i,S,_,g,[],[],y,M,Q,h);k.forEach(U=>{const ce=U.element,he=ir(y,ce,new Set);U.preStyleProps.forEach(Je=>he.add(Je));const we=ir(M,ce,new Set);U.postStyleProps.forEach(Je=>we.add(Je)),ce!==t&&b.add(ce)});const B=mh(b.values());return Lx(t,this._triggerName,r,i,S,_,g,k,B,y,M,Q)}}function mW(n,e){const t=su(e);for(const r in n)n.hasOwnProperty(r)&&null!=n[r]&&(t[r]=n[r]);return t}class gW{constructor(e,t,r){this.styles=e,this.defaultParams=t,this.normalizer=r}buildStyles(e,t){const r=new Map,i=su(this.defaultParams);return Object.keys(e).forEach(o=>{const s=e[o];null!==s&&(i[o]=s)}),this.styles.styles.forEach(o=>{"string"!=typeof o&&o.forEach((s,a)=>{s&&(s=_h(s,i,t));const l=this.normalizer.normalizePropertyName(a,t);s=this.normalizer.normalizeStyleValue(a,l,s,t),r.set(l,s)})}),r}}class yW{constructor(e,t,r){this.name=e,this.ast=t,this._normalizer=r,this.transitionFactories=[],this.states=new Map,t.states.forEach(i=>{this.states.set(i.name,new gW(i.style,i.options&&i.options.params||{},r))}),kx(this.states,"true","1"),kx(this.states,"false","0"),t.transitions.forEach(i=>{this.transitionFactories.push(new Bx(e,i,this.states))}),this.fallbackTransition=function EW(n,e,t){return new Bx(n,{type:1,animation:{type:2,steps:[],options:null},matchers:[(s,a)=>!0],options:null,queryCount:0,depCount:0},e)}(e,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(e,t,r,i){return this.transitionFactories.find(s=>s.match(e,t,r,i))||null}matchStyles(e,t,r){return this.fallbackTransition.buildStyles(e,t,r)}}function kx(n,e,t){n.has(e)?n.has(t)||n.set(t,n.get(e)):n.has(t)&&n.set(e,n.get(t))}const bW=new Th;class TW{constructor(e,t,r){this.bodyNode=e,this._driver=t,this._normalizer=r,this._animations=new Map,this._playersById=new Map,this.players=[]}register(e,t){const r=[],o=Cv(this._driver,t,r,[]);if(r.length)throw function Tz(n){return new z(3503,Ye)}();this._animations.set(e,o)}_buildPlayer(e,t,r){const i=e.element,o=mx(0,this._normalizer,0,e.keyframes,t,r);return this._driver.animate(i,o,e.duration,e.delay,e.easing,[],!0)}create(e,t,r={}){const i=[],o=this._animations.get(e);let s;const a=new Map;if(o?(s=xv(this._driver,t,o,bv,dh,new Map,new Map,r,bW,i),s.forEach(c=>{const d=ir(a,c.element,new Map);c.postStyleProps.forEach(h=>d.set(h,null))})):(i.push(function Dz(){return new z(3300,Ye)}()),s=[]),i.length)throw function Sz(n){return new z(3504,Ye)}();a.forEach((c,d)=>{c.forEach((h,f)=>{c.set(f,this._driver.computeStyle(d,f,Vi))})});const u=po(s.map(c=>{const d=a.get(c.element);return this._buildPlayer(c,new Map,d)}));return this._playersById.set(e,u),u.onDestroy(()=>this.destroy(e)),this.players.push(u),u}destroy(e){const t=this._getPlayer(e);t.destroy(),this._playersById.delete(e);const r=this.players.indexOf(t);r>=0&&this.players.splice(r,1)}_getPlayer(e){const t=this._playersById.get(e);if(!t)throw function Mz(n){return new z(3301,Ye)}();return t}listen(e,t,r,i){const o=gv(t,"","","");return _v(this._getPlayer(e),r,o,i),()=>{}}command(e,t,r,i){if("register"==r)return void this.register(e,i[0]);if("create"==r)return void this.create(e,t,i[0]||{});const o=this._getPlayer(e);switch(r){case"play":o.play();break;case"pause":o.pause();break;case"reset":o.reset();break;case"restart":o.restart();break;case"finish":o.finish();break;case"init":o.init();break;case"setPosition":o.setPosition(parseFloat(i[0]));break;case"destroy":this.destroy(e)}}}const Ux="ng-animate-queued",Pv="ng-animate-disabled",AW=[],Vx={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},wW={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},yr="__ng_removed";class Nv{constructor(e,t=""){this.namespaceId=t;const r=e&&e.hasOwnProperty("value");if(this.value=function OW(n){return null!=n?n:null}(r?e.value:e),r){const o=su(e);delete o.value,this.options=o}else this.options={};this.options.params||(this.options.params={})}get params(){return this.options.params}absorbOptions(e){const t=e.params;if(t){const r=this.options.params;Object.keys(t).forEach(i=>{null==r[i]&&(r[i]=t[i])})}}}const lu="void",Fv=new Nv(lu);class xW{constructor(e,t,r){this.id=e,this.hostElement=t,this._engine=r,this.players=[],this._triggers=new Map,this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+e,Er(t,this._hostClassName)}listen(e,t,r,i){if(!this._triggers.has(t))throw function Cz(n,e){return new z(3302,Ye)}();if(null==r||0==r.length)throw function Az(n){return new z(3303,Ye)}();if(!function PW(n){return"start"==n||"done"==n}(r))throw function wz(n,e){return new z(3400,Ye)}();const o=ir(this._elementListeners,e,[]),s={name:t,phase:r,callback:i};o.push(s);const a=ir(this._engine.statesByElement,e,new Map);return a.has(t)||(Er(e,hh),Er(e,hh+"-"+t),a.set(t,Fv)),()=>{this._engine.afterFlush(()=>{const l=o.indexOf(s);l>=0&&o.splice(l,1),this._triggers.has(t)||a.delete(t)})}}register(e,t){return!this._triggers.has(e)&&(this._triggers.set(e,t),!0)}_getTrigger(e){const t=this._triggers.get(e);if(!t)throw function xz(n){return new z(3401,Ye)}();return t}trigger(e,t,r,i=!0){const o=this._getTrigger(t),s=new Lv(this.id,t,e);let a=this._engine.statesByElement.get(e);a||(Er(e,hh),Er(e,hh+"-"+t),this._engine.statesByElement.set(e,a=new Map));let l=a.get(t);const u=new Nv(r,this.id);if(!(r&&r.hasOwnProperty("value"))&&l&&u.absorbOptions(l.options),a.set(t,u),l||(l=Fv),u.value!==lu&&l.value===u.value){if(!function LW(n,e){const t=Object.keys(n),r=Object.keys(e);if(t.length!=r.length)return!1;for(let i=0;i<t.length;i++){const o=t[i];if(!e.hasOwnProperty(o)||n[o]!==e[o])return!1}return!0}(l.params,u.params)){const _=[],m=o.matchStyles(l.value,l.params,_),g=o.matchStyles(u.value,u.params,_);_.length?this._engine.reportError(_):this._engine.afterFlush(()=>{es(e,m),fi(e,g)})}return}const h=ir(this._engine.playersByElement,e,[]);h.forEach(_=>{_.namespaceId==this.id&&_.triggerName==t&&_.queued&&_.destroy()});let f=o.matchTransition(l.value,u.value,e,u.params),p=!1;if(!f){if(!i)return;f=o.fallbackTransition,p=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:t,transition:f,fromState:l,toState:u,player:s,isFallbackTransition:p}),p||(Er(e,Ux),s.onStart(()=>{Ma(e,Ux)})),s.onDone(()=>{let _=this.players.indexOf(s);_>=0&&this.players.splice(_,1);const m=this._engine.playersByElement.get(e);if(m){let g=m.indexOf(s);g>=0&&m.splice(g,1)}}),this.players.push(s),h.push(s),s}deregister(e){this._triggers.delete(e),this._engine.statesByElement.forEach(t=>t.delete(e)),this._elementListeners.forEach((t,r)=>{this._elementListeners.set(r,t.filter(i=>i.name!=e))})}clearElementCache(e){this._engine.statesByElement.delete(e),this._elementListeners.delete(e);const t=this._engine.playersByElement.get(e);t&&(t.forEach(r=>r.destroy()),this._engine.playersByElement.delete(e))}_signalRemovalForInnerTriggers(e,t){const r=this._engine.driver.query(e,fh,!0);r.forEach(i=>{if(i[yr])return;const o=this._engine.fetchNamespacesByElement(i);o.size?o.forEach(s=>s.triggerLeaveAnimation(i,t,!1,!0)):this.clearElementCache(i)}),this._engine.afterFlushAnimationsDone(()=>r.forEach(i=>this.clearElementCache(i)))}triggerLeaveAnimation(e,t,r,i){const o=this._engine.statesByElement.get(e),s=new Map;if(o){const a=[];if(o.forEach((l,u)=>{if(s.set(u,l.value),this._triggers.has(u)){const c=this.trigger(e,u,lu,i);c&&a.push(c)}}),a.length)return this._engine.markElementAsRemoved(this.id,e,!0,t,s),r&&po(a).onDone(()=>this._engine.processLeaveNode(e)),!0}return!1}prepareLeaveAnimationListeners(e){const t=this._elementListeners.get(e),r=this._engine.statesByElement.get(e);if(t&&r){const i=new Set;t.forEach(o=>{const s=o.name;if(i.has(s))return;i.add(s);const l=this._triggers.get(s).fallbackTransition,u=r.get(s)||Fv,c=new Nv(lu),d=new Lv(this.id,s,e);this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:s,transition:l,fromState:u,toState:c,player:d,isFallbackTransition:!0})})}}removeNode(e,t){const r=this._engine;if(e.childElementCount&&this._signalRemovalForInnerTriggers(e,t),this.triggerLeaveAnimation(e,t,!0))return;let i=!1;if(r.totalAnimations){const o=r.players.length?r.playersByQueriedElement.get(e):[];if(o&&o.length)i=!0;else{let s=e;for(;s=s.parentNode;)if(r.statesByElement.get(s)){i=!0;break}}}if(this.prepareLeaveAnimationListeners(e),i)r.markElementAsRemoved(this.id,e,!1,t);else{const o=e[yr];(!o||o===Vx)&&(r.afterFlush(()=>this.clearElementCache(e)),r.destroyInnerAnimations(e),r._onRemovalComplete(e,t))}}insertNode(e,t){Er(e,this._hostClassName)}drainQueuedTransitions(e){const t=[];return this._queue.forEach(r=>{const i=r.player;if(i.destroyed)return;const o=r.element,s=this._elementListeners.get(o);s&&s.forEach(a=>{if(a.name==r.triggerName){const l=gv(o,r.triggerName,r.fromState.value,r.toState.value);l._data=e,_v(r.player,a.phase,l,a.callback)}}),i.markedForDestroy?this._engine.afterFlush(()=>{i.destroy()}):t.push(r)}),this._queue=[],t.sort((r,i)=>{const o=r.transition.ast.depCount,s=i.transition.ast.depCount;return 0==o||0==s?o-s:this._engine.driver.containsElement(r.element,i.element)?1:-1})}destroy(e){this.players.forEach(t=>t.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,e)}elementContainsData(e){let t=!1;return this._elementListeners.has(e)&&(t=!0),t=!!this._queue.find(r=>r.element===e)||t,t}}class RW{constructor(e,t,r){this.bodyNode=e,this.driver=t,this._normalizer=r,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(i,o)=>{}}_onRemovalComplete(e,t){this.onRemovalComplete(e,t)}get queuedPlayers(){const e=[];return this._namespaceList.forEach(t=>{t.players.forEach(r=>{r.queued&&e.push(r)})}),e}createNamespace(e,t){const r=new xW(e,t,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,t)?this._balanceNamespaceList(r,t):(this.newHostElements.set(t,r),this.collectEnterElement(t)),this._namespaceLookup[e]=r}_balanceNamespaceList(e,t){const r=this._namespaceList,i=this.namespacesByHostElement;if(r.length-1>=0){let s=!1,a=this.driver.getParentElement(t);for(;a;){const l=i.get(a);if(l){const u=r.indexOf(l);r.splice(u+1,0,e),s=!0;break}a=this.driver.getParentElement(a)}s||r.unshift(e)}else r.push(e);return i.set(t,e),e}register(e,t){let r=this._namespaceLookup[e];return r||(r=this.createNamespace(e,t)),r}registerTrigger(e,t,r){let i=this._namespaceLookup[e];i&&i.register(t,r)&&this.totalAnimations++}destroy(e,t){if(!e)return;const r=this._fetchNamespace(e);this.afterFlush(()=>{this.namespacesByHostElement.delete(r.hostElement),delete this._namespaceLookup[e];const i=this._namespaceList.indexOf(r);i>=0&&this._namespaceList.splice(i,1)}),this.afterFlushAnimationsDone(()=>r.destroy(t))}_fetchNamespace(e){return this._namespaceLookup[e]}fetchNamespacesByElement(e){const t=new Set,r=this.statesByElement.get(e);if(r)for(let i of r.values())if(i.namespaceId){const o=this._fetchNamespace(i.namespaceId);o&&t.add(o)}return t}trigger(e,t,r,i){if(Mh(t)){const o=this._fetchNamespace(e);if(o)return o.trigger(t,r,i),!0}return!1}insertNode(e,t,r,i){if(!Mh(t))return;const o=t[yr];if(o&&o.setForRemoval){o.setForRemoval=!1,o.setForMove=!0;const s=this.collectedLeaveElements.indexOf(t);s>=0&&this.collectedLeaveElements.splice(s,1)}if(e){const s=this._fetchNamespace(e);s&&s.insertNode(t,r)}i&&this.collectEnterElement(t)}collectEnterElement(e){this.collectedEnterElements.push(e)}markElementAsDisabled(e,t){t?this.disabledNodes.has(e)||(this.disabledNodes.add(e),Er(e,Pv)):this.disabledNodes.has(e)&&(this.disabledNodes.delete(e),Ma(e,Pv))}removeNode(e,t,r,i){if(Mh(t)){const o=e?this._fetchNamespace(e):null;if(o?o.removeNode(t,i):this.markElementAsRemoved(e,t,!1,i),r){const s=this.namespacesByHostElement.get(t);s&&s.id!==e&&s.removeNode(t,i)}}else this._onRemovalComplete(t,i)}markElementAsRemoved(e,t,r,i,o){this.collectedLeaveElements.push(t),t[yr]={namespaceId:e,setForRemoval:i,hasAnimation:r,removedBeforeQueried:!1,previousTriggersValues:o}}listen(e,t,r,i,o){return Mh(t)?this._fetchNamespace(e).listen(t,r,i,o):()=>{}}_buildInstruction(e,t,r,i,o){return e.transition.build(this.driver,e.element,e.fromState.value,e.toState.value,r,i,e.fromState.options,e.toState.options,t,o)}destroyInnerAnimations(e){let t=this.driver.query(e,fh,!0);t.forEach(r=>this.destroyActiveAnimationsForElement(r)),0!=this.playersByQueriedElement.size&&(t=this.driver.query(e,Tv,!0),t.forEach(r=>this.finishActiveQueriedAnimationOnElement(r)))}destroyActiveAnimationsForElement(e){const t=this.playersByElement.get(e);t&&t.forEach(r=>{r.queued?r.markedForDestroy=!0:r.destroy()})}finishActiveQueriedAnimationOnElement(e){const t=this.playersByQueriedElement.get(e);t&&t.forEach(r=>r.finish())}whenRenderingDone(){return new Promise(e=>{if(this.players.length)return po(this.players).onDone(()=>e());e()})}processLeaveNode(e){var t;const r=e[yr];if(r&&r.setForRemoval){if(e[yr]=Vx,r.namespaceId){this.destroyInnerAnimations(e);const i=this._fetchNamespace(r.namespaceId);i&&i.clearElementCache(e)}this._onRemovalComplete(e,r.setForRemoval)}!(null===(t=e.classList)||void 0===t)&&t.contains(Pv)&&this.markElementAsDisabled(e,!1),this.driver.query(e,".ng-animate-disabled",!0).forEach(i=>{this.markElementAsDisabled(i,!1)})}flush(e=-1){let t=[];if(this.newHostElements.size&&(this.newHostElements.forEach((r,i)=>this._balanceNamespaceList(r,i)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let r=0;r<this.collectedEnterElements.length;r++)Er(this.collectedEnterElements[r],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const r=[];try{t=this._flushAnimations(r,e)}finally{for(let i=0;i<r.length;i++)r[i]()}}else for(let r=0;r<this.collectedLeaveElements.length;r++)this.processLeaveNode(this.collectedLeaveElements[r]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(r=>r()),this._flushFns=[],this._whenQuietFns.length){const r=this._whenQuietFns;this._whenQuietFns=[],t.length?po(t).onDone(()=>{r.forEach(i=>i())}):r.forEach(i=>i())}}reportError(e){throw function Rz(n){return new z(3402,Ye)}()}_flushAnimations(e,t){const r=new Th,i=[],o=new Map,s=[],a=new Map,l=new Map,u=new Map,c=new Set;this.disabledNodes.forEach(N=>{c.add(N);const G=this.driver.query(N,".ng-animate-queued",!0);for(let q=0;q<G.length;q++)c.add(G[q])});const d=this.bodyNode,h=Array.from(this.statesByElement.keys()),f=jx(h,this.collectedEnterElements),p=new Map;let _=0;f.forEach((N,G)=>{const q=bv+_++;p.set(G,q),N.forEach(J=>Er(J,q))});const m=[],g=new Set,b=new Set;for(let N=0;N<this.collectedLeaveElements.length;N++){const G=this.collectedLeaveElements[N],q=G[yr];q&&q.setForRemoval&&(m.push(G),g.add(G),q.hasAnimation?this.driver.query(G,".ng-star-inserted",!0).forEach(J=>g.add(J)):b.add(G))}const y=new Map,M=jx(h,Array.from(g));M.forEach((N,G)=>{const q=dh+_++;y.set(G,q),N.forEach(J=>Er(J,q))}),e.push(()=>{f.forEach((N,G)=>{const q=p.get(G);N.forEach(J=>Ma(J,q))}),M.forEach((N,G)=>{const q=y.get(G);N.forEach(J=>Ma(J,q))}),m.forEach(N=>{this.processLeaveNode(N)})});const S=[],T=[];for(let N=this._namespaceList.length-1;N>=0;N--)this._namespaceList[N].drainQueuedTransitions(t).forEach(q=>{const J=q.player,K=q.element;if(S.push(J),this.collectedEnterElements.length){const Bt=K[yr];if(Bt&&Bt.setForMove){if(Bt.previousTriggersValues&&Bt.previousTriggersValues.has(q.triggerName)){const Wn=Bt.previousTriggersValues.get(q.triggerName),It=this.statesByElement.get(q.element);if(It&&It.has(q.triggerName)){const Rn=It.get(q.triggerName);Rn.value=Wn,It.set(q.triggerName,Rn)}}return void J.destroy()}}const Qt=!d||!this.driver.containsElement(d,K),Wt=y.get(K),pn=p.get(K),ot=this._buildInstruction(q,r,pn,Wt,Qt);if(ot.errors&&ot.errors.length)return void T.push(ot);if(Qt)return J.onStart(()=>es(K,ot.fromStyles)),J.onDestroy(()=>fi(K,ot.toStyles)),void i.push(J);if(q.isFallbackTransition)return J.onStart(()=>es(K,ot.fromStyles)),J.onDestroy(()=>fi(K,ot.toStyles)),void i.push(J);const Hi=[];ot.timelines.forEach(Bt=>{Bt.stretchStartingKeyframe=!0,this.disabledNodes.has(Bt.element)||Hi.push(Bt)}),ot.timelines=Hi,r.append(K,ot.timelines),s.push({instruction:ot,player:J,element:K}),ot.queriedElements.forEach(Bt=>ir(a,Bt,[]).push(J)),ot.preStyleProps.forEach((Bt,Wn)=>{if(Bt.size){let It=l.get(Wn);It||l.set(Wn,It=new Set),Bt.forEach((Rn,In)=>It.add(In))}}),ot.postStyleProps.forEach((Bt,Wn)=>{let It=u.get(Wn);It||u.set(Wn,It=new Set),Bt.forEach((Rn,In)=>It.add(In))})});if(T.length){const N=[];T.forEach(G=>{N.push(function Iz(n,e){return new z(3505,Ye)}())}),S.forEach(G=>G.destroy()),this.reportError(N)}const k=new Map,Q=new Map;s.forEach(N=>{const G=N.element;r.has(G)&&(Q.set(G,G),this._beforeAnimationBuild(N.player.namespaceId,N.instruction,k))}),i.forEach(N=>{const G=N.element;this._getPreviousPlayers(G,!1,N.namespaceId,N.triggerName,null).forEach(J=>{ir(k,G,[]).push(J),J.destroy()})});const B=m.filter(N=>zx(N,l,u)),U=new Map;Hx(U,this.driver,b,u,Vi).forEach(N=>{zx(N,l,u)&&B.push(N)});const he=new Map;f.forEach((N,G)=>{Hx(he,this.driver,new Set(N),l,"!")}),B.forEach(N=>{var G,q;const J=U.get(N),K=he.get(N);U.set(N,new Map([...Array.from(null!==(G=null==J?void 0:J.entries())&&void 0!==G?G:[]),...Array.from(null!==(q=null==K?void 0:K.entries())&&void 0!==q?q:[])]))});const we=[],Je=[],oe={};s.forEach(N=>{const{element:G,player:q,instruction:J}=N;if(r.has(G)){if(c.has(G))return q.onDestroy(()=>fi(G,J.toStyles)),q.disabled=!0,q.overrideTotalTime(J.totalTime),void i.push(q);let K=oe;if(Q.size>1){let Wt=G;const pn=[];for(;Wt=Wt.parentNode;){const ot=Q.get(Wt);if(ot){K=ot;break}pn.push(Wt)}pn.forEach(ot=>Q.set(ot,K))}const Qt=this._buildAnimation(q.namespaceId,J,k,o,he,U);if(q.setRealPlayer(Qt),K===oe)we.push(q);else{const Wt=this.playersByElement.get(K);Wt&&Wt.length&&(q.parentPlayer=po(Wt)),i.push(q)}}else es(G,J.fromStyles),q.onDestroy(()=>fi(G,J.toStyles)),Je.push(q),c.has(G)&&i.push(q)}),Je.forEach(N=>{const G=o.get(N.element);if(G&&G.length){const q=po(G);N.setRealPlayer(q)}}),i.forEach(N=>{N.parentPlayer?N.syncPlayerEvents(N.parentPlayer):N.destroy()});for(let N=0;N<m.length;N++){const G=m[N],q=G[yr];if(Ma(G,dh),q&&q.hasAnimation)continue;let J=[];if(a.size){let Qt=a.get(G);Qt&&Qt.length&&J.push(...Qt);let Wt=this.driver.query(G,Tv,!0);for(let pn=0;pn<Wt.length;pn++){let ot=a.get(Wt[pn]);ot&&ot.length&&J.push(...ot)}}const K=J.filter(Qt=>!Qt.destroyed);K.length?NW(this,G,K):this.processLeaveNode(G)}return m.length=0,we.forEach(N=>{this.players.push(N),N.onDone(()=>{N.destroy();const G=this.players.indexOf(N);this.players.splice(G,1)}),N.play()}),we}elementContainsData(e,t){let r=!1;const i=t[yr];return i&&i.setForRemoval&&(r=!0),this.playersByElement.has(t)&&(r=!0),this.playersByQueriedElement.has(t)&&(r=!0),this.statesByElement.has(t)&&(r=!0),this._fetchNamespace(e).elementContainsData(t)||r}afterFlush(e){this._flushFns.push(e)}afterFlushAnimationsDone(e){this._whenQuietFns.push(e)}_getPreviousPlayers(e,t,r,i,o){let s=[];if(t){const a=this.playersByQueriedElement.get(e);a&&(s=a)}else{const a=this.playersByElement.get(e);if(a){const l=!o||o==lu;a.forEach(u=>{u.queued||!l&&u.triggerName!=i||s.push(u)})}}return(r||i)&&(s=s.filter(a=>!(r&&r!=a.namespaceId||i&&i!=a.triggerName))),s}_beforeAnimationBuild(e,t,r){const o=t.element,s=t.isRemovalTransition?void 0:e,a=t.isRemovalTransition?void 0:t.triggerName;for(const l of t.timelines){const u=l.element,c=u!==o,d=ir(r,u,[]);this._getPreviousPlayers(u,c,s,a,t.toState).forEach(f=>{const p=f.getRealPlayer();p.beforeDestroy&&p.beforeDestroy(),f.destroy(),d.push(f)})}es(o,t.fromStyles)}_buildAnimation(e,t,r,i,o,s){const a=t.triggerName,l=t.element,u=[],c=new Set,d=new Set,h=t.timelines.map(p=>{const _=p.element;c.add(_);const m=_[yr];if(m&&m.removedBeforeQueried)return new ou(p.duration,p.delay);const g=_!==l,b=function FW(n){const e=[];return Yx(n,e),e}((r.get(_)||AW).map(k=>k.getRealPlayer())).filter(k=>!!k.element&&k.element===_),y=o.get(_),M=s.get(_),S=mx(0,this._normalizer,0,p.keyframes,y,M),T=this._buildPlayer(p,S,b);if(p.subTimeline&&i&&d.add(_),g){const k=new Lv(e,a,_);k.setRealPlayer(T),u.push(k)}return T});u.forEach(p=>{ir(this.playersByQueriedElement,p.element,[]).push(p),p.onDone(()=>function IW(n,e,t){let r=n.get(e);if(r){if(r.length){const i=r.indexOf(t);r.splice(i,1)}0==r.length&&n.delete(e)}return r}(this.playersByQueriedElement,p.element,p))}),c.forEach(p=>Er(p,Mx));const f=po(h);return f.onDestroy(()=>{c.forEach(p=>Ma(p,Mx)),fi(l,t.toStyles)}),d.forEach(p=>{ir(i,p,[]).push(f)}),f}_buildPlayer(e,t,r){return t.length>0?this.driver.animate(e.element,t,e.duration,e.delay,e.easing,r):new ou(e.duration,e.delay)}}class Lv{constructor(e,t,r){this.namespaceId=e,this.triggerName=t,this.element=r,this._player=new ou,this._containsRealPlayer=!1,this._queuedCallbacks=new Map,this.destroyed=!1,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(e){this._containsRealPlayer||(this._player=e,this._queuedCallbacks.forEach((t,r)=>{t.forEach(i=>_v(e,r,void 0,i))}),this._queuedCallbacks.clear(),this._containsRealPlayer=!0,this.overrideTotalTime(e.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(e){this.totalTime=e}syncPlayerEvents(e){const t=this._player;t.triggerCallback&&e.onStart(()=>t.triggerCallback("start")),e.onDone(()=>this.finish()),e.onDestroy(()=>this.destroy())}_queueEvent(e,t){ir(this._queuedCallbacks,e,[]).push(t)}onDone(e){this.queued&&this._queueEvent("done",e),this._player.onDone(e)}onStart(e){this.queued&&this._queueEvent("start",e),this._player.onStart(e)}onDestroy(e){this.queued&&this._queueEvent("destroy",e),this._player.onDestroy(e)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(e){this.queued||this._player.setPosition(e)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(e){const t=this._player;t.triggerCallback&&t.triggerCallback(e)}}function Mh(n){return n&&1===n.nodeType}function Gx(n,e){const t=n.style.display;return n.style.display=null!=e?e:"none",t}function Hx(n,e,t,r,i){const o=[];t.forEach(l=>o.push(Gx(l)));const s=[];r.forEach((l,u)=>{const c=new Map;l.forEach(d=>{const h=e.computeStyle(u,d,i);c.set(d,h),(!h||0==h.length)&&(u[yr]=wW,s.push(u))}),n.set(u,c)});let a=0;return t.forEach(l=>Gx(l,o[a++])),s}function jx(n,e){const t=new Map;if(n.forEach(a=>t.set(a,[])),0==e.length)return t;const i=new Set(e),o=new Map;function s(a){if(!a)return 1;let l=o.get(a);if(l)return l;const u=a.parentNode;return l=t.has(u)?u:i.has(u)?1:s(u),o.set(a,l),l}return e.forEach(a=>{const l=s(a);1!==l&&t.get(l).push(a)}),t}function Er(n,e){var t;null===(t=n.classList)||void 0===t||t.add(e)}function Ma(n,e){var t;null===(t=n.classList)||void 0===t||t.remove(e)}function NW(n,e,t){po(t).onDone(()=>n.processLeaveNode(e))}function Yx(n,e){for(let t=0;t<n.length;t++){const r=n[t];r instanceof px?Yx(r.players,e):e.push(r)}}function zx(n,e,t){const r=t.get(n);if(!r)return!1;let i=e.get(n);return i?r.forEach(o=>i.add(o)):e.set(n,r),t.delete(n),!0}class Ch{constructor(e,t,r){this.bodyNode=e,this._driver=t,this._normalizer=r,this._triggerCache={},this.onRemovalComplete=(i,o)=>{},this._transitionEngine=new RW(e,t,r),this._timelineEngine=new TW(e,t,r),this._transitionEngine.onRemovalComplete=(i,o)=>this.onRemovalComplete(i,o)}registerTrigger(e,t,r,i,o){const s=e+"-"+i;let a=this._triggerCache[s];if(!a){const l=[],c=Cv(this._driver,o,l,[]);if(l.length)throw function Ez(n,e){return new z(3404,Ye)}();a=function vW(n,e,t){return new yW(n,e,t)}(i,c,this._normalizer),this._triggerCache[s]=a}this._transitionEngine.registerTrigger(t,i,a)}register(e,t){this._transitionEngine.register(e,t)}destroy(e,t){this._transitionEngine.destroy(e,t)}onInsert(e,t,r,i){this._transitionEngine.insertNode(e,t,r,i)}onRemove(e,t,r,i){this._transitionEngine.removeNode(e,t,i||!1,r)}disableAnimations(e,t){this._transitionEngine.markElementAsDisabled(e,t)}process(e,t,r,i){if("@"==r.charAt(0)){const[o,s]=gx(r);this._timelineEngine.command(o,t,s,i)}else this._transitionEngine.trigger(e,t,r,i)}listen(e,t,r,i,o){if("@"==r.charAt(0)){const[s,a]=gx(r);return this._timelineEngine.listen(s,t,a,o)}return this._transitionEngine.listen(e,t,r,i,o)}flush(e=-1){this._transitionEngine.flush(e)}get players(){return this._transitionEngine.players.concat(this._timelineEngine.players)}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}}let kW=(()=>{class n{constructor(t,r,i){this._element=t,this._startStyles=r,this._endStyles=i,this._state=0;let o=n.initialStylesByElement.get(t);o||n.initialStylesByElement.set(t,o=new Map),this._initialStyles=o}start(){this._state<1&&(this._startStyles&&fi(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(fi(this._element,this._initialStyles),this._endStyles&&(fi(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(n.initialStylesByElement.delete(this._element),this._startStyles&&(es(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(es(this._element,this._endStyles),this._endStyles=null),fi(this._element,this._initialStyles),this._state=3)}}return n.initialStylesByElement=new WeakMap,n})();function Bv(n){let e=null;return n.forEach((t,r)=>{(function UW(n){return"display"===n||"position"===n})(r)&&(e=e||new Map,e.set(r,t))}),e}class Wx{constructor(e,t,r,i){this.element=e,this.keyframes=t,this.options=r,this._specialStyles=i,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this.time=0,this.parentPlayer=null,this.currentSnapshot=new Map,this._duration=r.duration,this._delay=r.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const e=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,e,this.options),this._finalKeyframe=e.length?e[e.length-1]:new Map,this.domPlayer.addEventListener("finish",()=>this._onFinish())}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_convertKeyframesToObject(e){const t=[];return e.forEach(r=>{t.push(Object.fromEntries(r))}),t}_triggerWebAnimation(e,t,r){return e.animate(this._convertKeyframesToObject(t),r)}onStart(e){this._onStartFns.push(e)}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(e=>e()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}setPosition(e){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=e*this.time}getPosition(){return this.domPlayer.currentTime/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const e=new Map;this.hasStarted()&&this._finalKeyframe.forEach((r,i)=>{"offset"!==i&&e.set(i,this._finished?r:Ix(this.element,i))}),this.currentSnapshot=e}triggerCallback(e){const t="start"===e?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}}class VW{validateStyleProperty(e){return!0}validateAnimatableStyleProperty(e){return!0}matchesElement(e,t){return!1}containsElement(e,t){return bx(e,t)}getParentElement(e){return yv(e)}query(e,t,r){return Tx(e,t,r)}computeStyle(e,t,r){return window.getComputedStyle(e)[t]}animate(e,t,r,i,o,s=[]){const l={duration:r,delay:i,fill:0==i?"both":"forwards"};o&&(l.easing=o);const u=new Map,c=s.filter(f=>f instanceof Wx);(function Yz(n,e){return 0===n||0===e})(r,i)&&c.forEach(f=>{f.currentSnapshot.forEach((p,_)=>u.set(_,p))});let d=function Vz(n){return n.length?n[0]instanceof Map?n:n.map(e=>Cx(e)):[]}(t).map(f=>mo(f));d=function zz(n,e,t){if(t.size&&e.length){let r=e[0],i=[];if(t.forEach((o,s)=>{r.has(s)||i.push(s),r.set(s,o)}),i.length)for(let o=1;o<e.length;o++){let s=e[o];i.forEach(a=>s.set(a,Ix(n,a)))}}return e}(e,d,u);const h=function BW(n,e){let t=null,r=null;return Array.isArray(e)&&e.length?(t=Bv(e[0]),e.length>1&&(r=Bv(e[e.length-1]))):e instanceof Map&&(t=Bv(e)),t||r?new kW(n,t,r):null}(e,d);return new Wx(e,d,l,h)}}let GW=(()=>{class n extends cx{constructor(t,r){super(),this._nextAnimationId=0,this._renderer=t.createRenderer(r.body,{id:"0",encapsulation:Cr.None,styles:[],data:{animation:[]}})}build(t){const r=this._nextAnimationId.toString();this._nextAnimationId++;const i=Array.isArray(t)?hx(t):t;return Xx(this._renderer,null,r,"register",[i]),new HW(r,this._renderer)}}return n.\u0275fac=function(t){return new(t||n)(Y(cl),Y(_t))},n.\u0275prov=Ce({token:n,factory:n.\u0275fac}),n})();class HW extends class X6{}{constructor(e,t){super(),this._id=e,this._renderer=t}create(e,t){return new jW(this._id,e,t||{},this._renderer)}}class jW{constructor(e,t,r,i){this.id=e,this.element=t,this._renderer=i,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",r)}_listen(e,t){return this._renderer.listen(this.element,`@@${this.id}:${e}`,t)}_command(e,...t){return Xx(this._renderer,this.element,this.id,e,t)}onDone(e){this._listen("done",e)}onStart(e){this._listen("start",e)}onDestroy(e){this._listen("destroy",e)}init(){this._command("init")}hasStarted(){return this._started}play(){this._command("play"),this._started=!0}pause(){this._command("pause")}restart(){this._command("restart")}finish(){this._command("finish")}destroy(){this._command("destroy")}reset(){this._command("reset"),this._started=!1}setPosition(e){this._command("setPosition",e)}getPosition(){var e,t;return null!==(t=null===(e=this._renderer.engine.players[+this.id])||void 0===e?void 0:e.getPosition())&&void 0!==t?t:0}}function Xx(n,e,t,r,i){return n.setProperty(e,`@@${t}:${r}`,i)}const $x="@.disabled";let YW=(()=>{class n{constructor(t,r,i){this.delegate=t,this.engine=r,this._zone=i,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,this.promise=Promise.resolve(0),r.onRemovalComplete=(o,s)=>{const a=null==s?void 0:s.parentNode(o);a&&s.removeChild(a,o)}}createRenderer(t,r){const o=this.delegate.createRenderer(t,r);if(!(t&&r&&r.data&&r.data.animation)){let c=this._rendererCache.get(o);return c||(c=new qx("",o,this.engine),this._rendererCache.set(o,c)),c}const s=r.id,a=r.id+"-"+this._currentId;this._currentId++,this.engine.register(a,t);const l=c=>{Array.isArray(c)?c.forEach(l):this.engine.registerTrigger(s,a,t,c.name,c)};return r.data.animation.forEach(l),new zW(this,a,o,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){this.promise.then(()=>{this._microtaskId++})}scheduleListenerCallback(t,r,i){t>=0&&t<this._microtaskId?this._zone.run(()=>r(i)):(0==this._animationCallbacksBuffer.length&&Promise.resolve(null).then(()=>{this._zone.run(()=>{this._animationCallbacksBuffer.forEach(o=>{const[s,a]=o;s(a)}),this._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([r,i]))}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}}return n.\u0275fac=function(t){return new(t||n)(Y(cl),Y(Ch),Y(it))},n.\u0275prov=Ce({token:n,factory:n.\u0275fac}),n})();class qx{constructor(e,t,r){this.namespaceId=e,this.delegate=t,this.engine=r,this.destroyNode=this.delegate.destroyNode?i=>t.destroyNode(i):null}get data(){return this.delegate.data}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.delegate.destroy()}createElement(e,t){return this.delegate.createElement(e,t)}createComment(e){return this.delegate.createComment(e)}createText(e){return this.delegate.createText(e)}appendChild(e,t){this.delegate.appendChild(e,t),this.engine.onInsert(this.namespaceId,t,e,!1)}insertBefore(e,t,r,i=!0){this.delegate.insertBefore(e,t,r),this.engine.onInsert(this.namespaceId,t,e,i)}removeChild(e,t,r){this.engine.onRemove(this.namespaceId,t,this.delegate,r)}selectRootElement(e,t){return this.delegate.selectRootElement(e,t)}parentNode(e){return this.delegate.parentNode(e)}nextSibling(e){return this.delegate.nextSibling(e)}setAttribute(e,t,r,i){this.delegate.setAttribute(e,t,r,i)}removeAttribute(e,t,r){this.delegate.removeAttribute(e,t,r)}addClass(e,t){this.delegate.addClass(e,t)}removeClass(e,t){this.delegate.removeClass(e,t)}setStyle(e,t,r,i){this.delegate.setStyle(e,t,r,i)}removeStyle(e,t,r){this.delegate.removeStyle(e,t,r)}setProperty(e,t,r){"@"==t.charAt(0)&&t==$x?this.disableAnimations(e,!!r):this.delegate.setProperty(e,t,r)}setValue(e,t){this.delegate.setValue(e,t)}listen(e,t,r){return this.delegate.listen(e,t,r)}disableAnimations(e,t){this.engine.disableAnimations(e,t)}}class zW extends qx{constructor(e,t,r,i){super(t,r,i),this.factory=e,this.namespaceId=t}setProperty(e,t,r){"@"==t.charAt(0)?"."==t.charAt(1)&&t==$x?this.disableAnimations(e,r=void 0===r||!!r):this.engine.process(this.namespaceId,e,t.slice(1),r):this.delegate.setProperty(e,t,r)}listen(e,t,r){if("@"==t.charAt(0)){const i=function WW(n){switch(n){case"body":return document.body;case"document":return document;case"window":return window;default:return n}}(e);let o=t.slice(1),s="";return"@"!=o.charAt(0)&&([o,s]=function XW(n){const e=n.indexOf(".");return[n.substring(0,e),n.slice(e+1)]}(o)),this.engine.listen(this.namespaceId,i,o,s,a=>{this.factory.scheduleListenerCallback(a._data||-1,r,a)})}return this.delegate.listen(e,t,r)}}let $W=(()=>{class n extends Ch{constructor(t,r,i){super(t.body,r,i)}ngOnDestroy(){this.flush()}}return n.\u0275fac=function(t){return new(t||n)(Y(_t),Y(Ev),Y(Iv))},n.\u0275prov=Ce({token:n,factory:n.\u0275fac}),n})();const Kx=[{provide:cx,useClass:GW},{provide:Iv,useFactory:function qW(){return new pW}},{provide:Ch,useClass:$W},{provide:cl,useFactory:function KW(n,e,t){return new YW(n,e,t)},deps:[kc,Ch,it]}],Qx=[{provide:Ev,useFactory:()=>new VW},{provide:gl,useValue:"BrowserAnimations"},...Kx],QW=[{provide:Ev,useClass:Dx},{provide:gl,useValue:"NoopAnimations"},...Kx];let ZW=(()=>{class n{static withConfig(t){return{ngModule:n,providers:t.disableAnimations?QW:Qx}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=At({type:n}),n.\u0275inj=Dt({providers:Qx,imports:[AS]}),n})(),JW=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=At({type:n}),n.\u0275inj=Dt({imports:[Hg,zn,zn]}),n})(),iX=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=At({type:n}),n.\u0275inj=Dt({imports:[Pc,zn,kd,zn]}),n})(),_X=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=At({type:n}),n.\u0275inj=Dt({imports:[Pc,zn,zn]}),n})(),eR=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=At({type:n}),n.\u0275inj=Dt({}),n})(),wX=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=At({type:n}),n.\u0275inj=Dt({imports:[eR,Hg,zn,kd,eR,zn]}),n})(),xX=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=At({type:n,bootstrap:[H6]}),n.\u0275inj=Dt({imports:[AS,eY,Z6,ZW,LY,JW,iX,N6,_X,wX]}),n})();(function LB(){BD=!1})(),$2().bootstrapModule(xX).catch(n=>console.error(n))},469:mt=>{"use strict";function xe(v,C,E){E=E||2;var O,ie,ee,ve,V,fe,$,P=C&&C.length,x=P?C[0]*E:v.length,D=ne(v,0,x,E,!0),w=[];if(!D||D.next===D.prev)return w;if(P&&(D=function le(v,C,E,P){var D,w,ee,x=[];for(D=0,w=C.length;D<w;D++)(ee=ne(v,C[D]*P,D<w-1?C[D+1]*P:v.length,P,!1))===ee.next&&(ee.steiner=!0),x.push(_n(ee));for(x.sort(te),D=0;D<x.length;D++)E=se(E=re(x[D],E),E.next);return E}(v,C,D,E)),v.length>80*E){O=ee=v[0],ie=ve=v[1];for(var ue=E;ue<x;ue+=E)(V=v[ue])<O&&(O=V),(fe=v[ue+1])<ie&&(ie=fe),V>ee&&(ee=V),fe>ve&&(ve=fe);$=0!==($=Math.max(ee-O,ve-ie))?1/$:0}return Tt(D,w,E,O,ie,$),w}function ne(v,C,E,P,x){var D,w;if(x===vt(v,C,E,P)>0)for(D=C;D<E;D+=P)w=Ct(D,v[D],v[D+1],w);else for(D=E-P;D>=C;D-=P)w=Ct(D,v[D],v[D+1],w);return w&&dn(w,w.next)&&(ct(w),w=w.next),w}function se(v,C){if(!v)return v;C||(C=v);var P,E=v;do{if(P=!1,E.steiner||!dn(E,E.next)&&0!==ke(E.prev,E,E.next))E=E.next;else{if(ct(E),(E=C=E.prev)===E.next)break;P=!0}}while(P||E!==C);return C}function Tt(v,C,E,P,x,D,w){if(v){!w&&D&&function He(v,C,E,P){var x=v;do{null===x.z&&(x.z=me(x.x,x.y,C,E,P)),x.prevZ=x.prev,x.nextZ=x.next,x=x.next}while(x!==v);x.prevZ.nextZ=null,x.prevZ=null,function gt(v){var C,E,P,x,D,w,O,ie,ee=1;do{for(E=v,v=null,D=null,w=0;E;){for(w++,P=E,O=0,C=0;C<ee&&(O++,P=P.nextZ);C++);for(ie=ee;O>0||ie>0&&P;)0!==O&&(0===ie||!P||E.z<=P.z)?(x=E,E=E.nextZ,O--):(x=P,P=P.nextZ,ie--),D?D.nextZ=x:v=x,x.prevZ=D,D=x;E=P}D.nextZ=null,ee*=2}while(w>1)}(x)}(v,P,x,D);for(var ie,ee,O=v;v.prev!==v.next;)if(ie=v.prev,ee=v.next,D?De(v,P,x,D):tt(v))C.push(ie.i/E),C.push(v.i/E),C.push(ee.i/E),ct(v),v=ee.next,O=ee.next;else if((v=ee)===O){w?1===w?Tt(v=ae(se(v),C,E),C,E,P,x,D,2):2===w&&_e(v,C,E,P,x,D):Tt(se(v),C,E,P,x,D,1);break}}}function tt(v){var C=v.prev,E=v,P=v.next;if(ke(C,E,P)>=0)return!1;for(var x=v.next.next;x!==v.prev;){if(kt(C.x,C.y,E.x,E.y,P.x,P.y,x.x,x.y)&&ke(x.prev,x,x.next)>=0)return!1;x=x.next}return!0}function De(v,C,E,P){var x=v.prev,D=v,w=v.next;if(ke(x,D,w)>=0)return!1;for(var ee=x.x>D.x?x.x>w.x?x.x:w.x:D.x>w.x?D.x:w.x,ve=x.y>D.y?x.y>w.y?x.y:w.y:D.y>w.y?D.y:w.y,V=me(x.x<D.x?x.x<w.x?x.x:w.x:D.x<w.x?D.x:w.x,x.y<D.y?x.y<w.y?x.y:w.y:D.y<w.y?D.y:w.y,C,E,P),fe=me(ee,ve,C,E,P),$=v.prevZ,ue=v.nextZ;$&&$.z>=V&&ue&&ue.z<=fe;){if($!==v.prev&&$!==v.next&&kt(x.x,x.y,D.x,D.y,w.x,w.y,$.x,$.y)&&ke($.prev,$,$.next)>=0||($=$.prevZ,ue!==v.prev&&ue!==v.next&&kt(x.x,x.y,D.x,D.y,w.x,w.y,ue.x,ue.y)&&ke(ue.prev,ue,ue.next)>=0))return!1;ue=ue.nextZ}for(;$&&$.z>=V;){if($!==v.prev&&$!==v.next&&kt(x.x,x.y,D.x,D.y,w.x,w.y,$.x,$.y)&&ke($.prev,$,$.next)>=0)return!1;$=$.prevZ}for(;ue&&ue.z<=fe;){if(ue!==v.prev&&ue!==v.next&&kt(x.x,x.y,D.x,D.y,w.x,w.y,ue.x,ue.y)&&ke(ue.prev,ue,ue.next)>=0)return!1;ue=ue.nextZ}return!0}function ae(v,C,E){var P=v;do{var x=P.prev,D=P.next.next;!dn(x,D)&&bn(x,P,P.next,D)&&I(x,D)&&I(D,x)&&(C.push(x.i/E),C.push(P.i/E),C.push(D.i/E),ct(P),ct(P.next),P=v=D),P=P.next}while(P!==v);return se(P)}function _e(v,C,E,P,x,D){var w=v;do{for(var O=w.next.next;O!==w.prev;){if(w.i!==O.i&&je(w,O)){var ie=R(w,O);return w=se(w,w.next),ie=se(ie,ie.next),Tt(w,C,E,P,x,D),void Tt(ie,C,E,P,x,D)}O=O.next}w=w.next}while(w!==v)}function te(v,C){return v.x-C.x}function re(v,C){var E=function Be(v,C){var w,E=C,P=v.x,x=v.y,D=-1/0;do{if(x<=E.y&&x>=E.next.y&&E.next.y!==E.y){var O=E.x+(x-E.y)*(E.next.x-E.x)/(E.next.y-E.y);if(O<=P&&O>D){if(D=O,O===P){if(x===E.y)return E;if(x===E.next.y)return E.next}w=E.x<E.next.x?E:E.next}}E=E.next}while(E!==C);if(!w)return null;if(P===D)return w;var fe,ie=w,ee=w.x,ve=w.y,V=1/0;E=w;do{P>=E.x&&E.x>=ee&&P!==E.x&&kt(x<ve?P:D,x,ee,ve,x<ve?D:P,x,E.x,E.y)&&(fe=Math.abs(x-E.y)/(P-E.x),I(E,v)&&(fe<V||fe===V&&(E.x>w.x||E.x===w.x&&Ge(w,E)))&&(w=E,V=fe)),E=E.next}while(E!==ie);return w}(v,C);if(!E)return C;var P=R(E,v),x=se(E,E.next);return se(P,P.next),C===E?x:C}function Ge(v,C){return ke(v.prev,v,C.prev)<0&&ke(C.next,v,v.next)<0}function me(v,C,E,P,x){return(v=1431655765&((v=858993459&((v=252645135&((v=16711935&((v=32767*(v-E)*x)|v<<8))|v<<4))|v<<2))|v<<1))|(C=1431655765&((C=858993459&((C=252645135&((C=16711935&((C=32767*(C-P)*x)|C<<8))|C<<4))|C<<2))|C<<1))<<1}function _n(v){var C=v,E=v;do{(C.x<E.x||C.x===E.x&&C.y<E.y)&&(E=C),C=C.next}while(C!==v);return E}function kt(v,C,E,P,x,D,w,O){return(x-w)*(C-O)-(v-w)*(D-O)>=0&&(v-w)*(P-O)-(E-w)*(C-O)>=0&&(E-w)*(D-O)-(x-w)*(P-O)>=0}function je(v,C){return v.next.i!==C.i&&v.prev.i!==C.i&&!function rs(v,C){var E=v;do{if(E.i!==v.i&&E.next.i!==v.i&&E.i!==C.i&&E.next.i!==C.i&&bn(E,E.next,v,C))return!0;E=E.next}while(E!==v);return!1}(v,C)&&(I(v,C)&&I(C,v)&&function Ue(v,C){var E=v,P=!1,x=(v.x+C.x)/2,D=(v.y+C.y)/2;do{E.y>D!=E.next.y>D&&E.next.y!==E.y&&x<(E.next.x-E.x)*(D-E.y)/(E.next.y-E.y)+E.x&&(P=!P),E=E.next}while(E!==v);return P}(v,C)&&(ke(v.prev,v,C.prev)||ke(v,C.prev,C))||dn(v,C)&&ke(v.prev,v,v.next)>0&&ke(C.prev,C,C.next)>0)}function ke(v,C,E){return(C.y-v.y)*(E.x-C.x)-(C.x-v.x)*(E.y-C.y)}function dn(v,C){return v.x===C.x&&v.y===C.y}function bn(v,C,E,P){var x=Tn(ke(v,C,E)),D=Tn(ke(v,C,P)),w=Tn(ke(E,P,v)),O=Tn(ke(E,P,C));return!!(x!==D&&w!==O||0===x&&rn(v,E,C)||0===D&&rn(v,P,C)||0===w&&rn(E,v,P)||0===O&&rn(E,C,P))}function rn(v,C,E){return C.x<=Math.max(v.x,E.x)&&C.x>=Math.min(v.x,E.x)&&C.y<=Math.max(v.y,E.y)&&C.y>=Math.min(v.y,E.y)}function Tn(v){return v>0?1:v<0?-1:0}function I(v,C){return ke(v.prev,v,v.next)<0?ke(v,C,v.next)>=0&&ke(v,v.prev,C)>=0:ke(v,C,v.prev)<0||ke(v,v.next,C)<0}function R(v,C){var E=new Zt(v.i,v.x,v.y),P=new Zt(C.i,C.x,C.y),x=v.next,D=C.prev;return v.next=C,C.prev=v,E.next=x,x.prev=E,P.next=E,E.prev=P,D.next=P,P.prev=D,P}function Ct(v,C,E,P){var x=new Zt(v,C,E);return P?(x.next=P.next,x.prev=P,P.next.prev=x,P.next=x):(x.prev=x,x.next=x),x}function ct(v){v.next.prev=v.prev,v.prev.next=v.next,v.prevZ&&(v.prevZ.nextZ=v.nextZ),v.nextZ&&(v.nextZ.prevZ=v.prevZ)}function Zt(v,C,E){this.i=v,this.x=C,this.y=E,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function vt(v,C,E,P){for(var x=0,D=C,w=E-P;D<E;D+=P)x+=(v[w]-v[D])*(v[D+1]+v[w+1]),w=D;return x}mt.exports=xe,mt.exports.default=xe,xe.deviation=function(v,C,E,P){var x=C&&C.length,w=Math.abs(vt(v,0,x?C[0]*E:v.length,E));if(x)for(var O=0,ie=C.length;O<ie;O++)w-=Math.abs(vt(v,C[O]*E,O<ie-1?C[O+1]*E:v.length,E));var V=0;for(O=0;O<P.length;O+=3){var fe=P[O]*E,$=P[O+1]*E,ue=P[O+2]*E;V+=Math.abs((v[fe]-v[ue])*(v[$+1]-v[fe+1])-(v[fe]-v[$])*(v[ue+1]-v[fe+1]))}return 0===w&&0===V?0:Math.abs((V-w)/w)},xe.flatten=function(v){for(var C=v[0][0].length,E={vertices:[],holes:[],dimensions:C},P=0,x=0;x<v.length;x++){for(var D=0;D<v[x].length;D++)for(var w=0;w<C;w++)E.vertices.push(v[x][D][w]);x>0&&E.holes.push(P+=v[x-1].length)}return E}},5:mt=>{"use strict";var xe=Object.prototype.hasOwnProperty,ne="~";function se(){}function Tt(_e,le,te){this.fn=_e,this.context=le,this.once=te||!1}function tt(_e,le,te,re,Be){if("function"!=typeof te)throw new TypeError("The listener must be a function");var Ge=new Tt(te,re||_e,Be),He=ne?ne+le:le;return _e._events[He]?_e._events[He].fn?_e._events[He]=[_e._events[He],Ge]:_e._events[He].push(Ge):(_e._events[He]=Ge,_e._eventsCount++),_e}function De(_e,le){0==--_e._eventsCount?_e._events=new se:delete _e._events[le]}function ae(){this._events=new se,this._eventsCount=0}Object.create&&(se.prototype=Object.create(null),(new se).__proto__||(ne=!1)),ae.prototype.eventNames=function(){var te,re,le=[];if(0===this._eventsCount)return le;for(re in te=this._events)xe.call(te,re)&&le.push(ne?re.slice(1):re);return Object.getOwnPropertySymbols?le.concat(Object.getOwnPropertySymbols(te)):le},ae.prototype.listeners=function(le){var re=this._events[ne?ne+le:le];if(!re)return[];if(re.fn)return[re.fn];for(var Be=0,Ge=re.length,He=new Array(Ge);Be<Ge;Be++)He[Be]=re[Be].fn;return He},ae.prototype.listenerCount=function(le){var re=this._events[ne?ne+le:le];return re?re.fn?1:re.length:0},ae.prototype.emit=function(le,te,re,Be,Ge,He){var gt=ne?ne+le:le;if(!this._events[gt])return!1;var kt,je,me=this._events[gt],_n=arguments.length;if(me.fn){switch(me.once&&this.removeListener(le,me.fn,void 0,!0),_n){case 1:return me.fn.call(me.context),!0;case 2:return me.fn.call(me.context,te),!0;case 3:return me.fn.call(me.context,te,re),!0;case 4:return me.fn.call(me.context,te,re,Be),!0;case 5:return me.fn.call(me.context,te,re,Be,Ge),!0;case 6:return me.fn.call(me.context,te,re,Be,Ge,He),!0}for(je=1,kt=new Array(_n-1);je<_n;je++)kt[je-1]=arguments[je];me.fn.apply(me.context,kt)}else{var dn,ke=me.length;for(je=0;je<ke;je++)switch(me[je].once&&this.removeListener(le,me[je].fn,void 0,!0),_n){case 1:me[je].fn.call(me[je].context);break;case 2:me[je].fn.call(me[je].context,te);break;case 3:me[je].fn.call(me[je].context,te,re);break;case 4:me[je].fn.call(me[je].context,te,re,Be);break;default:if(!kt)for(dn=1,kt=new Array(_n-1);dn<_n;dn++)kt[dn-1]=arguments[dn];me[je].fn.apply(me[je].context,kt)}}return!0},ae.prototype.on=function(le,te,re){return tt(this,le,te,re,!1)},ae.prototype.once=function(le,te,re){return tt(this,le,te,re,!0)},ae.prototype.removeListener=function(le,te,re,Be){var Ge=ne?ne+le:le;if(!this._events[Ge])return this;if(!te)return De(this,Ge),this;var He=this._events[Ge];if(He.fn)He.fn===te&&(!Be||He.once)&&(!re||He.context===re)&&De(this,Ge);else{for(var gt=0,me=[],_n=He.length;gt<_n;gt++)(He[gt].fn!==te||Be&&!He[gt].once||re&&He[gt].context!==re)&&me.push(He[gt]);me.length?this._events[Ge]=1===me.length?me[0]:me:De(this,Ge)}return this},ae.prototype.removeAllListeners=function(le){var te;return le?this._events[te=ne?ne+le:le]&&De(this,te):(this._events=new se,this._eventsCount=0),this},ae.prototype.off=ae.prototype.removeListener,ae.prototype.addListener=ae.prototype.on,ae.prefixed=ne,ae.EventEmitter=ae,mt.exports=ae},943:mt=>{"use strict";var xe=Object.getOwnPropertySymbols,ne=Object.prototype.hasOwnProperty,se=Object.prototype.propertyIsEnumerable;function Tt(De){if(null==De)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(De)}mt.exports=function tt(){try{if(!Object.assign)return!1;var De=new String("abc");if(De[5]="de","5"===Object.getOwnPropertyNames(De)[0])return!1;for(var ae={},_e=0;_e<10;_e++)ae["_"+String.fromCharCode(_e)]=_e;if("0123456789"!==Object.getOwnPropertyNames(ae).map(function(re){return ae[re]}).join(""))return!1;var te={};return"abcdefghijklmnopqrst".split("").forEach(function(re){te[re]=re}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},te)).join("")}catch(re){return!1}}()?Object.assign:function(De,ae){for(var _e,te,le=Tt(De),re=1;re<arguments.length;re++){for(var Be in _e=Object(arguments[re]))ne.call(_e,Be)&&(le[Be]=_e[Be]);if(xe){te=xe(_e);for(var Ge=0;Ge<te.length;Ge++)se.call(_e,te[Ge])&&(le[te[Ge]]=_e[te[Ge]])}}return le}},516:mt=>{"use strict";function xe(ne,se){return Object.prototype.hasOwnProperty.call(ne,se)}mt.exports=function(ne,se,Tt,tt){Tt=Tt||"=";var De={};if("string"!=typeof ne||0===ne.length)return De;var ae=/\+/g;ne=ne.split(se=se||"&");var _e=1e3;tt&&"number"==typeof tt.maxKeys&&(_e=tt.maxKeys);var le=ne.length;_e>0&&le>_e&&(le=_e);for(var te=0;te<le;++te){var Ge,He,gt,me,re=ne[te].replace(ae,"%20"),Be=re.indexOf(Tt);Be>=0?(Ge=re.substr(0,Be),He=re.substr(Be+1)):(Ge=re,He=""),gt=decodeURIComponent(Ge),me=decodeURIComponent(He),xe(De,gt)?Array.isArray(De[gt])?De[gt].push(me):De[gt]=[De[gt],me]:De[gt]=me}return De}},776:mt=>{"use strict";var xe=function(ne){switch(typeof ne){case"string":return ne;case"boolean":return ne?"true":"false";case"number":return isFinite(ne)?ne:"";default:return""}};mt.exports=function(ne,se,Tt,tt){return se=se||"&",Tt=Tt||"=",null===ne&&(ne=void 0),"object"==typeof ne?Object.keys(ne).map(function(De){var ae=encodeURIComponent(xe(De))+Tt;return Array.isArray(ne[De])?ne[De].map(function(_e){return ae+encodeURIComponent(xe(_e))}).join(se):ae+encodeURIComponent(xe(ne[De]))}).join(se):tt?encodeURIComponent(xe(tt))+Tt+encodeURIComponent(xe(ne)):""}},137:(mt,xe,ne)=>{"use strict";xe.decode=xe.parse=ne(516),xe.encode=xe.stringify=ne(776)},308:function(mt,xe,ne){var se;mt=ne.nmd(mt),function(Tt){"object"==typeof global&&global;var _e,le=2147483647,kt=/^xn--/,je=/[^\x20-\x7E]/,ke=/[\x2E\u3002\uFF0E\uFF61]/g,dn={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},rn=Math.floor,Tn=String.fromCharCode;function I(D){throw RangeError(dn[D])}function Ue(D,w){for(var O=D.length,ie=[];O--;)ie[O]=w(D[O]);return ie}function R(D,w){var O=D.split("@"),ie="";return O.length>1&&(ie=O[0]+"@",D=O[1]),ie+Ue((D=D.replace(ke,".")).split("."),w).join(".")}function Ct(D){for(var ee,ve,w=[],O=0,ie=D.length;O<ie;)(ee=D.charCodeAt(O++))>=55296&&ee<=56319&&O<ie?56320==(64512&(ve=D.charCodeAt(O++)))?w.push(((1023&ee)<<10)+(1023&ve)+65536):(w.push(ee),O--):w.push(ee);return w}function ct(D){return Ue(D,function(w){var O="";return w>65535&&(O+=Tn((w-=65536)>>>10&1023|55296),w=56320|1023&w),O+Tn(w)}).join("")}function Zt(D){return D-48<10?D-22:D-65<26?D-65:D-97<26?D-97:36}function vt(D,w){return D+22+75*(D<26)-((0!=w)<<5)}function v(D,w,O){var ie=0;for(D=O?rn(D/700):D>>1,D+=rn(D/w);D>455;ie+=36)D=rn(D/35);return rn(ie+36*D/(D+38))}function C(D){var ie,fe,$,ue,Ut,Ot,Vt,Pt,Dn,sr,w=[],O=D.length,ee=0,ve=128,V=72;for((fe=D.lastIndexOf("-"))<0&&(fe=0),$=0;$<fe;++$)D.charCodeAt($)>=128&&I("not-basic"),w.push(D.charCodeAt($));for(ue=fe>0?fe+1:0;ue<O;){for(Ut=ee,Ot=1,Vt=36;ue>=O&&I("invalid-input"),((Pt=Zt(D.charCodeAt(ue++)))>=36||Pt>rn((le-ee)/Ot))&&I("overflow"),ee+=Pt*Ot,!(Pt<(Dn=Vt<=V?1:Vt>=V+26?26:Vt-V));Vt+=36)Ot>rn(le/(sr=36-Dn))&&I("overflow"),Ot*=sr;V=v(ee-Ut,ie=w.length+1,0==Ut),rn(ee/ie)>le-ve&&I("overflow"),ve+=rn(ee/ie),ee%=ie,w.splice(ee++,0,ve)}return ct(w)}function E(D){var w,O,ie,ee,ve,V,fe,$,ue,Ut,Ot,Pt,Dn,sr,ji,Vt=[];for(Pt=(D=Ct(D)).length,w=128,O=0,ve=72,V=0;V<Pt;++V)(Ot=D[V])<128&&Vt.push(Tn(Ot));for(ie=ee=Vt.length,ee&&Vt.push("-");ie<Pt;){for(fe=le,V=0;V<Pt;++V)(Ot=D[V])>=w&&Ot<fe&&(fe=Ot);for(fe-w>rn((le-O)/(Dn=ie+1))&&I("overflow"),O+=(fe-w)*Dn,w=fe,V=0;V<Pt;++V)if((Ot=D[V])<w&&++O>le&&I("overflow"),Ot==w){for($=O,ue=36;!($<(Ut=ue<=ve?1:ue>=ve+26?26:ue-ve));ue+=36)Vt.push(Tn(vt(Ut+(ji=$-Ut)%(sr=36-Ut),0))),$=rn(ji/sr);Vt.push(Tn(vt($,0))),ve=v(O,Dn,ie==ee),O=0,++ie}++O,++w}return Vt.join("")}_e={version:"1.3.2",ucs2:{decode:Ct,encode:ct},decode:C,encode:E,toASCII:function x(D){return R(D,function(w){return je.test(w)?"xn--"+E(w):w})},toUnicode:function P(D){return R(D,function(w){return kt.test(w)?C(w.slice(4).toLowerCase()):w})}},void 0!==(se=function(){return _e}.call(xe,ne,xe,mt))&&(mt.exports=se)}()},762:(mt,xe,ne)=>{"use strict";var Tt=ne(308),tt=ne(796);function De(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}xe.Qc=bn,xe.DB=function Tn(I,Ue){return bn(I,!1,!0).resolve(Ue)},xe.WU=function rn(I){return tt.isString(I)&&(I=bn(I)),I instanceof De?I.format():De.prototype.format.call(I)};var ae=/^([a-z0-9.+-]+:)/i,_e=/:[0-9]*$/,le=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,re=["{","}","|","\\","^","`"].concat(["<",">",'"',"`"," ","\r","\n","\t"]),Be=["'"].concat(re),Ge=["%","/","?",";","#"].concat(Be),He=["/","?","#"],me=/^[+a-z0-9A-Z_-]{0,63}$/,_n=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,kt={javascript:!0,"javascript:":!0},je={javascript:!0,"javascript:":!0},ke={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},dn=ne(137);function bn(I,Ue,R){if(I&&tt.isObject(I)&&I instanceof De)return I;var Ct=new De;return Ct.parse(I,Ue,R),Ct}De.prototype.parse=function(I,Ue,R){if(!tt.isString(I))throw new TypeError("Parameter 'url' must be a string, not "+typeof I);var Ct=I.indexOf("?"),ct=-1!==Ct&&Ct<I.indexOf("#")?"?":"#",Zt=I.split(ct);Zt[0]=Zt[0].replace(/\\/g,"/");var v=I=Zt.join(ct);if(v=v.trim(),!R&&1===I.split("#").length){var C=le.exec(v);if(C)return this.path=v,this.href=v,this.pathname=C[1],C[2]?(this.search=C[2],this.query=Ue?dn.parse(this.search.substr(1)):this.search.substr(1)):Ue&&(this.search="",this.query={}),this}var E=ae.exec(v);if(E){var P=(E=E[0]).toLowerCase();this.protocol=P,v=v.substr(E.length)}if(R||E||v.match(/^\/\/[^@\/]+@[^@\/]+/)){var x="//"===v.substr(0,2);x&&(!E||!je[E])&&(v=v.substr(2),this.slashes=!0)}if(!je[E]&&(x||E&&!ke[E])){for(var D=-1,w=0;w<He.length;w++)-1!==(O=v.indexOf(He[w]))&&(-1===D||O<D)&&(D=O);var ie,ee;for(-1!==(ee=-1===D?v.lastIndexOf("@"):v.lastIndexOf("@",D))&&(ie=v.slice(0,ee),v=v.slice(ee+1),this.auth=decodeURIComponent(ie)),D=-1,w=0;w<Ge.length;w++){var O;-1!==(O=v.indexOf(Ge[w]))&&(-1===D||O<D)&&(D=O)}-1===D&&(D=v.length),this.host=v.slice(0,D),v=v.slice(D),this.parseHost(),this.hostname=this.hostname||"";var ve="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!ve)for(var V=this.hostname.split(/\./),fe=(w=0,V.length);w<fe;w++){var $=V[w];if($&&!$.match(me)){for(var ue="",Ut=0,Ot=$.length;Ut<Ot;Ut++)$.charCodeAt(Ut)>127?ue+="x":ue+=$[Ut];if(!ue.match(me)){var Vt=V.slice(0,w),Pt=V.slice(w+1),Dn=$.match(_n);Dn&&(Vt.push(Dn[1]),Pt.unshift(Dn[2])),Pt.length&&(v="/"+Pt.join(".")+v),this.hostname=Vt.join(".");break}}}this.hostname=this.hostname.length>255?"":this.hostname.toLowerCase(),ve||(this.hostname=Tt.toASCII(this.hostname)),this.host=(this.hostname||"")+(this.port?":"+this.port:""),this.href+=this.host,ve&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==v[0]&&(v="/"+v))}if(!kt[P])for(w=0,fe=Be.length;w<fe;w++){var is=Be[w];if(-1!==v.indexOf(is)){var os=encodeURIComponent(is);os===is&&(os=escape(is)),v=v.split(is).join(os)}}var cu=v.indexOf("#");-1!==cu&&(this.hash=v.substr(cu),v=v.slice(0,cu));var go=v.indexOf("?");return-1!==go?(this.search=v.substr(go),this.query=v.substr(go+1),Ue&&(this.query=dn.parse(this.query)),v=v.slice(0,go)):Ue&&(this.search="",this.query={}),v&&(this.pathname=v),ke[P]&&this.hostname&&!this.pathname&&(this.pathname="/"),(this.pathname||this.search)&&(this.path=(this.pathname||"")+(this.search||"")),this.href=this.format(),this},De.prototype.format=function(){var I=this.auth||"";I&&(I=(I=encodeURIComponent(I)).replace(/%3A/i,":"),I+="@");var Ue=this.protocol||"",R=this.pathname||"",Ct=this.hash||"",ct=!1,Zt="";this.host?ct=I+this.host:this.hostname&&(ct=I+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(ct+=":"+this.port)),this.query&&tt.isObject(this.query)&&Object.keys(this.query).length&&(Zt=dn.stringify(this.query));var vt=this.search||Zt&&"?"+Zt||"";return Ue&&":"!==Ue.substr(-1)&&(Ue+=":"),this.slashes||(!Ue||ke[Ue])&&!1!==ct?(ct="//"+(ct||""),R&&"/"!==R.charAt(0)&&(R="/"+R)):ct||(ct=""),Ct&&"#"!==Ct.charAt(0)&&(Ct="#"+Ct),vt&&"?"!==vt.charAt(0)&&(vt="?"+vt),Ue+ct+(R=R.replace(/[?#]/g,function(v){return encodeURIComponent(v)}))+(vt=vt.replace("#","%23"))+Ct},De.prototype.resolve=function(I){return this.resolveObject(bn(I,!1,!0)).format()},De.prototype.resolveObject=function(I){if(tt.isString(I)){var Ue=new De;Ue.parse(I,!1,!0),I=Ue}for(var R=new De,Ct=Object.keys(this),ct=0;ct<Ct.length;ct++){var Zt=Ct[ct];R[Zt]=this[Zt]}if(R.hash=I.hash,""===I.href)return R.href=R.format(),R;if(I.slashes&&!I.protocol){for(var vt=Object.keys(I),v=0;v<vt.length;v++){var C=vt[v];"protocol"!==C&&(R[C]=I[C])}return ke[R.protocol]&&R.hostname&&!R.pathname&&(R.path=R.pathname="/"),R.href=R.format(),R}if(I.protocol&&I.protocol!==R.protocol){if(!ke[I.protocol]){for(var E=Object.keys(I),P=0;P<E.length;P++){var x=E[P];R[x]=I[x]}return R.href=R.format(),R}if(R.protocol=I.protocol,I.host||je[I.protocol])R.pathname=I.pathname;else{for(var fe=(I.pathname||"").split("/");fe.length&&!(I.host=fe.shift()););I.host||(I.host=""),I.hostname||(I.hostname=""),""!==fe[0]&&fe.unshift(""),fe.length<2&&fe.unshift(""),R.pathname=fe.join("/")}return R.search=I.search,R.query=I.query,R.host=I.host||"",R.auth=I.auth,R.hostname=I.hostname||I.host,R.port=I.port,(R.pathname||R.search)&&(R.path=(R.pathname||"")+(R.search||"")),R.slashes=R.slashes||I.slashes,R.href=R.format(),R}var O=R.pathname&&"/"===R.pathname.charAt(0),ie=I.host||I.pathname&&"/"===I.pathname.charAt(0),ee=ie||O||R.host&&I.pathname,ve=ee,V=R.pathname&&R.pathname.split("/")||[],$=(fe=I.pathname&&I.pathname.split("/")||[],R.protocol&&!ke[R.protocol]);if($&&(R.hostname="",R.port=null,R.host&&(""===V[0]?V[0]=R.host:V.unshift(R.host)),R.host="",I.protocol&&(I.hostname=null,I.port=null,I.host&&(""===fe[0]?fe[0]=I.host:fe.unshift(I.host)),I.host=null),ee=ee&&(""===fe[0]||""===V[0])),ie)R.host=I.host||""===I.host?I.host:R.host,R.hostname=I.hostname||""===I.hostname?I.hostname:R.hostname,R.search=I.search,R.query=I.query,V=fe;else if(fe.length)V||(V=[]),V.pop(),V=V.concat(fe),R.search=I.search,R.query=I.query;else if(!tt.isNullOrUndefined(I.search))return $&&(R.hostname=R.host=V.shift(),(ue=!!(R.host&&R.host.indexOf("@")>0)&&R.host.split("@"))&&(R.auth=ue.shift(),R.host=R.hostname=ue.shift())),R.search=I.search,R.query=I.query,(!tt.isNull(R.pathname)||!tt.isNull(R.search))&&(R.path=(R.pathname?R.pathname:"")+(R.search?R.search:"")),R.href=R.format(),R;if(!V.length)return R.pathname=null,R.path=R.search?"/"+R.search:null,R.href=R.format(),R;for(var Ut=V.slice(-1)[0],Ot=(R.host||I.host||V.length>1)&&("."===Ut||".."===Ut)||""===Ut,Vt=0,Pt=V.length;Pt>=0;Pt--)"."===(Ut=V[Pt])?V.splice(Pt,1):".."===Ut?(V.splice(Pt,1),Vt++):Vt&&(V.splice(Pt,1),Vt--);if(!ee&&!ve)for(;Vt--;Vt)V.unshift("..");ee&&""!==V[0]&&(!V[0]||"/"!==V[0].charAt(0))&&V.unshift(""),Ot&&"/"!==V.join("/").substr(-1)&&V.push("");var ue,Dn=""===V[0]||V[0]&&"/"===V[0].charAt(0);return $&&(R.hostname=R.host=Dn?"":V.length?V.shift():"",(ue=!!(R.host&&R.host.indexOf("@")>0)&&R.host.split("@"))&&(R.auth=ue.shift(),R.host=R.hostname=ue.shift())),(ee=ee||R.host&&V.length)&&!Dn&&V.unshift(""),V.length?R.pathname=V.join("/"):(R.pathname=null,R.path=null),(!tt.isNull(R.pathname)||!tt.isNull(R.search))&&(R.path=(R.pathname?R.pathname:"")+(R.search?R.search:"")),R.auth=I.auth||R.auth,R.slashes=R.slashes||I.slashes,R.href=R.format(),R},De.prototype.parseHost=function(){var I=this.host,Ue=_e.exec(I);Ue&&(":"!==(Ue=Ue[0])&&(this.port=Ue.substr(1)),I=I.substr(0,I.length-Ue.length)),I&&(this.hostname=I)}},796:mt=>{"use strict";mt.exports={isString:function(xe){return"string"==typeof xe},isObject:function(xe){return"object"==typeof xe&&null!==xe},isNull:function(xe){return null===xe},isNullOrUndefined:function(xe){return null==xe}}}},mt=>{mt(mt.s=659)}]);